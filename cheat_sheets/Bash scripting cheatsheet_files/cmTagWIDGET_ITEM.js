(()=>{var e,t,i={56:(e,t,i)=>{"use strict";e.exports=function(e){var t=i.nc;t&&e.setAttribute("nonce",t)}},72:e=>{"use strict";var t=[];function i(e){for(var i=-1,n=0;n<t.length;n++)if(t[n].identifier===e){i=n;break}return i}function n(e,n){for(var o={},a=[],r=0;r<e.length;r++){var l=e[r],d=n.base?l[0]+n.base:l[0],c=o[d]||0,h="".concat(d," ").concat(c);o[d]=c+1;var m=i(h),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==m)t[m].references++,t[m].updater(p);else{var u=s(p,n);n.byIndex=r,t.splice(r,0,{identifier:h,updater:u,references:1})}a.push(h)}return a}function s(e,t){var i=t.domAPI(t);i.update(e);return function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;i.update(e=t)}else i.remove()}}e.exports=function(e,s){var o=n(e=e||[],s=s||{});return function(e){e=e||[];for(var a=0;a<o.length;a++){var r=i(o[a]);t[r].references--}for(var l=n(e,s),d=0;d<o.length;d++){var c=i(o[d]);0===t[c].references&&(t[c].updater(),t.splice(c,1))}o=l}}},113:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},131:(e,t,i)=>{"use strict";i.d(t,{A:()=>o});var n=i(314),s=i.n(n)()((function(e){return e[1]}));s.push([e.id,":root {\n  --cm-video-brand-primary: var(--yb-grape-jelly, #7e1fff);\n  --cm-video-brand-secondary: var(--yb-sky, #2f42d4);\n  --cm-video-brand-gradient: linear-gradient(93.29deg, var(--cm-video-brand-primary) -0.72%, var(--cm-video-brand-secondary) 101.96%);\n  --cm-video-text-primary: var(--yb-text-primary, #1d2228);\n  --cm-video-text-secondary: var(--yb-text-secondary, #6e7780);\n  --cm-video-text-on-dark: var(--yb-white, #ffffff);\n  --cm-video-text-on-brand: var(--yb-white, #ffffff);\n  --cm-video-bg-primary: var(--yb-background-color, #ffffff);\n  --cm-video-bg-secondary: var(--yb-l2-background-color, #f5f8fa);\n  --cm-video-bg-card: var(--yb-background-color, #ffffff);\n  --cm-video-bg-overlay: rgba(0, 0, 0, 0.4);\n  --cm-video-bg-hover: var(--yb-selected-item-background, #f5f8fa);\n  --cm-video-border-light: var(--yb-dirty-seagull, #e0e4e9);\n  --cm-video-border-accent: var(--cm-video-brand-primary);\n  --cm-video-border-on-dark: var(--yb-white, #ffffff);\n  --cm-video-shadow-light: var(--yb-elevation3-box-shadow, 0 4px 8px 0 rgba(0, 0, 0, 0.1), 0 0 1px 0 rgba(0, 0, 0, 0.1));\n  --cm-video-shadow-elevated: var(--yb-elevation4-box-shadow, 0 4px 16px 0 rgba(0, 0, 0, 0.2), 0 0 2px 0 rgba(0, 0, 0, 0.05));\n  --cm-video-focus-accent: var(--yb-tab-focus-accent, rgba(126, 31, 255, 0.5));\n  --cm-video-hover-overlay: rgba(255, 255, 255, 0.1);\n  --cm-video-controls-bg: var(--cm-video-brand-gradient, linear-gradient(93.29deg, #7e1fff -0.72%, #2f42d4 101.96%));\n  --cm-video-controls-text: var(--cm-video-text-on-brand, #ffffff);\n  --cm-video-controls-progress-height: 8px;\n  --cm-video-repeat-bg: var(--cm-video-brand-gradient, linear-gradient(93.29deg, #7e1fff -0.72%, #2f42d4 101.96%));\n  --cm-video-repeat-text: var(--cm-video-text-on-brand, #ffffff);\n  --cm-video-repeat-border: var(--cm-video-border-on-dark, #ffffff);\n  --cm-video-repeat-border-radius: 11px;\n  --cm-video-label-bg: var(--cm-video-bg-card, #ffffff);\n  --cm-video-label-shadow: var(--cm-video-shadow-light, 0 4px 8px 0 rgba(0, 0, 0, 0.1), 0 0 1px 0 rgba(0, 0, 0, 0.1));\n  --cm-video-label-border-radius: 8px;\n  --cm-video-label-padding: 8px;\n  --cm-video-label-margin: 0 17px;\n}\nhtml[data-color-theme-enabled][data-color-scheme='dark'] {\n  --cm-video-bg-overlay: rgba(16, 21, 24, 0.6);\n  --cm-video-border-on-dark: var(--yb-gray-hair, #f0f3f5);\n}\nhtml[data-color-theme-enabled][data-color-scheme='transparent'] {\n  --cm-video-bg-overlay: rgba(16, 21, 24, 0.8);\n  --cm-video-bg-card: var(--yb-transparent-popover-background, rgba(16, 21, 24, 0.8));\n  --cm-video-shadow-light: var(--yb-transparent-popover-box-shadow, 0 4px 8px 0 rgba(0, 0, 0, 0.1), 0 0 1px 0 rgba(0, 0, 0, 0.1));\n}\n@media (prefers-color-scheme: dark) {\n  html[data-color-theme-enabled] {\n    --cm-video-bg-overlay: rgba(16, 21, 24, 0.6);\n    --cm-video-border-on-dark: var(--yb-gray-hair, #f0f3f5);\n  }\n}\n[data-cm-theme='old'] {\n  /* SlideIn Top */\n  /* Integrated Widget */\n  /* //Feed Manager */\n}\n[data-cm-theme='old'] ._cm-div {\n  height: 0px;\n  transition: height 1s;\n  height: auto !important;\n}\n[data-cm-theme='old'] #_cm-video-unit,\n[data-cm-theme='old'] #_cm-video-unit div {\n  margin: auto;\n  padding: 0px 0px 0px 0px;\n  border: 0;\n  font-size: 100%;\n  vertical-align: baseline;\n  line-height: 1;\n  font-family: arial;\n}\n[data-cm-theme='old'] #_cm-video-unit._cm-inline {\n  width: 100% !important;\n  height: 0;\n  overflow: hidden !important;\n  /* Set our transitions up. */\n  -webkit-transition: max-height 1s;\n  -moz-transition: max-height 1s;\n  transition: height 1s;\n  float: none !important;\n  clear: both !important;\n  margin: 0px 0px 0px 0px !important;\n  padding: 0px 0px 0px 0px !important;\n}\n[data-cm-theme='old'] #_cm-video-unit._cm-feed-manager {\n  width: 100% !important;\n  height: 0;\n  overflow: hidden !important;\n  position: relative;\n  -webkit-transition: max-height 1s;\n  -moz-transition: max-height 1s;\n  float: none !important;\n  clear: both !important;\n  margin: 0px 0px 0px 0px !important;\n  padding: 0px 0px 0px 0px !important;\n}\n[data-cm-theme='old'] #_cm-video-unit._cm-feed-manager ._cm-feed-manager-video-placeHolder {\n  width: 100%;\n}\n[data-cm-theme='old'] #_cm-video-unit._cm-inline ._cm-inline-video {\n  position: relative;\n  float: none;\n  clear: both;\n  margin: 0px 0px 0px 0px;\n  padding: 0px 0px 0px 0px;\n  height: 100%;\n  width: auto;\n}\n[data-cm-theme='old'] #_cm-video-unit._cm-inline ._cm-ad-title {\n  text-align: center;\n  font-family: arial;\n  font-size: 10px;\n  font-weight: bold;\n  padding: 2px 0 !important;\n  background-color: white;\n  color: #ababab;\n  border: none;\n  float: none;\n  width: 100%;\n}\n[data-cm-theme='old'] .mid-article-as-feed {\n  height: 100% !important;\n}\n[data-cm-theme='old'] .mid-article-as-feed + .tbl-feed-card {\n  position: absolute;\n  top: 0;\n  z-index: -1;\n  opacity: 0;\n}\n[data-cm-theme='old'] [data-placement-name='Reco Reel On Demand Outstream'] .reco-reel-above-feed-hide,\n[data-cm-theme='old'] [data-placement-name='Reco Reel On Demand Instream'] .reco-reel-above-feed-hide,\n[data-cm-theme='old'] [data-placement-name='Reco Reel Instream'] .reco-reel-above-feed-hide {\n  visibility: hidden;\n  position: fixed;\n  overflow: hidden;\n  z-index: -1;\n}\n[data-cm-theme='old'] [data-parent-placement-name='Below Article Thumbnails -March 2017'].reco-reel-above-feed-style,\n[data-cm-theme='old'] [data-parent-placement-name='Mobile Article Thumbnails'].reco-reel-above-feed-style,\n[data-cm-theme='old'] [data-parent-placement-name='Below Article Thumbnails 2nd'].reco-reel-above-feed-style,\n[data-cm-theme='old'] [data-parent-placement-name='Below Article Thumbnails'].reco-reel-above-feed-style {\n  display: flex;\n  flex-direction: column;\n  flex-wrap: wrap;\n  flex-basis: 100%;\n}\n[data-cm-theme='old'] [data-parent-placement-name='Below Article Thumbnails -March 2017'].reco-reel-above-feed-style [data-placement-name='Reco Reel On Demand Outstream'],\n[data-cm-theme='old'] [data-parent-placement-name='Mobile Article Thumbnails'].reco-reel-above-feed-style [data-placement-name='Reco Reel On Demand Outstream'],\n[data-cm-theme='old'] [data-parent-placement-name='Below Article Thumbnails 2nd'].reco-reel-above-feed-style [data-placement-name='Reco Reel On Demand Outstream'],\n[data-cm-theme='old'] [data-parent-placement-name='Below Article Thumbnails'].reco-reel-above-feed-style [data-placement-name='Reco Reel On Demand Outstream'],\n[data-cm-theme='old'] [data-parent-placement-name='Below Article Thumbnails -March 2017'].reco-reel-above-feed-style [data-placement-name='Reco Reel On Demand Instream'],\n[data-cm-theme='old'] [data-parent-placement-name='Mobile Article Thumbnails'].reco-reel-above-feed-style [data-placement-name='Reco Reel On Demand Instream'],\n[data-cm-theme='old'] [data-parent-placement-name='Below Article Thumbnails 2nd'].reco-reel-above-feed-style [data-placement-name='Reco Reel On Demand Instream'],\n[data-cm-theme='old'] [data-parent-placement-name='Below Article Thumbnails'].reco-reel-above-feed-style [data-placement-name='Reco Reel On Demand Instream'],\n[data-cm-theme='old'] [data-parent-placement-name='Below Article Thumbnails -March 2017'].reco-reel-above-feed-style [data-placement-name='Reco Reel Instream'],\n[data-cm-theme='old'] [data-parent-placement-name='Mobile Article Thumbnails'].reco-reel-above-feed-style [data-placement-name='Reco Reel Instream'],\n[data-cm-theme='old'] [data-parent-placement-name='Below Article Thumbnails 2nd'].reco-reel-above-feed-style [data-placement-name='Reco Reel Instream'],\n[data-cm-theme='old'] [data-parent-placement-name='Below Article Thumbnails'].reco-reel-above-feed-style [data-placement-name='Reco Reel Instream'] {\n  order: -1;\n}\n[data-cm-theme='old'] #_cm-css-reset #_cm-close-area._cm-close-area {\n  height: 27px !important;\n  width: 30px !important;\n  background: rgba(255, 255, 255, 0) !important;\n  position: absolute !important;\n  z-index: 2147483647 !important;\n  cursor: pointer !important;\n  padding-left: 6px !important;\n  box-sizing: border-box !important;\n  top: 12px !important;\n  right: 10px !important;\n  pointer-events: auto;\n}\n[data-cm-theme='old'] #_cm-css-reset #_cm-close-area._cm-close-area svg {\n  width: 16px !important;\n  height: 16px !important;\n  box-sizing: content-box !important;\n  -webkit-box-sizing: content-box !important;\n  border: 1px solid #e3e6f2 !important;\n  border-radius: 15% !important;\n  padding: 2px !important;\n}\n[data-cm-theme='old'] #_cm-css-reset #_cm-close-area._cm-close-area svg:active {\n  opacity: 0.3 !important;\n  background-color: black !important;\n}\n@media screen and (max-width: 700px) {\n  [data-cm-theme='old'] #_cm-css-reset #_cm-close-area._cm-close-area {\n    height: 40px !important;\n    width: 40px !important;\n    top: 3px !important;\n    right: 3px !important;\n  }\n  [data-cm-theme='old'] #_cm-css-reset #_cm-close-area._cm-close-area svg {\n    margin: 10px 10px 0 0 !important;\n  }\n}\n[data-cm-theme='old'] ._cm-os-slider {\n  margin: 0px 0px 0px 0px !important;\n  padding: 0px 0px 0px 0px !important;\n  z-index: 2147483647 !important;\n  transition: right 1s,\n            left 1s !important;\n  position: fixed !important;\n  overflow: hidden !important;\n  background-color: black;\n}\n[data-cm-theme='old'] ._cm-os-slider-unit {\n  margin: 0px 0px 0px 0px !important;\n  padding: 0px 0px 0px 0px !important;\n  z-index: 2147483647 !important;\n  position: fixed !important;\n  overflow: hidden !important;\n}\n[data-cm-theme='old'] ._cm-os-slider._cm-slider-top,\n[data-cm-theme='old'] ._cm-os-slider-unit._cm-slider-top {\n  top: 0 !important;\n  bottom: auto !important;\n}\n[data-cm-theme='old'] ._cm-os-slider._cm-slider-middle,\n[data-cm-theme='old'] ._cm-os-slider-unit._cm-slider-middle {\n  top: 0 !important;\n  bottom: 0 !important;\n  margin: auto !important;\n}\n[data-cm-theme='old'] ._cm-os-slider._cm-slider-bottom,\n[data-cm-theme='old'] ._cm-os-slider-unit._cm-slider-bottom {\n  top: auto !important;\n  bottom: 0 !important;\n}\n[data-cm-theme='old'] ._cm-os-slider._cm-slider-left,\n[data-cm-theme='old'] ._cm-os-slider-unit._cm-slider-left {\n  left: 0 !important;\n  right: auto !important;\n}\n[data-cm-theme='old'] ._cm-os-slider._cm-slider-right,\n[data-cm-theme='old'] ._cm-os-slider-unit._cm-slider-right {\n  left: auto !important;\n  right: 0 !important;\n}\n[data-cm-theme='old'] ._cm-os-slider._cm-slider-left ._cm-close,\n[data-cm-theme='old'] ._cm-os-slider-unit._cm-slider-left._cm-close {\n  right: auto !important;\n  left: 3px !important;\n}\n[data-cm-theme='old'] #_cm-css-reset._cm-video {\n  height: 0px;\n  margin: 0px 0px 0px 0px;\n  padding: 0px 0px 0px 0px;\n  position: absolute;\n  top: 0;\n  left: 0;\n  overflow: hidden;\n}\n[data-cm-theme='old'] #_cm-css-reset._cm-video-with-slider {\n  background: transparent;\n}\n[data-cm-theme='old'] #_cm-css-reset ._cm-ad-choice {\n  z-index: 2147483647 !important;\n  position: absolute;\n  top: 10px;\n  left: 13px;\n  pointer-events: auto;\n}\n@media screen and (max-width: 700px) {\n  [data-cm-theme='old'] #_cm-css-reset ._cm-ad-choice {\n    top: 9px;\n    left: 10px;\n  }\n}\n[data-cm-theme='old'] #_cm-css-reset ._cm-ad-choice-text {\n  vertical-align: middle !important;\n  display: inline-block;\n  color: white;\n  text-decoration: none;\n  font-size: 13px !important;\n  font-weight: bold;\n  font-family: Arial, Helvetica, 'sans-serif';\n}\n[data-cm-theme='old'] #_cm-css-reset ._cm-ad-choice-text:hover {\n  text-decoration: underline;\n}\n[data-cm-theme='old'] #_cm-css-reset ._cm-ad-choice-logo {\n  display: inline-block;\n  margin-top: 2px;\n  width: 12px;\n  height: 14px;\n  background-size: contain !important;\n  vertical-align: middle !important;\n  text-decoration: none;\n}\n[data-cm-theme='old'] ._cm-ad-title,\n[data-cm-theme='old'] #_cm-video-unit ._cm-ad-title,\n[data-cm-theme='old'] ._cm-native-ad-bottom ._cm-ad-choice {\n  text-align: right !important;\n  direction: ltr !important;\n}\n[data-cm-theme='old'] #_cm-video-unit ._cm-ad-title ._cm-ad-choice,\n[data-cm-theme='old'] ._cm-ad-title ._cm-ad-choice,\n[data-cm-theme='old'] ._cm-native-ad-bottom ._cm-ad-choice {\n  z-index: auto;\n  position: relative;\n  top: auto;\n  left: auto;\n  right: auto;\n  bottom: auto;\n  padding: 3px;\n  text-align: inherit;\n}\n[data-cm-theme='old'] #_cm-video-unit ._cm-ad-title ._cm-ad-choice ._cm-ad-choice-text,\n[data-cm-theme='old'] ._cm-ad-title ._cm-ad-choice ._cm-ad-choice-text,\n[data-cm-theme='old'] ._cm-native-ad-bottom ._cm-ad-choice ._cm-ad-choice-text {\n  vertical-align: middle !important;\n  display: inline-block;\n  color: black;\n  text-decoration: none;\n  font-size: 11px !important;\n  font-weight: normal;\n  font-family: Arial, Helvetica, 'sans-serif';\n}\n[data-cm-theme='old'] #_cm-video-unit ._cm-ad-title ._cm-ad-choice ._cm-ad-choice-text:hover,\n[data-cm-theme='old'] ._cm-ad-title ._cm-ad-choice ._cm-ad-choice-text:hover,\n[data-cm-theme='old'] ._cm-native-ad-bottom ._cm-ad-choice ._cm-ad-choice-text:hover {\n  text-decoration: underline;\n}\n[data-cm-theme='old'] #_cm-video-unit ._cm-ad-title ._cm-ad-choice ._cm-ad-choice-logo,\n[data-cm-theme='old'] ._cm-ad-title ._cm-ad-choice ._cm-ad-choice-logo,\n[data-cm-theme='old'] ._cm-native-ad-bottom ._cm-ad-choice ._cm-ad-choice-logo {\n  display: inline-block;\n  margin-top: 2px;\n  width: 12px;\n  height: 14px;\n  background-size: contain !important;\n  vertical-align: middle !important;\n  text-decoration: none;\n}\n[data-cm-theme='old'] #_cm-css-reset,\n[data-cm-theme='old'] #_cm-css-reset div,\n[data-cm-theme='old'] #_cm-css-reset ._cm-div {\n  margin-top: 0;\n}\n[data-cm-theme='old'] .none-transition {\n  transition: none !important;\n  -webkit-transition: none !important;\n  -moz-transition: none !important;\n}\n[data-cm-theme='old'] #_cm-css-reset._cm-single-inline {\n  z-index: 0;\n  width: 100%;\n  height: auto;\n  overflow: hidden !important;\n  -webkit-transition: height 1s;\n  -moz-transition: height 1s;\n  transition: height 1s;\n  float: none !important;\n  clear: both !important;\n  margin: 0px auto 0px auto !important;\n  padding: 0px 0px 0px 0px !important;\n  background-color: black;\n  position: relative;\n}\n[data-cm-theme='old'] #_cm-css-reset._cm-single-inline #_cm-close-area {\n  top: 13px !important;\n}\n@media screen and (max-width: 700px) {\n  [data-cm-theme='old'] #_cm-css-reset._cm-single-inline #_cm-close-area {\n    top: 0 !important;\n  }\n}\n[data-cm-theme='old'] #_cm-css-reset._cm-single-inline ._cm-content-video {\n  position: relative;\n}\n[data-cm-theme='old'] ._cm-single-inline ._cm-inline-video {\n  position: relative;\n}\n[data-cm-theme='old'] .inlineSlideTop {\n  -webkit-transition: height 1s;\n  -moz-transition: height 1s;\n  transition: height 1s;\n}\n[data-cm-theme='old'] #_cm-css-reset ._cm-video-ad {\n  overflow: hidden;\n}\n[data-cm-theme='old'] #_cm-css-reset ._cm-repeat-buttons-wrapper ._cm-repeat-button-hover,\n[data-cm-theme='old'] #_cm-css-reset ._cm-learn-more-buttons-wrapper ._cm-learn-more-button-hover {\n  display: none;\n}\n[data-cm-theme='old'] #_cm-css-reset ._cm-repeat-buttons-wrapper:hover ._cm-repeat-button,\n[data-cm-theme='old'] #_cm-css-reset ._cm-repeat-buttons-wrapper:active ._cm-repeat-button,\n[data-cm-theme='old'] #_cm-css-reset ._cm-learn-more-buttons-wrapper:hover ._cm-learn-more-button {\n  display: none;\n}\n[data-cm-theme='old'] #_cm-css-reset ._cm-repeat-buttons-wrapper:hover ._cm-repeat-button-hover,\n[data-cm-theme='old'] #_cm-css-reset ._cm-repeat-buttons-wrapper:active ._cm-repeat-button-hover,\n[data-cm-theme='old'] #_cm-css-reset ._cm-learn-more-buttons-wrapper:hover ._cm-learn-more-button-hover {\n  display: block;\n  width: 100%;\n  margin-bottom: 0;\n}\n[data-cm-theme='old'] ._cm-inline-repeat {\n  position: absolute;\n  bottom: 0;\n}\n[data-cm-theme='old'] #_cm-css-reset ._cm-repeat-div {\n  height: 100%;\n  width: 100%;\n  z-index: 100000;\n  display: flex;\n  align-items: center;\n  position: absolute;\n}\n[data-cm-theme='old'] #_cm-css-reset ._cm-repeat-div {\n  background-size: 100% 100%;\n  cursor: pointer;\n  pointer-events: all;\n}\n[data-cm-theme='old'] #_cm-css-reset ._cm-repeat-view-wrapper {\n  z-index: 2147483647;\n  padding: 0;\n  margin: auto;\n  display: block;\n  width: 23%;\n  line-height: 0;\n}\n[data-cm-theme='old'] #_cm-css-reset ._cm-repeat-view-wrapper._cm-repeat-view-wrapper-detached {\n  width: 30%;\n}\n[data-cm-theme='old'] #_cm-css-reset #_cm-css-reset._cm-repeat-div ._cm-repeat-buttons-wrapper {\n  margin-bottom: 10px;\n}\n[data-cm-theme='old'] #_cm-css-reset #_cm-css-reset._cm-repeat-div ._cm-repeat-button,\n[data-cm-theme='old'] #_cm-css-reset #_cm-css-reset._cm-repeat-div ._cm-learn-more-button {\n  border: 0;\n  width: 100%;\n  color: transparent;\n  margin-bottom: 0;\n}\n[data-cm-theme='old'] #_cm-css-reset #_cm-css-reset._cm-repeat-div ._cm-repeat-icon::before {\n  box-sizing: content-box;\n  width: 65px;\n  height: 65px;\n  border: 5px solid #cacaca;\n  background: transparent;\n  -webkit-border-radius: 50%;\n  -moz-border-radius: 50%;\n  border-radius: 50%;\n  content: '';\n  position: absolute;\n}\n[data-cm-theme='old'] #_cm-css-reset #_cm-css-reset._cm-repeat-div ._cm-repeat-icon::after {\n  left: 0px;\n  border: 10px solid #000;\n  border-left-color: #cacaca;\n  margin: 1px 50px 0;\n  background: transparent;\n  content: '';\n  position: absolute;\n  cursor: pointer;\n  -ms-transform: rotate(30deg);\n  -webkit-transform: rotate(30deg);\n  transform: rotate(30deg);\n}\n[data-cm-theme='old'] #_cm-css-reset #_cm-css-reset._cm-repeat-div:hover ._cm-repeat-icon::before {\n  border-color: #e4e4e4;\n}\n[data-cm-theme='old'] #_cm-css-reset #_cm-css-reset._cm-repeat-div:hover ._cm-repeat-icon::after {\n  border-left-color: #e4e4e4;\n}\n[data-cm-theme='old'] #_cm-css-reset._cm-loading {\n  opacity: 1;\n  height: 100%;\n  width: 100%;\n  position: absolute;\n  background-color: black;\n  z-index: 2147483647;\n  top: 0;\n  left: 0;\n  overflow: hidden;\n  pointer-events: auto;\n}\n[data-cm-theme='old'] #_cm-css-reset ._cm-loading-div {\n  position: absolute;\n  z-index: 2147483647;\n  padding: 0;\n  margin: auto;\n  display: block;\n  top: 0;\n  left: 0;\n  width: 11em;\n  right: 0;\n  height: 11em;\n  bottom: 0;\n}\n[data-cm-theme='old'] #_cm-css-reset ._cm-loading-div ._cm-loading-icon {\n  margin: auto;\n  text-indent: -9999em;\n  width: 11em;\n  height: 11em;\n  border-radius: 50%;\n  background: #ffffff;\n  background: -moz-linear-gradient(left, #ffffff 10%, rgba(255, 255, 255, 0) 42%);\n  background: -webkit-linear-gradient(left, #ffffff 10%, rgba(255, 255, 255, 0) 42%);\n  background: -o-linear-gradient(left, #ffffff 10%, rgba(255, 255, 255, 0) 42%);\n  background: -ms-linear-gradient(left, #ffffff 10%, rgba(255, 255, 255, 0) 42%);\n  background: linear-gradient(to right, #ffffff 10%, rgba(255, 255, 255, 0) 42%);\n  position: relative;\n  -webkit-animation: load3 1.4s infinite linear;\n  animation: load3 1.4s infinite linear;\n  -webkit-transform: translateZ(0);\n  -ms-transform: translateZ(0);\n  transform: translateZ(0);\n}\n[data-cm-theme='old'] #_cm-css-reset ._cm-loading-div ._cm-loading-icon:before {\n  width: 50%;\n  height: 50%;\n  background: #ffffff;\n  border-radius: 100% 0 0 0;\n  position: absolute;\n  top: 0;\n  left: 0;\n  content: '';\n}\n[data-cm-theme='old'] #_cm-css-reset ._cm-loading-div ._cm-loading-icon:after {\n  background: #000000;\n  width: 75%;\n  height: 75%;\n  border-radius: 50%;\n  content: '';\n  margin: auto;\n  position: absolute;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n}\n@-webkit-keyframes load3 {\n  0% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n@keyframes load3 {\n  0% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n[data-cm-theme='old'] #_cm-css-reset ._cm-loading-div ._cm_loader_img {\n  width: 80px;\n  height: 80px;\n}\n[data-cm-theme='old'] .animated {\n  animation-duration: 1s;\n  animation-fill-mode: both;\n}\n[data-cm-theme='old'] .widget-detached {\n  visibility: hidden !important;\n  pointer-events: none;\n}\n[data-cm-theme='old'] .widget-detached-figure {\n  pointer-events: none;\n}\n@keyframes slideInTop {\n  from {\n    transform: translateY(-50%) scaleY(0);\n    visibility: visible;\n  }\n  to {\n    transform: translateY(0) scaleY(1);\n  }\n}\n[data-cm-theme='old'] .slideInTop {\n  animation-name: slideInTop;\n}\n@keyframes slideOutTop {\n  from {\n    transform: translateY(0) scaleY(1);\n  }\n  to {\n    transform: translateY(-50%) scaleY(0);\n    visibility: visible;\n  }\n}\n[data-cm-theme='old'] .slideOutTop {\n  animation-name: slideOutTop;\n}\n[data-cm-theme='old'] ._cm-widget-item {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  background-color: black;\n}\n[data-cm-theme='old'] ._cm-widget-item._cm-fit-to-size ._cm-center-box #_cm-css-reset._cm-branding-title {\n  background-color: white;\n}\n[data-cm-theme='old'] ._cm-widget-item._cm-fit-to-size {\n  background-color: white;\n  width: 100%;\n  height: 100%;\n  display: block;\n}\n[data-cm-theme='old'] ._cm-widget-item #_cm-css-reset._cm-branding-title {\n  height: auto;\n}\n[data-cm-theme='old'] ._cm-ad-feed-manager ._cm-ad {\n  display: none;\n  height: 0px;\n  position: absolute;\n  overflow: hidden;\n}\n[data-cm-theme='old'] body ._cm-ad {\n  display: block !important;\n  visibility: hidden !important;\n  height: 0px;\n  position: absolute;\n  overflow: hidden;\n  inset: unset;\n}\n[data-cm-theme='old'] #_cm-css-reset {\n  height: inherit;\n  width: inherit;\n  direction: ltr;\n  text-align: left;\n  inset: unset;\n}\n[data-cm-theme='old'] ._cm-ad-active {\n  display: block !important;\n  inset: unset;\n}\n[data-cm-theme='old'] #_cm-video-unit._cm-feed-manager._cm-wide-feed {\n  margin: 6px auto 28px auto !important;\n}\n[data-cm-theme='old'] #_cm-video-unit._cm-feed-manager._cm-wide-feed-title-below {\n  margin: 21px auto 7px auto !important;\n}\n[data-cm-theme='old'] #_cm-css-reset ._cm-disc-text .text.opt-out-hidden {\n  pointer-events: none;\n  color: white;\n  display: inline;\n  position: absolute;\n  top: 10px;\n  left: 13px;\n  font-size: 13px;\n  font-weight: bold;\n  font-family: Arial, Helvetica, sans-serif;\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  cursor: default;\n  position: absolute !important;\n  z-index: 2147483647 !important;\n}\n@media screen and (max-width: 700px) {\n  [data-cm-theme='old'] #_cm-css-reset ._cm-disc-text .text.opt-out-hidden {\n    white-space: nowrap;\n    font-size: 11px;\n    left: 10px;\n    top: 4px;\n  }\n}\n[data-cm-theme='old'] #_cm-css-reset._cm-single-inline._cm-container-msn {\n  background-color: transparent !important;\n  pointer-events: none;\n}\n[data-cm-theme='old'] #_cm-css-reset._cm-video-msn {\n  background: #f2f2f2;\n  outline-color: #f2f2f2;\n  outline-style: solid;\n  outline-width: 0.2rem;\n}\n[data-cm-theme='old'] ._cm-reco-reel-unit-container {\n  z-index: 999;\n  position: absolute;\n  top: 0;\n  left: 0;\n  pointer-events: none;\n}\n[data-cm-theme='old'] ._cm-reco-reel-unit-container ._cm-single-inline {\n  pointer-events: all;\n}\n[data-cm-theme='old'] ._cm-reco-reel-unit-container ._cm-ad-feed-msn {\n  pointer-events: all;\n}\n[data-cm-theme='old'] ._cm-ad-feed-msn ._cm-ad {\n  visibility: hidden !important;\n  height: 0px;\n  position: absolute;\n  overflow: hidden;\n}\n[data-cm-theme='old'] #_cm-css-reset._cm-instream-vidreel-unit-container {\n  position: absolute;\n  z-index: 9;\n  bottom: 0;\n  left: 0;\n  visibility: visible;\n}\n[data-cm-theme='old'] #_cm-css-reset._cm-instream-vidreel-unit-container._hide {\n  z-index: -1;\n  visibility: hidden;\n}\n[data-cm-theme='old'] #rbox-t2v .tbl-recommendation-reel[video-isPlaying='true'] > * {\n  visibility: hidden;\n}\n[data-cm-theme='old'] ._cm-video-ad._cm-center-video.vpaid-player-container {\n  top: 50% !important;\n  left: 50% !important;\n  transform: translate(-50%, -50%);\n  pointer-events: auto;\n}\n[data-cm-theme='old'] #_cm-css-reset._cm-floating-view {\n  position: absolute;\n  overflow: hidden;\n  top: 0;\n  left: 0;\n  z-index: 100000;\n  pointer-events: none;\n}\n[data-cm-theme='old'] ._cm-native-ad-bottom {\n  display: flex;\n  align-items: center;\n  flex-flow: row wrap;\n  flex: 100%;\n  background-color: white;\n}\n[data-cm-theme='old'] ._cm-native-ad-bottom div {\n  flex: inherit;\n}\n[data-cm-theme='old'] ._cm-native-ad-bottom ._cm-native-ad-title {\n  flex: 1 1 auto;\n  color: #000000;\n  font-family: Arial, Helvetica, sans-serif;\n  font-size: 20px;\n  line-height: 27px;\n  font-weight: bold;\n  text-align: left;\n}\n[data-cm-theme='old'] ._cm-native-ad-bottom ._cm-native-ad-title-floating {\n  background-color: #fff !important;\n  font-size: 10px !important;\n  line-height: 18px !important;\n  padding-right: 3px !important;\n  padding-left: 3px !important;\n}\n[data-cm-theme='old'] ._cm-native-ad-bottom ._cm-native-ad-description {\n  color: black;\n  font-family: Arial, Helvetica, sans-serif;\n  font-size: 16px;\n  line-height: 22px;\n  font-weight: normal;\n  text-align: left;\n}\n[data-cm-theme='old'] ._cm-native-ad-bottom ._cm-native-ad-branding {\n  color: #999999;\n  font-family: Arial, Helvetica, sans-serif;\n  font-size: 11px;\n  line-height: 27px;\n  font-weight: bold;\n  text-align: left;\n}\n[data-cm-theme='old'] ._cm-native-ad-bottom ._cm-native-ad-cta-wrapper {\n  flex: 0 0 auto;\n  padding: 5px;\n}\n[data-cm-theme='old'] ._cm-native-ad-bottom ._cm-native-ad-cta-wrapper ._cm-native-ad-cta-button {\n  border-radius: 5px;\n  font-weight: bolder;\n  transition: background 0.12s ease;\n  padding: 3px 12px;\n  color: black;\n  text-transform: uppercase;\n  font-size: 12px;\n  box-shadow: 1px 1px 2px #cacaca;\n  font-family: sans-serif;\n  text-shadow: 0px 0px 3px white;\n  background: linear-gradient(#f6f6f6, #e4e4e4);\n}\n[data-cm-theme='old'] ._cm-native-ad-bottom ._cm-native-ad-icon {\n  flex: 0 0 auto;\n}\n[data-cm-theme='old'] ._cm-native-ad-bottom ._cm-native-ad-icon ._cm-native-ad-icon-img {\n  max-height: 16px;\n  max-width: 16px;\n  margin-right: 5px;\n  vertical-align: middle;\n}\n[data-cm-theme='old'] ._cm-native-ad-bottom ._cm-native-ad-icon-rtl {\n  flex: 0 0 auto;\n}\n[data-cm-theme='old'] ._cm-native-ad-bottom ._cm-native-ad-icon-rtl ._cm-native-ad-icon-img {\n  max-height: 16px;\n  max-width: 16px;\n  margin-left: 5px;\n  vertical-align: middle;\n}\n[data-cm-theme='old'] ._cm-native-ad-bottom ._cm-native-ad-branding {\n  flex: 1 1 auto;\n}\n[data-cm-theme='old'] ._cm-native-ad-bottom-floating {\n  position: absolute;\n  bottom: 0;\n  right: 0;\n  z-index: 999 !important;\n}\n[data-cm-theme='old'] ._cm-native-ad-bottom-floating.hide {\n  display: none;\n}\n[data-cm-theme='old'] ._cm-native-ad ._cm-msn-native-ad-top {\n  background: -webkit-linear-gradient(top, rgba(0, 0, 0, 0.95) 0, transparent 100%);\n  background: linear-gradient(180deg, rgba(0, 0, 0, 0.95) 0, transparent 100%);\n}\n[data-cm-theme='old'] ._cm-native-ad ._cm-msn-native-ad-top ._cm-native-ad-title {\n  font-family: 'Segoe UI Semilight', 'Segoe WP Semilight', 'Segoe WP', 'Segoe UI', Arial, Sans-Serif;\n  font-size: 2.8rem;\n  line-height: 1.214;\n  padding-left: 1.8rem;\n  max-height: 2.8rem;\n  overflow: hidden;\n  padding-right: 1.8rem;\n  padding-bottom: 2em;\n  padding-top: 4rem;\n  color: white;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n[data-cm-theme='old'] ._cm-native-ad-top {\n  display: flex;\n  align-items: center;\n  flex-flow: row wrap;\n  flex: 100%;\n  background-color: transparent;\n}\n[data-cm-theme='old'] ._cm-native-ad-top ._cm-native-ad-title {\n  flex: 1 1 auto;\n  color: white;\n  font-family: Arial, Helvetica, sans-serif;\n  font-size: 1.25rem;\n  line-height: 1.6875rem;\n  font-weight: bold;\n  text-align: left;\n  max-width: 340px;\n  padding: 1.55rem 0.6rem !important;\n  text-overflow: ellipsis !important;\n  display: block;\n  overflow: hidden;\n  white-space: nowrap;\n}\n[data-cm-theme='old'] ._cm-native-ad._cm-native-ad-detached ._cm-msn-native-ad-top ._cm-native-ad-title {\n  font-size: 1.8rem;\n  max-height: 1.8rem;\n}\n[data-cm-theme='old'] ._cm-amp-helper-container {\n  position: absolute;\n  top: 0;\n  left: 100px;\n}\n[data-cm-theme='old'] ._cm-amp-helper-observer {\n  width: 1px;\n  height: 1px;\n  visibility: hidden;\n  pointer-events: none !important;\n  border: none !important;\n}\n[data-cm-theme='old'] ._cm-os-slider .cmNativeAdSlider ._cm-native-ad-title {\n  margin-bottom: 2px !important;\n  margin-left: 2px !important;\n  font-size: 10px !important;\n  line-height: 18px !important;\n}\n[data-cm-theme='old'] ._cm-os-slider .cmNativeAdSlider ._cm-native-ad-description {\n  display: none !important;\n}\n[data-cm-theme='old'] ._cm-os-slider .cmNativeAdSlider ._cm-native-ad-icon {\n  display: none !important;\n}\n[data-cm-theme='old'] ._cm-os-slider .cmNativeAdSlider ._cm-native-ad-branding {\n  display: none !important;\n}\n[data-cm-theme='old'] .cmNativeAdSlider {\n  position: absolute;\n  right: 0px;\n  bottom: 0px;\n  background-color: white;\n  width: 100%;\n  height: auto;\n}\n[data-cm-theme='old'] ._cm_native_ad_background_color {\n  background-color: #ffffff;\n}\n[data-cm-theme='old'] ._cm-native-ad-inline {\n  background-color: white !important;\n}\n[data-cm-theme='old'] ._cm-native-ad-inline ._cm-native-ad-title {\n  font-weight: bold !important;\n}\n[data-cm-theme='old'] ._cm-native-ad-override-hidden {\n  display: block !important;\n  margin-top: 10px;\n}\n[data-cm-theme='old'] ._cm-native-ad-widget {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n}\n[data-cm-theme='old'] ._cm-native-ad-widget ._cm-native-ad-icon-img {\n  margin-bottom: initial;\n}\n[data-cm-theme='old'] ._cm-above-the-feed-container {\n  border-radius: 16px 16px 0 0;\n}\n[data-cm-theme='old'] [class*='above-the-feed-premium-card-'] _cm-above-the-feed-wrapper {\n  background-color: black;\n  top: -10px;\n  padding: 0 15px;\n}\n[data-cm-theme='old'] .tbl-feed-frame-DIVIDER > .trc_elastic_above-the-feed-premium-card-delta,\n[data-cm-theme='old'] .tbl-feed-card.cm-video-card[class*='above-the-feed-premium-card-'] {\n  box-shadow: none;\n  margin-bottom: 15px !important;\n}\n[data-cm-theme='old'] [class*='above-the-feed-premium-card-'].tbl-feed-card:not(:has(.taboola-connect-item)).fp-video-ad,\n[data-cm-theme='old'] [class*='above-the-feed-premium-card-'].tbl-feed-card:not(:has(.taboola-connect-item)).cm-video-card {\n  width: 100% !important;\n  max-width: 100% !important;\n  background-color: black !important;\n}\n[data-cm-theme='old'] [class*='above-the-feed-premium-card-'].tbl-feed-card:not(:has(.taboola-connect-item)) .video-label {\n  color: white;\n}\n[data-cm-theme='old'] [class*='above-the-feed-premium-card-'].tbl-feed-card:not(:has(.taboola-connect-item)) ._cm-native-ad-cta-wrapper {\n  padding: 0;\n}\n[data-cm-theme='old'] [class*='above-the-feed-premium-card-'].tbl-feed-card:not(:has(.taboola-connect-item)) ._cm-native-ad-branding {\n  margin: 0px;\n  width: 100% !important;\n  max-width: 100% !important;\n}\n[data-cm-theme='old'] [class*='above-the-feed-premium-card-'].tbl-feed-card:not(:has(.taboola-connect-item)) ._cm-native-ad-branding .branding-separator {\n  flex-grow: 0;\n}\n[data-cm-theme='old'] [class*='above-the-feed-premium-card-'].tbl-feed-card:not(:has(.taboola-connect-item)) ._cm-native-ad-branding ._cm-ad-choice-text {\n  vertical-align: middle;\n}\n[data-cm-theme='old'] [class*='above-the-feed-premium-card-'] ._cm-native-ad.item-label-href::before {\n  content: '';\n  width: 100%;\n  position: absolute;\n  height: 80px;\n  top: -40px;\n  background: linear-gradient(to top, rgba(0, 0, 0) 0%, rgba(0, 0, 0, 0) 100%);\n}\n[data-cm-theme='old'] ._cm-native-ad-bottom .video-label-box {\n  top: 0px;\n}\n[data-cm-theme='old'] ._cm-native-ad-bottom .video-label-box .branding.composite-branding {\n  align-items: center;\n}\n[data-cm-theme='old'] [class*='above-the-feed-premium-card-'] .video-label-box {\n  margin: 10px 0 0 0 !important;\n  margin-left: auto;\n}\n[data-cm-theme='old'] ._cm-above-the-feed-title-wrapper ._cm-native-ad-bottom {\n  background-color: black !important;\n  padding-top: 15px !important;\n}\n[data-cm-theme='old'] ._cm-above-the-feed-title-wrapper ._cm-native-ad-bottom ._cm-ad-choice {\n  display: none;\n  padding: 0;\n}\n@media screen and (max-width: 468px) {\n  [data-cm-theme='old'] ._cm-above-the-feed-container {\n    border-radius: 0px;\n  }\n  [data-cm-theme='old'] [class*='above-the-feed-premium-card-'] {\n    width: 100%;\n  }\n}\n[data-cm-theme='old'] #taboola-integrated-widget-video.hide {\n  display: none;\n}\n[data-cm-theme='yahoo'] figure[id*='taboola-'] ._cm-widget-item._cm-fit-to-size {\n  display: flex;\n  background-color: transparent;\n  width: var(--video-container-view-width, 100%);\n  height: var(--video-container-view-height, 100%);\n}\n[data-cm-theme='yahoo'] figure[id*='taboola-'] ._cm-widget-item._cm-fit-to-size.mobile {\n  flex-direction: column;\n}\n[data-cm-theme='yahoo'] figure[id*='taboola-'] ._cm-widget-item._cm-fit-to-size.mobile #_cm-css-reset.stream-placement ._cm-yahoo-widget._cm-widget-manager-player-target {\n  margin: 0;\n  flex: 1 0 auto;\n}\n[data-cm-theme='yahoo'] figure[id*='taboola-'] ._cm-widget-item._cm-fit-to-size.mobile .video-label-box.trc-main-label {\n  flex-direction: column;\n  pointer-events: all;\n  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.1), 0 0 1px 0 rgba(0, 0, 0, 0.1);\n  box-shadow: var(--cm-video-shadow-light, 0 4px 8px 0 rgba(0, 0, 0, 0.1), 0 0 1px 0 rgba(0, 0, 0, 0.1));\n  background-color: #ffffff;\n  background-color: var(--cm-video-bg-card, #ffffff);\n  margin: var(--cm-video-label-margin, 0 17px);\n  border-radius: var(--cm-video-label-border-radius, 8px);\n  padding: var(--cm-video-label-padding, 8px);\n  height: auto !important;\n}\n[data-cm-theme='yahoo'] figure[id*='taboola-'] ._cm-widget-item._cm-fit-to-size.mobile .video-label-box.trc-main-label .branding[slot='branding'] {\n  display: flex !important;\n  justify-content: flex-end;\n}\n[data-cm-theme='yahoo'] figure[id*='taboola-'] ._cm-widget-item._cm-fit-to-size.mobile .video-label-box.trc-main-label .video-title[slot='title'] {\n  line-height: 1.4;\n  height: auto;\n}\n[data-cm-theme='yahoo'] figure[id*='taboola-'] ._cm-widget-item._cm-fit-to-size.mobile .video-label-box.trc-main-label span[slot='description'] {\n  display: none;\n}\n[data-cm-theme='yahoo'] figure[id*='taboola-'] ._cm-widget-item._cm-fit-to-size #_cm-css-reset.stream-placement {\n  display: flex;\n  z-index: 5;\n}\n[data-cm-theme='yahoo'] figure[id*='taboola-'] ._cm-widget-item._cm-fit-to-size #_cm-css-reset.stream-placement ._cm-yahoo-widget._cm-widget-manager-player-target {\n  display: flex;\n  flex: 0 auto;\n  border-radius: 11px;\n}\n[data-cm-theme='yahoo'] figure[id*='taboola-'] ._cm-widget-item._cm-fit-to-size #_cm-css-reset.stream-placement ._cm-yahoo-widget._cm-widget-manager-player-target .cm-ad-click-target:has(~ .cm_yahoo-repeat-view.showing) {\n  display: none;\n}\n[data-cm-theme='yahoo'] figure[id*='taboola-'] ._cm-widget-item._cm-fit-to-size #_cm-css-reset.stream-placement ._cm-yahoo-widget._cm-widget-manager-player-target.vpaid-player-container .video_controls.show .blue_bg,\n[data-cm-theme='yahoo'] figure[id*='taboola-'] ._cm-widget-item._cm-fit-to-size #_cm-css-reset.stream-placement ._cm-yahoo-widget._cm-widget-manager-player-target.vpaid-player-container .video_controls_mobile.show .blue_bg {\n  background: var(--cm-video-brand-gradient);\n  background: linear-gradient(93.29deg, #7e1fff -0.72%, #2f42d4 101.96%);\n  background: var(--cm-video-brand-gradient, linear-gradient(93.29deg, #7e1fff -0.72%, #2f42d4 101.96%));\n  color: #ffffff;\n  color: var(--cm-video-text-on-dark, #ffffff);\n}\n[data-cm-theme='yahoo'] figure[id*='taboola-'] ._cm-widget-item._cm-fit-to-size #_cm-css-reset.stream-placement ._cm-yahoo-widget._cm-widget-manager-player-target.vpaid-player-container .video_controls_mobile.show .mc-progressbar_area {\n  height: var(--cm-video-controls-progress-height, 8px);\n}\n[data-cm-theme='yahoo'] figure[id*='taboola-'] ._cm-widget-item._cm-fit-to-size #_cm-css-reset.stream-placement ._cm-yahoo-widget._cm-widget-manager-player-target ._cm-repeat-view-wrapper {\n  width: 40%;\n}\n[data-cm-theme='yahoo'] figure[id*='taboola-'] ._cm-widget-item._cm-fit-to-size #_cm-css-reset.stream-placement._cm-ad-held-aside {\n  visibility: hidden;\n  position: absolute;\n  z-index: -1;\n}\n[data-cm-theme='yahoo'] figure[id*='taboola-'] ._cm-widget-item._cm-fit-to-size .branding-inner[data-text=''] + .branding-separator,\n[data-cm-theme='yahoo'] figure[id*='taboola-'] ._cm-widget-item._cm-fit-to-size .branding-inner[data-text=''] ~ .branding-separator {\n  display: none !important;\n}\n[data-cm-theme='yahoo'] #_cm-css-reset.vpaid-player-container._cm-yahoo-widget {\n  display: none;\n}\n[data-cm-theme='yahoo'] #hidden-internal-item.hide-internal-item {\n  height: var(--video-container-view-height, 100%);\n  visibility: hidden !important;\n}\n[data-cm-theme='yahoo'] .cm-video-theme-text-primary {\n  color: #1d2228;\n  color: var(--cm-video-text-primary, #1d2228);\n}\n[data-cm-theme='yahoo'] .cm-video-theme-text-secondary {\n  color: #6e7780;\n  color: var(--cm-video-text-secondary, #6e7780);\n}\n[data-cm-theme='yahoo'] .cm-video-theme-text-on-dark {\n  color: #ffffff;\n  color: var(--cm-video-text-on-dark, #ffffff);\n}\n[data-cm-theme='yahoo'] .cm-video-theme-bg-card {\n  background-color: #ffffff;\n  background-color: var(--cm-video-bg-card, #ffffff);\n}\n[data-cm-theme='yahoo'] .cm-video-theme-bg-overlay {\n  background: rgba(0, 0, 0, 0.4);\n  background: var(--cm-video-bg-overlay, rgba(0, 0, 0, 0.4));\n}\n[data-cm-theme='yahoo'] .cm-video-theme-shadow {\n  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.1), 0 0 1px 0 rgba(0, 0, 0, 0.1);\n  box-shadow: var(--cm-video-shadow-light, 0 4px 8px 0 rgba(0, 0, 0, 0.1), 0 0 1px 0 rgba(0, 0, 0, 0.1));\n}\n[data-cm-theme='yahoo'] .cm-video-theme-shadow-elevated {\n  box-shadow: 0 4px 16px 0 rgba(0, 0, 0, 0.2), 0 0 2px 0 rgba(0, 0, 0, 0.05);\n  box-shadow: var(--cm-video-shadow-elevated, 0 4px 16px 0 rgba(0, 0, 0, 0.2), 0 0 2px 0 rgba(0, 0, 0, 0.05));\n}\n[data-cm-theme='yahoo'] .cm-video-theme-brand-gradient {\n  background: var(--cm-video-brand-gradient);\n  background: linear-gradient(93.29deg, #7e1fff -0.72%, #2f42d4 101.96%);\n  background: var(--cm-video-brand-gradient, linear-gradient(93.29deg, #7e1fff -0.72%, #2f42d4 101.96%));\n  color: #ffffff;\n  color: var(--cm-video-text-on-dark, #ffffff);\n}\n[data-cm-theme='yahoo'] .cm-video-theme-brand-border {\n  border-color: #7e1fff !important;\n  border-color: var(--cm-video-border-accent, #7e1fff) !important;\n}\n[data-cm-theme='yahoo'] figure.taboola-stream-figure-desktop.finance #_cm-video-unit._cm-widget-item._cm-fit-to-size.finance .video-label-box.trc-main-label {\n  display: flex;\n  flex-direction: column;\n}\n[data-cm-theme='yahoo'] figure.taboola-stream-figure-desktop.finance #_cm-video-unit._cm-widget-item._cm-fit-to-size.finance .video-label-box.trc-main-label span[slot='title'] {\n  order: 1;\n}\n[data-cm-theme='yahoo'] figure.taboola-stream-figure-desktop.finance #_cm-video-unit._cm-widget-item._cm-fit-to-size.finance .video-label-box.trc-main-label span[slot='branding'] {\n  order: 2;\n}\n[data-cm-theme='yahoo'] figure.taboola-stream-figure-desktop.finance #_cm-video-unit._cm-widget-item._cm-fit-to-size.finance .video-label-box.trc-main-label span[slot='description'] {\n  display: none;\n}\n[data-cm-theme='yahoo'] figure[id*='taboola-'].taboola-stream-figure-mobile.finance {\n  margin: 0.4rem !important;\n}\n[data-cm-theme='yahoo'] figure[id*='taboola-'].taboola-stream-figure-mobile.finance ._cm-widget-item._cm-fit-to-size.mobile .video-label-box.trc-main-label {\n  box-shadow: inset 0px -3px 4px 1px rgba(0, 0, 0, 0.1);\n}\n[data-cm-theme='yahoo'] figure[id*='taboola-'].taboola-stream-figure-mobile.finance ._cm-widget-item._cm-fit-to-size.mobile .video-label-box.trc-main-label .branding[slot='branding'] {\n  display: block !important;\n}\n[data-cm-theme='yahoo'] figure.sportsNews ._cm-widget-item._cm-fit-to-size.sportsNews.mobile {\n  height: auto;\n}\n[data-cm-theme='yahoo'] figure.sportsNews ._cm-widget-item._cm-fit-to-size.sportsNews.mobile .video-label-box.trc-main-label {\n  margin-top: 8px;\n}\n[data-cm-theme='yahoo'] figure.sportsNews ._cm-widget-item._cm-fit-to-size.sportsNews.mobile .video-label-box.trc-main-label .branding[slot='branding'] {\n  padding-bottom: 15px;\n}\n[data-cm-theme='yahoo'] figure.sportsNews ._cm-widget-item._cm-fit-to-size.sportsNews.desktop .video-label-box.trc-main-label {\n  display: flex;\n  flex-direction: column;\n}\n[data-cm-theme='yahoo'] figure.sportsNews ._cm-widget-item._cm-fit-to-size.sportsNews.desktop .video-label-box.trc-main-label .branding[slot='branding'] {\n  order: 3;\n}\n[data-cm-theme='yahoo'] figure.sportsNews ._cm-widget-item._cm-fit-to-size.sportsNews #_cm-css-reset.stream-placement ._cm-widget-manager-player-target {\n  border-radius: 0;\n  z-index: 5;\n  width: var(--video-size-width, 100%) !important;\n  height: var(--video-size-height, 100%) !important;\n}\n[data-cm-theme='yahoo'] figure.sportsNews ._cm-widget-item._cm-fit-to-size.sportsNews #_cm-css-reset.stream-placement ._cm-widget-manager-player-target.landscape {\n  z-index: 1;\n}\n[data-cm-theme='yahoo'] figure.sportsNews ._cm-widget-item._cm-fit-to-size.sportsNews .video-label-box.trc-main-label .branding[slot='branding'] .branding-inner[data-text=''] ~ .logoDiv a span::before {\n  display: none !important;\n}\n[data-cm-theme='yahoo'] .taboola-stream-figure-mobile ~ #hidden-internal-item.hide-internal-item {\n  height: calc(var(--video-container-view-height, 100%) + 10px);\n}\n[data-cm-theme='yahoo'] #_cm-css-reset.stream-placement ._cm-yahoo-widget .cm_yahoo-repeat-view {\n  position: absolute;\n  top: 0;\n  width: 100%;\n  margin: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: rgba(0, 0, 0, 0.4);\n  background: var(--cm-video-bg-overlay, rgba(0, 0, 0, 0.4));\n  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.1), 0 0 1px 0 rgba(0, 0, 0, 0.1);\n  box-shadow: var(--cm-video-shadow-light, 0 4px 8px 0 rgba(0, 0, 0, 0.1), 0 0 1px 0 rgba(0, 0, 0, 0.1));\n  border-radius: var(--cm-video-repeat-border-radius, 11px);\n  overflow: hidden;\n  height: 100%;\n  z-index: 100;\n}\n[data-cm-theme='yahoo'] #_cm-css-reset.stream-placement ._cm-yahoo-widget .cm_yahoo-repeat-view .cm_yahoo-repeat-replay-btn {\n  position: absolute;\n  top: 0;\n  left: 0;\n  padding: 8px;\n  border: none;\n  color: #ffffff;\n  color: var(--cm-video-text-on-dark, #ffffff);\n  background: unset;\n  overflow: hidden;\n  white-space: nowrap;\n  max-width: 90%;\n}\n[data-cm-theme='yahoo'] #_cm-css-reset.stream-placement ._cm-yahoo-widget .cm_yahoo-repeat-view .cm_yahoo-repeat-learn-btn {\n  position: absolute;\n  padding: 4px 16px;\n  border-radius: 200px;\n  font-size: 12px;\n  font-weight: 500;\n  cursor: pointer;\n  color: #ffffff;\n  color: var(--cm-video-text-on-dark, #ffffff);\n  background: var(--cm-video-brand-gradient);\n  background: linear-gradient(93.29deg, #7e1fff -0.72%, #2f42d4 101.96%);\n  background: var(--cm-video-brand-gradient, linear-gradient(93.29deg, #7e1fff -0.72%, #2f42d4 101.96%));\n  border: 1px solid var(--cm-video-repeat-border, #ffffff);\n}\n[data-cm-theme='yahoo'] #_cm-css-reset.stream-placement ._cm-yahoo-widget.sportsNews .cm_yahoo-repeat-view {\n  border-radius: 0;\n}\n[data-cm-theme='yahoo'] #_cm-css-reset.stream-placement.mobile .cm_yahoo-repeat-view .cm_yahoo-repeat-learn-btn {\n  background: var(--cm-video-brand-gradient);\n  background: linear-gradient(93.29deg, #7e1fff -0.72%, #2f42d4 101.96%);\n  background: var(--cm-video-brand-gradient, linear-gradient(93.29deg, #7e1fff -0.72%, #2f42d4 101.96%));\n  font-size: 14px;\n  padding: 6px 16px;\n}\n[data-cm-theme='yahoo'] figure[id*='taboola-'].sportsApp {\n  margin: 0 2% !important;\n}\n[data-cm-theme='yahoo'] figure[id*='taboola-'].sportsApp ~ div[data-item-id]#hidden-internal-item.hide-internal-item {\n  visibility: hidden !important;\n  height: auto !important;\n}\n[data-cm-theme='yahoo'] figure[id*='taboola-'].sportsApp ._cm-widget-item._cm-fit-to-size.mobile.sportsApp #_cm-css-reset.stream-placement {\n  width: auto !important;\n  height: auto !important;\n}\n[data-cm-theme='yahoo'] figure[id*='taboola-'].sportsApp ._cm-widget-item._cm-fit-to-size.mobile.sportsApp #_cm-css-reset.stream-placement ._cm-widget-manager-player-target {\n  border-radius: 0;\n  z-index: 5;\n  width: var(--video-size-width, 100%) !important;\n  height: var(--video-size-height, 100%) !important;\n}\n[data-cm-theme='yahoo'] figure[id*='taboola-'].sportsApp ._cm-widget-item._cm-fit-to-size.mobile.sportsApp #_cm-css-reset.stream-placement ._cm-widget-manager-player-target.landscape {\n  z-index: 1;\n}\n[data-cm-theme='yahoo'] figure[id*='taboola-'].sportsApp ._cm-widget-item._cm-fit-to-size.mobile.sportsApp #_cm-css-reset.stream-placement ._cm-widget-manager-player-target .cm_yahoo-repeat-view {\n  border-radius: 0;\n}\n[data-cm-theme='yahoo'] figure[id*='taboola-'].sportsApp ._cm-widget-item._cm-fit-to-size.mobile.sportsApp #_cm-css-reset.stream-placement ._cm-widget-manager-player-target .cm-ad-player {\n  width: var(--video-size-width, 100%) !important;\n  height: var(--video-size-height, 100%) !important;\n}\n[data-cm-theme='yahoo'] figure[id*='taboola-'].sportsApp ._cm-widget-item._cm-fit-to-size.mobile.sportsApp .video-label-box.trc-main-label {\n  box-shadow: none;\n  display: flex;\n  flex-direction: column;\n  padding: 0;\n  margin-top: 10px;\n  background-color: transparent;\n}\n[data-cm-theme='yahoo'] figure[id*='taboola-'].sportsApp ._cm-widget-item._cm-fit-to-size.mobile.sportsApp .video-label-box.trc-main-label .video-title[slot='title'] {\n  order: -1;\n  min-height: unset;\n}\n#_cm-css-reset._cm-volume-area {\n  background: rgba(255, 255, 255, 0) !important;\n  position: absolute !important;\n  z-index: 2147483646 !important;\n  cursor: pointer !important;\n  right: 5px !important;\n  overflow: hidden !important;\n  box-sizing: border-box !important;\n  padding: 5px !important;\n  width: auto !important;\n  height: auto !important;\n  pointer-events: auto !important;\n}\n#_cm-css-reset._cm-volume-area ._cm-volume-border {\n  box-sizing: border-box !important;\n  padding: 0 0 22px 5px !important;\n  height: 24px !important;\n  width: 92px !important;\n  border: 1px solid #fffefd !important;\n  border-radius: 10% !important;\n  z-index: 2 !important;\n  font-size: 14px !important;\n  line-height: 18.5px !important;\n  vertical-align: middle !important;\n  white-space: nowrap !important;\n  overflow: hidden !important;\n}\n#_cm-css-reset._cm-volume-area ._cm-volume-border ._cm-volume-mute {\n  display: inline !important;\n  height: 14px !important;\n  width: 19px !important;\n  z-index: 1 !important;\n  vertical-align: middle !important;\n}\n#_cm-css-reset._cm-volume-area ._cm-volume-border ._cm-volume-unmute {\n  display: none !important;\n  height: 14px !important;\n  width: 19px !important;\n  z-index: 1 !important;\n  vertical-align: middle !important;\n}\n#_cm-css-reset._cm-volume-area ._cm-volume-border ._cm-volume-text {\n  display: inline !important;\n  color: #fffefd !important;\n  font-family: 'Geneva', sans-serif !important;\n  font-size: 14px !important;\n  width: 53px !important;\n  height: 15px !important;\n  margin-left: 5px !important;\n  vertical-align: middle !important;\n}\n#_cm-css-reset._cm-volume-area ._cm-volume-border:active {\n  opacity: 0.3 !important;\n  background-color: black !important;\n}\n._cm-volume-area-top {\n  top: 7px !important;\n}\n._cm-volume-area-bottom {\n  bottom: 7px !important;\n}\n#_cm-css-reset #_cm-skip-ad-area._cm-skip-ad-area {\n  background: rgba(255, 255, 255, 0) !important;\n  position: absolute !important;\n  z-index: 2147483647 !important;\n  cursor: pointer !important;\n  padding-left: 6px !important;\n  box-sizing: border-box !important;\n  top: 12px !important;\n  right: 10px !important;\n  bottom: auto !important;\n  pointer-events: auto;\n  width: auto !important;\n  height: auto !important;\n}\n#_cm-css-reset #_cm-skip-ad-area._cm-skip-ad-area ._cm-skip-ad-border {\n  box-sizing: border-box !important;\n  padding: 0 0 22px 5px !important;\n  height: 24px !important;\n  width: 92px !important;\n  border: 1px solid #fffefd !important;\n  z-index: 2 !important;\n  font-size: 14px !important;\n  line-height: 20px !important;\n  vertical-align: middle !important;\n  white-space: nowrap !important;\n  overflow: hidden !important;\n  background: rgba(0, 0, 0, 0.45) !important;\n  border-radius: 5px !important;\n}\n#_cm-css-reset #_cm-skip-ad-area._cm-skip-ad-area ._cm-skip-ad-border ._cm-skip-ad-text {\n  display: inline !important;\n  color: #fffefd !important;\n  font-family: 'Geneva', sans-serif !important;\n  font-size: 14px !important;\n  width: 53px !important;\n  height: 15px !important;\n  margin-left: 5px !important;\n  vertical-align: middle !important;\n  margin-right: 5px !important;\n  padding-right: 18px;\n}\n#_cm-css-reset #_cm-skip-ad-area._cm-skip-ad-area ._cm-skip-ad-border ._cm-skip-ad-icon {\n  display: inline;\n  position: absolute;\n  width: 14px;\n  height: 12px;\n  right: 5px;\n}\n#_cm-css-reset._cm-tvrl-layout._cm-wv-layout ._cm-video-ad.vpaid-player-container .video_controls .video_controls_main_area .cm_video_controls_mute {\n  background-color: rgba(0, 0, 0, 0.5);\n  top: 10px;\n  right: 1.5%;\n}\n#_cm-css-reset._cm-tvrl-layout._cm-wv-layout ._cm-video-ad.vpaid-player-container .video_controls .video_controls_main_area .cm_video_controls_mute.display_unmute {\n  background-color: rgba(0, 0, 0, 0.5);\n}\n#_cm-css-reset._cm-tvrl-layout._cm-wv-layout .cm-ad-player-active {\n  max-height: 65vh;\n}\n#_cm-css-reset._cm-tvrl-layout._cm-wv-layout ._cm-video-ad.vpaid-player-container .video_controls .text.opt-out-hidden {\n  border-radius: 100px;\n  background-color: rgba(0, 0, 0, 0.5);\n  font-size: 12px;\n  font-weight: 500;\n  line-height: 30px;\n  width: auto;\n  text-align: center;\n  height: 30px;\n  padding-left: 8px;\n  padding-right: 8px;\n  left: 1.5%;\n  top: 18px;\n}\n#_cm-css-reset._cm-tvrl-layout._cm-wv-layout ._cm-skip-ad-vid-reel {\n  border: 2px solid;\n  border-radius: 45px;\n  overflow: hidden;\n  color: #fff;\n  text-decoration: none;\n  padding: 10px 15px;\n  font-size: 16px;\n  font-family: 'Montserrat', serif;\n  display: block;\n  font-weight: 600;\n  width: auto;\n  height: auto;\n  bottom: 0;\n  background-color: rgba(0, 0, 0, 0.35);\n  margin: 1.44rem 35px 1.44rem 35px;\n}\n#_cm-css-reset._cm-tvrl-layout._cm-wv-layout ._cm-skip-ad-vid-reel svg {\n  margin: 0;\n}\n#_cm-css-reset._cm-tvrl-layout._cm-wv-layout ._cm-skip-ad-vid-reel ._cm-skip-ad-border,\n#_cm-css-reset._cm-tvrl-layout._cm-wv-layout ._cm-skip-ad-vid-reel ._cm-skip-ad-icon {\n  display: flex;\n  align-items: center;\n}\n#_cm-css-reset._cm-tvrl-layout._cm-wv-layout ._cm-skip-ad-vid-reel ._cm-skip-ad-text::before {\n  content: attr(data-text);\n  font-size: 18px;\n}\n#_cm-css-reset._cm-tvrl-layout._cm-wv-layout ._cm-video-ad.vpaid-player-container .video_controls .cm_video_controls_progressbar_area {\n  bottom: 20vh;\n  background: linear-gradient(to bottom, rgba(0, 0, 0, 0) 0%, #000000 100%);\n  height: 10%;\n}\n#_cm-css-reset._cm-tvrl-layout._cm-wv-layout .video_controls_mobile.show .mc-progressbar_area .blue_bg,\n#_cm-css-reset._cm-tvrl-layout._cm-wv-layout .video_controls_mobile.show .mc-progressbar_area .white_bg {\n  height: 0.3rem;\n  bottom: 0;\n  width: auto;\n  left: 3%;\n  right: 3%;\n}\n#_cm-css-reset._cm-tvrl-layout._cm-wv-layout .video_controls.show .cm_video_controls_progressbar_area .blue_bg,\n#_cm-css-reset._cm-tvrl-layout._cm-wv-layout .video_controls.show .cm_video_controls_progressbar_area .white_bg {\n  height: 0.3rem;\n  bottom: 0;\n  width: auto;\n  left: 3%;\n  right: 3%;\n}\n#_cm-css-reset._cm-tvrl-layout._cm-wv-layout[lang-direction='rtl'] ._cm-skip-ad-vid-reel {\n  right: auto;\n  left: 0;\n}\n#_cm-css-reset._cm-tvrl-layout._cm-wv-layout[lang-direction='rtl'] ._cm-skip-ad-border {\n  flex-direction: row-reverse;\n}\n#_cm-css-reset._cm-tvrl-layout._cm-wv-layout[lang-direction='rtl'] ._cm-skip-ad-icon,\n#_cm-css-reset._cm-tvrl-layout._cm-wv-layout[lang-direction='rtl'] .video_controls.show .cm_video_controls_progressbar_area {\n  transform: rotate(180deg);\n  background: linear-gradient(0deg, rgba(0, 0, 0, 0) 0%, #000000 100%);\n}\n#_cm-css-reset._cm-tvrl-layout._cm-wv-layout[lang-direction='rtl'] ._cm-skip-ad-icon .cm_video_controls_progressbar_bg,\n#_cm-css-reset._cm-tvrl-layout._cm-wv-layout[lang-direction='rtl'] .video_controls.show .cm_video_controls_progressbar_area .cm_video_controls_progressbar_bg,\n#_cm-css-reset._cm-tvrl-layout._cm-wv-layout[lang-direction='rtl'] ._cm-skip-ad-icon .cm_video_controls_progressbar,\n#_cm-css-reset._cm-tvrl-layout._cm-wv-layout[lang-direction='rtl'] .video_controls.show .cm_video_controls_progressbar_area .cm_video_controls_progressbar {\n  top: 0;\n  bottom: auto;\n}\n@media screen and (max-width: 480px) {\n  #tbl-wv-preRollAd {\n    max-height: 100vh !important;\n    border-radius: 0 !important;\n  }\n  #_cm-css-reset._cm-tvrl-layout._cm-wv-layout .video_controls_mobile.show .mc-progressbar_area {\n    width: 100%;\n    max-width: 100%;\n    padding: 0;\n    border-radius: 0;\n    height: 0.5%;\n    left: 0;\n  }\n  #_cm-css-reset._cm-tvrl-layout._cm-wv-layout .video_controls_mobile.show .mc-progressbar_area .blue_bg,\n  #_cm-css-reset._cm-tvrl-layout._cm-wv-layout .video_controls_mobile.show .mc-progressbar_area .white_bg {\n    border-radius: 0;\n    height: 100%;\n    left: 0;\n    right: 0;\n  }\n  #_cm-css-reset._cm-tvrl-layout._cm-wv-layout .cm-ad-player-active {\n    max-height: 100vh;\n  }\n  #_cm-css-reset._cm-tvrl-layout._cm-wv-layout .video_controls_mobile.show .speaker,\n  #_cm-css-reset._cm-tvrl-layout._cm-wv-layout ._cm-video-ad.vpaid-player-container .video_controls .video_controls_main_area .cm_video_controls_mute.display_unmute {\n    background-color: rgba(0, 0, 0, 0.5);\n    background-size: auto;\n    top: 25px;\n  }\n  #_cm-css-reset._cm-tvrl-layout._cm-wv-layout ._cm-video-ad.vpaid-player-container .video_controls .video_controls_main_area .cm_video_controls_mute {\n    background-color: rgba(0, 0, 0, 0.5);\n    background-size: auto;\n    top: 25px;\n  }\n  #_cm-css-reset._cm-tvrl-layout._cm-wv-layout .tbl-text {\n    border-radius: 100px;\n    border: solid 1px #575757;\n    background-color: rgba(0, 0, 0, 0.5);\n    font-size: 12px;\n    font-weight: 500;\n    line-height: 20px;\n    text-align: center;\n    height: 20px;\n    top: revert;\n    font-family: Montserrat;\n    padding-left: 8px;\n    padding-right: 8px;\n    bottom: calc(0.54% + 19px + 30px);\n    left: 20px;\n  }\n  #_cm-css-reset._cm-tvrl-layout._cm-wv-layout ._cm-skip-ad-vid-reel {\n    font-size: 15px;\n    font-weight: 600;\n    line-height: 28px;\n    border: 1px solid;\n    border-radius: 45px;\n    margin: 1.44rem 20px 1.44rem;\n    bottom: calc(0.54% + 19px);\n    right: 0;\n    padding: 2px 18px 2px 23px;\n  }\n  #_cm-css-reset._cm-tvrl-layout._cm-wv-layout ._cm-skip-ad-vid-reel svg {\n    padding-left: 5px;\n  }\n}\n.tbl-pc-pr-container {\n  display: none !important;\n}\n#tbl-wv-preRollAd {\n  position: relative;\n  display: block;\n  width: 100vw;\n  max-height: 86vh;\n  max-width: 1060px;\n  border-radius: 16px;\n  overflow: hidden;\n}\n.tbl-rr-syndicated-s #_cm-css-reset._cm-tvrl-layout ._cm-native-ad {\n  font-size: 16px;\n}\n.tbl-rr-syndicated-s #_cm-css-reset._cm-tvrl-layout ._cm-skip-ad-vid-reel,\n.tbl-rr-syndicated-s #_cm-css-reset._cm-tvrl-layout ._cm-native-ad-cta-button {\n  font-size: 12px;\n}\n.tbl-rr-syndicated-s #_cm-css-reset._cm-tvrl-layout ._cm-ad-choice-text,\n.tbl-rr-syndicated-s #_cm-css-reset._cm-tvrl-layout ._cm-native-ad-branding,\n.tbl-rr-syndicated-s #_cm-css-reset._cm-tvrl-layout ._cm-branding-separator {\n  font-size: 12px !important;\n}\n.tbl-rr-syndicated-m #_cm-css-reset._cm-tvrl-layout ._cm-native-ad {\n  font-size: 19.2px;\n}\n.tbl-rr-syndicated-m #_cm-css-reset._cm-tvrl-layout ._cm-skip-ad-vid-reel,\n.tbl-rr-syndicated-m #_cm-css-reset._cm-tvrl-layout ._cm-native-ad-cta-button {\n  font-size: 14px;\n}\n.tbl-rr-syndicated-m #_cm-css-reset._cm-tvrl-layout ._cm-ad-choice-text,\n.tbl-rr-syndicated-m #_cm-css-reset._cm-tvrl-layout ._cm-native-ad-branding,\n.tbl-rr-syndicated-m #_cm-css-reset._cm-tvrl-layout ._cm-branding-separator {\n  font-size: 16px !important;\n}\n.tbl-rr-syndicated-l #_cm-css-reset._cm-tvrl-layout ._cm-native-ad {\n  font-size: 23.04px;\n}\n.tbl-rr-syndicated-l #_cm-css-reset._cm-tvrl-layout ._cm-skip-ad-vid-reel,\n.tbl-rr-syndicated-l #_cm-css-reset._cm-tvrl-layout ._cm-native-ad-cta-button {\n  font-size: 14px;\n}\n.tbl-rr-syndicated-l #_cm-css-reset._cm-tvrl-layout ._cm-ad-choice-text,\n.tbl-rr-syndicated-l #_cm-css-reset._cm-tvrl-layout ._cm-native-ad-branding,\n.tbl-rr-syndicated-l #_cm-css-reset._cm-tvrl-layout ._cm-branding-separator {\n  font-size: 19.2px !important;\n}\n.tbl-rr-syndicated-xl #_cm-css-reset._cm-tvrl-layout ._cm-native-ad {\n  font-size: 27.65px;\n}\n.tbl-rr-syndicated-xl #_cm-css-reset._cm-tvrl-layout ._cm-skip-ad-vid-reel,\n.tbl-rr-syndicated-xl #_cm-css-reset._cm-tvrl-layout ._cm-native-ad-cta-button {\n  font-size: 16px;\n}\n.tbl-rr-syndicated-xl #_cm-css-reset._cm-tvrl-layout ._cm-ad-choice-text,\n.tbl-rr-syndicated-xl #_cm-css-reset._cm-tvrl-layout ._cm-native-ad-branding,\n.tbl-rr-syndicated-xl #_cm-css-reset._cm-tvrl-layout ._cm-branding-separator {\n  font-size: 21px !important;\n}\n#_cm-css-reset._cm-tvrl-layout * {\n  box-sizing: border-box;\n  word-break: normal;\n}\n#_cm-css-reset._cm-tvrl-layout ._cm-native-ad {\n  z-index: 102;\n  bottom: 4px;\n  position: absolute;\n  background: black;\n  font-size: 16px;\n  width: 100%;\n  height: calc(54 / 16 * 1em);\n  padding: calc(10 / 16 * 1em) 16px calc(6 / 16 * 1em);\n  display: flex;\n}\n#_cm-css-reset._cm-tvrl-layout ._cm-native-ad::before {\n  content: '';\n  position: absolute;\n  left: 0;\n  width: 100%;\n  pointer-events: none;\n  top: -45.73941822%;\n  height: 45.73941822%;\n  opacity: 1;\n  background: linear-gradient(to top, black, rgba(0, 0, 0, 0));\n}\n#_cm-css-reset._cm-tvrl-layout ._cm-native-ad ._cm-native-ad-bottom {\n  background: black;\n  width: 100%;\n  height: 100%;\n  flex-flow: row;\n  justify-content: space-between;\n  align-items: center;\n  flex-wrap: nowrap;\n  display: flex;\n  gap: calc(16 / 16 * 1em);\n  overflow: hidden;\n  flex: 1 0 0;\n}\n#_cm-css-reset._cm-tvrl-layout ._cm-native-ad ._cm-native-ad-bottom ._cm-native-ad-cta-wrapper {\n  padding: 0;\n}\n#_cm-css-reset._cm-tvrl-layout ._cm-native-ad ._cm-native-ad-bottom ._cm-native-ad-cta-wrapper ._cm-native-ad-cta-button {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  color: #000;\n  text-align: center;\n  font-family: 'Montserrat', 'Roboto Condensed', Arial, sans-serif;\n  font-style: normal;\n  font-weight: 600;\n  line-height: normal;\n  border-radius: 200px;\n  background: #f5f5f5;\n  box-shadow: 4px 5px 30.2px 0 rgba(0, 0, 0, 0.2);\n  height: calc(30 / 12 * 1em);\n  padding: 0 calc(12 / 12 * 1em);\n  text-transform: none;\n}\n#_cm-css-reset._cm-tvrl-layout ._cm-native-ad ._cm-native-ad-bottom ._cm-branding-container {\n  position: absolute;\n  top: -2em;\n  height: 2em;\n  font-size: 12px;\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n  max-width: calc(100% - 32px);\n  overflow: hidden;\n}\n#_cm-css-reset._cm-tvrl-layout ._cm-native-ad ._cm-native-ad-bottom ._cm-branding-container ._cm-ad-choice {\n  position: static;\n  padding: 0;\n  margin: 0;\n}\n#_cm-css-reset._cm-tvrl-layout ._cm-native-ad ._cm-native-ad-bottom ._cm-branding-container ._cm-ad-choice ._cm-ad-choice-text {\n  font-family: 'Montserrat', 'Roboto Condensed', Arial, sans-serif;\n  color: #f5f5f5;\n  font-weight: normal;\n  text-decoration: none;\n  font-feature-settings: 'liga' off, 'clig';\n  font-style: normal;\n}\n#_cm-css-reset._cm-tvrl-layout ._cm-native-ad ._cm-native-ad-bottom ._cm-branding-container ._cm-ad-choice ._cm-ad-choice-text:hover {\n  text-decoration: underline;\n}\n#_cm-css-reset._cm-tvrl-layout ._cm-native-ad ._cm-native-ad-bottom ._cm-branding-container ._cm-ad-choice ._cm-ad-choice-logo {\n  display: none;\n}\n#_cm-css-reset._cm-tvrl-layout ._cm-native-ad ._cm-native-ad-bottom ._cm-branding-container ._cm-branding-separator {\n  background-image: url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%222%22%20height%3D%2212%22%20viewBox%3D%220%200%202%2012%22%20fill%3D%22none%22%3E%3Cpath%20d%3D%22M1%200V12%22%20stroke%3D%22%23F3F3F3%22%20stroke-width%3D%221.06277%22%2F%3E%3C%2Fsvg%3E);\n  background-size: cover;\n  background-repeat: no-repeat;\n  width: 0.08833333em;\n  margin: 0.5em 0.41666667em 0.5em 0.66666667em;\n  height: 1em;\n  font-weight: 600;\n  text-indent: -9999px;\n  overflow: hidden;\n  white-space: nowrap;\n  color: inherit;\n}\n#_cm-css-reset._cm-tvrl-layout ._cm-native-ad ._cm-native-ad-bottom ._cm-branding-container ._cm-native-ad-branding {\n  color: #f5f5f5;\n  font-family: 'Montserrat', 'Roboto Condensed', Arial, sans-serif;\n  font-weight: 600;\n  line-height: normal;\n}\n#_cm-css-reset._cm-tvrl-layout ._cm-native-ad ._cm-native-ad-bottom ._cm-branding-container ._cm-native-ad-icon {\n  display: none !important;\n}\n#_cm-css-reset._cm-tvrl-layout ._cm-native-ad ._cm-native-ad-bottom ._cm-native-ad-description {\n  display: none !important;\n}\n#_cm-css-reset._cm-tvrl-layout ._cm-native-ad ._cm-native-ad-bottom ._cm-native-ad-title {\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-line-clamp: 2 !important;\n  flex: 1 0 0;\n  overflow: hidden;\n  color: #fff;\n  text-overflow: ellipsis;\n  font-size: unset;\n  font-style: normal;\n  line-height: 120%;\n  font-family: 'Montserrat', 'Roboto Condensed', Arial, sans-serif;\n  font-weight: 600;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-rendering: optimizelegibility;\n  position: relative;\n  -webkit-transition: opacity 0.3s ease;\n  -moz-transition: opacity 0.3s ease;\n  -ms-transition: opacity 0.3s ease;\n  -o-transition: opacity 0.3s ease;\n  transition: opacity 0.3s ease;\n}\n#_cm-css-reset._cm-tvrl-layout ._cm-skip-ad-vid-reel {\n  position: absolute;\n  right: 0;\n  z-index: 999;\n  bottom: calc(136 / 12 * 1em - 30 / 12 * 1em);\n  height: calc(30 / 12 * 1em);\n  font-size: 12px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border-radius: 200px 0 0 200px;\n  padding: 0 calc(14 / 12 * 1em) 0 calc(24 / 12 * 1em);\n  width: unset;\n  border-top: 1px solid #f5f5f5;\n  border-bottom: 1px solid #f5f5f5;\n  border-left: 1px solid #f5f5f5;\n  background: rgba(0, 0, 0, 0.3);\n  box-shadow: 4px 5px 30.2px 0 rgba(0, 0, 0, 0.2);\n}\n#_cm-css-reset._cm-tvrl-layout ._cm-skip-ad-vid-reel:hover {\n  cursor: pointer;\n}\n#_cm-css-reset._cm-tvrl-layout ._cm-skip-ad-vid-reel ._cm-skip-ad-text {\n  font-family: 'Montserrat', 'Roboto Condensed', Arial, sans-serif;\n  font-weight: 600;\n  font-style: normal;\n  color: white;\n}\n#_cm-css-reset._cm-tvrl-layout ._cm-skip-ad-vid-reel ._cm-skip-ad-text::before {\n  content: attr(data-text);\n}\n#_cm-css-reset._cm-tvrl-layout ._cm-skip-ad-vid-reel svg {\n  display: none;\n}\n#_cm-css-reset._cm-tvrl-layout .speaker.mute {\n  width: min(40px, 10%);\n  height: unset;\n  aspect-ratio: 1;\n  background-image: url(\"data:image/svg+xml,%3Csvg width='32' height='32' viewBox='0 0 32 32' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='32' height='32' rx='16' fill='black' fill-opacity='0.25'/%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M17.383 8.149L13.9734 11.632C13.8773 11.7301 13.747 11.7853 13.611 11.7853H10.9542C9.75884 11.7853 8.7898 12.7741 8.7898 13.9938V18.0064C8.7898 19.0174 9.45557 19.8698 10.3642 20.1319L8.2674 22.1028C7.94499 22.4059 7.90926 22.9246 8.18676 23.2737C8.47605 23.6376 8.99299 23.6773 9.32909 23.3614L23.7326 9.82224C24.055 9.51918 24.0907 9.00045 23.8132 8.65136C23.524 8.28744 23.007 8.24777 22.6709 8.5637L20.7684 10.352V9.57879C20.7684 9.04184 20.5593 8.52692 20.187 8.14745C19.4123 7.3578 18.1569 7.35849 17.383 8.149ZM19.1713 11.8533V9.57879C19.1713 9.4893 19.136 9.40348 19.0731 9.34023L19.0206 9.29705C18.8907 9.21071 18.7142 9.22521 18.5999 9.34049L15.1469 12.8235C14.7358 13.2382 14.1779 13.4712 13.5962 13.4712H10.9056C10.6192 13.4712 10.387 13.7052 10.387 13.9938V18.0064C10.387 18.295 10.6192 18.529 10.9056 18.529H12.0694L19.1713 11.8533Z' fill='white'/%3E%3Cpath d='M17.383 23.8512L14.3677 20.771L15.5956 19.6293L18.5999 22.6597C18.6627 22.723 18.7478 22.7586 18.8366 22.7586C19.0215 22.7586 19.1713 22.6077 19.1713 22.4214V16.3042L21.9052 13.7619C22.6679 14.1856 23.1636 15.029 23.1636 16.0002C23.1636 17.3968 22.1708 18.5289 20.7684 18.5291V22.4214C20.7684 23.5388 19.8808 24.4446 18.7858 24.4446C18.2596 24.4446 17.7549 24.2311 17.383 23.8512Z' fill='white'/%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M17.383 8.149L13.9734 11.632C13.8773 11.7301 13.747 11.7853 13.611 11.7853H10.9542C9.75884 11.7853 8.7898 12.7741 8.7898 13.9938V18.0064C8.7898 19.0174 9.45557 19.8698 10.3642 20.1319L8.2674 22.1028C7.94499 22.4059 7.90926 22.9246 8.18676 23.2737C8.47605 23.6376 8.99299 23.6773 9.32909 23.3614L23.7326 9.82224C24.055 9.51918 24.0907 9.00045 23.8132 8.65136C23.524 8.28744 23.007 8.24777 22.6709 8.5637L20.7684 10.352V9.57879C20.7684 9.04184 20.5593 8.52692 20.187 8.14745C19.4123 7.3578 18.1569 7.35849 17.383 8.149ZM19.1713 11.8533V9.57879C19.1713 9.4893 19.136 9.40348 19.0731 9.34023L19.0206 9.29705C18.8907 9.21071 18.7142 9.22521 18.5999 9.34049L15.1469 12.8235C14.7358 13.2382 14.1779 13.4712 13.5962 13.4712H10.9056C10.6192 13.4712 10.387 13.7052 10.387 13.9938V18.0064C10.387 18.295 10.6192 18.529 10.9056 18.529H12.0694L19.1713 11.8533Z' stroke='white'/%3E%3Cpath d='M17.383 23.8512L14.3677 20.771L15.5956 19.6293L18.5999 22.6597C18.6627 22.723 18.7478 22.7586 18.8366 22.7586C19.0215 22.7586 19.1713 22.6077 19.1713 22.4214V16.3042L21.9052 13.7619C22.6679 14.1856 23.1636 15.029 23.1636 16.0002C23.1636 17.3968 22.1708 18.5289 20.7684 18.5291V22.4214C20.7684 23.5388 19.8808 24.4446 18.7858 24.4446C18.2596 24.4446 17.7549 24.2311 17.383 23.8512Z' stroke='white'/%3E%3C/svg%3E\");\n  bottom: unset;\n  top: 12px;\n  right: 8px;\n  margin: min(10px, 2.5%);\n  background-size: contain;\n}\n#_cm-css-reset._cm-tvrl-layout ._cm-video-ad {\n  width: 100% !important;\n  height: 100% !important;\n  background-color: black !important;\n  display: flex !important;\n  flex-direction: column !important;\n}\n#_cm-css-reset._cm-tvrl-layout ._cm-video-ad video {\n  width: 100% !important;\n  height: unset !important;\n  object-fit: contain !important;\n  position: static !important;\n  aspect-ratio: 16 / 9 !important;\n  flex-grow: 1;\n}\n#_cm-css-reset._cm-tvrl-layout ._cm-video-ad .vpaid-player-container .video_controls_mobile .mc-progressbar_area,\n#_cm-css-reset._cm-tvrl-layout ._cm-video-ad .vpaid-player-container .video_controls .cm_video_controls_progressbar_area {\n  height: 4px;\n  border-radius: 10px;\n  overflow: hidden;\n  left: 16px;\n  width: calc(100% - 16px - 16px);\n}\n#_cm-css-reset._cm-tvrl-layout ._cm-video-ad .vpaid-player-container .video_controls_mobile .mc-progressbar_area .mc-progressbar_bg.white_bg,\n#_cm-css-reset._cm-tvrl-layout ._cm-video-ad .vpaid-player-container .video_controls .cm_video_controls_progressbar_area .mc-progressbar_bg.white_bg,\n#_cm-css-reset._cm-tvrl-layout ._cm-video-ad .vpaid-player-container .video_controls_mobile .mc-progressbar_area .cm_video_controls_progressbar.white_bg,\n#_cm-css-reset._cm-tvrl-layout ._cm-video-ad .vpaid-player-container .video_controls .cm_video_controls_progressbar_area .cm_video_controls_progressbar.white_bg,\n#_cm-css-reset._cm-tvrl-layout ._cm-video-ad .vpaid-player-container .video_controls_mobile .mc-progressbar_area .mc-progressbar_bg.blue_bg,\n#_cm-css-reset._cm-tvrl-layout ._cm-video-ad .vpaid-player-container .video_controls .cm_video_controls_progressbar_area .mc-progressbar_bg.blue_bg,\n#_cm-css-reset._cm-tvrl-layout ._cm-video-ad .vpaid-player-container .video_controls_mobile .mc-progressbar_area .cm_video_controls_progressbar.blue_bg,\n#_cm-css-reset._cm-tvrl-layout ._cm-video-ad .vpaid-player-container .video_controls .cm_video_controls_progressbar_area .cm_video_controls_progressbar.blue_bg {\n  border-radius: 10px;\n}\n#_cm-css-reset._cm-tvrl-layout ._cm-video-ad .vpaid-player-container .video_controls_mobile .mc-progressbar_area .mc-progressbar_bg.blue_bg,\n#_cm-css-reset._cm-tvrl-layout ._cm-video-ad .vpaid-player-container .video_controls .cm_video_controls_progressbar_area .mc-progressbar_bg.blue_bg,\n#_cm-css-reset._cm-tvrl-layout ._cm-video-ad .vpaid-player-container .video_controls_mobile .mc-progressbar_area .cm_video_controls_progressbar.blue_bg,\n#_cm-css-reset._cm-tvrl-layout ._cm-video-ad .vpaid-player-container .video_controls .cm_video_controls_progressbar_area .cm_video_controls_progressbar.blue_bg {\n  background: white;\n}\n#_cm-css-reset._cm-tvrl-layout ._cm_rtl .vpaid-player-container .video_controls,\n#_cm-css-reset._cm-tvrl-layout ._cm_rtl .vpaid-player-container .video_controls_mobile {\n  direction: rtl;\n}\n#_cm-css-reset._cm-tvrl-layout ._cm_rtl ._cm-skip-ad-vid-reel {\n  right: unset;\n  left: 0;\n  border-radius: 0 200px 200px 0;\n  padding: 0 calc(24 / 12 * 1em) 0 calc(14 / 12 * 1em);\n}\n#_cm-css-reset._cm-tvrl-layout ._cm_rtl ._cm-native-ad {\n  direction: rtl;\n}\n#_cm-css-reset._cm-tvrl-layout ._cm_rtl ._cm-native-ad-title {\n  text-align: right;\n}\n#_cm-css-reset._cm-ad-loading-progress {\n  background: #e3e3e3;\n  position: absolute !important;\n  z-index: 30000 !important;\n  cursor: pointer !important;\n  overflow: hidden !important;\n  padding: 0 !important;\n  display: none;\n  font-family: 'Segoe UI Semilight', 'Segoe WP Semilight', 'Segoe WP', 'Segoe UI', Arial, Sans-Serif !important;\n  font-size: 14px;\n  flex-direction: row;\n  align-items: center;\n  pointer-events: auto !important;\n}\n#_cm-css-reset._cm-ad-loading-progress ._cm-ad-loading-progress-container {\n  text-align: center;\n  color: #333333;\n  width: 63%;\n  margin: auto;\n  display: none;\n}\n#_cm-css-reset._cm-ad-loading-progress ._cm-ad-loading-progress-container ._cm-ad-loading-progress_percent_span {\n  color: #ababab;\n}\n#_cm-css-reset._cm-ad-loading-progress ._cm-ad-loading-progress-container ._cm-ad-loading-progress-bar {\n  width: 100%;\n  background-color: #c0c0c0;\n  height: 4px;\n}\n#_cm-css-reset._cm-ad-loading-progress ._cm-ad-loading-progress-container ._cm-ad-loading-progress-bar ._cm-ad-loading-progress-bar-loaded {\n  margin: 0px;\n  width: 0%;\n  background-color: #434343;\n  height: 4px;\n}\n#_cm-css-reset._cm-ad-loading-progress.topLeftPosition {\n  top: 0px;\n  left: 0px;\n}\n.cm_video_content_wrapper {\n  width: 100%;\n  height: 100%;\n  background-color: black;\n}\n.cm_video_content_video_element {\n  width: 100%;\n  height: 100%;\n  frameborder: 0;\n  border: 0;\n  padding: 0;\n  scrolling: no;\n  marginwidth: 0;\n  marginheight: 0;\n}\n._cm-content-video {\n  display: block;\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 99990;\n}\n._cm-os-slider ._cm-content-video {\n  z-index: 2147483647;\n}\n#_cm-css-reset ._cm-progress-bar {\n  width: 100%;\n  height: 5px;\n  bottom: 0%;\n  cursor: default;\n  position: absolute !important;\n}\n#_cm-css-reset .cm_video_controls_progressbar_area .cm_video_controls_progressbar,\n#_cm-css-reset .cm_video_controls_progressbar_area .cm_video_controls_progressbar_bg {\n  height: 100%;\n  position: absolute !important;\n  display: block;\n  margin: 0;\n  padding: 0;\n  background-color: transparent;\n}\n#_cm-css-reset .video_controls.show {\n  display: block;\n  margin: 0;\n  padding: 0;\n}\n#_cm-css-reset .video_controls.show * {\n  position: absolute !important;\n  display: block;\n  margin: 0;\n  padding: 0;\n  background-color: transparent;\n}\n#_cm-css-reset .video_controls {\n  width: 100%;\n  height: 100%;\n  z-index: 1000;\n  left: 0;\n  bottom: -32px;\n  -webkit-transition: bottom 0.35s ease-in-out;\n  -moz-transition: bottom 0.35s ease-in-out;\n  -o-transition: bottom 0.35s ease-in-out;\n  transition: bottom 0.35s ease-in-out;\n}\n#_cm-css-reset .video_controls .control {\n  z-index: 100;\n}\n#_cm-css-reset .video_controls .interactive {\n  pointer-events: all;\n  cursor: pointer;\n}\n#_cm-css-reset .video_controls.hide,\n#_cm-css-reset .video_controls .hide {\n  display: none;\n}\n#_cm-css-reset .video_controls.show,\n#_cm-css-reset .video_controls .show {\n  display: block;\n}\n#_cm-css-reset .video_controls .cm_video_controls_progressbar_area {\n  width: 100%;\n  height: 5px;\n  bottom: 0%;\n  cursor: default;\n}\n#_cm-css-reset .video_controls .cm_video_controls_progressbar_area .cm_video_controls_progressbar {\n  height: 100%;\n}\n#_cm-css-reset .video_controls .cm_video_controls_progressbar_area .cm_video_controls_progressbar_bg {\n  width: 100%;\n  height: 100%;\n}\n#_cm-css-reset .video_controls .white_bg {\n  background: rgba(255, 255, 255, 0.3);\n}\n#_cm-css-reset .video_controls .blue_bg {\n  background: #154b91;\n  -webkit-transition: width 0.5s ease;\n  -moz-transition: width 0.5s ease;\n  -o-transition: width 0.5s ease;\n  transition: width 0.5s ease;\n  width: 0%;\n}\n#_cm-css-reset .video_controls .blue_bg.init_bg {\n  -webkit-transition: none;\n  -moz-transition: none;\n  -o-transition: none;\n  transition: none;\n}\n#_cm-css-reset .video_controls {\n  width: 100%;\n  height: 27px;\n}\n#_cm-css-reset .video_controls .cm_video_controls_main_area .play_pause {\n  top: 3px;\n  left: 5px;\n  width: 20px;\n  height: 20px;\n}\n#_cm-css-reset .video_controls .cm_video_controls_main_area .play_pause .pause {\n  width: 40px;\n  height: 27px;\n  top: -7px;\n  left: -8px;\n  background-size: 36px;\n}\n#_cm-css-reset .video_controls .cm_video_controls_main_area .play_pause .play {\n  border-top: 5px solid transparent;\n  border-left: 10px solid #fff;\n  border-bottom: 5px solid transparent;\n  left: 6px;\n  top: 5px;\n  z-index: 102;\n}\n#_cm-css-reset .video_controls .cm_video_controls_main_area .title {\n  top: 7px;\n  left: 30px;\n  width: 140px;\n  text-align: left;\n}\n#_cm-css-reset .video_controls .cm_video_controls_main_area .timer {\n  top: 6px;\n  right: 110px;\n}\n#_cm-css-reset .video_controls .text {\n  color: white;\n  font-size: 13px;\n  font-weight: bold;\n  font-family: Arial, Helvetica, sans-serif;\n  top: 10px;\n  left: 28px;\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  cursor: default;\n}\n#_cm-css-reset .video_controls .text.opt-out-hidden {\n  left: 13px;\n}\n#_cm-css-reset .video_controls {\n  width: 100%;\n  height: 100%;\n  right: 0px;\n  bottom: 0;\n}\n#_cm-css-reset .video_controls .video_controls_main_area .cm_video_controls_mute {\n  width: 35px;\n  height: 27px;\n  right: 8px;\n  bottom: 5px;\n  background-size: 44px;\n  box-sizing: content-box;\n  background-position-y: center;\n}\n#_cm-css-reset .video_controls .video_controls_main_area .cm_video_controls_volume {\n  width: 35px;\n  height: 27px;\n  box-sizing: content-box;\n  background-size: 44px;\n  background-position-y: center;\n}\n#_cm-css-reset .video_controls .video_controls_main_area .cm_video_controls_mute .display_mute {\n  display: none;\n}\n#_cm-css-reset .video_controls .video_controls_main_area .cm_video_controls_mute .display_unmute {\n  display: none;\n}\n#_cm-css-reset .video_controls .video_controls_main_area .video-controls-scroller-area {\n  width: 80px;\n  height: 100%;\n  right: 5px;\n  top: 0%;\n}\n#_cm-css-reset .playerSaveButton {\n  position: absolute;\n  border: 1px solid #fff;\n  border-radius: 9px;\n  width: 50px;\n  height: 24px;\n  top: 20%;\n  left: 0;\n  font-size: 14px;\n  color: #fff;\n  text-align: center;\n  line-height: 24px;\n  cursor: pointer;\n}\n#_cm-css-reset .video_controls_mobile {\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  pointer-events: none;\n  z-index: 1001;\n}\n#_cm-css-reset .video_controls .video_controls_main_area {\n  pointer-events: none;\n}\n#_cm-css-reset .video_controls .video_controls_main_area .cm_video_controls_playpause.hide {\n  display: none;\n}\n#_cm-css-reset .video_controls .video_controls_main_area .cm_video_controls_playpause.show {\n  display: block;\n}\n#_cm-css-reset .video_controls .video_controls_main_area .cm_video_controls_playpause {\n  bottom: 28px;\n  left: 5px;\n}\n#_cm-css-reset .video_controls .video_controls_main_area .cm_video_controls_playpause .pause {\n  width: 40px;\n  height: 27px;\n  top: -10px;\n  left: -8px;\n  background-size: 40px;\n}\n#_cm-css-reset .video_controls .video_controls_main_area .cm_video_controls_playpause .play {\n  border-top: 6px solid transparent;\n  border-left: 10px solid #fff;\n  border-bottom: 6px solid transparent;\n  left: 7px;\n  top: 3px;\n  z-index: 102;\n}\n#_cm-css-reset ._cm-background-loading {\n  position: absolute;\n  z-index: 1000000000000000;\n  padding: 0;\n  margin: auto;\n  display: block;\n  top: 0;\n  left: 0;\n  width: 80px;\n  right: 0;\n  height: 80px;\n  bottom: 0;\n  background-size: contain;\n}\n._cm-components-wrapper {\n  position: relative;\n  z-index: 100000001;\n}\n#_cm-css-reset #_cm-content-carousel-area._cm-content-carousel-area {\n  background-color: #fffefd !important;\n  position: absolute !important;\n  z-index: 2147483647 !important;\n  padding-left: 0px !important;\n  box-sizing: border-box !important;\n  bottom: 0px !important;\n  left: 0px !important;\n  bottom: auto !important;\n  pointer-events: auto !important;\n  width: 100% !important;\n  height: 70px !important;\n  cursor: pointer !important;\n  overflow: hidden;\n}\n#_cm-css-reset #_cm-content-carousel-area._cm-content-carousel-area ._cm-content-carousel-arrows {\n  position: absolute;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  display: flex;\n  background-color: transparent;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n  pointer-events: none;\n}\n#_cm-css-reset #_cm-content-carousel-area._cm-content-carousel-area ._cm-content-carousel-arrows ._cm-content-carousel-arrow {\n  pointer-events: auto;\n  cursor: pointer;\n  padding: 4px;\n}\n#_cm-css-reset #_cm-content-carousel-area._cm-content-carousel-area ._cm-content-carousel-blocker {\n  background-color: black;\n  opacity: 0.5;\n  position: absolute;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  display: none;\n}\n#_cm-css-reset #_cm-content-carousel-area._cm-content-carousel-area ._cm-content-carousel-items-container-wrapper::-webkit-scrollbar {\n  display: none;\n}\n#_cm-css-reset #_cm-content-carousel-area._cm-content-carousel-area ._cm-content-carousel-items-container-wrapper {\n  overflow-x: auto;\n  -ms-overflow-style: none;\n  /* IE and Edge */\n  scrollbar-width: none;\n  /* Firefox */\n  position: absolute !important;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  overflow-x: scroll;\n}\n#_cm-css-reset #_cm-content-carousel-area._cm-content-carousel-area ._cm-content-carousel-items-container-wrapper ._cm-content-carousel-items-container {\n  border: 1px solid #fffefd !important;\n  z-index: 2 !important;\n  font-size: 14px !important;\n  display: flex;\n  flex-direction: row;\n  flex-wrap: nowrap;\n  height: 70px !important;\n  min-width: fit-content;\n}\n#_cm-css-reset #_cm-content-carousel-area._cm-content-carousel-area ._cm-content-carousel-items-container-wrapper ._cm-content-carousel-items-container ._cm-content-carousel-item:hover ._cm-content-carousel-item-play-icon {\n  display: block;\n}\n#_cm-css-reset #_cm-content-carousel-area._cm-content-carousel-area ._cm-content-carousel-items-container-wrapper ._cm-content-carousel-items-container ._cm-content-carousel-item {\n  position: relative;\n  width: 120px;\n  height: 70px;\n  margin: 0 2px;\n  font-size: 14px;\n  color: white;\n  line-height: 12px;\n  font-size: 10px;\n}\n#_cm-css-reset #_cm-content-carousel-area._cm-content-carousel-area ._cm-content-carousel-items-container-wrapper ._cm-content-carousel-items-container ._cm-content-carousel-item _cm-content-carousel-item-image {\n  background-position: center;\n  /* Center the image */\n  background-repeat: no-repeat;\n  /* Do not repeat the image */\n  background-size: cover;\n}\n#_cm-css-reset #_cm-content-carousel-area._cm-content-carousel-area ._cm-content-carousel-items-container-wrapper ._cm-content-carousel-items-container ._cm-content-carousel-item ._cm-content-carousel-item-play-icon {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  display: none;\n  padding: 4px;\n}\n#_cm-css-reset #_cm-content-carousel-area._cm-content-carousel-area ._cm-content-carousel-items-container-wrapper ._cm-content-carousel-items-container ._cm-content-carousel-item ._cm-content-carousel-item-description {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100px;\n  height: 12px;\n  padding: 5px 10px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n#_cm-css-reset #_cm-content-carousel-area._cm-content-carousel-area ._cm-content-carousel-items-container-wrapper ._cm-content-carousel-items-container ._cm-content-carousel-item ._cm-content-carousel-item-playing-now {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100px;\n  height: 25px;\n  padding-top: 20px;\n  text-align: center;\n}\n#_cm-css-reset #_cm-content-carousel-area._cm-content-carousel-area ._cm-content-carousel-items-container-wrapper ._cm-content-carousel-items-container ._cm-content-carousel-item.false ._cm-content-carousel-item-description {\n  display: block;\n}\n#_cm-css-reset #_cm-content-carousel-area._cm-content-carousel-area ._cm-content-carousel-items-container-wrapper ._cm-content-carousel-items-container ._cm-content-carousel-item.false ._cm-content-carousel-item-playing-now {\n  display: none !important;\n}\n#_cm-css-reset #_cm-content-carousel-area._cm-content-carousel-area ._cm-content-carousel-items-container-wrapper ._cm-content-carousel-items-container ._cm-content-carousel-item.true ._cm-content-carousel-item-description {\n  display: none;\n}\n#_cm-css-reset #_cm-content-carousel-area._cm-content-carousel-area ._cm-content-carousel-items-container-wrapper ._cm-content-carousel-items-container ._cm-content-carousel-item.true ._cm-content-carousel-item-play-icon {\n  display: none !important;\n}\n#_cm-css-reset #_cm-content-carousel-area._cm-content-carousel-area ._cm-content-carousel-items-container-wrapper ._cm-content-carousel-items-container ._cm-content-carousel-item.true ._cm-content-carousel-item-playing-now {\n  display: block !important;\n}\n#_cm-css-reset #_cm-content-carousel-area._cm-content-carousel-area ._cm-content-carousel-items-container-wrapper ._cm-content-carousel-items-container ._cm-content-carousel-item:first-child {\n  margin-left: 0;\n}\n#_cm-css-reset #_cm-content-carousel-area._cm-content-carousel-area ._cm-content-carousel-items-container-wrapper ._cm-content-carousel-items-container ._cm-content-carousel-item:last-child {\n  margin-right: 0;\n}\n",""]);const o=s},140:function(e,t,i){e.exports=function(){var e="1.13.7",t="object"==typeof self&&self.self===self&&self||"object"==typeof i.g&&i.g.global===i.g&&i.g||Function("return this")()||{},n=Array.prototype,s=Object.prototype,o="undefined"!=typeof Symbol?Symbol.prototype:null,a=n.push,r=n.slice,l=s.toString,d=s.hasOwnProperty,c="undefined"!=typeof ArrayBuffer,h="undefined"!=typeof DataView,m=Array.isArray,p=Object.keys,u=Object.create,g=c&&ArrayBuffer.isView,v=isNaN,f=isFinite,_=!{toString:null}.propertyIsEnumerable("toString"),b=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],y=Math.pow(2,53)-1;function A(e,t){return t=null==t?e.length-1:+t,function(){for(var i=Math.max(arguments.length-t,0),n=Array(i),s=0;s<i;s++)n[s]=arguments[s+t];switch(t){case 0:return e.call(this,n);case 1:return e.call(this,arguments[0],n);case 2:return e.call(this,arguments[0],arguments[1],n)}var o=Array(t+1);for(s=0;s<t;s++)o[s]=arguments[s];return o[t]=n,e.apply(this,o)}}function S(e){var t=typeof e;return"function"===t||"object"===t&&!!e}function w(e){return null===e}function T(e){return void 0===e}function P(e){return!0===e||!1===e||"[object Boolean]"===l.call(e)}function E(e){return!(!e||1!==e.nodeType)}function C(e){var t="[object "+e+"]";return function(e){return l.call(e)===t}}var x=C("String"),O=C("Number"),I=C("Date"),R=C("RegExp"),N=C("Error"),D=C("Symbol"),M=C("ArrayBuffer"),V=C("Function"),k=t.document&&t.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof k&&(V=function(e){return"function"==typeof e||!1});var L=V,F=C("Object"),B=h&&(!/\[native code\]/.test(String(DataView))||F(new DataView(new ArrayBuffer(8)))),z="undefined"!=typeof Map&&F(new Map),U=C("DataView");function H(e){return null!=e&&L(e.getInt8)&&M(e.buffer)}var W=B?H:U,j=m||C("Array");function G(e,t){return null!=e&&d.call(e,t)}var $=C("Arguments");!function(){$(arguments)||($=function(e){return G(e,"callee")})}();var Y=$;function q(e){return!D(e)&&f(e)&&!isNaN(parseFloat(e))}function K(e){return O(e)&&v(e)}function Q(e){return function(){return e}}function Z(e){return function(t){var i=e(t);return"number"==typeof i&&i>=0&&i<=y}}function X(e){return function(t){return null==t?void 0:t[e]}}var J=X("byteLength"),ee=Z(J),te=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function ie(e){return g?g(e)&&!W(e):ee(e)&&te.test(l.call(e))}var ne=c?ie:Q(!1),se=X("length");function oe(e){for(var t={},i=e.length,n=0;n<i;++n)t[e[n]]=!0;return{contains:function(e){return!0===t[e]},push:function(i){return t[i]=!0,e.push(i)}}}function ae(e,t){t=oe(t);var i=b.length,n=e.constructor,o=L(n)&&n.prototype||s,a="constructor";for(G(e,a)&&!t.contains(a)&&t.push(a);i--;)(a=b[i])in e&&e[a]!==o[a]&&!t.contains(a)&&t.push(a)}function re(e){if(!S(e))return[];if(p)return p(e);var t=[];for(var i in e)G(e,i)&&t.push(i);return _&&ae(e,t),t}function le(e){if(null==e)return!0;var t=se(e);return"number"==typeof t&&(j(e)||x(e)||Y(e))?0===t:0===se(re(e))}function de(e,t){var i=re(t),n=i.length;if(null==e)return!n;for(var s=Object(e),o=0;o<n;o++){var a=i[o];if(t[a]!==s[a]||!(a in s))return!1}return!0}function ce(e){return e instanceof ce?e:this instanceof ce?void(this._wrapped=e):new ce(e)}function he(e){return new Uint8Array(e.buffer||e,e.byteOffset||0,J(e))}ce.VERSION=e,ce.prototype.value=function(){return this._wrapped},ce.prototype.valueOf=ce.prototype.toJSON=ce.prototype.value,ce.prototype.toString=function(){return String(this._wrapped)};var me="[object DataView]";function pe(e,t,i,n){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var s=typeof e;return("function"===s||"object"===s||"object"==typeof t)&&ue(e,t,i,n)}function ue(e,t,i,n){e instanceof ce&&(e=e._wrapped),t instanceof ce&&(t=t._wrapped);var s=l.call(e);if(s!==l.call(t))return!1;if(B&&"[object Object]"==s&&W(e)){if(!W(t))return!1;s=me}switch(s){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return o.valueOf.call(e)===o.valueOf.call(t);case"[object ArrayBuffer]":case me:return ue(he(e),he(t),i,n)}var a="[object Array]"===s;if(!a&&ne(e)){if(J(e)!==J(t))return!1;if(e.buffer===t.buffer&&e.byteOffset===t.byteOffset)return!0;a=!0}if(!a){if("object"!=typeof e||"object"!=typeof t)return!1;var r=e.constructor,d=t.constructor;if(r!==d&&!(L(r)&&r instanceof r&&L(d)&&d instanceof d)&&"constructor"in e&&"constructor"in t)return!1}n=n||[];for(var c=(i=i||[]).length;c--;)if(i[c]===e)return n[c]===t;if(i.push(e),n.push(t),a){if((c=e.length)!==t.length)return!1;for(;c--;)if(!pe(e[c],t[c],i,n))return!1}else{var h,m=re(e);if(c=m.length,re(t).length!==c)return!1;for(;c--;)if(!G(t,h=m[c])||!pe(e[h],t[h],i,n))return!1}return i.pop(),n.pop(),!0}function ge(e,t){return pe(e,t)}function ve(e){if(!S(e))return[];var t=[];for(var i in e)t.push(i);return _&&ae(e,t),t}function fe(e){var t=se(e);return function(i){if(null==i)return!1;var n=ve(i);if(se(n))return!1;for(var s=0;s<t;s++)if(!L(i[e[s]]))return!1;return e!==we||!L(i[_e])}}var _e="forEach",be="has",ye=["clear","delete"],Ae=["get",be,"set"],Se=ye.concat(_e,Ae),we=ye.concat(Ae),Te=["add"].concat(ye,_e,be),Pe=z?fe(Se):C("Map"),Ee=z?fe(we):C("WeakMap"),Ce=z?fe(Te):C("Set"),xe=C("WeakSet");function Oe(e){for(var t=re(e),i=t.length,n=Array(i),s=0;s<i;s++)n[s]=e[t[s]];return n}function Ie(e){for(var t=re(e),i=t.length,n=Array(i),s=0;s<i;s++)n[s]=[t[s],e[t[s]]];return n}function Re(e){for(var t={},i=re(e),n=0,s=i.length;n<s;n++)t[e[i[n]]]=i[n];return t}function Ne(e){var t=[];for(var i in e)L(e[i])&&t.push(i);return t.sort()}function De(e,t){return function(i){var n=arguments.length;if(t&&(i=Object(i)),n<2||null==i)return i;for(var s=1;s<n;s++)for(var o=arguments[s],a=e(o),r=a.length,l=0;l<r;l++){var d=a[l];t&&void 0!==i[d]||(i[d]=o[d])}return i}}var Me=De(ve),Ve=De(re),ke=De(ve,!0);function Le(){return function(){}}function Fe(e){if(!S(e))return{};if(u)return u(e);var t=Le();t.prototype=e;var i=new t;return t.prototype=null,i}function Be(e,t){var i=Fe(e);return t&&Ve(i,t),i}function ze(e){return S(e)?j(e)?e.slice():Me({},e):e}function Ue(e,t){return t(e),e}function He(e){return j(e)?e:[e]}function We(e){return ce.toPath(e)}function je(e,t){for(var i=t.length,n=0;n<i;n++){if(null==e)return;e=e[t[n]]}return i?e:void 0}function Ge(e,t,i){var n=je(e,We(t));return T(n)?i:n}function $e(e,t){for(var i=(t=We(t)).length,n=0;n<i;n++){var s=t[n];if(!G(e,s))return!1;e=e[s]}return!!i}function Ye(e){return e}function qe(e){return e=Ve({},e),function(t){return de(t,e)}}function Ke(e){return e=We(e),function(t){return je(t,e)}}function Qe(e,t,i){if(void 0===t)return e;switch(null==i?3:i){case 1:return function(i){return e.call(t,i)};case 3:return function(i,n,s){return e.call(t,i,n,s)};case 4:return function(i,n,s,o){return e.call(t,i,n,s,o)}}return function(){return e.apply(t,arguments)}}function Ze(e,t,i){return null==e?Ye:L(e)?Qe(e,t,i):S(e)&&!j(e)?qe(e):Ke(e)}function Xe(e,t){return Ze(e,t,1/0)}function Je(e,t,i){return ce.iteratee!==Xe?ce.iteratee(e,t):Ze(e,t,i)}function et(e,t,i){t=Je(t,i);for(var n=re(e),s=n.length,o={},a=0;a<s;a++){var r=n[a];o[r]=t(e[r],r,e)}return o}function tt(){}function it(e){return null==e?tt:function(t){return Ge(e,t)}}function nt(e,t,i){var n=Array(Math.max(0,e));t=Qe(t,i,1);for(var s=0;s<e;s++)n[s]=t(s);return n}function st(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))}ce.toPath=He,ce.iteratee=Xe;var ot=Date.now||function(){return(new Date).getTime()};function at(e){var t=function(t){return e[t]},i="(?:"+re(e).join("|")+")",n=RegExp(i),s=RegExp(i,"g");return function(e){return e=null==e?"":""+e,n.test(e)?e.replace(s,t):e}}var rt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},lt=at(rt),dt=at(Re(rt)),ct=ce.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},ht=/(.)^/,mt={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},pt=/\\|'|\r|\n|\u2028|\u2029/g;function ut(e){return"\\"+mt[e]}var gt=/^\s*(\w|\$)+\s*$/;function vt(e,t,i){!t&&i&&(t=i),t=ke({},t,ce.templateSettings);var n=RegExp([(t.escape||ht).source,(t.interpolate||ht).source,(t.evaluate||ht).source].join("|")+"|$","g"),s=0,o="__p+='";e.replace(n,(function(t,i,n,a,r){return o+=e.slice(s,r).replace(pt,ut),s=r+t.length,i?o+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'":n?o+="'+\n((__t=("+n+"))==null?'':__t)+\n'":a&&(o+="';\n"+a+"\n__p+='"),t})),o+="';\n";var a,r=t.variable;if(r){if(!gt.test(r))throw new Error("variable is not a bare identifier: "+r)}else o="with(obj||{}){\n"+o+"}\n",r="obj";o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{a=new Function(r,"_",o)}catch(e){throw e.source=o,e}var l=function(e){return a.call(this,e,ce)};return l.source="function("+r+"){\n"+o+"}",l}function ft(e,t,i){var n=(t=We(t)).length;if(!n)return L(i)?i.call(e):i;for(var s=0;s<n;s++){var o=null==e?void 0:e[t[s]];void 0===o&&(o=i,s=n),e=L(o)?o.call(e):o}return e}var _t=0;function bt(e){var t=++_t+"";return e?e+t:t}function yt(e){var t=ce(e);return t._chain=!0,t}function At(e,t,i,n,s){if(!(n instanceof t))return e.apply(i,s);var o=Fe(e.prototype),a=e.apply(o,s);return S(a)?a:o}var St=A((function(e,t){var i=St.placeholder,n=function(){for(var s=0,o=t.length,a=Array(o),r=0;r<o;r++)a[r]=t[r]===i?arguments[s++]:t[r];for(;s<arguments.length;)a.push(arguments[s++]);return At(e,n,this,this,a)};return n}));St.placeholder=ce;var wt=A((function(e,t,i){if(!L(e))throw new TypeError("Bind must be called on a function");var n=A((function(s){return At(e,n,t,this,i.concat(s))}));return n})),Tt=Z(se);function Pt(e,t,i,n){if(n=n||[],t||0===t){if(t<=0)return n.concat(e)}else t=1/0;for(var s=n.length,o=0,a=se(e);o<a;o++){var r=e[o];if(Tt(r)&&(j(r)||Y(r)))if(t>1)Pt(r,t-1,i,n),s=n.length;else for(var l=0,d=r.length;l<d;)n[s++]=r[l++];else i||(n[s++]=r)}return n}var Et=A((function(e,t){var i=(t=Pt(t,!1,!1)).length;if(i<1)throw new Error("bindAll must be passed function names");for(;i--;){var n=t[i];e[n]=wt(e[n],e)}return e}));function Ct(e,t){var i=function(n){var s=i.cache,o=""+(t?t.apply(this,arguments):n);return G(s,o)||(s[o]=e.apply(this,arguments)),s[o]};return i.cache={},i}var xt=A((function(e,t,i){return setTimeout((function(){return e.apply(null,i)}),t)})),Ot=St(xt,ce,1);function It(e,t,i){var n,s,o,a,r=0;i||(i={});var l=function(){r=!1===i.leading?0:ot(),n=null,a=e.apply(s,o),n||(s=o=null)},d=function(){var d=ot();r||!1!==i.leading||(r=d);var c=t-(d-r);return s=this,o=arguments,c<=0||c>t?(n&&(clearTimeout(n),n=null),r=d,a=e.apply(s,o),n||(s=o=null)):n||!1===i.trailing||(n=setTimeout(l,c)),a};return d.cancel=function(){clearTimeout(n),r=0,n=s=o=null},d}function Rt(e,t,i){var n,s,o,a,r,l=function(){var d=ot()-s;t>d?n=setTimeout(l,t-d):(n=null,i||(a=e.apply(r,o)),n||(o=r=null))},d=A((function(d){return r=this,o=d,s=ot(),n||(n=setTimeout(l,t),i&&(a=e.apply(r,o))),a}));return d.cancel=function(){clearTimeout(n),n=o=r=null},d}function Nt(e,t){return St(t,e)}function Dt(e){return function(){return!e.apply(this,arguments)}}function Mt(){var e=arguments,t=e.length-1;return function(){for(var i=t,n=e[t].apply(this,arguments);i--;)n=e[i].call(this,n);return n}}function Vt(e,t){return function(){if(--e<1)return t.apply(this,arguments)}}function kt(e,t){var i;return function(){return--e>0&&(i=t.apply(this,arguments)),e<=1&&(t=null),i}}var Lt=St(kt,2);function Ft(e,t,i){t=Je(t,i);for(var n,s=re(e),o=0,a=s.length;o<a;o++)if(t(e[n=s[o]],n,e))return n}function Bt(e){return function(t,i,n){i=Je(i,n);for(var s=se(t),o=e>0?0:s-1;o>=0&&o<s;o+=e)if(i(t[o],o,t))return o;return-1}}var zt=Bt(1),Ut=Bt(-1);function Ht(e,t,i,n){for(var s=(i=Je(i,n,1))(t),o=0,a=se(e);o<a;){var r=Math.floor((o+a)/2);i(e[r])<s?o=r+1:a=r}return o}function Wt(e,t,i){return function(n,s,o){var a=0,l=se(n);if("number"==typeof o)e>0?a=o>=0?o:Math.max(o+l,a):l=o>=0?Math.min(o+1,l):o+l+1;else if(i&&o&&l)return n[o=i(n,s)]===s?o:-1;if(s!=s)return(o=t(r.call(n,a,l),K))>=0?o+a:-1;for(o=e>0?a:l-1;o>=0&&o<l;o+=e)if(n[o]===s)return o;return-1}}var jt=Wt(1,zt,Ht),Gt=Wt(-1,Ut);function $t(e,t,i){var n=(Tt(e)?zt:Ft)(e,t,i);if(void 0!==n&&-1!==n)return e[n]}function Yt(e,t){return $t(e,qe(t))}function qt(e,t,i){var n,s;if(t=Qe(t,i),Tt(e))for(n=0,s=e.length;n<s;n++)t(e[n],n,e);else{var o=re(e);for(n=0,s=o.length;n<s;n++)t(e[o[n]],o[n],e)}return e}function Kt(e,t,i){t=Je(t,i);for(var n=!Tt(e)&&re(e),s=(n||e).length,o=Array(s),a=0;a<s;a++){var r=n?n[a]:a;o[a]=t(e[r],r,e)}return o}function Qt(e){var t=function(t,i,n,s){var o=!Tt(t)&&re(t),a=(o||t).length,r=e>0?0:a-1;for(s||(n=t[o?o[r]:r],r+=e);r>=0&&r<a;r+=e){var l=o?o[r]:r;n=i(n,t[l],l,t)}return n};return function(e,i,n,s){var o=arguments.length>=3;return t(e,Qe(i,s,4),n,o)}}var Zt=Qt(1),Xt=Qt(-1);function Jt(e,t,i){var n=[];return t=Je(t,i),qt(e,(function(e,i,s){t(e,i,s)&&n.push(e)})),n}function ei(e,t,i){return Jt(e,Dt(Je(t)),i)}function ti(e,t,i){t=Je(t,i);for(var n=!Tt(e)&&re(e),s=(n||e).length,o=0;o<s;o++){var a=n?n[o]:o;if(!t(e[a],a,e))return!1}return!0}function ii(e,t,i){t=Je(t,i);for(var n=!Tt(e)&&re(e),s=(n||e).length,o=0;o<s;o++){var a=n?n[o]:o;if(t(e[a],a,e))return!0}return!1}function ni(e,t,i,n){return Tt(e)||(e=Oe(e)),("number"!=typeof i||n)&&(i=0),jt(e,t,i)>=0}var si=A((function(e,t,i){var n,s;return L(t)?s=t:(t=We(t),n=t.slice(0,-1),t=t[t.length-1]),Kt(e,(function(e){var o=s;if(!o){if(n&&n.length&&(e=je(e,n)),null==e)return;o=e[t]}return null==o?o:o.apply(e,i)}))}));function oi(e,t){return Kt(e,Ke(t))}function ai(e,t){return Jt(e,qe(t))}function ri(e,t,i){var n,s,o=-1/0,a=-1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var r=0,l=(e=Tt(e)?e:Oe(e)).length;r<l;r++)null!=(n=e[r])&&n>o&&(o=n);else t=Je(t,i),qt(e,(function(e,i,n){((s=t(e,i,n))>a||s===-1/0&&o===-1/0)&&(o=e,a=s)}));return o}function li(e,t,i){var n,s,o=1/0,a=1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var r=0,l=(e=Tt(e)?e:Oe(e)).length;r<l;r++)null!=(n=e[r])&&n<o&&(o=n);else t=Je(t,i),qt(e,(function(e,i,n){((s=t(e,i,n))<a||s===1/0&&o===1/0)&&(o=e,a=s)}));return o}var di=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function ci(e){return e?j(e)?r.call(e):x(e)?e.match(di):Tt(e)?Kt(e,Ye):Oe(e):[]}function hi(e,t,i){if(null==t||i)return Tt(e)||(e=Oe(e)),e[st(e.length-1)];var n=ci(e),s=se(n);t=Math.max(Math.min(t,s),0);for(var o=s-1,a=0;a<t;a++){var r=st(a,o),l=n[a];n[a]=n[r],n[r]=l}return n.slice(0,t)}function mi(e){return hi(e,1/0)}function pi(e,t,i){var n=0;return t=Je(t,i),oi(Kt(e,(function(e,i,s){return{value:e,index:n++,criteria:t(e,i,s)}})).sort((function(e,t){var i=e.criteria,n=t.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(i<n||void 0===n)return-1}return e.index-t.index})),"value")}function ui(e,t){return function(i,n,s){var o=t?[[],[]]:{};return n=Je(n,s),qt(i,(function(t,s){var a=n(t,s,i);e(o,t,a)})),o}}var gi=ui((function(e,t,i){G(e,i)?e[i].push(t):e[i]=[t]})),vi=ui((function(e,t,i){e[i]=t})),fi=ui((function(e,t,i){G(e,i)?e[i]++:e[i]=1})),_i=ui((function(e,t,i){e[i?0:1].push(t)}),!0);function bi(e){return null==e?0:Tt(e)?e.length:re(e).length}function yi(e,t,i){return t in i}var Ai=A((function(e,t){var i={},n=t[0];if(null==e)return i;L(n)?(t.length>1&&(n=Qe(n,t[1])),t=ve(e)):(n=yi,t=Pt(t,!1,!1),e=Object(e));for(var s=0,o=t.length;s<o;s++){var a=t[s],r=e[a];n(r,a,e)&&(i[a]=r)}return i})),Si=A((function(e,t){var i,n=t[0];return L(n)?(n=Dt(n),t.length>1&&(i=t[1])):(t=Kt(Pt(t,!1,!1),String),n=function(e,i){return!ni(t,i)}),Ai(e,n,i)}));function wi(e,t,i){return r.call(e,0,Math.max(0,e.length-(null==t||i?1:t)))}function Ti(e,t,i){return null==e||e.length<1?null==t||i?void 0:[]:null==t||i?e[0]:wi(e,e.length-t)}function Pi(e,t,i){return r.call(e,null==t||i?1:t)}function Ei(e,t,i){return null==e||e.length<1?null==t||i?void 0:[]:null==t||i?e[e.length-1]:Pi(e,Math.max(0,e.length-t))}function Ci(e){return Jt(e,Boolean)}function xi(e,t){return Pt(e,t,!1)}var Oi=A((function(e,t){return t=Pt(t,!0,!0),Jt(e,(function(e){return!ni(t,e)}))})),Ii=A((function(e,t){return Oi(e,t)}));function Ri(e,t,i,n){P(t)||(n=i,i=t,t=!1),null!=i&&(i=Je(i,n));for(var s=[],o=[],a=0,r=se(e);a<r;a++){var l=e[a],d=i?i(l,a,e):l;t&&!i?(a&&o===d||s.push(l),o=d):i?ni(o,d)||(o.push(d),s.push(l)):ni(s,l)||s.push(l)}return s}var Ni=A((function(e){return Ri(Pt(e,!0,!0))}));function Di(e){for(var t=[],i=arguments.length,n=0,s=se(e);n<s;n++){var o=e[n];if(!ni(t,o)){var a;for(a=1;a<i&&ni(arguments[a],o);a++);a===i&&t.push(o)}}return t}function Mi(e){for(var t=e&&ri(e,se).length||0,i=Array(t),n=0;n<t;n++)i[n]=oi(e,n);return i}var Vi=A(Mi);function ki(e,t){for(var i={},n=0,s=se(e);n<s;n++)t?i[e[n]]=t[n]:i[e[n][0]]=e[n][1];return i}function Li(e,t,i){null==t&&(t=e||0,e=0),i||(i=t<e?-1:1);for(var n=Math.max(Math.ceil((t-e)/i),0),s=Array(n),o=0;o<n;o++,e+=i)s[o]=e;return s}function Fi(e,t){if(null==t||t<1)return[];for(var i=[],n=0,s=e.length;n<s;)i.push(r.call(e,n,n+=t));return i}function Bi(e,t){return e._chain?ce(t).chain():t}function zi(e){return qt(Ne(e),(function(t){var i=ce[t]=e[t];ce.prototype[t]=function(){var e=[this._wrapped];return a.apply(e,arguments),Bi(this,i.apply(ce,e))}})),ce}qt(["pop","push","reverse","shift","sort","splice","unshift"],(function(e){var t=n[e];ce.prototype[e]=function(){var i=this._wrapped;return null!=i&&(t.apply(i,arguments),"shift"!==e&&"splice"!==e||0!==i.length||delete i[0]),Bi(this,i)}})),qt(["concat","join","slice"],(function(e){var t=n[e];ce.prototype[e]=function(){var e=this._wrapped;return null!=e&&(e=t.apply(e,arguments)),Bi(this,e)}}));var Ui=zi({__proto__:null,VERSION:e,restArguments:A,isObject:S,isNull:w,isUndefined:T,isBoolean:P,isElement:E,isString:x,isNumber:O,isDate:I,isRegExp:R,isError:N,isSymbol:D,isArrayBuffer:M,isDataView:W,isArray:j,isFunction:L,isArguments:Y,isFinite:q,isNaN:K,isTypedArray:ne,isEmpty:le,isMatch:de,isEqual:ge,isMap:Pe,isWeakMap:Ee,isSet:Ce,isWeakSet:xe,keys:re,allKeys:ve,values:Oe,pairs:Ie,invert:Re,functions:Ne,methods:Ne,extend:Me,extendOwn:Ve,assign:Ve,defaults:ke,create:Be,clone:ze,tap:Ue,get:Ge,has:$e,mapObject:et,identity:Ye,constant:Q,noop:tt,toPath:He,property:Ke,propertyOf:it,matcher:qe,matches:qe,times:nt,random:st,now:ot,escape:lt,unescape:dt,templateSettings:ct,template:vt,result:ft,uniqueId:bt,chain:yt,iteratee:Xe,partial:St,bind:wt,bindAll:Et,memoize:Ct,delay:xt,defer:Ot,throttle:It,debounce:Rt,wrap:Nt,negate:Dt,compose:Mt,after:Vt,before:kt,once:Lt,findKey:Ft,findIndex:zt,findLastIndex:Ut,sortedIndex:Ht,indexOf:jt,lastIndexOf:Gt,find:$t,detect:$t,findWhere:Yt,each:qt,forEach:qt,map:Kt,collect:Kt,reduce:Zt,foldl:Zt,inject:Zt,reduceRight:Xt,foldr:Xt,filter:Jt,select:Jt,reject:ei,every:ti,all:ti,some:ii,any:ii,contains:ni,includes:ni,include:ni,invoke:si,pluck:oi,where:ai,max:ri,min:li,shuffle:mi,sample:hi,sortBy:pi,groupBy:gi,indexBy:vi,countBy:fi,partition:_i,toArray:ci,size:bi,pick:Ai,omit:Si,first:Ti,head:Ti,take:Ti,initial:wi,last:Ei,rest:Pi,tail:Pi,drop:Pi,compact:Ci,flatten:xi,without:Ii,uniq:Ri,unique:Ri,union:Ni,intersection:Di,difference:Oi,unzip:Mi,transpose:Mi,zip:Vi,object:ki,range:Li,chunk:Fi,mixin:zi,default:ce});return Ui._=Ui,Ui}()},207:(e,t,i)=>{"use strict";i.d(t,{A:()=>n});const n={readyState:"ready",adManagerState:{empty:"empty",hasAds:"hasAds",stopped:"stopped",paused:"paused"},adState:{failed:"failed",playing:"playing",paused:"paused",continueAd:"continueAd",completed:"completed",autoKill:"autoKill",repeating:"repeating",skipped:"skipped",ready:"ready",renderOutOfView:"renderOutOfView"},adQState:{impression:"impression",q0:"q0",q1:"q1",q2:"q2",q3:"q3",completed:"completed",repeating:"repeating"},getAdState:{notCalled:"notCalled",gettingAd:"gettingAd",gotAd:"gotAd",waiting:"waiting",failed:"failed",stopped:"stopped",finished:"finished"},playerState:{error:"error",stopped:"stopped",closed:"closed",restarted:"restarted"},containerViewState:{rendered:"rendered",eligible:"eligible",playing:"playing",collapsed:"collapsed",attached:"attached",detached:"detached"},videoViewState:{rendered:"rendered",attached:"attached",detached:"detached"},repeatState:{hiding:"hiding",showing:"showing",spinning:"spinning",clicked:"clicked"},loadingViewState:{hiding:"hiding",showing:"showing",clicked:"clicked"},clickThruState:{clicked:"clicked",waiting:"waiting"},timerState:{working:"started",paused:"paused",stopped:"stopped",done:"done"},closeState:{terminate:"terminate",containerViewClosed:"containerViewClosed",videoViewClosed:"videoViewClosed",adManagerStop:"adManagerStop",playerClosed:"playerClosed"},tabState:{focus:"focus",blur:"blur",tabOut:"tabOut"},floatingView:{detach:"detach",attach:"attach",postAttach:"postAttach",permanentClosed:"permanentClosed"},externalUnit:{playing:"playing",gotAd:"gotAd",stopped:"stopped"},brandingDisplayState:{show:"show",hide:"hide"},storiesUnitState:{videoImpression:"videoImpression",videoPause:"videoPause",videoResume:"videoResume",videoEnd:"videoEnd",videoViewable:"videoViewable"}}},225:(e,t,i)=>{"use strict";i.d(t,{C:()=>d,G:()=>l});var n=i(140);function s(e,t,i,n,s,o,a){try{var r=e[o](a),l=r.value}catch(e){return void i(e)}r.done?t(l):Promise.resolve(l).then(n,s)}function o(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function a(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?o(Object(i),!0).forEach((function(t){r(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function r(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class l{constructor(e){this.sessionId=this._setSessionId(e.model),this._setData(e.model),this.sendingDataToElastic=this._decideSendingDataToElastic(e.model),this.kbnul=e.model.get("kbnul"),this.apiUrl="".concat(this.kbnul,"/putes/unitsanalytics"),this.events=[],this.timeFromSessionStart=this._getCurrentTime(),this.maxEventsToLog=e.model.get("elasticLogger.maxEventsToLog"),this.sendingDataToElastic&&(this.sendInterval=setInterval(this.sendDataToElastic.bind(this),1e3*e.model.get("elasticLogger.secondsBetweenEvents")))}_setData(e){var t={unitType:e.get("unitType"),subUnit:e.get("subUnitType"),wurflData:{os:{name:e.get("wurfl.os.name"),version:e.get("wurfl.os.version")},browser:{name:e.get("wurfl.browser.name"),version:e.get("wurfl.browser.version")}},frameType:e.get("frameType"),country:e.get("country"),abTest:e.get("abTest"),unitVersion:e.get("unitVersion"),playerVersion:this._cleanPlayerVersion(e.get("player.urls.playerLocation")),liteUnitVersion:e.get("liteUnitVersion"),dast:e.get("dast"),redId:e.get("redId"),isApp:e.get("isApp")};this.data={_id:this.sessionId,session_data:a(a({},t),e.get("isApp")?{appName:e.get("appName"),appId:e.get("appId")}:{})}}_cleanPlayerVersion(e){return e.substring(e.lastIndexOf("/")+1)}isSendingDataToElastic(){return this.sendingDataToElastic}_decideSendingDataToElastic(e){return e.get("elasticLogger.isActive")&&n.isFactor(e.get("gaFactor"))&&e.get("isReportToKibana")?(e.set("gaFactor",1),e.set("shouldSendDataToElastic",!0),!0):(e.set("shouldSendDataToElastic",!1),!1)}_setSessionId(e){var t=n.generateGuid(10);return e.set("elasticSessionId",t),t}log(e){var{message:t,severity:i,extraData:n}=e;this.events.length>=this.maxEventsToLog||this.events.push({eventData:{message:t,severity:i,extraData:n},timeFromSessionStart:this._getCurrentTime()-this.timeFromSessionStart})}sendDataToElastic(){var e,t=this;return(e=function*(){t.data.timeline=t._buildTimeline();try{var e=yield fetch(t.apiUrl,{method:"POST",headers:{"Content-Type":"text/plain"},body:JSON.stringify(t.data)});yield e.json()}catch(e){t.error=e.message}t.events=[]},function(){var t=this,i=arguments;return new Promise((function(n,o){var a=e.apply(t,i);function r(e){s(a,n,o,r,l,"next",e)}function l(e){s(a,n,o,r,l,"throw",e)}r(void 0)}))})()}_getCurrentTime(){return(new Date).getTime()}_buildTimeline(){var e={};return this.events=this.events.sort(((e,t)=>e.timeFromSessionStart-t.timeFromSessionStart)),this.events.forEach(((t,i)=>{e["ev".concat(i)]=t})),e}}var d={INFO:"info",WARNING:"warning",ERROR:"error"}},314:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var i=e(t);return t[2]?"@media ".concat(t[2]," {").concat(i,"}"):i})).join("")},t.i=function(e,i,n){"string"==typeof e&&(e=[[null,e,""]]);var s={};if(n)for(var o=0;o<this.length;o++){var a=this[o][0];null!=a&&(s[a]=!0)}for(var r=0;r<e.length;r++){var l=[].concat(e[r]);n&&s[l[0]]||(i&&(l[2]?l[2]="".concat(i," and ").concat(l[2]):l[2]=i),t.push(l))}},t}},391:(e,t,i)=>{var n,s,o;o="object"==typeof self&&self.self===self&&self||"object"==typeof i.g&&i.g.global===i.g&&i.g,n=[i(140),i(568),t],s=function(e,t,i){o.Backbone=function(e,t,i,n){var s=e.Backbone,o=Array.prototype.slice;t.VERSION="1.6.1",t.$=n,t.noConflict=function(){return e.Backbone=s,this},t.emulateHTTP=!1,t.emulateJSON=!1;var a,r=t.Events={},l=/\s+/,d=function(e,t,n,s,o){var a,r=0;if(n&&"object"==typeof n){void 0!==s&&"context"in o&&void 0===o.context&&(o.context=s);for(a=i.keys(n);r<a.length;r++)t=d(e,t,a[r],n[a[r]],o)}else if(n&&l.test(n))for(a=n.split(l);r<a.length;r++)t=e(t,a[r],s,o);else t=e(t,n,s,o);return t};r.on=function(e,t,i){return this._events=d(c,this._events||{},e,t,{context:i,ctx:this,listening:a}),a&&((this._listeners||(this._listeners={}))[a.id]=a,a.interop=!1),this},r.listenTo=function(e,t,n){if(!e)return this;var s=e._listenId||(e._listenId=i.uniqueId("l")),o=this._listeningTo||(this._listeningTo={}),r=a=o[s];r||(this._listenId||(this._listenId=i.uniqueId("l")),r=a=o[s]=new v(this,e));var l=h(e,t,n,this);if(a=void 0,l)throw l;return r.interop&&r.on(t,n),this};var c=function(e,t,i,n){if(i){var s=e[t]||(e[t]=[]),o=n.context,a=n.ctx,r=n.listening;r&&r.count++,s.push({callback:i,context:o,ctx:o||a,listening:r})}return e},h=function(e,t,i,n){try{e.on(t,i,n)}catch(e){return e}};r.off=function(e,t,i){return this._events?(this._events=d(m,this._events,e,t,{context:i,listeners:this._listeners}),this):this},r.stopListening=function(e,t,n){var s=this._listeningTo;if(!s)return this;for(var o=e?[e._listenId]:i.keys(s),a=0;a<o.length;a++){var r=s[o[a]];if(!r)break;r.obj.off(t,n,this),r.interop&&r.off(t,n)}return i.isEmpty(s)&&(this._listeningTo=void 0),this};var m=function(e,t,n,s){if(e){var o,a=s.context,r=s.listeners,l=0;if(t||a||n){for(o=t?[t]:i.keys(e);l<o.length;l++){var d=e[t=o[l]];if(!d)break;for(var c=[],h=0;h<d.length;h++){var m=d[h];if(n&&n!==m.callback&&n!==m.callback._callback||a&&a!==m.context)c.push(m);else{var p=m.listening;p&&p.off(t,n)}}c.length?e[t]=c:delete e[t]}return e}for(o=i.keys(r);l<o.length;l++)r[o[l]].cleanup()}};r.once=function(e,t,i){var n=d(p,{},e,t,this.off.bind(this));return"string"==typeof e&&null==i&&(t=void 0),this.on(n,t,i)},r.listenToOnce=function(e,t,i){var n=d(p,{},t,i,this.stopListening.bind(this,e));return this.listenTo(e,n)};var p=function(e,t,n,s){if(n){var o=e[t]=i.once((function(){s(t,o),n.apply(this,arguments)}));o._callback=n}return e};r.trigger=function(e){if(!this._events)return this;for(var t=Math.max(0,arguments.length-1),i=Array(t),n=0;n<t;n++)i[n]=arguments[n+1];return d(u,this._events,e,void 0,i),this};var u=function(e,t,i,n){if(e){var s=e[t],o=e.all;s&&o&&(o=o.slice()),s&&g(s,n),o&&g(o,[t].concat(n))}return e},g=function(e,t){var i,n=-1,s=e.length,o=t[0],a=t[1],r=t[2];switch(t.length){case 0:for(;++n<s;)(i=e[n]).callback.call(i.ctx);return;case 1:for(;++n<s;)(i=e[n]).callback.call(i.ctx,o);return;case 2:for(;++n<s;)(i=e[n]).callback.call(i.ctx,o,a);return;case 3:for(;++n<s;)(i=e[n]).callback.call(i.ctx,o,a,r);return;default:for(;++n<s;)(i=e[n]).callback.apply(i.ctx,t);return}},v=function(e,t){this.id=e._listenId,this.listener=e,this.obj=t,this.interop=!0,this.count=0,this._events=void 0};v.prototype.on=r.on,v.prototype.off=function(e,t){var i;this.interop?(this._events=d(m,this._events,e,t,{context:void 0,listeners:void 0}),i=!this._events):(this.count--,i=0===this.count),i&&this.cleanup()},v.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},r.bind=r.on,r.unbind=r.off,i.extend(t,r);var f=t.Model=function(e,t){var n=e||{};t||(t={}),this.preinitialize.apply(this,arguments),this.cid=i.uniqueId(this.cidPrefix),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(n=this.parse(n,t)||{});var s=i.result(this,"defaults");n=i.defaults(i.extend({},s,n),s),this.set(n,t),this.changed={},this.initialize.apply(this,arguments)};i.extend(f.prototype,r,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(e){return i.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return i.escape(this.get(e))},has:function(e){return null!=this.get(e)},matches:function(e){return!!i.iteratee(e,this)(this.attributes)},set:function(e,t,n){if(null==e)return this;var s;if("object"==typeof e?(s=e,n=t):(s={})[e]=t,n||(n={}),!this._validate(s,n))return!1;var o=n.unset,a=n.silent,r=[],l=this._changing;this._changing=!0,l||(this._previousAttributes=i.clone(this.attributes),this.changed={});var d=this.attributes,c=this.changed,h=this._previousAttributes;for(var m in s)t=s[m],i.isEqual(d[m],t)||r.push(m),i.isEqual(h[m],t)?delete c[m]:c[m]=t,o?delete d[m]:d[m]=t;if(this.idAttribute in s){var p=this.id;this.id=this.get(this.idAttribute),this.id!==p&&this.trigger("changeId",this,p,n)}if(!a){r.length&&(this._pending=n);for(var u=0;u<r.length;u++)this.trigger("change:"+r[u],this,d[r[u]],n)}if(l)return this;if(!a)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,i.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,i.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!i.isEmpty(this.changed):i.has(this.changed,e)},changedAttributes:function(e){if(!e)return!!this.hasChanged()&&i.clone(this.changed);var t,n=this._changing?this._previousAttributes:this.attributes,s={};for(var o in e){var a=e[o];i.isEqual(n[o],a)||(s[o]=a,t=!0)}return!!t&&s},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(e){e=i.extend({parse:!0},e);var t=this,n=e.success;return e.success=function(i){var s=e.parse?t.parse(i,e):i;if(!t.set(s,e))return!1;n&&n.call(e.context,t,i,e),t.trigger("sync",t,i,e)},q(this,e),this.sync("read",this,e)},save:function(e,t,n){var s;null==e||"object"==typeof e?(s=e,n=t):(s={})[e]=t;var o=(n=i.extend({validate:!0,parse:!0},n)).wait;if(s&&!o){if(!this.set(s,n))return!1}else if(!this._validate(s,n))return!1;var a=this,r=n.success,l=this.attributes;n.success=function(e){a.attributes=l;var t=n.parse?a.parse(e,n):e;if(o&&(t=i.extend({},s,t)),t&&!a.set(t,n))return!1;r&&r.call(n.context,a,e,n),a.trigger("sync",a,e,n)},q(this,n),s&&o&&(this.attributes=i.extend({},l,s));var d=this.isNew()?"create":n.patch?"patch":"update";"patch"!==d||n.attrs||(n.attrs=s);var c=this.sync(d,this,n);return this.attributes=l,c},destroy:function(e){e=e?i.clone(e):{};var t=this,n=e.success,s=e.wait,o=function(){t.stopListening(),t.trigger("destroy",t,t.collection,e)};e.success=function(i){s&&o(),n&&n.call(e.context,t,i,e),t.isNew()||t.trigger("sync",t,i,e)};var a=!1;return this.isNew()?i.defer(e.success):(q(this,e),a=this.sync("delete",this,e)),s||o(),a},url:function(){var e=i.result(this,"urlRoot")||i.result(this.collection,"url")||Y();if(this.isNew())return e;var t=this.get(this.idAttribute);return e.replace(/[^\/]$/,"$&/")+encodeURIComponent(t)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},i.extend({},e,{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=i.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return!n||(this.trigger("invalid",this,n,i.extend(t,{validationError:n})),!1)}});var _=t.Collection=function(e,t){t||(t={}),this.preinitialize.apply(this,arguments),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,i.extend({silent:!0},t))},b={add:!0,remove:!0,merge:!0},y={add:!0,remove:!1},A=function(e,t,i){i=Math.min(Math.max(i,0),e.length);var n,s=Array(e.length-i),o=t.length;for(n=0;n<s.length;n++)s[n]=e[n+i];for(n=0;n<o;n++)e[n+i]=t[n];for(n=0;n<s.length;n++)e[n+o+i]=s[n]};i.extend(_.prototype,r,{model:f,preinitialize:function(){},initialize:function(){},toJSON:function(e){return this.map((function(t){return t.toJSON(e)}))},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,i.extend({merge:!1},t,y))},remove:function(e,t){t=i.extend({},t);var n=!i.isArray(e);e=n?[e]:e.slice();var s=this._removeModels(e,t);return!t.silent&&s.length&&(t.changes={added:[],merged:[],removed:s},this.trigger("update",this,t)),n?s[0]:s},set:function(e,t){if(null!=e){(t=i.extend({},b,t)).parse&&!this._isModel(e)&&(e=this.parse(e,t)||[]);var n=!i.isArray(e);e=n?[e]:e.slice();var s=t.at;null!=s&&(s=+s),s>this.length&&(s=this.length),s<0&&(s+=this.length+1);var o,a,r=[],l=[],d=[],c=[],h={},m=t.add,p=t.merge,u=t.remove,g=!1,v=this.comparator&&null==s&&!1!==t.sort,f=i.isString(this.comparator)?this.comparator:null;for(a=0;a<e.length;a++){o=e[a];var _=this.get(o);if(_){if(p&&o!==_){var y=this._isModel(o)?o.attributes:o;t.parse&&(y=_.parse(y,t)),_.set(y,t),d.push(_),v&&!g&&(g=_.hasChanged(f))}h[_.cid]||(h[_.cid]=!0,r.push(_)),e[a]=_}else m&&(o=e[a]=this._prepareModel(o,t))&&(l.push(o),this._addReference(o,t),h[o.cid]=!0,r.push(o))}if(u){for(a=0;a<this.length;a++)h[(o=this.models[a]).cid]||c.push(o);c.length&&this._removeModels(c,t)}var S=!1,w=!v&&m&&u;if(r.length&&w?(S=this.length!==r.length||i.some(this.models,(function(e,t){return e!==r[t]})),this.models.length=0,A(this.models,r,0),this.length=this.models.length):l.length&&(v&&(g=!0),A(this.models,l,null==s?this.length:s),this.length=this.models.length),g&&this.sort({silent:!0}),!t.silent){for(a=0;a<l.length;a++)null!=s&&(t.index=s+a),(o=l[a]).trigger("add",o,this,t);(g||S)&&this.trigger("sort",this,t),(l.length||c.length||d.length)&&(t.changes={added:l,removed:c,merged:d},this.trigger("update",this,t))}return n?e[0]:e}},reset:function(e,t){t=t?i.clone(t):{};for(var n=0;n<this.models.length;n++)this._removeReference(this.models[n],t);return t.previousModels=this.models,this._reset(),e=this.add(e,i.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,i.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e)},unshift:function(e,t){return this.add(e,i.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e)},slice:function(){return o.apply(this.models,arguments)},get:function(e){if(null!=e)return this._byId[e]||this._byId[this.modelId(this._isModel(e)?e.attributes:e,e.idAttribute)]||e.cid&&this._byId[e.cid]},has:function(e){return null!=this.get(e)},at:function(e){return e<0&&(e+=this.length),this.models[e]},where:function(e,t){return this[t?"find":"filter"](e)},findWhere:function(e){return this.where(e,!0)},sort:function(e){var t=this.comparator;if(!t)throw new Error("Cannot sort a set without a comparator");e||(e={});var n=t.length;return i.isFunction(t)&&(t=t.bind(this)),1===n||i.isString(t)?this.models=this.sortBy(t):this.models.sort(t),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return this.map(e+"")},fetch:function(e){var t=(e=i.extend({parse:!0},e)).success,n=this;return e.success=function(i){var s=e.reset?"reset":"set";n[s](i,e),t&&t.call(e.context,n,i,e),n.trigger("sync",n,i,e)},q(this,e),this.sync("read",this,e)},create:function(e,t){var n=(t=t?i.clone(t):{}).wait;if(!(e=this._prepareModel(e,t)))return!1;n||this.add(e,t);var s=this,o=t.success;return t.success=function(e,t,i){n&&(e.off("error",s._forwardPristineError,s),s.add(e,i)),o&&o.call(i.context,e,t,i)},n&&e.once("error",this._forwardPristineError,this),e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(e,t){return e[t||this.model.prototype.idAttribute||"id"]},values:function(){return new w(this,T)},keys:function(){return new w(this,P)},entries:function(){return new w(this,E)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){return this._isModel(e)?(e.collection||(e.collection=this),e):((t=t?i.clone(t):{}).collection=this,(n=this.model.prototype?new this.model(e,t):this.model(e,t)).validationError?(this.trigger("invalid",this,n.validationError,t),!1):n);var n},_removeModels:function(e,t){for(var i=[],n=0;n<e.length;n++){var s=this.get(e[n]);if(s){var o=this.indexOf(s);this.models.splice(o,1),this.length--,delete this._byId[s.cid];var a=this.modelId(s.attributes,s.idAttribute);null!=a&&delete this._byId[a],t.silent||(t.index=o,s.trigger("remove",s,this,t)),i.push(s),this._removeReference(s,t)}}return e.length>0&&!t.silent&&delete t.index,i},_isModel:function(e){return e instanceof f},_addReference:function(e,t){this._byId[e.cid]=e;var i=this.modelId(e.attributes,e.idAttribute);null!=i&&(this._byId[i]=e),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){delete this._byId[e.cid];var i=this.modelId(e.attributes,e.idAttribute);null!=i&&delete this._byId[i],this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,i,n){if(t){if(("add"===e||"remove"===e)&&i!==this)return;if("destroy"===e&&this.remove(t,n),"changeId"===e){var s=this.modelId(t.previousAttributes(),t.idAttribute),o=this.modelId(t.attributes,t.idAttribute);null!=s&&delete this._byId[s],null!=o&&(this._byId[o]=t)}}this.trigger.apply(this,arguments)},_forwardPristineError:function(e,t,i){this.has(e)||this._onModelEvent("error",e,t,i)}});var S="function"==typeof Symbol&&Symbol.iterator;S&&(_.prototype[S]=_.prototype.values);var w=function(e,t){this._collection=e,this._kind=t,this._index=0},T=1,P=2,E=3;S&&(w.prototype[S]=function(){return this}),w.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var e,t=this._collection.at(this._index);if(this._index++,this._kind===T)e=t;else{var i=this._collection.modelId(t.attributes,t.idAttribute);e=this._kind===P?i:[i,t]}return{value:e,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};var C=t.View=function(e){this.cid=i.uniqueId("view"),this.preinitialize.apply(this,arguments),i.extend(this,i.pick(e,O)),this._ensureElement(),this.initialize.apply(this,arguments)},x=/^(\S+)\s*(.*)$/,O=["model","collection","el","id","attributes","className","tagName","events"];i.extend(C.prototype,r,{tagName:"div",$:function(e){return this.$el.find(e)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(e){return this.undelegateEvents(),this._setElement(e),this.delegateEvents(),this},_setElement:function(e){this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0]},delegateEvents:function(e){if(e||(e=i.result(this,"events")),!e)return this;for(var t in this.undelegateEvents(),e){var n=e[t];if(i.isFunction(n)||(n=this[n]),n){var s=t.match(x);this.delegate(s[1],s[2],n.bind(this))}}return this},delegate:function(e,t,i){return this.$el.on(e+".delegateEvents"+this.cid,t,i),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(e,t,i){return this.$el.off(e+".delegateEvents"+this.cid,t,i),this},_createElement:function(e){return document.createElement(e)},_ensureElement:function(){if(this.el)this.setElement(i.result(this,"el"));else{var e=i.extend({},i.result(this,"attributes"));this.id&&(e.id=i.result(this,"id")),this.className&&(e.class=i.result(this,"className")),this.setElement(this._createElement(i.result(this,"tagName"))),this._setAttributes(e)}},_setAttributes:function(e){this.$el.attr(e)}});var I=function(e,t,i,n){switch(t){case 1:return function(){return e[i](this[n])};case 2:return function(t){return e[i](this[n],t)};case 3:return function(t,s){return e[i](this[n],N(t,this),s)};case 4:return function(t,s,o){return e[i](this[n],N(t,this),s,o)};default:return function(){var t=o.call(arguments);return t.unshift(this[n]),e[i].apply(e,t)}}},R=function(e,t,n,s){i.each(n,(function(i,n){t[n]&&(e.prototype[n]=I(t,i,n,s))}))},N=function(e,t){return i.isFunction(e)?e:i.isObject(e)&&!t._isModel(e)?D(e):i.isString(e)?function(t){return t.get(e)}:e},D=function(e){var t=i.matches(e);return function(e){return t(e.attributes)}},M={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},V={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};i.each([[_,M,"models"],[f,V,"attributes"]],(function(e){var t=e[0],n=e[1],s=e[2];t.mixin=function(e){var n=i.reduce(i.functions(e),(function(e,t){return e[t]=0,e}),{});R(t,e,n,s)},R(t,i,n,s)})),t.sync=function(e,n,s){var o=k[e];i.defaults(s||(s={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var a={type:o,dataType:"json"};if(s.url||(a.url=i.result(n,"url")||Y()),null!=s.data||!n||"create"!==e&&"update"!==e&&"patch"!==e||(a.contentType="application/json",a.data=JSON.stringify(s.attrs||n.toJSON(s))),s.emulateJSON&&(a.contentType="application/x-www-form-urlencoded",a.data=a.data?{model:a.data}:{}),s.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){a.type="POST",s.emulateJSON&&(a.data._method=o);var r=s.beforeSend;s.beforeSend=function(e){if(e.setRequestHeader("X-HTTP-Method-Override",o),r)return r.apply(this,arguments)}}"GET"===a.type||s.emulateJSON||(a.processData=!1);var l=s.error;s.error=function(e,t,i){s.textStatus=t,s.errorThrown=i,l&&l.call(s.context,e,t,i)};var d=s.xhr=t.ajax(i.extend(a,s));return n.trigger("request",n,d,s),d};var k={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var L=t.Router=function(e){e||(e={}),this.preinitialize.apply(this,arguments),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},F=/\((.*?)\)/g,B=/(\(\?)?:\w+/g,z=/\*\w+/g,U=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend(L.prototype,r,{preinitialize:function(){},initialize:function(){},route:function(e,n,s){i.isRegExp(e)||(e=this._routeToRegExp(e)),i.isFunction(n)&&(s=n,n=""),s||(s=this[n]);var o=this;return t.history.route(e,(function(i){var a=o._extractParameters(e,i);!1!==o.execute(s,a,n)&&(o.trigger.apply(o,["route:"+n].concat(a)),o.trigger("route",n,a),t.history.trigger("route",o,n,a))})),this},execute:function(e,t,i){e&&e.apply(this,t)},navigate:function(e,i){return t.history.navigate(e,i),this},_bindRoutes:function(){if(this.routes){this.routes=i.result(this,"routes");for(var e,t=i.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(U,"\\$&").replace(F,"(?:$1)?").replace(B,(function(e,t){return t?e:"([^/?]+)"})).replace(z,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var n=e.exec(t).slice(1);return i.map(n,(function(e,t){return t===n.length-1?e||null:e?decodeURIComponent(e):null}))}});var H=t.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},W=/^[#\/]|\s+$/g,j=/^\/+|\/+$/g,G=/#.*$/;H.started=!1,i.extend(H.prototype,r,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root&&!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+"/"===this.root},decodeFragment:function(e){return decodeURI(e.replace(/%25/g,"%2525"))},getSearch:function(){var e=this.location.href.replace(/#.*/,"").match(/\?.+/);return e?e[0]:""},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getPath:function(){var e=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===e.charAt(0)?e.slice(1):e},getFragment:function(e){return null==e&&(e=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),e.replace(W,"")},start:function(e){if(H.started)throw new Error("Backbone.history has already been started");if(H.started=!0,this.options=i.extend({root:"/"},this.options,e),this.root=this.options.root,this._trailingSlash=this.options.trailingSlash,this._wantsHashChange=!1!==this.options.hashChange,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(j,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var t=this.root.slice(0,-1)||"/";return this.location.replace(t+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var n=document.body,s=n.insertBefore(this.iframe,n.firstChild).contentWindow;s.document.open(),s.document.close(),s.location.hash="#"+this.fragment}var o=window.addEventListener||function(e,t){return attachEvent("on"+e,t)};if(this._usePushState?o("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?o("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var e=window.removeEventListener||function(e,t){return detachEvent("on"+e,t)};this._usePushState?e("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&e("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),H.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();if(t===this.fragment&&this.iframe&&(t=this.getHash(this.iframe.contentWindow)),t===this.fragment)return!this.matchRoot()&&this.notfound();this.iframe&&this.navigate(t),this.loadUrl()},loadUrl:function(e){return this.matchRoot()?(e=this.fragment=this.getFragment(e),i.some(this.handlers,(function(t){if(t.route.test(e))return t.callback(e),!0}))||this.notfound()):this.notfound()},notfound:function(){return this.trigger("notfound"),!1},navigate:function(e,t){if(!H.started)return!1;t&&!0!==t||(t={trigger:!!t}),e=this.getFragment(e||"");var i=this.root;this._trailingSlash||""!==e&&"?"!==e.charAt(0)||(i=i.slice(0,-1)||"/");var n=i+e;e=e.replace(G,"");var s=this.decodeFragment(e);if(this.fragment!==s){if(this.fragment=s,this._usePushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);if(this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getHash(this.iframe.contentWindow)){var o=this.iframe.contentWindow;t.replace||(o.document.open(),o.document.close()),this._updateHash(o.location,e,t.replace)}}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,i){if(i){var n=e.href.replace(/(javascript:|#).*$/,"");e.replace(n+"#"+t)}else e.hash="#"+t}}),t.history=new H;var $=function(e,t){var n,s=this;return n=e&&i.has(e,"constructor")?e.constructor:function(){return s.apply(this,arguments)},i.extend(n,s,t),n.prototype=i.create(s.prototype,e),n.prototype.constructor=n,n.__super__=s.prototype,n};f.extend=_.extend=L.extend=C.extend=H.extend=$;var Y=function(){throw new Error('A "url" property or function must be specified')},q=function(e,t){var i=t.error;t.error=function(n){i&&i.call(t.context,e,n,t),e.trigger("error",e,n,t)}};return t._debug=function(){return{root:e,_:i}},t}(o,i,e,t)}.apply(t,n),void 0===s||(e.exports=s)},427:(e,t,i)=>{"use strict";i.d(t,{G:()=>s.A,f:()=>n.A});var n=i(907),s=i(646)},494:(e,t,i)=>{"use strict";i.d(t,{l:()=>n});var n={UNIT_TYPES:{INLINE:0,SLIDER_INSTREAM:3,EXPANDABLE:4,INLINE_INSTREAM:9,INLINE_MOBILE:12,SLIDER_INSTREAM_MOBILE:16,INLINE_INSTREAM_MOBILE:18,WIDGET_ITEM:26,WIDGET_ITEM_MOBILE:27,FEED_MANAGER:32,FEED_MANAGER_MOBILE:33,MSN_WIDGET:34,SLIDER_INSTREAM_VFORCE:36,SLIDER_INSTREAM_MOBILE_VFORCE:37},ADVERTISER_TYPE:{PUBLISHER_DEMAND:14},AD_PRIORITY:{PUBLISHER_DEMAND:"PD",TABOOLA_DEMAND:"TD"},APPEND_TYPE:{BEFORE_BEGIN:0,AFTER_BEGIN:1,BEFORE_END:2,AFTER_END:3,APPEND_IN_FIRST:4},INVALID_SELECTOR_TAG_NAMES:{IMG:0,UL:1,BUTTON:3,INPUT:4,LABEL:5},ROLL_TYPE:{preroll:0,"pre-roll":0,midroll:-1,"mid-roll":-1,postroll:-2,"post-roll":-2},TAB_STATE:{focus:0,blur:1,tabOut:2},DFP_KEYWORDS:["google","dfp","gpt"],SUB_UNIT_TYPE:{PLAIN:0,START_FROM_SLIDER:1,DETACH_TO_SLIDER:2,SUPER_SLIDER:3,INLINE_SINGLE_SELECTOR:4,INLINE_MULTI_SELECTOR:5,STICKY_BELOW:6,MID_ARTICLE_AS_FEED:10},FEED_SELECTOR:"tbl-feed-container",RECO_REEL_SUB_UNIT_TYPE:{PLAIN:0,START_FROM_SLIDER_RBOX:1,DETACH_TO_SLIDER_RBOX:2},AD_CHOICE_TYPE:{TITLE:"title",VIDEO_AD:"videoAd",SLIDER:"slider"},REPLAY_AD_CLICK:{ALL:"all",RESTART_PLAYER:"restartPlayer"},DISPLAY_FILLER:{BEFORE_AD:{NONE:"none",CONTENT:"content"},BETWEEN_ADS:{CONTENT:"content",NONE:"none"},ON_TIMEOUT:{CONTENT:"content",NONE:"none"}},TITLE_POSITION:{ABOVE:"above",BELOW:"below"},PREDICT_NAMES:{distancePercentPredict:0,distancePixelsPredict:1,getAdFailPredict:2,multiAdPredict:4,playerReadyPredict:5,autoKillPredict:7,firstScrollPredict:8,emptyQueuePredict:9,intersectionPredict:11,fullEligibilityPredict:12,mp4Predict:17,timePredict:19,msnFullEligibilityPredict:23,feedInViewPredict:24,recoReelPredict:25,postRepeatPredictor:26,adxPredict:27,immediateStartPredict:29,WatchVideoPredict:30,prebidPredictor:31,multiWidgetPredict:32,userEventPredict:33},ANIMATION_TYPE:{none:0,attaching:1,detaching:2,expanding:3},ANIMATION_TIMER:{none:0,sliderClose:1e3},FLOATING_VIEW_TOP_COMPONENT:{video:0,loading:1,repeat:2,content:4},FRAME_TYPE:{plainPage:0,friendlyIframe:1,nonFriendlyIframe:2,amp:3,inApp:4},CHECK_FOR_RV_PRIORITY:{onEligibility:"hasReachedEligibility",pixelsFromSelector:"hasReachedPixelsFromSelector",intersectionPercent:"intersectionPercent",beforeLoaderEnd:"beforeLoaderEnd"},TIMER_NAMES:{viewability:"viewability",viewabilityOneS:"viewabilityOneS",viewability100:"viewability100",viewabilityAMP:"viewabilityAMP"},AD_STATUS:{new:0,adLoaded:1,startAd:2,adImpression:3,adPlay:4,adError:5,adComplete:6},CSS_PROPERTIES_FROM_RBOX:["font","@font-face","font-family","font-feature-settings","@font-feature-values","font-kerning","font-language-override","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-weight","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","line-break","line-height","outline","outline-color","outline-offset","outline-style","outline-width","text-decoration-line","text-underline-position","padding","padding-bottom","padding-left","padding-right","padding-top","margin","margin-bottom","margin-left","margin-right","margin-top","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","text-transform","z-index","text-align","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-style","text-indent","text-justify","text-orientation","text-overflow","text-shadow","text-transform","text-underline-position","direction","color"],CSS_PROPERTIES_ON_HOVER_FROM_RBOX:["color","text-decoration"],NATIVE_AD:{DESC_TITLE_FONT_RATIO:.8,FIT_TO_SIZE:{TITLE:"title",FULL:"full",NONE:"none"}},UNIT_QUERY_LANGUAGE:{SUPPORTED_CONFIG_FLAGS:["stickyCard"],MAPPING:[{search:"@Ad@",replaceWith:"activeAd"}]},ITEM_TYPE:{IMA:27},ADX:{ADVERTISER:"66216755",ITEM_TYPE:27,ADVTYPE:7},RV_TYPES:{NON_RV:0,RV:1,ANY:"any"},MEDIA_TYPE:{MP4:1,VPAID:2,ADX:5},MEDIA_TYPE_ID_TO_NAME:{1:"video",2:"vpaid",6:"omid"},VIDEO_READY_STATE:{HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4},TRC_PERFORMANCE_ACTIONS:{START:"Start",STOP:"Stop"},OS:{IOS:"iOS"},BROWSER:{IE:"IE",EDGE:"Edge",FIREFOX:"Firefox"},TIME_UNITS:{SECOND:1e3,HALF_MINUTE:3e4},FEED_MANAGER:{NAME:"FEED_MANAGER",NON_FEED_CARD_CLASS:["above-the-feed-placement"]},MSN_WIDGET:{NAME:"MSN_WIDGET"},WIDGET_ITEM:{NAME:"WIDGET_ITEM"},RECO_REEL_WIDGET:{NAME:"RECO_REEL_WIDGET"},SLIDER:{NAME:"SLIDER",INSTREAM:"SLIDER_INSTREAM"},VIDEO_REEL:{NAME:"INSTREAM",PLAY:"play",CLOSE:"close",GOTAD:"gotAd",START:"start",DVR_PLACEMENT:"Video Reel Above Feed"},CANCEL_GET_AD_REASONS:{LOST_ELIGIBILITY:"cancelGetAdOnLostEligibility"},INSERT_OPTIONS:{BEFORE:"before",AFTER:"after"},PAUSE_REASONS:{TAB_OUT:"tabOut",UNKNOWN:"unknown",LOST_ELIGIBILITY:"lost eligibility",BLOCKED_BY_EXTERNAL_UNIT:"blocked by external unit",AD_SWAPPED:"ad swapped",UNIT_TERMINATED:"unit terminated",SLIDER_LOST_ELIGIBILITY:"slider lost eligibility",PERMANENT_CLOSE:"permanent close",NEXTUP_CLOSED_BY_USER:"nextup_closed_by_user"},EXC_REASONS:{PUBVIDEO:"publisher video detection",DETACH_TO_SLIDER:"not attached to selector"},ADS_QUEUE_STATUS:{CHECKED:"checked",RV1_HUNT:"rv1Hunt"},ABOVE_THE_FEED:{PLACEMENT:"Lazy Injected 1",MODE:["above-the-feed-premium-card-yh-delta","above-the-feed-premium-card-fp"],FEATURE_PLACEMENT_MODE:"above-the-feed-premium-card-fp"},STREAM_DRAWER_PLACEMENTS:{STREAM_PLACEMENT:{NAME:"stream",SPONSORED:"Sponsored",AD:"Ad",PLACEMENT_THUMBNAIL:"stream-item-image",PLACEMENT_ITEM:"stream-item"},DRAWER_PLACEMENT:{NAME:"drawer",SPONSORED:"Sponsored",PLACEMENT_THUMBNAIL:"stream-related-item-title"}},RATIOS:{HORIZONTAL:16/9,VERTICAL:9/16,SQUARE:1},TERMINATE_REASON:{ANOTHER_STREAM_PLACEMENT_PLAYING:"anotherStreamPlacemntPlaying",NO_DEMAND_WHEN_DISTANCE_REACHED:"noDemandWhenDistanceReached"},IIQ_MS:3,PLAYER_EVENTS:{STOPPED_AFTER_TERMINATION:"stoppedAfterTermination",PLAYER_CLOSED:"playerClosed"},OPENNING_EFFECT:{NONE:0,REGULAR_EXPAND:1,EXPAND_FROM_TOP:6},SCROLL:{INTO_VIEW:"intoView",OUT_OF_VIEW:"outOfView"},YAHOO_UI_MODES:{STANDARD:"standard",MEGA:"mega",APAC_STREAM:"apacStream",ROCKET:"rocket",SPORTS:"sports",SPORTS_NEWS:"sportsNews",FINANCE:"finance",SPORTS_APP:"sportsApp"},SC_WRAPPER_SELECTORS:{THUMB:"thumbnail_start",VIDEO_CUBE:"videoCube",SYNDICATED_ITEM:"syndicatedItem",THUMB_BLOCK:"thumbBlock_holder",VIDEO_BLOCK:"video-block",THUMB_BLOCK_APP:"thumbBlock"},SC_SELECTORS:{TRC_RBOX_OUTER:".trc_rbox_outer",TRC_RBOX_CONTAINER:".trc_rbox_container",RBOX:"#rbox-h2m",VIDEO_LABEL_BOX:".video-label-box",TRC_MAIN_LABEL:".trc-main-label",TRC_PRE_LABEL:".trc-pre-label",SC_DATA_ITEM:{STANDARD:'div[id^="taboola-stream-"][data-placement-name] [data-item-id]',APP:'div[id^="taboola"][data-placement-name] [data-item-id]',FINANCE:'div[id^="ntv-NEWS-STREAM-stream-"][data-placement-name] [data-item-id]',SPORTSNEWS:'div[id^="taboola-stream-"] [data-placement-name] [data-item-id]'}},DISPLAY_STYLE:{HIDDEN:"none",SHOWN:"block"},NEXT_UP_PLACEMENT:"nextUp",REPLACEMENT_CONTEXTS:{PRIORITY:"priority_replacement",NATURAL:"natural_completion"},PAUSE_REASONS:{PRIORITY_HOLD:"priority_replacement_hold"},CSS_CLASSES:{VIDEO:"_cm-video",MULTI_WIDGET:"_cm-video-multi-widget",HELD_ASIDE:"_cm-ad-held-aside"},STREAM:{HEIGHT_AND_HEADER_MARGIN_FACTOR:1.2,DEFAULT_MARGIN_3_ELEMENTS:450}}},540:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},562:(e,t,i)=>{"use strict";i.d(t,{A:()=>o});var n="predict",s="default";class o{constructor(){var{unitType:e,className:t,isDebug:i=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.unitType=e,this.className=t,this.isDebug=i}info(e,t){this._canLog("info")&&console.info("cmTag: ".concat(this._getMessage(s,e)),t)}success(e,t){this._canLog("log")&&console.log("%ccmTag: ".concat(this._getMessage(s,e)),"color: green",t)}important(e,t){this._canLog("log")&&console.log("%ccmTag: ".concat(this._getMessage(s,e)),"color: purple",t)}warning(e,t){this._canLog("log")&&console.log("%ccmTag: ".concat(this._getMessage(s,e)),"color: orange",t)}pixel(e,t){this._canLog("log")&&console.log("%ccmTag: ".concat(this._getMessage(s,e)),"color: #00A0B2",t)}debug(e,t){this._canLog("log")&&console.log("%ccmTag: ".concat(this._getMessage(s,e)),"color: RoyalBlue",t)}error(e,t){this._canLog("error")&&console.error("cmTag: ".concat(this._getMessage(s,e)),t)}predict(e){this.info("%c ".concat(this._getMessage(n,e)),"color: #bada55")}_canLog(e){return this.isDebug&&this._hasConsoleMethod(e)}_hasConsoleMethod(e){return console&&console[e]&&"function"==typeof console[e]}_getMessage(e,t){return e===n?"unit type: ".concat(this.unitType,", predictor: ").concat(this.className,", predictlog: ").concat(t):"unit type: ".concat(this.unitType,", ")+"class name: ".concat(this.className," - ").concat(t)}}},568:(e,t,i)=>{var n,s;s=window,void 0===(n=function(){return function(t){var i,n=function(){var i,n,s,o,a,r,l=[],d=l.concat,c=l.filter,h=l.slice,m=t.document,p={},u={},g={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},v=/^\s*<(\w+|!)[^>]*>/,f=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,_=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,b=/^(?:body|html)$/i,y=/([A-Z])/g,A=["val","css","html","text","data","width","height","offset"],S=["after","prepend","before","append"],w=m.createElement("table"),T=m.createElement("tr"),P={tr:m.createElement("tbody"),tbody:w,thead:w,tfoot:w,td:T,th:T,"*":m.createElement("div")},E=/^[\w-]*$/,C={},x=C.toString,O={},I=m.createElement("div"),R={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},N=Array.isArray||function(e){return e instanceof Array};function D(e){return null==e?String(e):C[x.call(e)]||"object"}function M(e){return"function"==D(e)}function V(e){return null!=e&&e==e.window}function k(e){return null!=e&&e.nodeType==e.DOCUMENT_NODE}function L(e){return"object"==D(e)}function F(e){return L(e)&&!V(e)&&Object.getPrototypeOf(e)==Object.prototype}function B(e){var t=!!e&&"length"in e&&e.length,i=s.type(e);return"function"!=i&&!V(e)&&("array"==i||0===t||"number"==typeof t&&t>0&&t-1 in e)}function z(e){return c.call(e,(function(e){return null!=e}))}function U(e){return e.length>0?s.fn.concat.apply([],e):e}function H(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function W(e){return e in u?u[e]:u[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function j(e,t){return"number"!=typeof t||g[H(e)]?t:t+"px"}function G(e){var t,i;return p[e]||(t=m.createElement(e),m.body.appendChild(t),i=getComputedStyle(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),"none"==i&&(i="block"),p[e]=i),p[e]}function $(e){return"children"in e?h.call(e.children):s.map(e.childNodes,(function(e){if(1==e.nodeType)return e}))}function Y(e,t){var i,n=e?e.length:0;for(i=0;i<n;i++)this[i]=e[i];this.length=n,this.selector=t||""}function q(e,t,s){for(n in t)s&&(F(t[n])||N(t[n]))?(F(t[n])&&!F(e[n])&&(e[n]={}),N(t[n])&&!N(e[n])&&(e[n]=[]),q(e[n],t[n],s)):t[n]!==i&&(e[n]=t[n])}function K(e,t){return null==t?s(e):s(e).filter(t)}function Q(e,t,i,n){return M(t)?t.call(e,i,n):t}function Z(e,t,i){null==i?e.removeAttribute(t):e.setAttribute(t,i)}function X(e,t){var n=e.className||"",s=n&&n.baseVal!==i;if(t===i)return s?n.baseVal:n;s?n.baseVal=t:e.className=t}function J(e){try{return e?"true"==e||"false"!=e&&("null"==e?null:+e+""==e?+e:/^[\[\{]/.test(e)?s.parseJSON(e):e):e}catch(t){return e}}function ee(e,t){t(e);for(var i=0,n=e.childNodes.length;i<n;i++)ee(e.childNodes[i],t)}return O.matches=function(e,t){if(!t||!e||1!==e.nodeType)return!1;var i=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(i)return i.call(e,t);var n,s=e.parentNode,o=!s;return o&&(s=I).appendChild(e),n=~O.qsa(s,t).indexOf(e),o&&I.removeChild(e),n},a=function(e){return e.replace(/-+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))},r=function(e){return c.call(e,(function(t,i){return e.indexOf(t)==i}))},O.fragment=function(e,t,n){var o,a,r;return f.test(e)&&(o=s(m.createElement(RegExp.$1))),o||(e.replace&&(e=e.replace(_,"<$1></$2>")),t===i&&(t=v.test(e)&&RegExp.$1),t in P||(t="*"),(r=P[t]).innerHTML=""+e,o=s.each(h.call(r.childNodes),(function(){r.removeChild(this)}))),F(n)&&(a=s(o),s.each(n,(function(e,t){A.indexOf(e)>-1?a[e](t):a.attr(e,t)}))),o},O.Z=function(e,t){return new Y(e,t)},O.isZ=function(e){return e instanceof O.Z},O.init=function(e,t){var n;if(!e)return O.Z();if("string"==typeof e)if("<"==(e=e.trim())[0]&&v.test(e))n=O.fragment(e,RegExp.$1,t),e=null;else{if(t!==i)return s(t).find(e);n=O.qsa(m,e)}else{if(M(e))return s(m).ready(e);if(O.isZ(e))return e;if(N(e))n=z(e);else if(L(e))n=[e],e=null;else if(v.test(e))n=O.fragment(e.trim(),RegExp.$1,t),e=null;else{if(t!==i)return s(t).find(e);n=O.qsa(m,e)}}return O.Z(n,e)},(s=function(e,t){return O.init(e,t)}).extend=function(e){var t,i=h.call(arguments,1);return"boolean"==typeof e&&(t=e,e=i.shift()),i.forEach((function(i){q(e,i,t)})),e},O.qsa=function(e,t){var i,n="#"==t[0],s=!n&&"."==t[0],o=n||s?t.slice(1):t,a=E.test(o);return e.getElementById&&a&&n?(i=e.getElementById(o))?[i]:[]:1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType?[]:h.call(a&&!n&&e.getElementsByClassName?s?e.getElementsByClassName(o):e.getElementsByTagName(t):e.querySelectorAll(t))},s.contains=m.documentElement.contains?function(e,t){return e!==t&&e.contains(t)}:function(e,t){for(;t&&(t=t.parentNode);)if(t===e)return!0;return!1},s.type=D,s.isFunction=M,s.isWindow=V,s.isArray=N,s.isPlainObject=F,s.isEmptyObject=function(e){var t;for(t in e)return!1;return!0},s.isNumeric=function(e){var t=Number(e),i=typeof e;return null!=e&&"boolean"!=i&&("string"!=i||e.length)&&!isNaN(t)&&isFinite(t)||!1},s.inArray=function(e,t,i){return l.indexOf.call(t,e,i)},s.camelCase=a,s.trim=function(e){return null==e?"":String.prototype.trim.call(e)},s.uuid=0,s.support={},s.expr={},s.noop=function(){},s.map=function(e,t){var i,n,s,o=[];if(B(e))for(n=0;n<e.length;n++)null!=(i=t(e[n],n))&&o.push(i);else for(s in e)null!=(i=t(e[s],s))&&o.push(i);return U(o)},s.each=function(e,t){var i,n;if(B(e)){for(i=0;i<e.length;i++)if(!1===t.call(e[i],i,e[i]))return e}else for(n in e)if(!1===t.call(e[n],n,e[n]))return e;return e},s.grep=function(e,t){return c.call(e,t)},t.JSON&&(s.parseJSON=JSON.parse),s.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),(function(e,t){C["[object "+t+"]"]=t.toLowerCase()})),s.fn={constructor:O.Z,length:0,forEach:l.forEach,reduce:l.reduce,push:l.push,sort:l.sort,splice:l.splice,indexOf:l.indexOf,concat:function(){var e,t,i=[];for(e=0;e<arguments.length;e++)t=arguments[e],i[e]=O.isZ(t)?t.toArray():t;return d.apply(O.isZ(this)?this.toArray():this,i)},map:function(e){return s(s.map(this,(function(t,i){return e.call(t,i,t)})))},slice:function(){return s(h.apply(this,arguments))},ready:function(e){if("complete"===m.readyState||"loading"!==m.readyState&&!m.documentElement.doScroll)setTimeout((function(){e(s)}),0);else{var i=function(){m.removeEventListener("DOMContentLoaded",i,!1),t.removeEventListener("load",i,!1),e(s)};m.addEventListener("DOMContentLoaded",i,!1),t.addEventListener("load",i,!1)}return this},get:function(e){return e===i?h.call(this):this[e>=0?e:e+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each((function(){null!=this.parentNode&&this.parentNode.removeChild(this)}))},each:function(e){return l.every.call(this,(function(t,i){return!1!==e.call(t,i,t)})),this},filter:function(e){return M(e)?this.not(this.not(e)):s(c.call(this,(function(t){return O.matches(t,e)})))},add:function(e,t){return s(r(this.concat(s(e,t))))},is:function(e){return"string"==typeof e?this.length>0&&O.matches(this[0],e):e&&this.selector==e.selector},not:function(e){var t=[];if(M(e)&&e.call!==i)this.each((function(i){e.call(this,i)||t.push(this)}));else{var n="string"==typeof e?this.filter(e):B(e)&&M(e.item)?h.call(e):s(e);this.forEach((function(e){n.indexOf(e)<0&&t.push(e)}))}return s(t)},has:function(e){return this.filter((function(){return L(e)?s.contains(this,e):s(this).find(e).size()}))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!L(e)?e:s(e)},last:function(){var e=this[this.length-1];return e&&!L(e)?e:s(e)},find:function(e){var t=this;return e?"object"==typeof e?s(e).filter((function(){var e=this;return l.some.call(t,(function(t){return s.contains(t,e)}))})):1==this.length?s(O.qsa(this[0],e)):this.map((function(){return O.qsa(this,e)})):s()},closest:function(e,t){var i=[],n="object"==typeof e&&s(e);return this.each((function(s,o){for(;o&&!(n?n.indexOf(o)>=0:O.matches(o,e));)o=o!==t&&!k(o)&&o.parentNode;o&&i.indexOf(o)<0&&i.push(o)})),s(i)},parents:function(e){for(var t=[],i=this;i.length>0;)i=s.map(i,(function(e){if((e=e.parentNode)&&!k(e)&&t.indexOf(e)<0)return t.push(e),e}));return K(t,e)},parent:function(e){return K(r(this.pluck("parentNode")),e)},children:function(e){return K(this.map((function(){return $(this)})),e)},contents:function(){return this.map((function(){return this.contentDocument||h.call(this.childNodes)}))},siblings:function(e){return K(this.map((function(e,t){return c.call($(t.parentNode),(function(e){return e!==t}))})),e)},empty:function(){return this.each((function(){this.innerHTML=""}))},pluck:function(e){return s.map(this,(function(t){return t[e]}))},show:function(){return this.each((function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=G(this.nodeName))}))},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){var t=M(e);if(this[0]&&!t)var i=s(e).get(0),n=i.parentNode||this.length>1;return this.each((function(o){s(this).wrapAll(t?e.call(this,o):n?i.cloneNode(!0):i)}))},wrapAll:function(e){if(this[0]){var t;for(s(this[0]).before(e=s(e));(t=e.children()).length;)e=t.first();s(e).append(this)}return this},wrapInner:function(e){var t=M(e);return this.each((function(i){var n=s(this),o=n.contents(),a=t?e.call(this,i):e;o.length?o.wrapAll(a):n.append(a)}))},unwrap:function(){return this.parent().each((function(){s(this).replaceWith(s(this).children())})),this},clone:function(){return this.map((function(){return this.cloneNode(!0)}))},hide:function(){return this.css("display","none")},toggle:function(e){return this.each((function(){var t=s(this);(e===i?"none"==t.css("display"):e)?t.show():t.hide()}))},prev:function(e){return s(this.pluck("previousElementSibling")).filter(e||"*")},next:function(e){return s(this.pluck("nextElementSibling")).filter(e||"*")},html:function(e){return 0 in arguments?this.each((function(t){var i=this.innerHTML;s(this).empty().append(Q(this,e,t,i))})):0 in this?this[0].innerHTML:null},text:function(e){return 0 in arguments?this.each((function(t){var i=Q(this,e,t,this.textContent);this.textContent=null==i?"":""+i})):0 in this?this.pluck("textContent").join(""):null},attr:function(e,t){var s;return"string"!=typeof e||1 in arguments?this.each((function(i){if(1===this.nodeType)if(L(e))for(n in e)Z(this,n,e[n]);else Z(this,e,Q(this,t,i,this.getAttribute(e)))})):0 in this&&1==this[0].nodeType&&null!=(s=this[0].getAttribute(e))?s:i},removeAttr:function(e){return this.each((function(){1===this.nodeType&&e.split(" ").forEach((function(e){Z(this,e)}),this)}))},prop:function(e,t){return"string"!=typeof(e=R[e]||e)||1 in arguments?this.each((function(i){if(L(e))for(n in e)this[R[n]||n]=e[n];else this[e]=Q(this,t,i,this[e])})):this[0]&&this[0][e]},removeProp:function(e){return e=R[e]||e,this.each((function(){delete this[e]}))},data:function(e,t){var n="data-"+e.replace(y,"-$1").toLowerCase(),s=1 in arguments?this.attr(n,t):this.attr(n);return null!==s?J(s):i},val:function(e){return 0 in arguments?(null==e&&(e=""),this.each((function(t){this.value=Q(this,e,t,this.value)}))):this[0]&&(this[0].multiple?s(this[0]).find("option").filter((function(){return this.selected})).pluck("value"):this[0].value)},offset:function(e){if(e)return this.each((function(t){var i=s(this),n=Q(this,e,t,i.offset()),o=i.offsetParent().offset(),a={top:n.top-o.top,left:n.left-o.left};"static"==i.css("position")&&(a.position="relative"),i.css(a)}));if(!this.length)return null;if(m.documentElement!==this[0]&&!s.contains(m.documentElement,this[0]))return{top:0,left:0};var i=this[0].getBoundingClientRect();return{left:i.left+t.pageXOffset,top:i.top+t.pageYOffset,width:Math.round(i.width),height:Math.round(i.height)}},css:function(e,t){if(arguments.length<2){var i=this[0];if("string"==typeof e){if(!i)return;return i.style[a(e)]||getComputedStyle(i,"").getPropertyValue(e)}if(N(e)){if(!i)return;var o={},r=getComputedStyle(i,"");return s.each(e,(function(e,t){o[t]=i.style[a(t)]||r.getPropertyValue(t)})),o}}var l="";if("string"==D(e))t||0===t?l=H(e)+":"+j(e,t):this.each((function(){this.style.removeProperty(H(e))}));else for(n in e)e[n]||0===e[n]?l+=H(n)+":"+j(n,e[n])+";":this.each((function(){this.style.removeProperty(H(n))}));return this.each((function(){this.style.cssText+=";"+l}))},index:function(e){return e?this.indexOf(s(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return!!e&&l.some.call(this,(function(e){return this.test(X(e))}),W(e))},addClass:function(e){return e?this.each((function(t){if("className"in this){o=[];var i=X(this);Q(this,e,t,i).split(/\s+/g).forEach((function(e){s(this).hasClass(e)||o.push(e)}),this),o.length&&X(this,i+(i?" ":"")+o.join(" "))}})):this},removeClass:function(e){return this.each((function(t){if("className"in this){if(e===i)return X(this,"");o=X(this),Q(this,e,t,o).split(/\s+/g).forEach((function(e){o=o.replace(W(e)," ")})),X(this,o.trim())}}))},toggleClass:function(e,t){return e?this.each((function(n){var o=s(this);Q(this,e,n,X(this)).split(/\s+/g).forEach((function(e){(t===i?!o.hasClass(e):t)?o.addClass(e):o.removeClass(e)}))})):this},scrollTop:function(e){if(this.length){var t="scrollTop"in this[0];return e===i?t?this[0].scrollTop:this[0].pageYOffset:this.each(t?function(){this.scrollTop=e}:function(){this.scrollTo(this.scrollX,e)})}},scrollLeft:function(e){if(this.length){var t="scrollLeft"in this[0];return e===i?t?this[0].scrollLeft:this[0].pageXOffset:this.each(t?function(){this.scrollLeft=e}:function(){this.scrollTo(e,this.scrollY)})}},position:function(){if(this.length){var e=this[0],t=this.offsetParent(),i=this.offset(),n=b.test(t[0].nodeName)?{top:0,left:0}:t.offset();return i.top-=parseFloat(s(e).css("margin-top"))||0,i.left-=parseFloat(s(e).css("margin-left"))||0,n.top+=parseFloat(s(t[0]).css("border-top-width"))||0,n.left+=parseFloat(s(t[0]).css("border-left-width"))||0,{top:i.top-n.top,left:i.left-n.left}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent||m.body;e&&!b.test(e.nodeName)&&"static"==s(e).css("position");)e=e.offsetParent;return e}))}},s.fn.detach=s.fn.remove,["width","height"].forEach((function(e){var t=e.replace(/./,(function(e){return e[0].toUpperCase()}));s.fn[e]=function(n){var o,a=this[0];return n===i?V(a)?a["inner"+t]:k(a)?a.documentElement["scroll"+t]:(o=this.offset())&&o[e]:this.each((function(t){(a=s(this)).css(e,Q(this,n,t,a[e]()))}))}})),S.forEach((function(e,n){var o=n%2;s.fn[e]=function(){var e,a,r=s.map(arguments,(function(t){var n=[];return"array"==(e=D(t))?(t.forEach((function(e){return e.nodeType!==i?n.push(e):s.zepto.isZ(e)?n=n.concat(e.get()):void(n=n.concat(O.fragment(e)))})),n):"object"==e||null==t?t:O.fragment(t)})),l=this.length>1;return r.length<1?this:this.each((function(e,i){a=o?i:i.parentNode,i=0==n?i.nextSibling:1==n?i.firstChild:2==n?i:null;var d=s.contains(m.documentElement,a);r.forEach((function(e){if(l)e=e.cloneNode(!0);else if(!a)return s(e).remove();a.insertBefore(e,i),d&&ee(e,(function(e){if(!(null==e.nodeName||"SCRIPT"!==e.nodeName.toUpperCase()||e.type&&"text/javascript"!==e.type||e.src)){var i=e.ownerDocument?e.ownerDocument.defaultView:t;i.eval.call(i,e.innerHTML)}}))}))}))},s.fn[o?e+"To":"insert"+(n?"Before":"After")]=function(t){return s(t)[e](this),this}})),O.Z.prototype=Y.prototype=s.fn,O.uniq=r,O.deserializeValue=J,s.zepto=O,e.exports&&(e.exports=s),s}();return function(e){var i,n=1,s=Array.prototype.slice,o=e.isFunction,a=function(e){return"string"==typeof e},r={},l={},d="onfocusin"in t,c={focus:"focusin",blur:"focusout"},h={mouseenter:"mouseover",mouseleave:"mouseout"};function m(e){return e._zid||(e._zid=n++)}function p(e,t,i,n){if((t=u(t)).ns)var s=g(t.ns);return(r[m(e)]||[]).filter((function(e){return e&&(!t.e||e.e==t.e)&&(!t.ns||s.test(e.ns))&&(!i||m(e.fn)===m(i))&&(!n||e.sel==n)}))}function u(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function g(e){return new RegExp("(?:^| )"+e.replace(" "," .* ?")+"(?: |$)")}function v(e,t){return e.del&&!d&&e.e in c||!!t}function f(e){return h[e]||d&&c[e]||e}function _(t,n,s,o,a,l,d){var c=m(t),p=r[c]||(r[c]=[]);n.split(/\s/).forEach((function(n){if("ready"==n)return e(document).ready(s);var r=u(n);r.fn=s,r.sel=a,r.e in h&&(s=function(t){var i=t.relatedTarget;if(!i||i!==this&&!e.contains(this,i))return r.fn.apply(this,arguments)}),r.del=l;var c=l||s;r.proxy=function(e){if(!(e=T(e)).isImmediatePropagationStopped()){e.data=o;var n=c.apply(t,e._args==i?[e]:[e].concat(e._args));return!1===n&&(e.preventDefault(),e.stopPropagation()),n}},r.i=p.length,p.push(r),"addEventListener"in t&&t.addEventListener(f(r.e),r.proxy,v(r,d))}))}function b(e,t,i,n,s){var o=m(e);(t||"").split(/\s/).forEach((function(t){p(e,t,i,n).forEach((function(t){delete r[o][t.i],"removeEventListener"in e&&e.removeEventListener(f(t.e),t.proxy,v(t,s))}))}))}l.click=l.mousedown=l.mouseup=l.mousemove="MouseEvents",e.event={add:_,remove:b},e.proxy=function(t,i){var n=2 in arguments&&s.call(arguments,2);if(o(t)){var r=function(){return t.apply(i,n?n.concat(s.call(arguments)):arguments)};return r._zid=m(t),r}if(a(i))return n?(n.unshift(t[i],t),e.proxy.apply(null,n)):e.proxy(t[i],t);throw new TypeError("expected function")},e.fn.bind=function(e,t,i){return this.on(e,t,i)},e.fn.unbind=function(e,t){return this.off(e,t)},e.fn.one=function(e,t,i,n){return this.on(e,t,i,n,1)};var y=function(){return!0},A=function(){return!1},S=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,w={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function T(t,n){if(n||!t.isDefaultPrevented){n||(n=t),e.each(w,(function(e,i){var s=n[e];t[e]=function(){return this[i]=y,s&&s.apply(n,arguments)},t[i]=A}));try{t.timeStamp||(t.timeStamp=Date.now())}catch(e){}(n.defaultPrevented!==i?n.defaultPrevented:"returnValue"in n?!1===n.returnValue:n.getPreventDefault&&n.getPreventDefault())&&(t.isDefaultPrevented=y)}return t}function P(e){var t,n={originalEvent:e};for(t in e)S.test(t)||e[t]===i||(n[t]=e[t]);return T(n,e)}e.fn.delegate=function(e,t,i){return this.on(t,e,i)},e.fn.undelegate=function(e,t,i){return this.off(t,e,i)},e.fn.live=function(t,i){return e(document.body).delegate(this.selector,t,i),this},e.fn.die=function(t,i){return e(document.body).undelegate(this.selector,t,i),this},e.fn.on=function(t,n,r,l,d){var c,h,m=this;return t&&!a(t)?(e.each(t,(function(e,t){m.on(e,n,r,t,d)})),m):(a(n)||o(l)||!1===l||(l=r,r=n,n=i),l!==i&&!1!==r||(l=r,r=i),!1===l&&(l=A),m.each((function(i,o){d&&(c=function(e){return b(o,e.type,l),l.apply(this,arguments)}),n&&(h=function(t){var i,a=e(t.target).closest(n,o).get(0);if(a&&a!==o)return i=e.extend(P(t),{currentTarget:a,liveFired:o}),(c||l).apply(a,[i].concat(s.call(arguments,1)))}),_(o,t,l,r,n,h||c)})))},e.fn.off=function(t,n,s){var r=this;return t&&!a(t)?(e.each(t,(function(e,t){r.off(e,n,t)})),r):(a(n)||o(s)||!1===s||(s=n,n=i),!1===s&&(s=A),r.each((function(){b(this,t,s,n)})))},e.fn.trigger=function(t,i){return(t=a(t)||e.isPlainObject(t)?e.Event(t):T(t))._args=i,this.each((function(){t.type in c&&"function"==typeof this[t.type]?this[t.type]():"dispatchEvent"in this?this.dispatchEvent(t):e(this).triggerHandler(t,i)}))},e.fn.triggerHandler=function(t,i){var n,s;return this.each((function(o,r){(n=P(a(t)?e.Event(t):t))._args=i,n.target=r,e.each(p(r,t.type||t),(function(e,t){if(s=t.proxy(n),n.isImmediatePropagationStopped())return!1}))})),s},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach((function(t){e.fn[t]=function(e){return 0 in arguments?this.bind(t,e):this.trigger(t)}})),e.Event=function(e,t){a(e)||(e=(t=e).type);var i=document.createEvent(l[e]||"Events"),n=!0;if(t)for(var s in t)"bubbles"==s?n=!!t[s]:i[s]=t[s];return i.initEvent(e,n,!0),T(i)}}(n),function(e){var i,n,s=+new Date,o=t.document,a=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,r=/^(?:text|application)\/javascript/i,l=/^(?:text|application)\/xml/i,d="application/json",c="text/html",h=/^\s*$/,m=o.createElement("a");function p(t,i,n){var s=e.Event(i);return e(t).trigger(s,n),!s.isDefaultPrevented()}function u(e,t,i,n){if(e.global)return p(t||o,i,n)}function g(t){t.global&&0==e.active++&&u(t,null,"ajaxStart")}function v(t){t.global&&! --e.active&&u(t,null,"ajaxStop")}function f(e,t){var i=t.context;if(!1===t.beforeSend.call(i,e,t)||!1===u(t,i,"ajaxBeforeSend",[e,t]))return!1;u(t,i,"ajaxSend",[e,t])}function _(e,t,i,n){var s=i.context,o="success";i.success.call(s,e,o,t),n&&n.resolveWith(s,[e,o,t]),u(i,s,"ajaxSuccess",[t,i,e]),y(o,t,i)}function b(e,t,i,n,s){var o=n.context;n.error.call(o,i,t,e),s&&s.rejectWith(o,[i,t,e]),u(n,o,"ajaxError",[i,n,e||t]),y(t,i,n)}function y(e,t,i){var n=i.context;i.complete.call(n,t,e),u(i,n,"ajaxComplete",[t,i]),v(i)}function A(e,t,i){if(i.dataFilter==S)return e;var n=i.context;return i.dataFilter.call(n,e,t)}function S(){}function w(e){return e&&(e=e.split(";",2)[0]),e&&(e==c?"html":e==d?"json":r.test(e)?"script":l.test(e)&&"xml")||"text"}function T(e,t){return""==t?e:(e+"&"+t).replace(/[&?]{1,2}/,"?")}function P(t){t.processData&&t.data&&"string"!=e.type(t.data)&&(t.data=e.param(t.data,t.traditional)),!t.data||t.type&&"GET"!=t.type.toUpperCase()&&"jsonp"!=t.dataType||(t.url=T(t.url,t.data),t.data=void 0)}function E(t,i,n,s){return e.isFunction(i)&&(s=n,n=i,i=void 0),e.isFunction(n)||(s=n,n=void 0),{url:t,data:i,success:n,dataType:s}}m.href=t.location.href,e.active=0,e.ajaxJSONP=function(i,n){if(!("type"in i))return e.ajax(i);var a,r,l=i.jsonpCallback,d=(e.isFunction(l)?l():l)||"Zepto"+s++,c=o.createElement("script"),h=t[d],m=function(t){e(c).triggerHandler("error",t||"abort")},p={abort:m};return n&&n.promise(p),e(c).on("load error",(function(s,o){clearTimeout(r),e(c).off().remove(),"error"!=s.type&&a?_(a[0],p,i,n):b(null,o||"error",p,i,n),t[d]=h,a&&e.isFunction(h)&&h(a[0]),h=a=void 0})),!1===f(p,i)?(m("abort"),p):(t[d]=function(){a=arguments},c.src=i.url.replace(/\?(.+)=\?/,"?$1="+d),o.head.appendChild(c),i.timeout>0&&(r=setTimeout((function(){m("timeout")}),i.timeout)),p)},e.ajaxSettings={type:"GET",beforeSend:S,success:S,error:S,complete:S,context:null,global:!0,xhr:function(){return new t.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:d,xml:"application/xml, text/xml",html:c,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0,dataFilter:S},e.ajax=function(s){var a,r,l=e.extend({},s||{}),d=e.Deferred&&e.Deferred();for(i in e.ajaxSettings)void 0===l[i]&&(l[i]=e.ajaxSettings[i]);g(l),l.crossDomain||((a=o.createElement("a")).href=l.url,a.href=a.href,l.crossDomain=m.protocol+"//"+m.host!=a.protocol+"//"+a.host),l.url||(l.url=t.location.toString()),(r=l.url.indexOf("#"))>-1&&(l.url=l.url.slice(0,r)),P(l);var c=l.dataType,p=/\?.+=\?/.test(l.url);if(p&&(c="jsonp"),!1!==l.cache&&(s&&!0===s.cache||"script"!=c&&"jsonp"!=c)||(l.url=T(l.url,"_="+Date.now())),"jsonp"==c)return p||(l.url=T(l.url,l.jsonp?l.jsonp+"=?":!1===l.jsonp?"":"callback=?")),e.ajaxJSONP(l,d);var u,v=l.accepts[c],y={},E=function(e,t){y[e.toLowerCase()]=[e,t]},C=/^([\w-]+:)\/\//.test(l.url)?RegExp.$1:t.location.protocol,x=l.xhr(),O=x.setRequestHeader;if(d&&d.promise(x),l.crossDomain||E("X-Requested-With","XMLHttpRequest"),E("Accept",v||"*/*"),(v=l.mimeType||v)&&(v.indexOf(",")>-1&&(v=v.split(",",2)[0]),x.overrideMimeType&&x.overrideMimeType(v)),(l.contentType||!1!==l.contentType&&l.data&&"GET"!=l.type.toUpperCase())&&E("Content-Type",l.contentType||"application/x-www-form-urlencoded"),l.headers)for(n in l.headers)E(n,l.headers[n]);if(x.setRequestHeader=E,x.onreadystatechange=function(){if(4==x.readyState){x.onreadystatechange=S,clearTimeout(u);var t,i=!1;if(x.status>=200&&x.status<300||304==x.status||0==x.status&&"file:"==C){if(c=c||w(l.mimeType||x.getResponseHeader("content-type")),"arraybuffer"==x.responseType||"blob"==x.responseType)t=x.response;else{t=x.responseText;try{t=A(t,c,l),"script"==c?(0,eval)(t):"xml"==c?t=x.responseXML:"json"==c&&(t=h.test(t)?null:e.parseJSON(t))}catch(e){i=e}if(i)return b(i,"parsererror",x,l,d)}_(t,x,l,d)}else b(x.statusText||null,x.status?"error":"abort",x,l,d)}},!1===f(x,l))return x.abort(),b(null,"abort",x,l,d),x;var I=!("async"in l)||l.async;if(x.open(l.type,l.url,I,l.username,l.password),l.xhrFields)for(n in l.xhrFields)x[n]=l.xhrFields[n];for(n in y)O.apply(x,y[n]);return l.timeout>0&&(u=setTimeout((function(){x.onreadystatechange=S,x.abort(),b(null,"timeout",x,l,d)}),l.timeout)),x.send(l.data?l.data:null),x},e.get=function(){return e.ajax(E.apply(null,arguments))},e.post=function(){var t=E.apply(null,arguments);return t.type="POST",e.ajax(t)},e.getJSON=function(){var t=E.apply(null,arguments);return t.dataType="json",e.ajax(t)},e.fn.load=function(t,i,n){if(!this.length)return this;var s,o=this,r=t.split(/\s/),l=E(t,i,n),d=l.success;return r.length>1&&(l.url=r[0],s=r[1]),l.success=function(t){o.html(s?e("<div>").html(t.replace(a,"")).find(s):t),d&&d.apply(o,arguments)},e.ajax(l),this};var C=encodeURIComponent;function x(t,i,n,s){var o,a=e.isArray(i),r=e.isPlainObject(i);e.each(i,(function(i,l){o=e.type(l),s&&(i=n?s:s+"["+(r||"object"==o||"array"==o?i:"")+"]"),!s&&a?t.add(l.name,l.value):"array"==o||!n&&"object"==o?x(t,l,n,i):t.add(i,l)}))}e.param=function(t,i){var n=[];return n.add=function(t,i){e.isFunction(i)&&(i=i()),null==i&&(i=""),this.push(C(t)+"="+C(i))},x(n,t,i),n.join("&").replace(/%20/g,"+")}}(n),(i=n).fn.serializeArray=function(){var e,t,n=[],s=function(t){if(t.forEach)return t.forEach(s);n.push({name:e,value:t})};return this[0]&&i.each(this[0].elements,(function(n,o){t=o.type,(e=o.name)&&"fieldset"!=o.nodeName.toLowerCase()&&!o.disabled&&"submit"!=t&&"reset"!=t&&"button"!=t&&"file"!=t&&("radio"!=t&&"checkbox"!=t||o.checked)&&s(i(o).val())})),n},i.fn.serialize=function(){var e=[];return this.serializeArray().forEach((function(t){e.push(encodeURIComponent(t.name)+"="+encodeURIComponent(t.value))})),e.join("&")},i.fn.submit=function(e){if(0 in arguments)this.bind("submit",e);else if(this.length){var t=i.Event("submit");this.eq(0).trigger(t),t.isDefaultPrevented()||this.get(0).submit()}return this},function(){try{getComputedStyle(void 0)}catch(i){var e=getComputedStyle;t.getComputedStyle=function(t,i){try{return e(t,i)}catch(e){return null}}}}(),n}(s)}.call(t,i,t,e))||(e.exports=n)},606:(e,t,i)=>{"use strict";i.d(t,{A:()=>l});var n,s=i(562),o=i(140),a=i(568);class r{constructor(e,t,i){this.conf=e,this.log=new s.A({unitType:"Manager",className:"ScrollManager",version:this.conf.version,isDebug:this.conf.isDebug}),this.log.info("Created"),this.window=t||window,this.windowHeight=o.height(this.window),this.windowWidth=o.width(this.window),this.scrollElement=o.isEmpty(i)?this.window:a(i)[0],this.$scrollElement=a(this.scrollElement),this.timeBetweenEvents=100,this.lastTimeStamp=0,this.lastScrollTop=this.$scrollElement.scrollTop(),this.pps=0,this.ppsChange=0,this.vms=1/0,this.direction=1,this.maxMSBetweenEvents=2e3,this.scrollEndTimeout=this.conf.scrollEndTimeout;var n=o.throttle(this.onScroll.bind(this),this.timeBetweenEvents);this.scrollElement.addEventListener("scroll",n)}getPps(){return this.pps}onScroll(e){clearTimeout(this.scrollEnd),this.pps=0;var t=e.timeStamp-this.lastTimeStamp;this.lastTimeStamp=e.timeStamp;var i=this.$scrollElement.scrollTop()-this.lastScrollTop;this.lastScrollTop=this.$scrollElement.scrollTop(),this.direction=i<0?-1:1,t<this.maxMSBetweenEvents&&this.changePPS(i/t*1e3),o.parseBool(this.conf.isLogScroll)&&this.log.info("onScroll - pps: ".concat(this.direction*this.pps)),this.scrollEnd=setTimeout(this.onScrollEnd.bind(this),this.scrollEndTimeout)}onScrollEnd(){o.parseBool(this.conf.isLogScroll)&&this.log.warning("onScrollEnd"),this.changePPS(0),o.forEach(this.onScrollEndCBList,function(e){e()}.bind(this))}changePPS(e){this.ppsChange=e-this.pps,this.pps=e,0===this.pps&&(this.vms=1/0),this.vms=this.windowHeight/this.pps*1e3,o.forEach(this.onScrollPPSChange,(function(e){setTimeout(e,0)}))}registerForPPSChange(e){this.onScrollPPSChange=this.onScrollPPSChange||[];var t=this.onScrollPPSChange.indexOf(e);return-1!==t?t:this.onScrollPPSChange.push(e)-1}deRegisterForPPSChange(e){var t=this.onScrollPPSChange.indexOf(e);this.onScrollPPSChange.splice(t,1)}registerForScrollEnd(e){this.onScrollEndCBList=this.onScrollEndCBList||[];var t=this.onScrollEndCBList.indexOf(e);return-1!==t?t:this.onScrollEndCBList.push(e)-1}deRegisterForScrollEnd(e){var t=this.onScrollEndCBList.indexOf(e);this.onScrollEndCBList.splice(t,1)}setWin(e){this.window=e,this.windowHeight=o.height(this.window),this.windowWidth=o.width(this.window)}}const l=function(e,t,i){return n||(n=new r(e,t,i)),n}},646:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});var n=i(990),s=i(391),o=i(140);class a extends s.View{constructor(e){super(e)}renderTemplate(){if(this.template&&this.model&&(this.template=o.template(this.template),this.$el.append(this.template(this.model.attributes)),this.ui)){var e={};for(var t in this.ui)e[t]=this.$el.find(this.ui[t]);this.ui=e}}createStateHandlers(e){(0,n.f)(this,e)}}const r=a},654:(e,t,i)=>{"use strict";i.d(t,{K:()=>h});var n={setAdConfigAfter:"setSubModel",isPlacementSingleAd:!0,continueToPlayInNexCard:{isActive:!1}},s={setAdConfigAfter:"onAdSetToUnits",stopPredicts:!0,isKeepViewOnMidroll:!0,isKeepUnitOnMidroll:!0,isPlacementSingleAd:!0,isReplayAd:!0,isPreventNextAd:!0},o={isMultiAd:!1,isReplayAd:!0},a={isReplayAd:!0},r={setAdConfigAfter:"onAdSetToUnits",revertAfter:"_adVideoEnd",stickyCard:{isActive:!1,restrictions:{adTypeNotAllowed:!0}},hipCardPlacement:1,isNeedHipCard:!0},l={setAdConfigAfter:"setSubModel",isReplayable:!0},d={isReplayable:!0},c={isReplayable:!0},h={singleAd:{name:"singleAd",playerType:"singleAd",priority:1,defaultConfigFile:{isMultiAd:!1},unitsConfigFiles:{FEED_MANAGER:n,FEED_MANAGER_MOBILE:n,WIDGET_ITEM:s,WIDGET_ITEM_MOBILE:s,INLINE_INSTREAM:o,INLINE_MOBILE:o,SLIDER_INSTREAM:a,SLIDER_MOBILE:a}},rv:{name:"rv",priority:3},hip:{name:"hip",playerType:"hipAd",defaultConfigFile:{},unitsConfigFiles:{FEED_MANAGER:r,FEED_MANAGER_MOBILE:r}},replayable:{name:"replayable",defaultConfigFile:{},unitsConfigFiles:{FEED_MANAGER:l,FEED_MANAGER_MOBILE:l,INLINE_INSTREAM:d,INLINE_MOBILE:d,WIDGET_ITEM:c,WIDGET_ITEM_MOBILE:c},priority:4}}},659:e=>{"use strict";var t={};e.exports=function(e,i){var n=function(e){if(void 0===t[e]){var i=document.querySelector(e);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}t[e]=i}return t[e]}(e);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(i)}},793:(e,t,i)=>{"use strict";i.d(t,{A:()=>n});const n={player:void 0,oppsula:void 0,pms:void 0}},825:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(i){!function(e,t,i){var n="";i.supports&&(n+="@supports (".concat(i.supports,") {")),i.media&&(n+="@media ".concat(i.media," {"));var s=void 0!==i.layer;s&&(n+="@layer".concat(i.layer.length>0?" ".concat(i.layer):""," {")),n+=i.css,s&&(n+="}"),i.media&&(n+="}"),i.supports&&(n+="}");var o=i.sourceMap;o&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleTagTransform(n,e,t.options)}(t,e,i)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},907:(e,t,i)=>{"use strict";i.d(t,{A:()=>s});var n=i(990);const s=class{createStateHandlers(e){(0,n.f)(this,e)}}},990:(e,t,i)=>{"use strict";i.d(t,{f:()=>s});var n=i(140),s=(e,t)=>{if(e.model&&n.isArray(t)){var i=e=>{var{self:t,funcName:i,withBind:s,args:o}=e;n.isString(i)&&n.isFunction(t[i])&&(s?t[i].bind(t,...o)():t[i](...o))};n.each(t,function(t){var{event:s,funcName:o,isListenOnce:a=!1,withBind:r=!0}=t;if(n.isArray(s)&&function(t){var{event:s,funcName:o,isListenOnce:a,withBind:r}=t,l=a?"listenToOnce":"listenTo",d=!0,c=!1,h=[];n.forEach(s,function(e){var t=e.split(":")[0],i=e.split(":")[1];h.push({eventName:t,stateName:i})}.bind(e));var m=function(t){if(!a||!c){var s=!0;n.forEach(h,(function(t){(void 0!==e.model.get(t.eventName)?e.model.get(t.eventName).toString():void 0)!==t.stateName&&(s=!1)})),s&&d?(d=!1,c=!0,i({self:e,funcName:o,withBind:r,args:arguments})):s||t()}};n.forEach(s,function(t){(e=>{var t=e.self,i=e.event,n=e.func,s=e.listen,o=e.isListenOnce,a=e.onEventNotEqual,r=i.split(":")[0],l=i.split(":")[1],d=function(){var e=function(){};o&&(e=function(){t.model.listenToOnce(t.model,"change:".concat(r),d)}),t.model.get(r).toString()===l?n.call(t,e):o?(a(),e()):a()}.bind(t);t.model[s](t.model,"change:".concat(r),d)})({self:e,func:m,event:t,withBind:r,listen:l,isListenOnce:a,onEventNotEqual:function(){d=!0}.bind(e)})}.bind(e))}({event:s,funcName:o,isListenOnce:a,withBind:r}),n.isString(s)&&n.isString(o)){var l=a?"listenToOnce":"listenTo";s.match(":")?(e=>{var{self:t,funcName:n,event:s,withBind:o,listen:a,isListenOnce:r}=e,l=s.split(":")[0],d=s.split(":")[1],c=function(){t.model.get(l).toString()==d?i({self:t,funcName:n,withBind:o,args:arguments}):r&&t.model.listenToOnce(t.model,"change:".concat(l),c)}.bind(t);t.model[a](t.model,"change:".concat(l),c)})({self:e,funcName:o,event:s,withBind:r,listen:l,isListenOnce:a}):e.model[l](e.model,"change:".concat(s),function(){i({self:e,funcName:o,withBind:r,args:arguments})}.bind(e))}}.bind(e))}}}},n={};function s(e){var t=n[e];if(void 0!==t)return t.exports;var o=n[e]={id:e,exports:{}};return i[e].call(o.exports,o,o.exports,s),o.exports}s.m=i,s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},s.f={},s.e=e=>Promise.all(Object.keys(s.f).reduce(((t,i)=>(s.f[i](e,t),t)),[])),s.u=e=>"units/35_8_7/infra/cmAdService.js",s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},t="adUnits:",s.l=(i,n,o,a)=>{if(e[i])e[i].push(n);else{var r,l;if(void 0!==o)for(var d=document.getElementsByTagName("script"),c=0;c<d.length;c++){var h=d[c];if(h.getAttribute("src")==i||h.getAttribute("data-webpack")==t+o){r=h;break}}r||(l=!0,(r=document.createElement("script")).charset="utf-8",r.timeout=120,s.nc&&r.setAttribute("nonce",s.nc),r.setAttribute("data-webpack",t+o),r.src=i,0!==r.src.indexOf(window.location.origin+"/")&&(r.crossOrigin="anonymous")),e[i]=[n];var m=(t,n)=>{r.onerror=r.onload=null,clearTimeout(p);var s=e[i];if(delete e[i],r.parentNode&&r.parentNode.removeChild(r),s&&s.forEach((e=>e(n))),t)return t(n)},p=setTimeout(m.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=m.bind(null,r.onerror),r.onload=m.bind(null,r.onload),l&&document.head.appendChild(r)}},s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;s.g.importScripts&&(e=s.g.location+"");var t=s.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");if(i.length)for(var n=i.length-1;n>-1&&(!e||!/^http(s?):/.test(e));)e=i[n--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),s.p=e+"../../../"})(),(()=>{var e={929:0};s.f.j=(t,i)=>{var n=s.o(e,t)?e[t]:void 0;if(0!==n)if(n)i.push(n[2]);else{var o=new Promise(((i,s)=>n=e[t]=[i,s]));i.push(n[2]=o);var a=s.p+s.u(t),r=new Error;s.l(a,(i=>{if(s.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var o=i&&("load"===i.type?"missing":i.type),a=i&&i.target&&i.target.src;r.message="Loading chunk "+t+" failed.\n("+o+": "+a+")",r.name="ChunkLoadError",r.type=o,r.request=a,n[1](r)}}),"chunk-"+t,t)}};var t=(t,i)=>{var n,o,[a,r,l]=i,d=0;if(a.some((t=>0!==e[t]))){for(n in r)s.o(r,n)&&(s.m[n]=r[n]);if(l)l(s)}for(t&&t(i);d<a.length;d++)o=a[d],s.o(e,o)&&e[o]&&e[o][0](),e[o]=0},i=self.webpackChunkadUnits=self.webpackChunkadUnits||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})(),s.nc=void 0,(()=>{"use strict";var e=s(140),t=s.n(e),i=(s(568),s(391)),n=s.n(i),o=s(391);function a(e){var i,n;if(!t().isObject(e)||t().isFunction(e))return e;if(e instanceof o.Collection||e instanceof o.Model)return e;if(t().isDate(e))return new Date(e.getTime());if(t().isRegExp(e))return new RegExp(e.source,e.toString().replace(/.*\//,""));if(e instanceof HTMLElement||e.nodeType&&1===e.nodeType)return e;if(e instanceof CSSStyleDeclaration)return JSON.stringify(function(e){var t=!!document.documentMode,i=!t&&!!window.StyleMedia;if(!t&&!i)return e;var n={};for(var s in e)n[s]=e[s];return n}(e));n=t().isArray(e||t().isArguments(e)),i=function(e,t,i){return n?e.push(a(t)):e[i]=a(t),e};return t().reduce(e,i,n?[]:{})}function r(e){return null!=e&&((e.prototype==={}.prototype||e.prototype===Object.prototype)&&t().isObject(e)&&!t().isArray(e)&&!t().isFunction(e)&&!t().isDate(e)&&!t().isRegExp(e)&&!t().isArguments(e))}function l(e){return t().filter(t().keys(e),(function(t){return r(e[t])}))}function d(e){return t().filter(t().keys(e),(function(i){return t().isArray(e[i])}))}function c(e,i,n){var s,o,a,r,h,m,p,u;if(null==n&&(n=20),n<=0)return console.warn("_.deepExtend(): Maximum depth of recursion hit."),t().extend(e,i);for(o=function(t){return i[t]=c(e[t],i[t],n-1)},h=0,p=(r=t().intersection(l(e),l(i))).length;h<p;h++)o(r[h]);for(s=function(n){return i[n]=t().union(e[n],i[n])},m=0,u=(a=t().intersection(d(e),d(i))).length;m<u;m++)s(a[m]);return t().extend(e,i)}function h(e){var i={},n=f.keyPathSeparator;for(var s in e){var o=e[s];if(o&&o.constructor===Object&&!t().isEmpty(o)){var a=h(o);for(var r in a){var l=a[r];i[s+n+r]=l}}else i[s]=o}return i}function m(e,i,n){for(var s=f.keyPathSeparator,o=i.split(s),a=e,r=0,l=o.length;r<l;r++){if(n&&!t().has(a,o[r]))return!1;if(null==(a=a[o[r]])&&r<l-1&&(a={}),void 0===a)return!!n||a}return!!n||a}function p(e,i,n,s){s=s||{};for(var o=f.keyPathSeparator,a=i.split(o),r=e,l=0,d=a.length;l<d&&void 0!==r;l++){var c=a[l];l===d-1?s.unset?delete r[c]:r[c]=n:(void 0!==r[c]&&t().isObject(r[c])||(r[c]={}),r=r[c])}}function u(e){var i={};return"object"!=typeof e?e:(t().each(e,(function(e,t,n){i[t]=g(e)})),i)}function g(e){if(e&&"["===e[0]&&"]"===e[e.length-1]){let t;try{t=JSON.parse(e)}catch(i){t=e}e=t}if(t().isArray(e)){var i=[];return t().each(e,(function(e){i.push(g(e))})),i}return"object"!=typeof e||t().isElement(e)?"true"===e||!0===e||"false"!==e&&!1!==e&&(""===e||isNaN(e)?e:Number(e)):u(e)}function v(e,t){p(e,t,null,{unset:!0})}t().mixin({deepClone:a,isBasicObject:r,basicObjects:l,arrays:d,deepExtend:function(){var e,i,n,s;if(n=2<=arguments.length?[].slice.call(arguments,0,s=arguments.length-1):(s=0,[]),i=arguments[s++],t().isNumber(i)||(n.push(i),i=20),n.length<=1)return n[0];if(i<=0)return t().extend.apply(this,n);for(e=n.shift();n.length>0;)e=c(e,a(n.shift()),i);return e}});const f=n().Model.extend({constructor:function(e,i){var n,s=e||{};this.cid=t().uniqueId("c"),this.attributes={},i&&i.collection&&(this.collection=i.collection),i&&i.parse&&(s=this.parse(s,i)||{}),(n=t().result(this,"defaults"))&&(s=t().deepExtend({},n,s)),this.set(s,i),this.changed={},this.initialize.apply(this,arguments)},toJSON:function(e){return t().deepClone(this.attributes)},get:function(e){return m(this.attributes,e)},set:function(e,i,n,s=!0){var o,a,r,l,d,c,g,_;if(null==e)return this;if("object"==typeof e?(a=e,n=i||{}):(a={})[e]=i,s&&(a=u(a)),n||(n={}),!this._validate(a,n))return!1;for(o in r=n.unset,d=n.silent,l=[],c=this._changing,this._changing=!0,c||(this._previousAttributes=t().deepClone(this.attributes),this.changed={}),_=this.attributes,g=this._previousAttributes,this.idAttribute in a&&(this.id=a[this.idAttribute]),a=h(a))i=a[o],t().isEqual(m(_,o),i)||l.push(o),t().isEqual(m(g,o),i)?v(this.changed,o):p(this.changed,o,i),r?v(_,o):p(_,o,i);if(!d){l.length&&(this._pending=!0);for(var b=f.keyPathSeparator,y=0,A=l.length;y<A;y++){e=l[y];this.trigger("change:"+e,this,m(_,e),n);for(var S=e.split(b),w=S.length-1;w>0;w--){var T=t().first(S,w).join(b),P=T+b+"*";this.trigger("change:"+P,this,m(_,T),n),this.trigger("change:"+T,this,m(_,e),n)}}}if(c)return this;if(!d)for(;this._pending;)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},clear:function(e){var i={},n=h(this.attributes);for(var s in n)i[s]=void 0;return this.set(i,t().extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!t().isEmpty(this.changed):void 0!==m(this.changed,e)},changedAttributes:function(e){if(!e)return!!this.hasChanged()&&h(this.changed);var i=this._changing?this._previousAttributes:this.attributes;e=h(e),i=h(i);var n,s=!1;for(var o in e)t().isEqual(i[o],n=e[o])||((s||(s={}))[o]=n);return s},previous:function(e){return null!=e&&this._previousAttributes?m(this._previousAttributes,e):null},previousAttributes:function(){return t().deepClone(this._previousAttributes)}});f.keyPathSeparator=".";const _=f;n().DeepModel=_;var b,y=s(494),A=s(562),S=s(568);function w(e){throw new TypeError('"'+e+'" is read-only')}function T(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function P(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var E=null,C=e.flatten;e.mixin({setConfig(e){(E=e).isDebug&&(b=new A.A({unitType:E.unitType,className:"utils",version:E.version,isDebug:E.isDebug}))},parseBool:function(e){return"true"===e||!0===e||1===e||"1"===e},el:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=document.createElement(e);for(var n in t)null!=t[n]&&(i[n]=t[n]);return i},loadJs:function(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return document.head.appendChild(e.el("script",function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?T(Object(i),!0).forEach((function(t){P(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):T(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({src:t,onload:i,async:!0},n)))},loadCss:(t,i)=>document.head.appendChild(e.el("link",{href:t,onload:i,rel:"stylesheet",type:"text/css"})),loadJsArr:function(t,i){var n;i&&(n=t.length);for(var s=0;s<t.length;s++)t[s].indexOf(".css")>-1?e.loadCss(t[s],o):e.loadJs(t[s],o);function o(){0===--n&&e.defer(i.bind(this))}},firePixelConditional:function(t,i,n,s){t&&e.firePixel(i,n,s)},firePixel:function(t,i,n){t&&(n&&(t=e.addParametersToUrl(t,n,-1===t.indexOf("?"))),e.log("pixel","firing pixel: ".concat(i," url: ").concat(t)),document.createElement("IMG").src=t)},getVideoHeight(e){var t=parseInt(9/16*e);return isNaN(t)?0:t},getVideoWidth(e){var t=parseInt(16/9*e);return isNaN(t)?0:t},getVideoBestSize(e,t){var i=this.getVideoHeight(e);return t>=i?t=i:e=this.getVideoWidth(t),{width:e,height:t}},getVideoHeightByRatio(e,t){var i=parseInt(1/t*e);return isNaN(i)?0:i},getVideoWidthByRatio(e,t){var i=parseInt(t*e);return isNaN(i)?0:i},getViewPercent:function(t,i,n,s,o){var a,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,l=e.isEmpty(s)?S(this.getTopWindow()):S(s),d={top:0,left:0,right:e.width(l[0]),bottom:e.height(l[0])};if(null!==(a=window.taboolaBridge)&&void 0!==a&&a.active){var c=this.calcViewportPositionInApp(s);c&&(d=c)}var h=Number(n)||0,m=Number(i)||0,p=o?t.getClientRects()[0]:e.safeGetBoundingClientRect(t),u={top:p.top,left:p.left};if(u.right=u.left+m,u.bottom=u.top+h,r&&window.taboolaMobile&&Object.keys(window.taboolaMobile).length>0&&(u.top=p.top+window.scrollY),d.right<u.left||d.left>u.right||d.bottom<u.top||d.top>u.bottom)return 0;var g=Math.min(1,(u.bottom-d.top)/h),v=Math.min(1,(d.bottom-u.top)/h);return Math.min(1,(u.right-d.left)/m)*Math.min(1,(d.right-u.left)/m)*g*v*100},getValidSelectorElements(t,i,n){var s=[];return i=i||100,n=n||0,t&&(e.isArray(t)||this.isZeptoCollection(t))&&(s=e.filter(t,(function(t){var s=e.safeGetBoundingClientRect(t);return s.width>=i&&s.height>=n&&!e.has(y.l.INVALID_SELECTOR_TAG_NAMES,t.tagName)}))),s},filterObject(e,t){if(e){for(var i={},n=0;n<t.length;n++){var s=e[t[n]];void 0!==s&&(i[t[n]]=s)}return i}},assignWithoutUndefinedValues(e,t){for(var i in t)void 0!==t[i]&&(e[i]=t[i]);return e},getTopOfEl(t){if(t){var i=t,n=0;if(document.getElementById||document.all)do{for(t.offsetLeft-t.scrollLeft,n+=t.offsetTop-t.scrollTop,t=t.offsetParent,i=e.getParentNode(i);i!=t;)i.scrollLeft,n-=i.scrollTop,i=e.getParentNode(i)}while(t&&t.offsetParent);else document.layers&&(n+=t.y,t.x);return n}},getParentNode:e=>e.parentNode&&e.parentNode.host?e.parentNode.host:e.parentNode,PrefixedEvent(t,i,n,s){n=n.toLowerCase(),e.each(["webkit","moz","MS","o",""],(function(e){t[i](e+n,s)}))},oneAnimationEnd(t,i){var n=e.debounce(i,200);this.PrefixedEvent(t,"one","transitionend",n),this.PrefixedEvent(t,"one","animationend",n)},addParametersToUrl(e,t,i){var n=e;return n+=i?"?":"&",S.each(t,(function(e,t){void 0!==t&&""!==t&&(n+="".concat(e,"=").concat(t,"&"))})),n},skipTransitionCss(e,t){e.addClass("none-transition"),e.css(t),this.flushCss(e[0]),e.removeClass("none-transition")},flushCss(e){e.offsetHeight},getTopWindow(){var e=window;try{for(;e.document!==e.top.document;)e=e.top;return e}catch(e){return window}},isInIframe:function(e){return!!e&&(e.inIframe||e.inDFP)},isInFriendlyIframe:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cmTag.config.iframeData;return!!e&&(this.isInIframe(e)&&e.isFriendlyIframe)},hideDFPIframe:function(t){if(this.isInFriendlyIframe(t)){t.iframe.style.display="none";for(var i=t.iframe.parentNode;e.some(y.l.DFP_KEYWORDS,(function(e){return-1!==i.id.indexOf(e)}));)i.style.display="none",i.parentNode,w("parent")}},crc32:function(t){if(!t||!e.isString(t))return 0;var i;void 0===i&&(i=0);var n=0;i=~i;for(var s=0,o=(t=this.utf8Encode(t)).length;s<o;s++)n=255&(i^t.charCodeAt(s)),i=i>>>8^"0x".concat("00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F 63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC 51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E 7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D 806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA 11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F 30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D".substr(9*n,8));return~i},utf8Encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",i=0;i<e.length;i++){var n=e.charCodeAt(i);n<128?t+=String.fromCharCode(n):n>127&&n<2048?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t},isFactor:function(t){return e.isNumber(t)&&t===e.random(1,t)},toCssObj:function(t){return e.isString(t)?JSON.parse(t):t},isLayerVisible:function(e){function t(e,t){return window.getComputedStyle?document.defaultView.getComputedStyle(e,null)[t]:e.currentStyle?e.currentStyle[t]:void 0}return function e(i,n,s,o,a,r,l){var d=i.parentNode;return!!function(e){for(;e=e.parentNode;)if(e===document)return!0;return!1}(i)&&(9===d.nodeType||"0"!==t(i,"opacity")&&"none"!==t(i,"display")&&"hidden"!==t(i,"visibility")&&(void 0!==n&&void 0!==s&&void 0!==o&&void 0!==a&&void 0!==r&&void 0!==l||(n=i.offsetTop,a=i.offsetLeft,o=n+i.offsetHeight,s=a+i.offsetWidth,r=i.offsetWidth,l=i.offsetHeight),!d||("hidden"!==t(d,"overflow")&&"scroll"!==t(d,"overflow")||!(a+2>d.offsetWidth+d.scrollLeft||a+r-2<d.scrollLeft||n+2>d.offsetHeight+d.scrollTop||n+l-2<d.scrollTop))&&(i.offsetParent===d&&(a+=d.offsetLeft,n+=d.offsetTop),e(d,n,s,o,a,r,l))))}(e)},getOffset(t,i){if(t&&(Array.isArray(t)||this.isZeptoCollection(t))&&t[0]&&(t=t[0]),t){if(1===i)return S(t).offset();var n=t,s=t,o=0,a=0;if(document.getElementById||document.all)do{for(a+=t.offsetLeft-t.scrollLeft,o+=t.offsetTop-t.scrollTop,t=t.offsetParent,s=e.getParentNode(s);s&&s!=t;)a-=s.scrollLeft,o-=s.scrollTop,s=e.getParentNode(s)}while(t&&t.offsetParent);else document.layers&&(o+=t.y,a+=t.x);return{top:o,left:S(n).offset().left||a}}},flatten(e){var t={};for(var i in e)t[i]=e[i];return t},cssObjToString(e){var t=!!document.documentMode,i=!t&&!!window.StyleMedia,n=window.navigator.userAgent.indexOf("Firefox")>-1;return(t||i||n)&&(e=this.flatten(e)),JSON.stringify(e)},isModel(e,t,i){return i?i.model.get(e)===t:this.model.get(e)===t},generateGuid(e,t){var i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),n=[];t=t||i.length,e=e||22;for(var s=0;s<e;s++)n[s]=i[0|Math.random()*t];return n.join("")},isObserverSupported(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=window[e],n=void 0!==i,s=!1;return n&&(s=-1!==i.toString().indexOf("[native code]")),s||t&&n},isHeightValid:e=>!!e,isWidthValid:e=>!!e,dispatchTRC(t,i){e.dispatchTRCWithPayload(t,void 0,i)},dispatchTRCWithPayload(t,i,n){if(window.TRC&&window.TRC.dispatch)try{window.TRC.dispatch(t,i),e.log("info","dispatched TRC event: ".concat(t))}catch(i){n&&n.set("TRCDispatchFailed",!0),e.log("error","dispatched TRC event: ".concat(t," is failed, error: ").concat(i))}},getOffsetWithContainer(e,t,i){if(!i)return this.getOffset(e,t);var n=this.getOffset(e,t),s=this.getOffset(S(i));return{top:n.top-s.top,left:n.left-s.left}},getIframeDocument(e){try{if(e.tagName&&"iframe"==e.tagName.toLowerCase())return e.contentWindow.console.error&&(e.contentWindow.console.error=function(){}),e.contentDocument}catch(e){return null}},DOMIterator(e,t,i,n){try{var s=this.getIframeDocument(e)||e;if(!s)return;s.querySelectorAll(t).forEach((e=>{this.DOMIterator(e,t,i,n)})),i(s.querySelectorAll(n))}catch(e){}},isBrowserIE11:e=>-1!==e.name.indexOf("ie")&&11===e.version,forceElementRedrawWithBorderChange(e,t,i){if(this.isBrowserIE11(e)&&!i){var n=S(t);n&&n.css&&(n.css("border","1px solid transparent"),setTimeout(function(){n&&n.css&&n.css("border","none")}.bind(n)))}},hasPassedPixelFromSelector(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3?arguments[3]:void 0;if((arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0)===y.l.SLIDER.INSTREAM)return!0;if(t){var o,a;if(t.nodeType)o=[t];else{var r=t.toString();o=a=S(r)}s&&(o=this.getValidSelectorElements(a));var l=o[0];if(i=S(i)[0],window.taboolaBridge){var d=taboolaBridge.data;if(d&&d.boundingClientRect){var c=d.boundingClientRect.top-d.rootBounds.bottom,h=c<n;return e.log("info","###hasPassedPixelsFromSelector ".concat(h," - ").concat(c,"/").concat(n)),h}}var m=void 0!==i,p=m?i.clientHeight:window.innerHeight,u=m?p+i.scrollTop:p+window.pageYOffset,g=n;return this.getTopOfEl(l)-g<=u}},getViewportHeight:e=>void 0!==(e=S(e)[0])?e.clientHeight:window.innerHeight,calcViewportPositionInApp(e){var t,i=null===(t=window.taboolaBridge)||void 0===t?void 0:t.data,n=null==i?void 0:i.boundingClientRect;return i&&n?{top:n.y<0?0-n.y:0,left:0,right:n.width,bottom:n.y>i.rootBounds.height?0:Math.abs(n.y-i.rootBounds.height)}:null},getOrganicCard(){var e,t=(null===(e=TRCImpl)||void 0===e?void 0:e.boxes)||{};for(var i in t){var n=t[i]||{},s=n.isFeedCard,o=!1;if(n.itemsTypes&&n.itemsTypes["is-organic"]&&(o=n.itemsTypes["is-organic"]),o&&s&&n.boxes.length)return n.mode}},getRootElementFontSize:()=>parseFloat(getComputedStyle(document.documentElement).fontSize),convertRem(e){return e*this.getRootElementFontSize()},flattenArray:(e,t)=>C(e,t,!1),offsetFromBottomOfViewPort:t=>e.safeGetBoundingClientRect(t).top-(window.innerHeight||document.documentElement.clientHeight),sendingEventToTaboolaBridge(e,t){window.taboolaBridge&&window.taboolaBridge.emit("videoEvent",{type:e,value:t})},setAnimationPlayState(e,t){e.style.webkitAnimationPlayState=t,e.style.animationPlayState=t},recoReelPlayStateAnimation(e,t,i){var n=t+1,s=S('[data-progress-bar-index="'.concat(t,'"] .tbl-progress-runner'),e)[0],o=S(".videoCube_".concat(n,"_child .thumbBlock"),e)[0];s&&this.setAnimationPlayState(s,i),o&&this.setAnimationPlayState(o,i);var a=S(".videoCube_".concat(n,"_child .tbl-vrl-video-wrapper video"),e)[0];if(a){this.toggleRecoReelVideo(a,i);var r=S(".vrl-cta",e.parentElement)[0];r&&this.setAnimationPlayState(r,i)}},toggleRecoReelVideo(e,t){"paused"===t?e.pause():e.play()},getRandomFromList:e=>!(e.length<1)&&e[Math.floor(Math.random()*e.length)],getSubUnitType(e){var t=e.isMidArticle,i=e.isSticky,n=e.isStartFromSlider,s=e.isDetachToSlider;return t?y.l.SUB_UNIT_TYPE.MID_ARTICLE_AS_FEED:i||!n||s?i||n||!s?!i&&n&&s?y.l.SUB_UNIT_TYPE.SUPER_SLIDER:i?y.l.SUB_UNIT_TYPE.STICKY_BELOW:void 0:y.l.SUB_UNIT_TYPE.DETACH_TO_SLIDER:y.l.SUB_UNIT_TYPE.START_FROM_SLIDER},getRecoReelSubUnitType(e){var t=e.isRecoReelEnableRboxSlider||!1,i=e.isRecoReelStartFromRboxSlider||!1;return t&&i?y.l.RECO_REEL_SUB_UNIT_TYPE.START_FROM_SLIDER_RBOX:t&&!i?y.l.RECO_REEL_SUB_UNIT_TYPE.DETACH_TO_SLIDER_RBOX:y.l.RECO_REEL_SUB_UNIT_TYPE.PLAIN},isReadMoreOnPage:()=>window.TRC&&void 0!==window.TRC.readMoreVisible,isMidArticleOnReadMorePage(e){return this.isReadMoreOnPage()&&e},isReadMoreObserverNeededOnPage:(t,i)=>t&&i&&window.TRC&&window.TRC.readMoreVisible&&e.isObserverSupported("IntersectionObserver"),trcPerformanceMeasurement(t,i,n){try{if(t&&e.isTRCPerformanceEnabled()){var s="".concat(i).concat(n);window.TRC.performance.mark(s,null,"","",i,window.TRC.PerfEvenType[n.toUpperCase()])}}catch(e){}},isTRCPerformanceEnabled:()=>window.TRC&&window.TRC.performance&&window.TRC.performance.mark,copyCSSFromPlaceholder(t,i,n){if(t&&i&&n&&0!==n.length){var s=window.getComputedStyle(i),o={};e.forEach(n,(e=>{o[e]=s[e]})),t.css(o)}},buildObserverThresholdList(){for(var e=[],t=1;t<=20;t++){var i=t/20;e.push(i)}return e.push(0),e},getRequiredHeight(t,i){var n=i.get("width"),s=document.querySelector("[".concat(t,"]"));if(s){var o=e.safeGetBoundingClientRect(s).width;return e.getVideoHeight(o)}return e.getVideoHeight(n)},getFeedTitleHeight(){var t=document.querySelector(".tbl-feed-header");return t?e.height(t):0},getPlacement:e=>e.get("placement").replace("Feed - ","").split(" |")[0],canPlayInAboveTheFeedPlacement:e=>e.get("shouldReplaceScAboveTheFeed")?e.get("shouldPlayInATFWithSC"):e.get("shouldPlayInATFWithoutSC"),isLanguageRTL(e){var t=e.get("language");return e.get("rtlLanguagesArray").includes(t)},isSliderCutOffEnabled:(e,t)=>e.get("isSliderCutOff")&&t&&!t.alwsldr,clickThru(e){this.model.get("isInAppBridgeOn")&&window.taboolaBridge&&window.taboolaMobile&&window.taboolaMobile.getSupportedFeatures&&window.taboolaMobile.getSupportedFeatures().VideoClick?window.taboolaBridge.emit("videoClick",e):window.open(e)},defer(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t&&e.isFunction(t))if(window.cmTag&&window.cmTag.DeferTask)window.cmTag.DeferTask(t,i);else if(model.get("deferTasks.isActive")){!function(t){if((null===(s=TRC)||void 0===s||null===(s=s.util)||void 0===s?void 0:s.isNativeFunction(window.Scheduler))&&e.isFunction(null===(o=window)||void 0===o||null===(o=o.scheduler)||void 0===o?void 0:o.postTask))window.scheduler.postTask(t,{priority:"user-blocking"});else if(null===(n=window)||void 0===n||null===(n=n.TRC)||void 0===n?void 0:n.sendTaskToFader)window.TRC.sendTaskToFader(t);else{var i;setTimeout(t,0),null===(i=__trcError)||void 0===i||i("Video Lite Unit using defer without Fader!")}var n,s,o}(i?t.bind(i):t)}else t.apply(i)},isZeptoCollection:e=>S.zepto.isZ(e),log(e,t){b&&b[e](t)},safeObserve(t,i){e.isElement(i)&&t.observe(i)},isString:e=>"string"==typeof e,safeGetBoundingClientRect:e=>e&&e.getBoundingClientRect?e.getBoundingClientRect():{},isElementInViewport(e){if(!e)return!1;var t=this.safeGetBoundingClientRect(e),i=window.innerHeight||document.documentElement.clientHeight,n=window.innerWidth||document.documentElement.clientWidth;return t.top<i&&t.bottom>0&&t.left<n&&t.right>0},isPortrait:()=>window.matchMedia("(orientation: portrait)").matches,waitForStableWidth(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200;return new Promise((i=>{if(!e)return i({width:0,height:0});var n=()=>{var t,i=null===(t=e.getBoundingClientRect)||void 0===t?void 0:t.call(e);return i?{width:i.width,height:i.height}:{width:e.clientWidth||0,height:e.clientHeight||0}},s=()=>n().width>=t;if(s())return i(n());var o=null,a=null,r=()=>{return!!s()&&(null===(e=o)||void 0===e||null===(t=e.disconnect)||void 0===t||t.call(e),a&&cancelAnimationFrame(a),i(n()),!0);var e,t};if("undefined"!=typeof ResizeObserver)try{(o=new ResizeObserver((()=>r()))).observe(e)}catch(e){o=null}if(!o){var l=()=>r()||(a=requestAnimationFrame(l));a=requestAnimationFrame(l)}}))}}),["width","height"].forEach((t=>{var i=t.replace(/./,(function(e){return e[0].toUpperCase()}));e.mixin({[t]:e=>{if(e)return e==e.window?e["inner".concat(i)]:e.nodeType&&e.DOCUMENT_NODE&&e.nodeType==e.DOCUMENT_NODE?e["scroll".concat(i)]:e["offset".concat(i)]}})}));var x=s(72),O=s.n(x),I=s(825),R=s.n(I),N=s(659),D=s.n(N),M=s(56),V=s.n(M),k=s(540),L=s.n(k),F=s(113),B=s.n(F),z=s(131),U={};U.styleTagTransform=B(),U.setAttributes=V(),U.insert=D().bind(null,"head"),U.domAPI=R(),U.insertStyleElement=L();O()(z.A,U);z.A&&z.A.locals&&z.A.locals;const H=class{constructor(e){this.syncUrl=e.get("sync"),this.syncUrl&&(this.log=new A.A({unitType:e.get("unitType"),className:this.constructor.name,version:e.get("version"),isDebug:e.get("isDebug")}),this._syncCookies())}_syncCookies(){this.log.info("Cookie sync request",this.syncUrl);var e=document.createElement("iframe");e.style.display="none",e.src=this.syncUrl,e.onerror=()=>{this._stopSync()},document.body.appendChild(e)}_stopSync(){this.log.info("Stopping cookie sync")}};var W=s(427),j=s(793);class G extends W.f{constructor(e){super(e),this.model=e,this.log=new A.A({unitType:this.model.get("unitType"),className:"GDPRManager",version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this._init()}_init(){var e=window.__cmp;void 0!==e?(this.model.set("hasCMPonPage",!0),e("getConsentData",null,this._getConsentDataCB.bind(this))):(this.model.set("hasCMPonPage",!1),this.model.set("canStartPlayer",!0))}_getConsentDataCB(e){var t=e.gdprApplies,i=e.consentData||"";this._setPlayerParams(t,i)}_setPlayerParams(e,t){j.A.player?(j.A.player.set("gdprApplies",e),j.A.player.set("cdb",t)):(this.model.set("gdprApplies",e),this.model.set("consentDaisyBit",t),this.model.set("canStartPlayer",!0))}_isInFriendlyIframe(){return this._isInIframe()&&cmTag.config.iframeData.isFriendlyIframe}_isInIframe(){return cmTag.config.iframeData.inIframe||cmTag.config.iframeData.inDFP}}const $=G;function Y(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const q=class{constructor(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0;Y(this,"_isSendBeaconSupported",(()=>!(!navigator||"function"!=typeof navigator.sendBeacon))),this.useSendBeacon=this._isSendBeaconSupported()&&i,this.baseUrl=e,this.useSendBeacon||(this.async=null==n||n,this.withCredentials=null==s||s,this.timeout=o||5e3,this.contentType=t||"application/x-www-form-urlencoded")}_onFail(){this.gotResponse||(this.gotResponse=!0)}send(e,t){this.useSendBeacon?this._sendBeacon(e,t):this._sendXHR(e,t)}_sendBeacon(e,t){var i=void 0!==t?"?rst=".concat(t):"",n="".concat(this.baseUrl).concat(i);navigator.sendBeacon(n,e)}_sendXHR(e,t){if(this.baseUrl){var i=new XMLHttpRequest,n=void 0!==t?"?rst=".concat(t):"",s="".concat(this.baseUrl).concat(n);return i.open(e?"POST":"GET",s,!0),i.withCredentials=this.withCredentials,i.setRequestHeader("Content-type",this.contentType),i.async=this.async,i.timeout=this.timeout,i.gotResponse=!1,this._setHttpEvents(i),i.send(e),!0}return!1}_setHttpEvents(e){e.addEventListener("error",this._onFail),e.addEventListener("abort",this._onFail),e.addEventListener("timeout",this._onFail),e.addEventListener("readystatechange",(()=>{if(4==this.readyState){if(this.gotResponse)return;this.gotResponse=!0}}))}};const K=class{constructor(){this.models={},this.data={psthdrs:"application/json",timbtopps:2e3}}setModel(e,t){this.models[e]=t}get(e,t){var i;if(t&&this.models.hasOwnProperty(e)){var n=(null===(i=this.models)||void 0===i?void 0:i[e].get(t))||void 0;return n||this._getFromData(t)}}getBillableEvents(e){return(this.get(e,"billableEvents")||[]).concat((this.get(e,"bllblevt")||"").split(",").map((e=>parseInt(e,10))))}_getFromData(e){var t=e.toString();return t.includes(".")?t.split(".").reduce(((e,t)=>e&&e[t]),this.data):this.data[t]}destroy(){this.stopped||(this.stopped=!0,this.models=this.data=void 0)}};s(140);var Q=e=>e?1:0,Z=(e,t)=>{try{var i=[];return JSON.stringify(e,((e,t)=>{if(null!=t&&"object"==typeof t){if(i.indexOf(t)>-1)return;i.push(t)}return t}),t)}catch(e){return""}};const X={KIBANA_URL:"vidanalytics.taboola.com/putes/units-ads-analytics",SERVICES:{UNIT:"unit",PLAYER:"player"},EXTRA_PARAMS_EXCEPTIONS:["vidCurrentTime"],OPPS_PARAMETERS_MAPING:{player:{pstn:"pstn",mob:"isMobile",unv:"unit_version",unit_type:"unit_type",pv:"playerVersion",fdScore:"fdScore",abt:"ab_test",agl:"preset.level",su:"subUnitType",awr:"performance.dtsvrRoundTripAverageDuration",pm:"performance.performanceMeasurment",dtsvrRoundTripAverageDuration:"performance.dtsvrRoundTripAverageDuration",mp:"modifiedPlacement",sts:"playerRepeatCount",ft:"frameType",be:"playerHasRvInQ",pt:"ab_test",width:"width",height:"height",cmDast:"auc_dast"},unit:{pstn:"pstn",mob:"isMobile",unv:"unit_version",unit_type:"unit_type",fdScore:"fdScore",abt:"abTest",agl:"preset.level",awr:"performance.dtsvrRoundTripAverageDuration",pm:"performance.performanceMeasurment",su:"subUnitType",ft:"frameType",mp:"modifiedPlacement",vstt:"isInTab",cmDast:"cmDast",be:"playerHasRvInQ",sts:"playerRepeatCount"}},MAX_ES_STRING_LENGTH:32766};var J=s(140);function ee(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function te(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const ie=class{constructor(e,t){var i=e.get("player.urls.oppsRequest")||"".concat(e.get("opps_base_path"),"/OpportunityServlet"),n=e.get("player.urls.nonBllboppsRequest")||"".concat(e.get("non_bllb_opps_base_path"),"/OpportunityServlet"),s=e.get("sendBeacon");this.opps=[],this.fireOppsInterval=null,this.stopped=!1,this.store=new K,this.setSource(t,e),this.oppRequest=new q(i,this.store.get(t,"psthdrs"),s),this.nonBllbOppRequest=new q(n,this.store.get(t,"psthdrs"),s),this._setFireOppsInterval(t)}_activateCallbacks(e){for(var t=0;t<this[e].length;t++){var i=this[e][t];this[e].splice(this[e].indexOf(i),1),i()}}_addAbTests(e,t){return"".concat(e.requiredViewabilityDrawn?"!ronrv":"").concat(this.store.get(t,"isReadMoreOnPage")?"!rdmr":"")}_addExtraParams(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(i),!0).forEach((function(t){te(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ee(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},e);return Object.keys(t).forEach((e=>{X.EXTRA_PARAMS_EXCEPTIONS.indexOf(e)<0&&(i[e]=t[e])})),i}_addCmTagParams(e,t){var i=this.store.get(e,"oppsQS")||{};Object.assign(t,i)}_addDelayedParams(e,t,i,n){var s=this._getDelayedParams(t,i,n)||{};Object.assign(e,s)}_getDelayedParams(e,t,i){var n=X.OPPS_PARAMETERS_MAPING[e],s=this.store.get(e,n.width),o=this.store.get(e,n.height);return{"auc-dast":this.store.get(e,n.cmDast)||void 0,sts:i.STS||this.store.get(e,n.sts),wp:i.WP,vpd:t.pubId||i.VPD,vptd:t.tagId||i.VPTD,vmt:(t.isRon?1:0)||i.VMT||0,pt:J.crc32(this.store.get(e,n.pt)||999),w:s||void 0,h:o||void 0,rv:t.requiredViewability}}buildOppsData(e,t,i){var n,s=X.OPPS_PARAMETERS_MAPING[e],{tagItem:o}=i,{lineItemStats:a}=o,r=i.extraData||{},l=i.playerParams||{},d=o.vpaidWrapperData||(o.vpaidWrapper&&o.vpaidWrapper.tag?o.vpaidWrapper.tag.vpaidWrapperData:void 0);n=e===X.SERVICES.UNIT?this.store.get(e,"vstt")?1:0:Q(!document.hidden);var c,h,m={tms:Date.now(),st:(c=o.rollType,h={"pre-roll":0,preroll:0,"mid-roll":-1,midroll:-1,"post-roll":-2,postroll:-2},h.hasOwnProperty(c)?h[c]:0),sts:this.store.get(e,s.sts),rs:o.sequenceId,os:1*o.waterfallTagId+1,d:(new Date).getTime()-o.created,rst:t,dast:o.vidDast||o.dast,pstn:this.store.get(e,s.pstn)||1,dp:J.crc32(o.dp),mob:Q(this.store.get(e,s.mob)),vstt:n,unv:this.store.get(e,s.unv),unt:J.crc32(this.store.get(e,s.unit_type)),abt:"".concat(this.store.get(e,s.abt)).concat(this._addAbTests(o,e)),frd:this.store.get(e,s.fdScore),agl:this.store.get(e,s.agl),rp:d&&d.vastPrice,mty:o.mty||d&&d.mediatype,fv_t:a&&a.tries,fv_c:a&&a.conversions,fv_f:a&&a.fails,fv_fr:a&&a.failsRow,awr:this.store.get(e,s.awr),pm:this.store.get(e,s.pm),su:this.store.get(e,s.su),pdast:i.playerDAST,extpvid:window.TRCImpl&&window.TRCImpl.external_page_view,vpd:o.pubId,vptd:o.tagId,pv:this.store.get(e,s.pv)||999,vmt:Number(o.isRon)||0,ft:this.store.get(e,s.ft),ttv:o.timeToVimp,bovpv:o.bovpv,bovpg:o.bovpg,be:this.store.get(e,s.be)?1:0,pap:void 0!==o.pap?o.pap:"",rv:o.requiredViewability,mp:this.store.get(e,s.mp),sp:i.activeData?i.activeData.sp:void 0,prdid:void 0!==i.predictorId?i.predictorId:void 0};return this._addCmTagParams(e,m),m=this._addExtraParams(m,r),this._addDelayedParams(m,e,o,l),m}send(e,t,i){if(!this.stopped){var n=this.buildOppsData(e,t,i);this._isBillableEvent(e,t)||!this.store.get(e,"cmbopps")?this.oppRequest.send(Z([n]),t):this.opps.push(n)}}_setFireOppsInterval(e){this.stopped||this.fireOppsInterval||(this.fireOpps=this._fireOpps.bind(this),this.fireOppsInterval=setInterval(this.fireOpps,this.store.get(e,"timbtopps")))}destroy(){this.stopped||(this.fireOppsInterval=clearInterval(this.fireOppsInterval),this._fireOpps(),this.stopped=!0,this.store&&this.store.destroy(),this.store=this.fireOpps=void 0)}_fireOpps(){this.stopped||(this.opps.length>0&&this.nonBllbOppRequest.send(Z(this.opps)),this.opps=[])}_isBillableEvent(e,t){return this.store.getBillableEvents(e).indexOf(parseInt(t,10))>-1}setSource(e,t){this.store&&this.store.setModel(e,t)}};class ne extends W.f{constructor(e){super(e.model),this.model=e.model,this.log=new A.A({unitType:this.model.get("unitType"),className:"OppsulaManager",version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this.oppsArr=[],this._loadOppsula()}_loadOppsula(){this.oppsula=new ie(this.model,"unit"),this._sendOppsFromArr()}send(e,t){this.oppsula.send("unit",t,e)}_sendOppsFromArr(){this.oppsArr.splice(0).forEach((e=>this.send(...e)))}}var se=function(){var e;return function(t){return e||(e=new ne(t)),e}}();const oe=se;var ae=s(140),re=s(391),le=s(568);class de{constructor(e,t,i){this.window=e||window,this.conf=t,this.windowHeight=ae.height(this.window),this.windowWidth=ae.width(this.window),this.setScrollableSelector(i),this._timeBetweenEvents=100,this.keyPressMap={17:!1,18:!1,84:!1,86:!1},this._setScrollListener(),this._setMouseMoveListener(),this._setTabViewListener(),this._setOrientationChangeListener(),this._setResizeListener(),this._setTaboolaReadMoreListener()}_setScrollListener(){var e=ae.throttle(this._trigger.bind(this,"window:scroll:change"),this._timeBetweenEvents);this.scrollSelector.addEventListener("scroll",e)}_setMouseMoveListener(){var e=ae.throttle(this._trigger.bind(this,"window:mouse:move"),this._timeBetweenEvents);this.window.addEventListener("mousemove",e)}_setOrientationChangeListener(){var e=ae.throttle(this._trigger.bind(this,"window:orientation:change"),this._timeBetweenEvents);window.addEventListener("orientationchange",e)}_setResizeListener(){var e=ae.throttle(this._handleResizeEvent.bind(this),this._timeBetweenEvents);window.addEventListener("resize",e)}_setTabViewListener(){this.isTabOut="hidden"===document.visibilityState,this.window.document.addEventListener("visibilitychange",this._handleVisibilityChange.bind(this)),this.window.addEventListener("focus",this._handleTabEvents.bind(this),!0),this.window.addEventListener("blur",this._handleTabEvents.bind(this),!0),this._shouldUsePageEventsForTabStatus()&&(this.window.addEventListener("pageshow",this._handleTabEvents.bind(this),!0),this.window.addEventListener("pagehide",this._handleTabEvents.bind(this),!0))}_shouldUsePageEventsForTabStatus(){return this.conf.usePageEventsForTabStatus&&!0===this.conf.isMobile}_handleResizeEvent(e){var t=ae.height(this.window),i=t-this.windowHeight;this.windowHeight=t;var n=ae.width(this.window),s=n-this.windowWidth;this.windowWidth=n,this._trigger("window:resize:change",{heightChange:i,widthChange:s})}_handleVisibilityChange(e){this.isTabOut="hidden"===document.visibilityState,this._handleTabEvents(e)}_handleTabEvents(e){this._trigger("window:tab:change",this._getTabState(e.type))}_getTabState(e){return this.isTabOut?y.l.TAB_STATE.tabOut:"focus"===e||"pageshow"===e?y.l.TAB_STATE.focus:y.l.TAB_STATE.blur}_trigger(e,t){re.trigger(e,t)}_setTaboolaReadMoreListener(){window._taboola=window._taboola||[],_taboola.push({listenTo:"readmore.click",handler:function(){re&&re.trigger("taboola:readmore:click")}})}setScrollableSelector(e){this.scrollSelector="document"===e?document:ae.isEmpty(e)?this.window:le(e)[0]}}var ce=function(){var e;return function(t,i,n){return e||(e=new de(t,i,n)),e}}();const he=ce;var me=s(606),pe={atr:{},platform:{Desktop:{atr:{}},Mobile:{atr:{secondsBW:20}}}},ue={demo:{strength:101,atr:{},1:{atr:{originId:15,"preroll.pubId":133128,"preroll.pubTagId":779408,"midroll.pubId":133128,"midroll.pubTagId":779408,"postroll.pubId":133128,"postroll.pubTagId":779408,pubId:133128,pubTagId:779408,player:{settings:{mprdct:0,cmbopps:!1,encwfrs:!1,mntmbtwfs:999,mintimwf:999e3,mxtmbtwfs:999,time_between_waterfall:999,rmvrvlwntwrk:!1}},onOutOfView:"pause",isPWOV:!1,noaop:1}},2:{atr:{isDebug:!0,originId:15,"preroll.pubId":133128,"preroll.pubTagId":779408,"midroll.pubId":133128,"midroll.pubTagId":779408,"postroll.pubId":133128,"postroll.pubTagId":779408,pubId:133128,pubTagId:779408,player:{settings:{mprdct:0,cmbopps:!1,encwfrs:!1}},onOutOfView:"pause"}},3:{atr:{isDebug:!0,originId:15,"preroll.pubId":133128,"preroll.pubTagId":1184655,"midroll.pubId":133128,"midroll.pubTagId":1184655,"postroll.pubId":133128,"postroll.pubTagId":1184655,pubId:133128,pubTagId:1184655,player:{settings:{mprdct:0,cmbopps:!1,encwfrs:!1}},isPWOV:!1}},4:{atr:{isDebug:!0,originId:15,"preroll.pubId":133128,"preroll.pubTagId":1046821,"midroll.pubId":133128,"midroll.pubTagId":1046821,"postroll.pubId":133128,"postroll.pubTagId":1046821,pubId:133128,pubTagId:1046821,player:{settings:{mprdct:0,cmbopps:!1,encwfrs:!1}},onOutOfView:"pause"}},5:{atr:{originId:15,"preroll.pubId":133128,"preroll.pubTagId":1633025,"midroll.pubId":133128,"midroll.pubTagId":1633025,"postroll.pubId":133128,"postroll.pubTagId":1633025,pubId:133128,pubTagId:1633025,player:{settings:{mprdct:0,cmbopps:!1,encwfrs:!1}},onOutOfView:"pause",isPWOV:!1}}},level:{strength:1,atr:{},101:{atr:{pubId:165757,pubTagId:946347,preroll:{pubId:165757,pubTagId:946347},midroll:{pubId:165757,pubTagId:946347},postroll:{pubId:165757,pubTagId:946347}}},2:{atr:{secondsToClose:120,secondsBW:20}},3:{atr:{secondsToClose:120,pubId:208401,pubTagId:1047981,preroll:{pubId:208401,pubTagId:1047981},midroll:{pubId:208401,pubTagId:1047981},postroll:{pubId:208401,pubTagId:1047981}},units:{FEED_MANAGER:pe,INLINE_INSTREAM_OLD:pe,INLINE_INSTREAM_VFORCE:pe,SLIDER_INSTREAM:pe,SLIDER_OUTSTREAM:pe,WIDGET_ITEM:pe}},4:{atr:{pubId:292045,pubTagId:1565025,preroll:{pubId:292045,pubTagId:1565025},midroll:{pubId:292045,pubTagId:1565025},postroll:{pubId:292045,pubTagId:1565025}}},5:{atr:{pubId:383725,pubTagId:2077655,preroll:{pubId:383725,pubTagId:2077655},midroll:{pubId:383725,pubTagId:2077655},postroll:{pubId:383725,pubTagId:2077655}}}},isDebug:{strength:102,1:{atr:{player:{settings:{encwfrs:!1}}}}}},ge=s(140);class ve{constructor(e){this.opions=e}getPreset(e){var t=e.key,i=e.value,n=e.unitType,s=e.platform;if(ue[t]&&ue[t][i]){var o=ue[t],a=ue[t].strength||1,r=ue[t].atr||{};return r=ge.extend(r,o[i].atr),o[i]&&o[i].units&&(r=this._getFromUnits(r,o[i].units,n,s)||r),{presetData:r,strength:a}}}_getFromUnits(e,t,i,n){if(t[i]){var s=t[i].atr||{};return e=ge.extend(e,s),t[i].platform&&(e=this._getByPlatform(e,t[i].platform,n)||e),e}}_getByPlatform(e,t,i){if(t[i]){var n=t[i].atr||{};return e=ge.extend(e,n)}}}var fe=null,_e=e=>/\{\s*\[native code\]\s*\}/.test(""+e);const be=new class{constructor(){return fe||(fe=this),fe}set(e,t,i){_e(window[e])&&_e(window[e].prototype[t])||(this.iframe||this.createIframe(),this.iframe.contentWindow[e].prototype[t]&&(window[e].prototype||(window[e]=function(){}),window[e].prototype[t]=this.iframe.contentWindow[e].prototype[t],i&&(window[e]=this.iframe.contentWindow[e])))}setWindowFunctions(e){e&&(this.iframe||this.createIframe(),e.split(",").forEach(function(e){var t=e.split(".");this.setWindowNestedFunctions(window,t)}.bind(this)))}createIframe(){this.iframe=document.createElement("iframe"),this.iframe.style.width=0,this.iframe.style.height=0,this.iframe.style.visibility="hidden",this.iframe.style.display="none",document.body.appendChild(this.iframe)}setWindowNestedFunctions(e,t){var i=t.shift();0==t.length?e[i]=this.iframe.contentWindow[i]:this.setWindowNestedFunctions(e[i],t)}};const ye=class{constructor(){this.arrayFrom()}arrayFrom(){var e,t,i,n;Array.from||(Array.from=(e=Object.prototype.toString,t=function(t){return"function"==typeof t||"[object Function]"===e.call(t)},i=Math.pow(2,53)-1,n=function(e){var t=function(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t}(e);return Math.min(Math.max(t,0),i)},function(e){var i=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var s,o=arguments.length>1?arguments[1]:void 0;if(void 0!==o){if(!t(o))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(s=arguments[2])}for(var a=n(i.length),r=t(this)?Object(new this(a)):new Array(a),l=0;l<a;){var d=i[l];r[l]=o?void 0===s?o(d,l):o.call(s,d,l):d,l+=1}return r.length=a,r}))}};var Ae=s(140),Se=function(e){Ae.trcPerformanceMeasurement(e.trcPerformanceMeasurementEnabled,"videoBeforeCMTagNativeCode",y.l.TRC_PERFORMANCE_ACTIONS.START),be.set("Function","bind"),be.set("Event","constructor",!0),be.set("Array","forEach",!1),be.set("Array","every",!1),be.setWindowFunctions(e.nativeFunctions),Ae.trcPerformanceMeasurement(e.trcPerformanceMeasurementEnabled,"videoBeforeCMTagNativeCode",y.l.TRC_PERFORMANCE_ACTIONS.STOP),new ye,window.cmTag.customDataForTest={startWithABT:!1},!!e.gaFactor&&Ae.isFactor(parseInt(e.gaFactor))&&window.addEventListener("error",(function(t){try{if(-1==t.filename.indexOf("infra/cmTag"))return;var i={timestamp:(new Date).toISOString(),message:t.message,lineNum:t.lineno,fullUrl:window.location.href,userAgent:window.navigator.userAgent,firedStartWithABT:window.cmTag.customDataForTest.startWithABT,unitType:e.unitType};t.error&&(i.callStack=t.error.stack);var n=new XMLHttpRequest;n.open("POST","".concat("//vidanalytics.taboola.com","/putes/cm_units_error_logs"),!0),n.setRequestHeader("Content-type","application/x-www-form-urlencoded");var s=JSON.stringify(i);n.send(s)}catch(t){}}))};class we{constructor(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return window.cmTag.autoPlayDetectorInstance?(window.cmTag.autoPlayDetectorInstance.callbacks.push(e),window.cmTag.autoPlayDetectorInstance.safelyRunCallbacks()):(this.isMobile=t.isMobile,this.src=t.src,this.timeout=t.timeout||250,this.autoPlaySupport={unmuted:!1},this.unmutedVideo=this.creatVideo(),this.callbacks=[e],this.testVideo(this.unmutedVideo),window.cmTag.autoPlayDetectorInstance=this),window.cmTag.autoPlayDetectorInstance}creatVideo(){var e=document.createElement("video");return e.tbData={isMuted:!1},this.setVideoAttributes(e),this.setVideoStyle(e),this.isMobile&&document.body.appendChild(e),e}setVideoAttributes(e){e.src=this.src,e.type="video/mp4",e.setAttribute("playsinline",!0)}setVideoStyle(e){e.style.left="0",e.style.top="0",e.style.height="0px",e.style.width="0px",e.style.position="absolute",e.style.display="none"}testVideo(e){e.tbData.timeupdateHandler=this.handleSupported.bind(this,e),e.addEventListener("timeupdate",e.tbData.timeupdateHandler),e.tbData.timeout=setTimeout(this.handleNotSupported.bind(this,e,"no promise - timeout"),this.timeout);var t=e.tbData.promise=e.play();void 0===t||e.tbData.isResolved||t.then((()=>{this.handleSupported(e)})).catch((t=>{this.handleNotSupported(e,t.message)}))}handleSupported(e){e.tbData.isResolved||(e.tbData.isMuted===e.muted?(this.handleResolved(e),this.autoPlaySupport.unmuted={supported:!0},this.safelyRunCallbacks()):this.handleNotSupported(e,"Muted by browser"))}handleNotSupported(e,t){e.tbData.isResolved||(this.handleResolved(e),this.autoPlaySupport.unmuted={supported:!1,error:t},this.safelyRunCallbacks())}handleResolved(e){e.tbData.isResolved=!0,this.removeTimeupdateEventListener(e),clearTimeout(e.tbData.timeout)}removeTimeupdateEventListener(e){e.removeEventListener("timeupdate",e.tbData.timeupdateHandler),e.tbData.timeupdateHandler=void 0,delete e.tbData.timeupdateHandler}safelyRunCallbacks(){this.supportIsKnown()&&(this.callbacks.map((e=>{e(this.autoPlaySupport)})),this.callbacks=[])}supportIsKnown(){return this.autoPlaySupport.unmuted}}var Te=s(391),Pe=s(140);const Ee=class{constructor(e){this.callBacks={},this.model=e,this._mapCallbackNames(),this._setCallbacks()}_setCallbacks(){this._isValidCallback(this.callbackNames.conversion)&&(this.callBacks.onConversion=this._getCallbackFromModel("onConversion"),Te.on("global:creativeEvent",this._onGlobalCreativeEvent.bind(this,this.callbackNames.conversion))),this._isValidCallback(this.callbackNames.fill)&&(this.callBacks.onFilledImpression=this._getCallbackFromModel("onFilledImpression"),Te.on("filledImpression",this._onGlobalCreativeEvent.bind(this,this.callbackNames.fill))),this._isValidCallback(this.callbackNames.impression)&&(this.callBacks.onImpression=this._getCallbackFromModel("onImpression"),Te.on("onImpression",this._onGlobalCreativeEvent.bind(this,this.callbackNames.impression))),this._isValidCallback(this.callbackNames.play)&&(this.callBacks.onPlay=this._getCallbackFromModel("onPlay"),Te.on("global:adState:playing",this._onGlobalCreativeEvent.bind(this,this.callbackNames.play))),this._isValidCallback(this.callbackNames.terminate)&&(this.callBacks.onTerminate=this._getCallbackFromModel("onTerminate"),Te.once("global:closeState:changed",this._onGlobalCreativeEvent.bind(this,this.callbackNames.terminate))),this._isValidCallback(this.callbackNames.passback)&&(this.callBacks.onPassback=this._getCallbackFromModel("onPassback"),Te.once("global:passback",this._onGlobalCreativeEvent.bind(this,this.callbackNames.passback)),this.model.set("shouldStartPassbackTimer",!0))}_getCallbackFromModel(e){return this.model[e]||this.model.get(e)}_onGlobalCreativeEvent(e,t){e=e||{},this.callBacks[e.type]&&this.callBacks[e.type](t),e.name&&Pe.dispatchTRC("api::video.".concat(e.name),this.model)}_isValidCallback(e){var t=this._getCallbackFromModel(e.type);if(Pe.isString(t)){var i=this._getCallbackFunction(t);t=new Function("additionalData",i),delete this.model[e.type],delete this.model.attributes[e.type],Object.defineProperty(this.model,e.type,{value:t})}return!(!Pe.isFunction(t)&&!this._isApiCallbackExist(e.name))}_getCallbackFunction(e){var t=e.substr(e.indexOf("{")+1);return t.substr(0,t.lastIndexOf("}"))}_isApiCallbackExist(e){if(TRC&&TRC._taboolaClone)for(var t=0;t<TRC._taboolaClone.length;t++)if(TRC._taboolaClone[t].listenTo=="video.".concat(e))return!0;return!1}_mapCallbackNames(){this.callbackNames={conversion:{type:"onConversion",name:"conversion"},fill:{type:"onFilledImpression",name:"fill"},impression:{type:"onImpression",name:"impression"},play:{type:"onPlay",name:"play"},terminate:{type:"onTerminate",name:"terminate"},passback:{type:"onPassback",name:"passback"}}}};var Ce=s(140);cmTag.multiUnitManager=cmTag.multiUnitManager||new class{addUnit(e,t){Ce.isEmpty(window.TRC.videoUnitList)&&(window.TRC.videoUnitList={}),this.unitsList=window.TRC.videoUnitList||{},this.unitsList[e]=t,window.TRC.videoUnitList=this.unitsList,this._listenUnitsEvents(e)}_listenUnitsEvents(e){this.unitsList[e].on("change:isUnitEligible",this._onUnitEligibilityChange.bind(this,e))}_onUnitEligibilityChange(e,t,i){Ce.size(this.unitsList)>1&&(!0===i||!1===i)&&this._decidePlayOrPause()}_decidePlayOrPause(){var e=[];Ce.each(this.unitsList,(t=>{var i=t.get("redId"),n="CUSTOM"==this._getUnitType(i);this._isUnitEligibleToPlay(i)?e.push({redId:i,viewPercent:t.get("unitViewablePercent"),isCustomVideo:n}):n&&this._pauseUnit(i)})),e.length>0&&(e=this._sortViewableUnits(e),Ce.each(e,((e,t)=>{0===t?this._playUnit(e.redId):e.isCustomVideo&&this._pauseUnit(e.redId)})))}_sortViewableUnits(e){return e.sort(((e,t)=>e.isCustomVideo===t.isCustomVideo?t.viewPercent-e.viewPercent:!e.isCustomVideo&&t.isCustomVideo?-1:1))}_pauseUnit(e){this.unitsList[e].set("multiUnitManager.state","pause")}_playUnit(e){this.unitsList[e].set("multiUnitManager.state","play")}_isUnitEligibleToPlay(e){return this.unitsList[e].get("isEligibleToPlay")||this.unitsList[e].get("isUnitEligible")||this.unitsList[e].get("isUnitViewable")}_isUnitAllowToPlay(e){return"pause"!=this.unitsList[e].get("multiUnitManager.state")&&this._isUnitEligibleToPlay(e)}_isUnitPlaying(e){return this.unitsList[e].get("generalPlayingUnitState")}_getUnitType(e){return this.unitsList[e].get("unitType")}};const xe=cmTag.multiUnitManager;var Oe=s(225),Ie=s(140),Re=s(391),Ne=s(568);function De(e,t,i){var n,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=!1,a=new A.A({unitType:e.unitType,className:"cmTagMainBase",version:e.version,isDebug:e.isDebug});!function(e){document.body.setAttribute("data-cm-theme",e.isYahooWidget?"yahoo":"old")}(e),Se(e);var r={unit:void 0,model:void 0,placement:void 0,isUnitPlay:!1};function l(){n=function(i,n){Ie.trcPerformanceMeasurement(n.trcPerformanceMeasurementEnabled,"videoCreateUnitModel".concat(n.perfUnitType),y.l.TRC_PERFORMANCE_ACTIONS.START);var s=new Re.DeepModel;s.set(n),t&&t._settings&&(a.info("settings by FPP",t._settings),s.set(t._settings));!function(e,t){var i=!1;if(e.onPassback)i=!0;else if(TRC&&TRC._taboolaClone)for(var n=0;n<TRC._taboolaClone.length;n++)"video.passback"==TRC._taboolaClone[n].listenTo&&(i=!0);i&&(e.secondsToPassback=null!=t?t:e.secondsToPassback);e.isApiPassbackExist=i}(s.attributes,t.config.secondsToFill);var o=new i(s.attributes);new Ee(o),Ie.parseBool(e.isUseCMP)?new $(o):o.set("canStartPlayer",!0);return function(e){var t=new Oe.G({model:e});e.set("elasticLogger",t,{},!1)}(o),function(e){var t={model:e};j.A.oppsula=new oe(t)}(o),function(e){if(!e.get("isVideoAutoplayDetectorEnabled"))return;j.A.autoPlayDetector=new we(e.handleAutoPlayData.bind(e),{isMobile:e.get("isMobile"),timeout:1e3*e.get("autoplayDetectorTimeoutSec"),src:e.get("player.urls.blankLocation").replace(/{{(.+?)}}/g,((t,i)=>e.get(i)))})}(o),Ie.trcPerformanceMeasurement(n.trcPerformanceMeasurementEnabled,"videoCreateUnitModel".concat(n.perfUnitType),y.l.TRC_PERFORMANCE_ACTIONS.STOP),o}(i.model,e),Ie.defer(p.bind(this,i.unitController,n,void 0,s))}var d,c,h,m=e=>e&&document.querySelector('iframe[src*="'.concat(n.get("sync"),'"]'));function p(t,i,n,s){Ie.parseBool(e.isWaitForStartEvent)?(r.unit=t,r.model=i,r.placement=n,r.isUnitPlay=s,i.fireUnitDelayedPixel(),window.TRC=window.TRC||{},window.TRCImpl=window.TRCImpl||{},window.TRC.videoFunctions={},window.TRC.videoFunctions.startEvent=function(){o||(r.model.fireUnitLoadAfterDelayPixel(),u(r.unit,r.model,r.placement,r.isUnitPlay),o=!0)}):u(t,i,n,s)}function u(e,i,n,s){var o=new e({model:i,placementElement:n});s&&(t.play=o.play.bind(o))}function g(){window.TRC=window.TRC||{},Re.$=Ne,Ie.templateSettings={interpolate:/\{\{(.+?)\}\}/g},a.info("init",e),cmTag.utils=Ie,cmTag.$=Ne,t&&(t._events&&(t._events.forEach((function(e){Re.on(e.name,e.cb)})),t.on=function(e,t){Re.on(e,t)}),t.trigger=function(e,t){Re.trigger(e,t)}),cmTag.config||(cmTag.config=e)}function v(){a.info("PMS Loaded"),j.A.pms=new ve,function(){var t,i;if(e.perfUnitType=(t=e.unitType,i=t.replace(/_/g,"").toLowerCase(),"".concat(i.charAt(0).toUpperCase()).concat(i.substring(1))),Ie.trcPerformanceMeasurement(e.trcPerformanceMeasurementEnabled,"videoInitToRender".concat(e.perfUnitType),y.l.TRC_PERFORMANCE_ACTIONS.START),e.unitName=e.cm_unitName?e.cm_unitName:e.unitType,e.urlPrefix){var s=e.urlPrefix.split("/");e.unitVersion=s[s.length-2],e.unitVersion=e.unitVersion.replace(/_/g,"")}else e.unitVersion=e.version.replace(/_/g,"");l(),n.get("multiUnitManager.isActive")&&xe.addUnit(n.get("redId"),n),!m(n.get("cookieMatchActive"))&&new H(n)}(),cmTag.units=cmTag.units||{},cmTag.units[Ie.now()]=e}d=e.isStartUnitOnWindowLoaded,c=function(){g();var t=function(){var t=window;return Ie.isInFriendlyIframe(cmTag.config.iframeData)&&(t=Ie.getTopWindow()),e.isHideIframe&&Ie.hideDFPIframe(e.iframeData),t}();!function(t){var{config:i={}}=cmTag,{scrollSelector:n}=i;new me.A(e,t,n)}(t),function(t){var{config:i={}}=cmTag,{scrollSelector:n}=i;new he(t,e,n)}(t),Ie.setConfig(e),function(){Ie.defer(v.bind(this))}()},h=d?window:document,"loading"!=document.readyState?c():h.addEventListener("DOMContentLoaded",c)}var Me=s(207);const Ve=class{constructor(e,t,i,n){this.model=e,this.log=new A.A({unitType:this.model.get("unitType"),className:"timerService",version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this.doneFunction=i||function(){},this.time=n||0,this.conditions=t||{startCondition:{stateToListen:"",state:""},pauseCondition:{stateToListen:"",state:""},continueCondition:{stateToListen:"",state:""},stopCondition:{stateToListen:"",state:""},isStartOnce:!1},this._startListeningToConditions(),this.timerState=Me.A.readyState}_startListeningToConditions(){this.conditions.startCondition&&(this.conditions.isStartOnce?this.model.listenToOnce(this.model,"change:".concat(this.conditions.startCondition.state),this.start.bind(this)):this.model.listenTo(this.model,"change:".concat(this.conditions.startCondition.state),this.start.bind(this))),this.conditions.pauseCondition&&this.model.listenTo(this.model,"change:".concat(this.conditions.pauseCondition.state),this.pause.bind(this)),this.conditions.continueCondition&&this.model.listenTo(this.model,"change:".concat(this.conditions.continueCondition.state),this.continue.bind(this)),this.conditions.stopCondition&&this.model.listenTo(this.model,"change:".concat(this.conditions.stopCondition.state),this.stop.bind(this))}start(e,t){this.conditions.startCondition.stateToListen!==t&&"any"!==this.conditions.startCondition.stateToListen||(this.timerState=Me.A.timerState.working,this.stTime=(new Date).valueOf(),this.timeout=setTimeout(this.done.bind(this),this.time),this.timeLeft=this.time)}pause(e,t){if(this.timerState===Me.A.timerState.working&&(!t||this.conditions.pauseCondition.stateToListen===t)){this.timerState=Me.A.timerState.paused,this._clearTimer();var i=(new Date).valueOf()-this.stTime;this.timeLeft-=i}}continue(e,t){this.timerState===Me.A.timerState.paused&&(!t||t&&this.conditions.continueCondition.stateToListen===t)&&(this.timerState=Me.A.timerState.working,this.timeout=setTimeout(this.done.bind(this),this.timeLeft),this.stTime=(new Date).valueOf())}stop(e,t,i,n){this.timeout&&(n||this.conditions.stopCondition.stateToListen===t)&&(this.timerState=Me.A.timerState.stopped,this._clearTimer())}done(){this.timerState=Me.A.timerState.done,this.doneFunction(),this.timeout=void 0}getTimerState(){return this.timerState}_clearTimer(){clearTimeout(this.timeout),this.timeout=void 0}isTimerActive(){return this.timerState===Me.A.timerState.working||this.timerState===Me.A.timerState.paused}};var ke=s(568),Le=s(140),Fe=".tbl-read-more-box";class Be extends W.f{constructor(e){super(),this.model=e.model,this.log=new A.A({unitType:this.model.get("unitType"),className:this.constructor.name,version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this.model.set("readMoreIsVisible",!1),this._initObserver()}_bindEvents(){TRC.listen("readMoreClicked",this._clearObservers.bind(this)),this.createStateHandlers([{event:"impressionCount:1",funcName:"_observerCallback",isListenOnce:!0}])}_initObserver(){var e=ke(".tbl-read-more-btn")[0]||ke(Fe)[0],t=this.model.get("readMoreObserver.observerMargin")||"10",i={rootMargin:"".concat(t,"px"),threshold:0},n=Le.safeGetBoundingClientRect(ke(Fe)[0]);this._isReadMoreInitiallyInViewport(n)?this.model.set("readMoreIsInitiallyInViewport",!0):this._unitIsAboveReadMore(n)||(this._bindEvents(),this.readMoreObserver=e&&new IntersectionObserver(this._observerCallback.bind(this),i),this.readMoreObserver&&Le.safeObserve(this.readMoreObserver,e))}_observerCallback(e){e[0]&&e[0].isIntersecting?(this.model.set("hasImpBeforeReadMoreViewable",!1),this.model.set("isReadMoreInViewport",!0),window.TRC.listen("readMoreClicked",(()=>this._onReadMoreClick()))):this.model.get("impressionCount")>0&&void 0===this.model.get("hasImpBeforeReadMoreViewable")&&this.model.set("hasImpBeforeReadMoreViewable",!0)}_onReadMoreClick(){this.model.set("readMoreClicked",!0),this.model.set("isReadMoreInViewport",!1),this._clearObservers()}_clearObservers(){this.readMoreObserver&&this.readMoreObserver.disconnect()}_isReadMoreInitiallyInViewport(e){return!!e&&(e.top>=0&&e.left>=0&&e.bottom<=window.innerHeight&&e.right<=window.innerWidth)}_unitIsAboveReadMore(e){var t=this.model.get("parentSelector"),i=t&&ke(t)[0],n=Le.safeGetBoundingClientRect(i);return!n||0===Object.keys(n).length||!e||n.bottom<=e.top}}const ze=Be;var Ue=s(140),He=9999999;class We extends W.f{constructor(e){super(e),this.model=e,this.width=this.model.get("width"),this.height=this.model.get("height"),this.iframeData=this.model.get("iframeData")||{},this.win=window,this.pixelsBeforeEligibility=this.model.get("pixelsBeforeEligibility"),this.parentSelectorEl=this._getParentSelectorEl(),this.scrollThreshold=this.model.get("distanceDetector.scrollThreshold"),this.scrollManager=this.scrollThreshold?new me.A(this.model,this.win,this.parentSelectorEl):void 0,this._bindEvents()}_bindEvents(){this.createStateHandlers([{event:"stopPredicts",funcName:"_onStopPredicts",isListenOnce:!0},{event:"isGettingRv1Ad",funcName:"_onRV1StateChanges"},{event:"nextPredictName",funcName:"_onRV1StateChanges"},{event:"adsList.rvAds",funcName:"_onRV1StateChanges"},{event:"adsList.nonRvAds",funcName:"_onRV1StateChanges"}])}_onStopPredicts(){this._isPostRepeatPredictorActive()||(this.isTerminalForceOutOfView=!0,this._updateForceOutOfView(!0))}_isPostRepeatPredictorActive(){return this.model.get("predictors.postRepeat.isActive")}_onRV1StateChanges(){this.isTerminalForceOutOfView||this._updateForceOutOfView(this._isRVPredictionInProgress()||this._areAdsQueueFull()||this._isSingleRV1PredictionInProgress())}_isRVPredictionInProgress(){return this.model.get("isGettingRv1Ad")}_areAdsQueueFull(){return this.model.get("adsList.rvAds")>=this.model.get("maxVimpsInQueue")&&this.model.get("adsList.nonRvAds")>=this.model.get("maxNonRvVimpsInQueue")}_isSingleRV1PredictionInProgress(){return this.model.get("adsList.rvAds")>0&&!this._isMultiAdPredictionInProgress()}_isMultiAdPredictionInProgress(){return this.model.get("nextPredictName")===y.l.PREDICT_NAMES.multiAdPredict}_updateForceOutOfView(e){this.model.set("forceOutOfView",e)}_getParentSelectorEl(){var e=this.model.get("parentSelector");if(this.model.get("unitType")!==y.l.VIDEO_REEL.NAME||(e=this._getInstreamParentSelectorElName()))return document.querySelector(e)}_getInstreamParentSelectorElName(){var e=this.model.get("instreamParentSelector");if(e)return e;if(this.model.get("isRRIntegration")){var t=this.model.get("placement").replace(" - Video","");return"[data-placement-name='".concat(t,"' ] .story-widget .trc_rbox_div")}return window.TRC&&window.TRC.videoReelContainer?"#".concat(window.TRC.videoReelContainer):void 0}_getPlacementHeight(e){if(this.iframeData.inIframe)return this._getIframeHeight();var t=null==e?void 0:e.getBoundingClientRect(),i=(null==t?void 0:t.width)||this.width;return(null==t?void 0:t.height)||this.height||Ue.getVideoHeight(i)}_getIframeHeight(){var e=this.iframeData.iframe;if(e){this.win=window.parent,this.scrollManager&&this.scrollManager.setWin(this.win);var t=parseInt(e.width)||this.width;return parseInt(e.height)||this.height||Ue.getVideoHeight(t)}return this.height||Ue.getVideoHeight(this.width)}calcIsOutOfView(){return!!this.pixelsBeforeEligibility&&(this.parentSelectorEl?this.model.get("detachToSlider.isStartFromSlider")||this.model.get("floatingView")===Me.A.floatingView.detach?(this.model.set("distancePixelPredictData.actualPredictionPoint",0),!0):void this._setToModel(...Object.values(this._checkIsOutOfView())):void this._setToModel(He,!0))}_checkIsOutOfView(){var e=this.win.innerHeight+this.win.scrollY,t=this._getTopOfParentElement(this.parentSelectorEl,this.iframeData.inIframe),i=t+this._getPlacementHeight(this.parentSelectorEl),n=t-this.pixelsBeforeEligibility,s=i+this.pixelsBeforeEligibility;return{distance:t-e,isOutOfView:this.scrollManager&&Math.abs(this.scrollManager.ppsChange)>this.scrollThreshold||!(n<=e&&s>=this.win.scrollY)}}_setToModel(e,t){this.model.set("distancePixelPredictData.actualPredictionPoint",e),this.model.set("isOutOfView",t),this.model.trigger("isOutOfViewPort")}_getTopOfParentElement(e,t){if(e){if(t)return this._getTopOfIframeParentElement();for(var i=0;e;)i+=e.offsetTop-e.scrollTop,e=e.offsetParent;return i}}_getTopOfIframeParentElement(){try{return this._getTopOfParentElement(this.win.document.getElementById(this.iframeData.iframe.id),!1)}catch(e){return He}}}var je=s(140),Ge=s(391),$e=s(568);class Ye extends W.f{constructor(e){super(e),this.model=e.model,this.model.get("msnWebComponentsEnabled")||this.model.set("height",je.getVideoHeight(this.model.get("width"))),this.log=new A.A({unitType:this.model.get("unitType"),className:this.constructor.name||"UnitController",version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this.containerView=void 0,this.videoView=void 0,this.adService=void 0,this.playerService=void 0,this.isClosedByUser=!1,this.createStateHandlers([{event:"closeState",funcName:"handleCloseState"},{event:"topParentSelectorLost:true",funcName:"_onParentSelectorLost"}]),this.model.listenTo(this.model,"ad:stoppedByUser",this.terminate.bind(this,!0)),this.model.get("placementOffsetValidation.isActive")&&this.createStateHandlers([{event:"isEligibleToPlay:false",funcName:"_checkPlacementPositionChange"}]),this.model.get("midrollTimeout")||this.createStateHandlers([{event:"adManagerState:".concat(Me.A.adManagerState.empty),funcName:"terminate"}]),"undefined"!=typeof TRC&&TRC.listen&&TRC.listen("trcReset",this._onTRCReset.bind(this)),this._createTimers(),this._handleMidArticleReadMore(),this._handleDistanceDetector()}_createTimers(){if(this.model.get("isMultiAd")){var e=this.model.get("midrollTimeout")||this.model.get("secondsToCloseFeed");if(e>0){var t={startCondition:{stateToListen:Me.A.adManagerState.empty,state:"adManagerState"},stopCondition:{stateToListen:Me.A.adManagerState.hasAds,state:"adManagerState"}};this.getAdTimer=new Ve(this.model,t,this.terminate.bind(this,!1,"midrollCollapse"),1e3*e)}}var i=this.model.get("secondsToClose");if(i>0){var n={startCondition:{stateToListen:!0,state:"firstGetAdFired"},stopCondition:{stateToListen:Me.A.adQState.impression,state:"adQState"},isStartOnce:!0};this.secondsToCloseTimer=new Ve(this.model,n,this.terminate.bind(this,!1,"secondsToClose"),1e3*i)}var s=this.model.get("secondsToCloseGlobal");if(s>0){var o="showReplay"===this.model.get("onTimerClose")?this.pause:this.terminate;this.secondsToCloseGlobalTimer=new Ve(this.model,{startCondition:{stateToListen:"",state:""}},o.bind(this,"secondsToCloseGlobal"),1e3*s),this.secondsToCloseGlobalTimer.start(this.model,"")}this._createSecondsToPassbackTimer()}terminate(e,t){this.log.info("Terminate reason: ".concat(t)),this.isClosedByUser=e,this._setTimerReason(t),this.model.set("closeState",Me.A.closeState.terminate)}_setTimerReason(e){this.model.set("closeTimer",e)}handleCloseState(e,t){switch(this.log.info("handleCloseState",t),Ge.trigger("global:closeState:changed"),t){case Me.A.closeState.terminate:this.containerView?this.containerView.close(this.isClosedByUser):this.model.set("closeState",Me.A.closeState.containerViewClosed);break;case Me.A.closeState.containerViewClosed:this.nativeAdView&&this.nativeAdView.hide(),this.videoView?this.videoView.close(this.isClosedByUser):this.model.set("closeState",Me.A.closeState.videoViewClosed);break;case Me.A.closeState.videoViewClosed:this.adService?this.adService.close():this.model.set("closeState",Me.A.closeState.adManagerStop);break;case Me.A.closeState.adManagerStop:this.playerService&&(this.playerService.close(),this._stopListening())}}_stopListening(){this.model.off(),Ge.off()}pause(e){this._setTimerReason(e),this.adService&&this.adService.pauseGetAds()}_onParentSelectorLost(){this.overKill("parentSelectorLost")}_onTRCReset(){this.overKill("TRCReset"),this._resetFmOnPage()}_resetFmOnPage(){setTimeout(function(){this.model.off(),window.isCmTagFMOnPage=!1}.bind(this),500)}overKill(e){var t,i,n;(this.log.info("overKill reason: ".concat(e)),this.adService&&this.adService.pauseGetAds(),this.adsManager&&(this.adsManager.pauseGetAds(),this.adsManager.close()),null!==(t=this.playerService)&&void 0!==t&&t.playerDiv&&this.playerService.playerDiv.hide(),this.containerView&&this.containerView.$el)&&(this.containerView&&this.containerView.$el.hide(),null===(n=this.containerView.el)||void 0===n||n.classList.remove("_cm-ad-active"));null===(i=$e("._cm-video"))||void 0===i||i.hide(),this.secondsToCloseGlobalTimer&&this.secondsToCloseGlobalTimer.stop(this.model,"",{},!0),this.model.set("closeState",Me.A.closeState.terminate),this._setTimerReason(e)}_createSecondsToPassbackTimer(){if(this.model.get("shouldStartPassbackTimer")&&this.model.get("secondsToPassback")){this.passBackTimer=new Ve(this.model,{startCondition:{stateToListen:"",state:""},stopCondition:{stateToListen:!0,state:"isFirstAdImpression"}},this._triggerPassback.bind(this,"Passback"),1e3*this.model.get("secondsToPassback")),this.passBackTimer.start(this.model,"")}}_triggerPassback(){this.model.get("isFirstAdImpression")||(this.log.info("Passback timer done"),Ge.trigger("global:passback",{isApiPassbackExist:this.model.get("isApiPassbackExist")}),this.model.set("closeState",Me.A.closeState.terminate))}_handleMidArticleReadMore(){je.isReadMoreObserverNeededOnPage(this.model.get("readMoreObserver.isActive"),this.model.get("isHip"))&&(this.readMoreObserver=new ze({model:this.model}))}_checkPlacementPositionChange(){if(!this.model.get("isEligibleToPlay")&&!this.placementOffsetValidationChecked&&this.model.get("placementOffsetValidation.isActive")&&this.model.get("eligibleContainerOffset")){this.placementOffsetValidationChecked=!0;var{left:e,top:t,el:i}=this.model.get("eligibleContainerOffset"),n=je.getOffsetWithContainer(i,this.model.get("offsetGetterType"),this.model.get("videoContainerSelector"));if(n&&(n.top!==t||n.left!==e)){var s=window&&window.location&&window.location.href?window.location.href:"",o={debug:"!url:".concat(s),yOffset:n.top-t,xOffset:n.left-e};je.firePixel(this.model.getPixel("pixels.placementPushedOutOfViewport"),"placement position changed to Out Of Viewport",o)}}}_handleDistanceDetector(){this.model.get("pixelsBeforeEligibility")&&(this.distanceDetector=new We(this.model),Ge.on("window:scroll:change",(()=>{this.distanceDetector.calcIsOutOfView()})))}}const qe=Ye;var Ke=s(646);var Qe=s(391),Ze=s(568),Xe=s(140),Je={title:"._cm-ad-title",placeholder:"._cm-inline-video"};class et extends Ke.A{constructor(e){var t;super(e),this.globalModel=e.globalModel,this.log=new A.A({unitType:this.model.get("unitType"),className:"MultiWidgetContainerView",version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this.isMobile=this.globalModel.get("isMobile"),this.template="",this.animationCss={transition:"all 200ms ease-in-out"},this.noAnimationCss={transition:"none"},this.yahooUIMode=e.yahooUIMode,this.model.get("unitType")===y.l.WIDGET_ITEM.NAME&&this.$el.attr("class","_cm-widget-item"),null===(t=this.el)||void 0===t||t.classList.add("_cm-fit-to-size",this.yahooUIMode,this.isMobile?"mobile":"desktop"),this.model.set("containerViewState",Me.A.readyState)}_bindWindowEvents(){this.listenTo(Qe,"window:orientation:change",this.terminate.bind(this)),this.listenTo(Qe,"window:resize:change",this.terminate.bind(this,!0)),this.listenTo(Qe,"window:scroll:change",this._onPlaceHolderDomChange.bind(this,!1)),this.listenTo(Qe,"taboola:readmore:click",this._onPlaceHolderDomChange.bind(this,!0)),this.listenTo(Qe,"publisher:dom:change",this._onPlaceHolderDomChange.bind(this,!0)),this.bindLoaderEvens()}bindLoaderEvens(){this.createStateHandlers([{event:"newAdSet",funcName:"_onPlaceHolderDomChange"}])}render(e){this.container=e,this.$container=Ze(this.container),this.renderTemplate(),this._customize(),this.el.id="_cm-video-unit",Ze(e).append(this.el),this._onPlaceHolderDomChange(),this._bindWindowEvents(),this.model.set("containerViewState",Me.A.containerViewState.rendered),Xe.trcPerformanceMeasurement(this.model.get("trcPerformanceMeasurementEnabled"),"videoInitToRender".concat(this.model.get("perfUnitType")),y.l.TRC_PERFORMANCE_ACTIONS.STOP)}terminate(e,t){e&&t&&Math.abs(t.heightChange)<this.model.get("allowedHeightChange")&&0===t.widthChange||(this.model.set("isTerminateOnResize",!0),this.stopListening(Qe,"window:scroll:change"),this.model.set("closeState",Me.A.closeState.terminate))}hide(){this.$el.hide()}show(){this.$el.show(),this._onPlaceHolderDomChange()}close(){this._resetStreamItemHeight(),this.model.set("closeState",Me.A.closeState.containerViewClosed),Qe.trigger("playerState:closed"),this._remove()}_remove(){this.$el.remove()}_resetStreamItemHeight(){var e=this.$container[0],t=e.nextSibling,i=t.closest(".stream-item");[e,t,i].forEach((e=>{e&&(e.style.height="auto")})),this._showInternalItem(t)}_showInternalItem(e){e&&e.classList.remove("hide-internal-item")}_customize(){var e=this.model.get("customization.unitContainer"),t=this.container.parentElement;t.style.setProperty("--video-container-view-height","".concat(e.height)),t.style.setProperty("--video-container-view-width","".concat(e.width))}_onPlaceHolderDomChange(){this._calcPlaceholderSize()}_calcPlaceholderSize(){var{height:e,width:t}=this._getStreamVideoPlaceholderSize(),i=Xe.getVideoBestSize(t,e);this.model.set("videoPlaceholderSize",i),this.model.trigger("change:videoPlaceholderSize",this.model,this.model.get("videoPlaceholderSize"))}_getStreamVideoPlaceholderSize(){var e=this._getStreamVideoPlaceholder(),t=parseFloat(window.getComputedStyle(e).width),i=parseFloat(window.getComputedStyle(e).height);return this._shouldHandleCustomWidthMode()?(t=Xe.getVideoWidthByRatio(i,this.model.get("aspectRatioNum")),i=Xe.height(this.$container[0])):(t=Xe.width(e),i=Xe.getVideoHeightByRatio(t,this.model.get("aspectRatioNum"))),this.model.set("videoPlaceholderSize",{height:i,width:t}),{height:i,width:t}}_shouldHandleCustomWidthMode(){return!(this.isMobile&&Xe.isPortrait())&&this.model.get("yahooUIMode")===y.l.YAHOO_UI_MODES.SPORTS_NEWS}_getStreamVideoPlaceholder(){var e;return this.isMobile&&Xe.isPortrait()?this.container:(null===(e=this.container.nextSibling)||void 0===e?void 0:e.querySelector(".thumbBlock_holder"))||this.container}_orientationChange(){this._onPlaceHolderDomChange()}hideUnit(){this.model.set("isAnimationRunning",!0)}_isHideOnMidroll(){this.hide(),this.model.set("isAnimationRunning",!1)}get className(){return"_cm-inline"}get ui(){return this.UI?this.UI:this.UI=Je}set ui(e){return this.UI=e}}const tt=et;const it='<div class="_cm-video-ad"></div> ';var nt=s(990);const st=s(391).View.extend({className:"_cm-disc-text",id:"_cm-css-reset",initialize:function(e){this.log=new A.A({unitType:e.unitType,className:"disclosureTextView",version:e.model.get("version"),isDebug:e.model.get("isDebug")}),this.disclosureText='<div class="title text opt-out-hidden">{text}</div> ',this.container=e.container,this._rendered=!1,this._bindEvents(),this.createStateHandlers=nt.f},render:function(){this._rendered||(this._rendered=!0,this.container.appendChild(this.el),"detached"===this.model.get("videoViewState")?this.model.get("detachToSlider.components.disclosureText.isActive")?this.show():this.hide():this.model.get("components.disclosureText.isActive")?this.show():this.hide())},_bindEvents:function(){(this.model.get("detachToSlider.isStartFromSlider")||this.model.get("detachToSlider.isDetachToSlider"))&&this.listenTo(this.model,"change:videoViewState",this._onVideoViewStateChange)},_onVideoViewStateChange:function(e,t){switch(t){case"detached":0==this.model.get("detachToSlider.components.disclosureText.isActive")?this.hide():this.show();break;case"attached":this.model.get("components.disclosureText.isActive")?this.show():this.hide()}},hide:function(){this.$el.hide()},show:function(){var e="detached"===this.model.get("videoViewState")?this.model.get("detachToSlider.components.disclosureText.text"):this.model.get("components.disclosureText.text");this.$el[0].innerHTML="",this.$el.append(this.disclosureText.replace("{text}",e)),this.$el.show()}});var ot=s(140),at="data-cm-v-ad-id";class rt{constructor(e,t){if(rt.instance)return rt.instance;this.viewabilityPercent=e/100,this.viewPercent100=t/100,this.threshold=[0,this.viewabilityPercent,this.viewPercent100,1],rt.instance=this,this.elementsToObserve={},this.observerOptions={root:null,rootMargin:"0px",threshold:this.threshold},this.intersectionObserver=this._createObserver(this._observerCallback.bind(this),this.observerOptions)}_observerCallback(e){e.map((e=>{var t=e.intersectionRatio,i=e.target.getAttribute(at),n=this.viewabilityPercent<=t,s=this.viewPercent100<=t;this.elementsToObserve[i].model.set("isViewableByOb",n),this.elementsToObserve[i].model.set("isViewableByOb100",s)}))}_createObserver(e,t){return new IntersectionObserver(e,t)}startObserverElement(e,t,i){e.setAttribute(at,t),this.elementsToObserve[t]={element:e,model:i},this.elementsToObserve[t].model.set("isViewableByOb100",i.get("isViewable100")),ot.safeObserve(this.intersectionObserver,e)}stopObserveElement(e){this.intersectionObserver.unobserve(this.elementsToObserve[e].element),delete this.elementsToObserve[e]}stopObserver(){this.intersectionObserver.disconnect()}}var lt=s(140);class dt extends W.f{constructor(e){if(super(),this.constructor===dt)throw new Error("Can't instantiate abstract class!");this.model=e.model,this.log=new A.A({unitType:this.model.get("unitType"),className:this.constructor.name,version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this.timers={},this.isAmp=this.model.get("frameType")===y.l.FRAME_TYPE.amp&&this.model.get("isUseAmpObserver"),this.onViewability=e.onViewability||function(){},this.isFirstUpdate=!0,this.traceViewabilitySeconds=this.model.get("traceViewabilitySeconds"),this.traceViewability100Seconds=this.model.get("traceViewability100Seconds"),this._startAdViewabilityObserver()}_startAdViewabilityObserver(){this.viewabilityObserverHelper=new rt(this.model.get("viewabilityPercent")||50,this.model.get("100viewPercent")||100)}updateActiveAd(e){this.activeAdId!==e.adId&&(this.isFirstUpdate&&(this._bindEvents(),this.isFirstUpdate=!1),this.activeAd=e,(this.activeAdId||0===this.activeAdId)&&this.viewabilityObserverHelper.stopObserveElement(this.activeAdId),this.activeAdId=e.adId,this._startViewabilityObserverOfElement(e),this._initViewabilityHandler())}_startViewabilityObserverOfElement(e){var t=this._getElementForObserver(e),i=this.activeAdId,n=this.model;this.viewabilityObserverHelper.startObserverElement(t,i,n)}_getElementForObserver(e){var t=this._getWrapperElement(e);return this.model.get("isUseVideoElementForViewabilityObserver")?this._getAdVideoElementFromWrapper(t):t}_getWrapperElement(e){return e.vpaidWrapper.localTarget||e.vpaidWrapper.adTarget}_getAdVideoElementFromWrapper(e){return e.querySelector("video")}_initViewabilityHandler(){throw new Error("Abstract method!")}_bindEvents(){this.createStateHandlers([{event:"activeAdCurrentTime",funcName:"_checkViewability"},{event:"isViewableByOb:true",funcName:"_updateViewabilityTimes"},{event:"isInTab:true",funcName:"_updateViewabilityTimes"},{event:"isViewableByOb100:true",funcName:"_update100ViewabilityTime"}])}_updateViewabilityTimes(){this._updateViewabilityTime(),this._updateOneSecViewabilityTime(),this._update100ViewabilityTime()}_updateViewabilityTime(){if(this.model.get("isViewableByOb")&&this.model.get("isInTab")){var e=this.model.get("activeAdCurrentTime");this.activeAdViewabilityTime=e+this.traceViewabilitySeconds}else this.activeAdViewabilityTime=void 0}_updateOneSecViewabilityTime(){if(this.model.get("isViewableByOb")&&this.model.get("isInTab")){var e=this.model.get("activeAdCurrentTime");this.activeAdOneSecViewabilityTime=e+1}else this.activeAdOneSecViewabilityTime=void 0}_update100ViewabilityTime(){if(this.model.get("isViewableByOb100")&&this.model.get("isInTab")){var e=this.model.get("activeAdCurrentTime");this.activeAd100ViewabilityTime=e+this.traceViewability100Seconds}else this.activeAd100ViewabilityTime=void 0}_checkViewability(){if(this.activeAd){var e=this.model.get("activeAdCurrentTime");this._checkNormalViewability(e),this._checkOneSecViewability(e),this._check100Viewability(e)}}_checkNormalViewability(e){var t=this.model.get("activeAdData")?this.model.get("activeAdData").mediatype:void 0,i=this.model.get("mediatypesArraySkippingViewableCheckAtSendOppMoment"),n=this.model.get("isViewableByOb");i&&t&&i.includes(t)&&(n=!0),this._testViewability(n,e,this.activeAdViewabilityTime,this.activeAd.isViewed)&&this._onViewability()}_checkOneSecViewability(e){this._testViewability(this.model.get("isViewableByOb"),e,this.activeAdOneSecViewabilityTime,this.activeAd.isViewedOneS)&&this._onViewabilityOneS()}_check100Viewability(e){this._testViewability(this.model.get("isViewableByOb100"),e,this.activeAd100ViewabilityTime,this.activeAd.isViewed100)&&this._onViewability100()}_testViewability(e,t,i,n){return e&&t>=i&&!n}_onViewability(){this.activeAd&&(this.activeAd.onViewability(),lt.dispatchTRC(Me.A.storiesUnitState.videoViewable,this.model),this.onViewability())}_onViewabilityOneS(){this.activeAd&&this.activeAd.onViewabilityOneS()}_onViewability100(){this.activeAd&&this.activeAd.onViewability100()}}const ct=dt;class ht extends ct{constructor(e){super(e)}_initViewabilityHandler(){this._bindPlay()}_bindPlay(){this.model.get("adState")!==Me.A.adState.playing?this.createStateHandlers([{event:"adState:".concat(Me.A.adState.playing),funcName:"_startTestingViewability",isListenOnce:!0}]):this._startTestingViewability()}_startTestingViewability(){this._updateViewabilityTimes(),this._checkViewability(),this._bindPause()}_bindPause(){this.model.get("adState")!==Me.A.adState.paused?this.createStateHandlers([{event:"adState:".concat(Me.A.adState.paused),funcName:"_stopAllViewability",isListenOnce:!0}]):this._stopAllViewability()}_stopAllViewability(){this._bindPlay()}}class mt extends ct{constructor(e){super(e)}_initViewabilityHandler(){this._startViewabilityTimers()}_startViewabilityTimers(){this.model.get("isViewableByOb")?this._startViewabilityTime():this.createStateHandlers([{event:["isViewableByOb:true","isInTab:true"],funcName:"_startViewabilityTime"},{event:"isViewableByOb:false",funcName:"_clearViewabilityTime"}]),this.model.get("isViewableByOb100")&&this._startViewability100Time(),this.createStateHandlers([{event:["isViewableByOb100:true","isInTab:true"],funcName:"_startViewability100Time"},{event:"isViewable100:false",funcName:"_clearViewability100"},{event:"adState:".concat(Me.A.adState.paused),funcName:"clearAllViewabilityTimers",isListenOnce:!0},{event:"isInTab:false",funcName:"_clearViewabilityTime"}])}_startViewabilityTime(){this.activeAd&&!this.activeAd.isViewed&&(this._startViewabilityTimer(y.l.TIMER_NAMES.viewability,this._onViewability.bind(this),this.traceViewabilitySeconds),this._startViewabilityTimer(y.l.TIMER_NAMES.viewabilityOneS,this._onViewabilityOneS.bind(this),1))}_startViewabilityTimer(e,t,i){this.timers[e]||(this.timers[e]=setTimeout(t,1e3*i))}_onViewability(){this.timers[y.l.TIMER_NAMES.viewability]=void 0,this.activeAd.onViewability()}_startViewability100Time(){this.activeAd&&!this.activeAd.isViewed&&this._startViewabilityTimer(y.l.TIMER_NAMES.viewability100,this._onViewability100.bind(this),this.traceViewability100Seconds)}_startViewabilityAMPTime(){this.activeAd&&!this.activeAd.isViewed&&this._startViewabilityTimer(y.l.TIMER_NAMES.viewabilityAMP,this._onViewabilityAMP.bind(this),this.traceViewabilitySeconds)}clearAllViewabilityTimers(){this._clearViewabilityTime(),this._clearViewability100()}_clearViewabilityTime(){this._clearViewabilityTimer(y.l.TIMER_NAMES.viewability),this._clearViewabilityTimer(y.l.TIMER_NAMES.viewabilityOneS)}_clearViewability100(){this._clearViewabilityTimer(y.l.TIMER_NAMES.viewability100)}_clearViewabilityAMP(){this._clearViewabilityTimer(y.l.TIMER_NAMES.viewabilityAMP)}_clearViewabilityTimer(e){this.timers[e]&&(clearTimeout(this.timers[e]),this.timers[e]=void 0)}_onViewabilityOneS(){this.timers[y.l.TIMER_NAMES.viewabilityOneS]=void 0,this.activeAd.onViewabilityOneS()}_onViewability100(){this.timers[y.l.TIMER_NAMES.viewability100]=void 0,this.activeAd.onViewability100()}_onViewabilityAMP(){this.timers[y.l.TIMER_NAMES.viewabilityAMP]=void 0,this.activeAd.onViewability()}}class pt{constructor(){this.cache={}}getViewabilityService(e){var{model:t,ad:i,onViewabilityCallback:n}=e,s=i.supportVideoCurrentTimeEvents&&t.get("isUseNewViewabilityCalc")?ht:mt,o=this.cache[s];return o||(this.cache[s]=o=new s({model:t,onViewability:n})),o}}var ut=s(140),gt=ut.now().toString(),vt=function(){this.activeAd&&(this.activeAd.unmute(),this.currModel.set("volumeMuted",!1))},ft=function(){this.activeAd&&(this.activeAd.mute(),this.currModel.set("volumeMuted",!0))},_t={video:"._cm-video-ad"};class bt extends W.G{constructor(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"VideoView",i=arguments.length>2?arguments[2]:void 0;super(e),this.eligibilityService=e.eligibilityService||{},this.log=new A.A({unitType:this.model.get("unitType"),className:t,version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this.model.set("videoAdId",this.videoAdId),this.ad=e.adjs,this.currModel=i||this.model,this._setVolumeAnimationTrigger(),this._bindEvents(),this._bindBlockedByExternalUnitChange(),this._viewabilitySerivcesFactory=new pt}_bindEvents(){}_setVolumeEvents(){this.currModel.on("change:volumeMuted",this._handleVolume.bind(this)),this.currModel.get("autoplaySoundOn")?(this._bindOnHoverListeners(),this.checkVolumeStatus()):this.createStateHandlers([{event:"autoplaySoundOn:true",funcName:"_bindOnHoverListeners",isListenOnce:!0},{event:"autoplaySoundOn:true",funcName:"checkVolumeStatus",isListenOnce:!0}])}checkVolumeStatus(){this.currModel.get("autoplaySoundOn")&&"on"===this.currModel.get("volume")?(this.log.info("Unmute first video because volume=on"),this.currModel.set("volumeMuted",!1)):this.currModel.set("volumeMuted",!0)}hide(){this.$el.hide()}show(){this.$el.show()}close(){this.model.set("closeState",Me.A.closeState.videoViewClosed)}_customize(){this.model.get("streamDrawerPlacement")&&this.$el[0].classList.add("".concat(this.model.get("streamDrawerPlacement"),"-placement"),this.model.get("placement"));var e=this.model.get("additionalCss");this.$el.css(ut.toCssObj(e)),this._customizeVideo()}_customizeVideo(){var e=this.model.get("videoEl.additionalCss");this.ui.video.css(ut.toCssObj(e))}_rePosition(e,t){this.$el.css(t)}_onLoadingClick(){this.ui.video[0].id=this.videoAdId,this.replayAd()}replayAd(){this.model.get("isReplayAd")&&this.repeatingAd&&(this.activeAd=this.repeatingAd,this.activeAd.vpaidWrapper.restartAd(),this._resizeRepeatingAd(),this.activeAd.setToModel("adQState",Me.A.adQState.repeating,this.repeatingAd.adId),this.activeAd.setToModel("adState",Me.A.adState.repeating,this.repeatingAd.adId)),this.model.set("isAdClosedByTimer",!1)}_onDisplayingFullNAS(){this.activeAd&&this.activeAd.onDisplayingFullNAS()}_onDisplayingNASTitleOnly(){this.activeAd&&this.activeAd.onDisplayingNASTitleOnly()}_setNasOppEvents(){this.model.listenTo(this.model,"displayingFullNAS",this._onDisplayingFullNAS.bind(this)),this.model.listenTo(this.model,"displayingNASTitleOnly",this._onDisplayingNASTitleOnly.bind(this))}_handleVolume(){this.activeAd&&(this.currModel.get("volumeMuted")?this.activeAd.mute():this.activeAd.unmute())}get id(){return"_cm-css-reset"}get videoAdId(){return gt}get ui(){return this.UI?this.UI:this.UI=_t}set ui(e){return this.UI=e}get _onMouseEnter(){return vt}get _onMouseLeave(){return ft}onAdComplete(){this.setRepeatingAd(),this.activeAd=void 0,this.model.get("isMultiAd")?this.checkEligible():this.model.set("closeState",Me.A.closeState.terminate)}checkEligible(){this.model.get("isInTab")&&this.isEligibleToPlay()?(this.activeAd||this.getReadyAd(),this.activeAd&&this.playAd()):this.activeAd&&this.activeAd.pause(y.l.PAUSE_REASONS.LOST_ELIGIBILITY)}isEligibleToPlay(){return this.model.get("isEligibleToPlay")}getReadyAd(){this.model.get("hasReadyAd")&&(this._onPostRepeatImpression(),this.model.get("volumeMuted")||this.model.get("wurfl.os.name")!==y.l.OS.IOS||this.model.set("volumeMuted",!0),this.activeAd=this.model.getNextAd(),this.activeAd&&-1===this.model.get("unitType").indexOf(y.l.RECO_REEL_WIDGET.NAME)&&this.model.set("aspectRatioNum",this.activeAd.getAspectRatioNum()),this.postGetAd())}onGotRVAd(){this.currModel.get("hasReadyAd")&&this.currModel.get("isNextAdRV")&&!this.isCurrentAdRV&&(this.activeAd&&this.isEligibleToPlay()?this.swapToNewReadyAd():this.hadPossibleRV=!0)}swapToNewReadyAd(){this.isSwappedAd=!0,this.swappedAd=this.activeAd,this.swappedAd.onAdSwappedOut(),this.pauseAd(y.l.PAUSE_REASONS.AD_SWAPPED),this.getReadyAd(),this._swapNativeAdSettings(),setTimeout((()=>{this.activeAd.onAdSwappedIn()}),0)}_swapNativeAdSettings(){this.nativeAdSettings&&this.nativeAdSettings.onAdSwapped()}hasReadyAdChangeSubUnit(){this.log.info("hasReadyAdChangeSubUnit",this.globalModel.get("hasReadyAd")),!this.isRepeatMode&&this.globalModel.get("hasReadyAd")&&this.isEligibleToPlay()&&this.getReadyAd()}setRepeatMode(e){this.isRepeatMode=e}postGetAd(){}playAd(){this.log.info("@@play ad",this.model.get("unitType")),this.activeAd&&(this.log.info("Play Ad !!!!",this.activeAd),this.activeAd.play(),this.activeAd.isUsed||(this.activeAd.isUsed=!0),this.model.get("components.volume.isActive")&&setTimeout(this._fireVolumeStateCheck.bind(this),0),this.viewabiltyService=this._viewabilitySerivcesFactory.getViewabilityService({model:this.model,ad:this.activeAd,onViewabilityCallback:this._onViewability.bind(this)}),this.viewabiltyService.updateActiveAd(this.activeAd))}pauseAd(e){this.activeAd&&this.activeAd.pause(e)}_onViewability(){this.log.info("Viewability reached"),this.stickyViewCallback&&this.stickyViewCallback()}_addDisclosureText(){(this.model.get("components.disclosureText.isActive")||this.model.get("detachToSlider.components.disclosureText.isActive"))&&(this.disclosureTextView=new st({model:this.model,container:this.el}),this.disclosureTextView.render())}_fireVolumeStateCheck(){this._startAnimationOnce(),this._handleVolume(),this.currModel.trigger("lastVolumeStateCheck")}_setVolumeAnimationTrigger(){this._startAnimationOnce=ut.once((()=>{this.currModel.trigger("startVolumeAnimation")}))}_unBindOnHoverListeners(){this.el.removeEventListener("mouseenter",this._onMouseEnter.bind(this)),this.el.removeEventListener("mouseleave",this._onMouseLeave.bind(this))}_bindOnHoverListeners(){this.currModel.get("autoplaySoundOn")&&"onHover"===this.currModel.get("volume")&&!this.currModel.get("volumeUserInteraction")&&(this.el.addEventListener("mouseenter",this._onMouseEnter.bind(this)),this.el.addEventListener("mouseleave",this._onMouseLeave.bind(this)),this.currModel.on("change:volumeUserInteraction",this._unBindOnHoverListeners.bind(this)))}setRepeatingAd(){this.model.get("isReplayAd")&&this.activeAd&&this.activeAd.vpaidWrapper.isReplayable?this.repeatingAd=this.activeAd:this.repeatingAd=null}_bindBlockedByExternalUnitChange(){this.currModel.on("change:blockedByExternalUnit",this._onBlockedByExternalUnitChange.bind(this))}_onBlockedByExternalUnitChange(){this.currModel.get("blockedByExternalUnit")?(this.pauseAd(y.l.PAUSE_REASONS.BLOCKED_BY_EXTERNAL_UNIT),this.activeAd&&this.activeAd.fireAdOppOnce("adPausedOtherUnitIsPlaying")):this.checkEligible()}_resizeRepeatingAd(){setTimeout((()=>{var e=this.isDetached?this.model.get("detachToSlider.width"):this.model.get("width"),t=this.isDetached?this.model.get("detachToSlider.height"):this.model.get("height");this.activeAd.vpaidWrapper.resizeAd(e,t)}),0)}_onPostRepeatImpression(){this.repeatingAd&&(this.repeatingAd.vpaidWrapper&&this.repeatingAd.vpaidWrapper.stop&&this.repeatingAd.vpaidWrapper.stop("post_repeat"),this.repeatingAd=null,this.activeAd=null)}}const yt=bt;const At={"AR-EG":"","AR-AE":"","AR-SA":"","CS-CZ":"Reklama","DA-DK":"Annonce","DE-DE":"Anzeige","DE-AT":"Anzeige","DE-CH":"Anzeige","EL-GR":"Ad","EN-AE":"Ad","EN-AU":"Ad","EN-CA":"Ad","EN-GB":"Ad","EN-IE":"Ad","EN-IN":"Ad","EN-SG":"Ad","EN-PH":"Ad","EN-MY":"Ad","EN-NZ":"Ad","EN-US":"Ad","EN-ZA":"Ad","EN-XL":"Ad","ES-ES":"Publicidad","ES-AR":"Patrocinado","ES-CO":"Patrocinado","ES-CL":"Patrocinado","ES-PE":"Patrocinado","ES-MX":"Patrocinado","ES-US":"Patrocinado","ES-XL":"Patrocinado","ES-VE":"Patrocinado","EN-ID":"Ad","FI-FI":"Mainos","FR-FR":"Sponsoris","FR-BE":"Sponsoris","FR-CA":"Pub","FR-CH":"Sponsoris","HE-IL":"","HI-IN":"","HU-HU":"Hird.","ID-ID":"Ad","IT-IT":"Ann.","JA-JP":"PR","KO-KR":"AD","NB-NO":"Annonse","NL-NL":"Adv","NL-BE":"Adv","PL-PL":"Reklama","PT-BR":"Publicidade","PT-PT":"Pub","RU-RU":"","SV-SE":"Annons","TH-TH":"Ad","TR-TR":"R","VI-VN":"Ad","ZH-CN":"","ZH-TW":"","ZH-HK":""};var St=s(391),wt=s(140),Tt=s(568);const Pt=St.View.extend({events:{click:"_openAdChoice"},className:"_cm-ad-choice",initialize(e){this.log=new A.A({unitType:this.model.get("unitType"),className:"AdChoice",version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this.log.info("Ad Choice ".concat(e.type," initialized.")),this.container=e.container,this.parentPlaceholder=e.parent,this.placementType=e.type,this.shouldHandelDetachAttach=y.l.UNIT_TYPES[this.model.get("unitType")]===y.l.UNIT_TYPES.FEED_MANAGER&&this.placementType!==y.l.AD_CHOICE_TYPE.TITLE,this.placementModel=this._getAdChoicePlacementModel(e.type),this.titlePosition=this.model.get("components.adChoice.position"),this.icon=this.model.get("components.adChoice.icon"),this._translateText(),this._bindEvents(),this.render(),this._firstVideoViewStateHandle(),this.componentsVisibilityListener=e.componentsVisibilityListener,this.componentsVisibilityListener&&this._setComponentsVisibilityListener()},forceShowAdChoice(){this._show()},render(){this.template=wt.template('<a class="_cm-ad-choice-text" target="_blank">{{text}}</a> <a class="_cm-ad-choice-logo" target="_blank"></a> '),this.$el.append(this.template(this.placementModel)),this.$el.children("._cm-ad-choice-logo").css({background:"url(".concat(this.icon,") no-repeat")}),this.placementModel.isActive&&(this.placementModel.adViewStyle&&this.$el.css(wt.toCssObj(this.placementModel.adViewStyle)),this.$el.find("._cm-ad-choice-text").css(wt.toCssObj(this.placementModel.style)),this.$el.find("._cm-ad-choice-logo").css(wt.toCssObj(this.placementModel.logoStyle))),this._setAdChoiceUrl(),this._alignTitle(),Tt(this.container).append(this.el)},_bindEvents(){this.shouldHandelDetachAttach&&(this.log.info("Ad Choice ".concat(this.placementType," is listening to videoViewState")),this.listenTo(this.model,"change:videoViewState",this._handleVideoViewState.bind(this))),this.listenTo(this.model,"change:adPlayingWithAdChoice",this._onAdPlayingWithAdChoiceChange.bind(this)),this.listenTo(this.model,"change:content.isContentPlay",this._onAdPlayingWithAdChoiceChange.bind(this)),this.listenTo(this.model,"change:adjustWideFeed",this._onAdjustWideFeed.bind(this));var e=this.model.get("wurfl.browser.name");e!==y.l.BROWSER.IE&&e!==y.l.BROWSER.EDGE||this.listenTo(this.model,"change:isExpandEnded",this._onExpandEnded.bind(this))},_onExpandEnded(){this.log.info("onExpandEnded - IE or Edge detected");var e=this;this.$el.hide(),window.setTimeout((function(){e.$el.show()}),0)},_getAdChoicePlacementModel(e){var t;switch(e){case y.l.AD_CHOICE_TYPE.TITLE:t=this.model.get("components.adChoice.title");break;case y.l.AD_CHOICE_TYPE.VIDEO_AD:t=this.model.get("components.adChoice.videoAd");break;case y.l.AD_CHOICE_TYPE.SLIDER:t=this.model.get("components.adChoice.slider");break;default:t={text:"",style:{},logoStyle:{}}}return t},_getSCardSelector:function(){var e;switch(y.l.UNIT_TYPES[this.model.get("unitType")]){case y.l.UNIT_TYPES.WIDGET_ITEM:e='*[data-placement-name="'.concat(this.model.get("placement"),'"]');break;case y.l.UNIT_TYPES.FEED_MANAGER:e=".tbl-feed-container .trc-content-sponsored";break;case y.l.UNIT_TYPES.INLINE_INSTREAM:case y.l.UNIT_TYPES.INLINE:case y.l.UNIT_TYPES.SLIDER_INSTREAM:e=".trc_rbox_container .trc-content-sponsored";break;default:e=""}return e},_setAdChoiceUrl(){this._selector=this._getSCardSelector();var e=this._extractUrl(this._selector);Tt("._cm-ad-choice-text",this.$el).attr("href",e),Tt("._cm-ad-choice-logo",this.$el).attr("href",e)},_extractUrl(e){var t,i,n=Tt(e)[0];n?(wt.width(window)<=768||this.model.get("isMobile")?(t=Tt(n).find("a.trc_mobile_adc_link"),this._isOpenNewTab=!0):t=Tt(n).find("a.trc_desktop_adc_link"),i=t.length>0?Tt(t[0]).attr("href").replace(/(Card)(\D*)(\d+)/,"Card ".concat(this.model.get("cardNumber"))):this.model.get("components.adChoice.fallbackUrl")):((wt.width(window)<=768||this.model.get("isMobile"))&&(this._isOpenNewTab=!0),i=this.model.get("components.adChoice.fallbackUrl"));return i},_alignTitle:function(){if(this.placementType===y.l.AD_CHOICE_TYPE.TITLE&&this._selector){var e=getComputedStyle(Tt(this._selector)[0]);e&&"rtl"===e.direction&&Tt(this.container).css("text-align","left !important")}},_firstVideoViewStateHandle(){y.l.UNIT_TYPES[this.model.get("unitType")]===y.l.UNIT_TYPES.FEED_MANAGER&&this.placementType!==y.l.AD_CHOICE_TYPE.TITLE&&this._handleVideoViewState()},_handleVideoViewState(){switch(this.model.get("videoViewState")){case Me.A.videoViewState.attached:this._onAttach();break;case Me.A.videoViewState.detached:this._onDetach()}},_onAttach(){switch(this.placementType){case y.l.AD_CHOICE_TYPE.VIDEO_AD:this._show();break;case y.l.AD_CHOICE_TYPE.SLIDER:this._hide()}},_onDetach(){switch(this.placementType){case y.l.AD_CHOICE_TYPE.VIDEO_AD:this._hide();break;case y.l.AD_CHOICE_TYPE.SLIDER:this._show()}this._updateAdChoicesVisibility()},_openAdChoice(e){this._firePixel("pixels.adChoice","adChoice click pixel."),window.TRC&&(this._isOpenNewTab||window.TRC.aboutUs&&window.TRC.aboutUs.open&&window.TRC.aboutUs.open(e))},_firePixel(e,t){var i=this.model.getPixel(e);wt.firePixel(i,t)},_show(){this.placementModel.isActive&&!this.model.get("adPlayingWithAdChoice")&&this.$el.show(),this._validateComponentVisibilityStatus(!0)},_hide(){this.placementModel.isActive&&this.$el.hide(),this._validateComponentVisibilityStatus(!1)},_validateComponentVisibilityStatus(e){var t=this.componentsVisibilityListener&&this.model.get(this.componentsVisibilityListener);void 0!==t&&e!==t&&this.model.set(this.componentsVisibilityListener,e)},_updateAdChoicesVisibility(){this.model.get("adPlayingWithAdChoice")&&this.placementType!==y.l.AD_CHOICE_TYPE.TITLE?this._hide():this._show()},_onAdPlayingWithAdChoiceChange(){this.model.get("content.isContentPlay")&&!this.model.get("components.adChoice.isActiveOnContent")?this._hide():this.shouldHandelDetachAttach?this._handleVideoViewState():this._updateAdChoicesVisibility()},_onAdjustWideFeed(){var e=this.model.get("adjustWideFeed");this.titlePosition===y.l.TITLE_POSITION.BELOW&&(e?Tt(this.parentPlaceholder).addClass("_cm-wide-feed-title-below"):Tt(this.parentPlaceholder).removeClass("_cm-wide-feed-title-below"))},_translateText(){this.model.get("components.adChoice.isTranslateText")&&this.model.get("language")&&this.model.set("components.adChoice.videoAd.text",At[this.model.get("language").toUpperCase()])},_setComponentsVisibilityListener(){this.listenTo(this.model,"change:".concat(this.componentsVisibilityListener),this._onComponentsVisibilityChange.bind(this)),this.model.get(this.componentsVisibilityListener)||this._hide()},_onComponentsVisibilityChange(){this.model.get(this.componentsVisibilityListener)?this._show():this._hide()}});var Et=s(391),Ct=s(140),xt=s(568),Ot={display:"inline !important"},It={display:"none !important"},Rt={transition:"width 2000ms !important",width:"32px !important"},Nt={width:"32px !important"};const Dt=Et.View.extend({className:"_cm-volume-area",id:"_cm-css-reset",events:{click:"_toggleVolume"},initialize(e){this._setInitialParameters(e),this._isHandleDetach(),this._hasCloseButton(),this._initVolumeState(),this._createStatesAction(),this._setMinimizeOnClickCallback(),this._bindEvents(),this.render(),this.log.info("Volume Button initialized.")},_bindEvents(){this.listenTo(this.currModel,"change:volumeMuted",this._onVolumeChange.bind(this)),this.listenTo(this.currModel,"startVolumeAnimation",this._minimizeAfterRender.bind(this)),this._handleDetach&&this.listenTo(this.model,"change:videoViewState",this._handleVideoViewState.bind(this)),this.currModel.on("lastVolumeStateCheck",this._onLastVolumeStateCheck,this),this.model.on("change:viewTopComponent",this.setButtonVisible,this),this.listenTo(this.model,"change:adQState",this._onAdStateChange),this.model.on("showVolumeButtonOnBackFromSwap",this.show,this)},_setComponentsVisibilityListener(){this.currModel.on("change:".concat(this.componentsVisibilityListener),this._onComponentsVisibilityChange,this),this.currModel.get(this.componentsVisibilityListener)||this.hide()},render(){this._initTemplate(),this._setPosition(),this._styleCustomization(),this._checkIfMinimized(),this._renderComponent()},_initTemplate(){var e=Ct.template('<div class="_cm-volume-border"> <svg class="_cm-volume-mute" data-name="_1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 351.22 266.75"> <defs> <style>.cls-1{fill:#fff}</style> </defs> <g id="_Group_" data-name="&lt;Group&gt;"> <g id="_Group_2" data-name="&lt;Group&gt;"> <path class="cls-1" d="M338,185.84c-.48-3.15-1.39-6.11-5.31-7.4H330c-3.63.93-6.33,3-8.93,5.29L249.59,246H170.26c-7.93,0-14.35,5.59-14.35,12.5V370.1c0,6.9,6.42,12.5,14.35,12.5h85.1l66.91,58.27a19,19,0,0,0,6,3.71c3.92,1.44,7.13.29,8.73-3.12a14.33,14.33,0,0,0,1.22-6.29V189.22A22.39,22.39,0,0,0,338,185.84Z" transform="translate(-155.91 -178.44)"/> </g> </g> <path class="cls-1" d="M486.13,381.62a20.93,20.93,0,0,1-14.85-6.15l-97.62-97.62a21,21,0,1,1,29.69-29.7L501,345.77a21,21,0,0,1-14.85,35.85Z" transform="translate(-155.91 -178.44)"/> <path class="cls-1" d="M388.5,381.62a21,21,0,0,1-14.84-35.85l97.62-97.62a21,21,0,1,1,29.7,29.7l-97.63,97.62A20.93,20.93,0,0,1,388.5,381.62Z" transform="translate(-155.91 -178.44)"/> </svg> <svg class="_cm-volume-unmute" data-name="_1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 311.81 266.75"> <defs> <style>.cls-1{fill:#fff}</style> </defs> <g id="_Group_" data-name="&lt;Group&gt;"> <path id="_Path_" data-name="&lt;Path&gt;" class="cls-1" d="M465.85,290.12A124.1,124.1,0,0,0,453.19,253a127.55,127.55,0,0,0-21.66-29.51c-3.38-3.47-7.4-5.23-12.25-4.6a13.27,13.27,0,0,0-11.5,9.27c-1.87,5.38-.66,10.26,3.23,14.43,1,1.05,2,2,2.95,3.1a96.67,96.67,0,0,1,25.09,55.19,95.28,95.28,0,0,1-1.17,29.52,96.57,96.57,0,0,1-26.52,50.23,13.74,13.74,0,0,0-4.23,12.12,13.25,13.25,0,0,0,9.2,11.27c5.3,1.85,10.15.74,14.31-3.08.82-.74,1.57-1.56,2.33-2.36a125,125,0,0,0,34.74-87.88A131.18,131.18,0,0,0,465.85,290.12Z" transform="translate(-155.91 -178.44)"/> <path id="_Path_2" data-name="&lt;Path&gt;" class="cls-1" d="M420.23,307.35a87,87,0,0,0-6.32-28.82A88,88,0,0,0,395,249.69a14,14,0,0,0-24.29,11.22,16.39,16.39,0,0,0,4.73,8.92c13.86,14.79,19.22,32.3,16.05,52.27a58.5,58.5,0,0,1-16.83,32.54A14,14,0,0,0,388.48,378c3.13-.88,5.44-2.88,7.6-5.18,16.05-17.16,23.94-37.57,24.15-61C420.23,310.31,420.29,308.83,420.23,307.35Z" transform="translate(-155.91 -178.44)"/> <path id="_Path_3" data-name="&lt;Path&gt;" class="cls-1" d="M338,185.84c-.48-3.15-1.39-6.11-5.31-7.4H330c-3.63.93-6.33,3-8.93,5.29L249.59,246H170.26c-7.93,0-14.35,5.59-14.35,12.5V370.1c0,6.9,6.42,12.5,14.35,12.5h85.1l66.91,58.27a19,19,0,0,0,6,3.71c3.92,1.44,7.13.29,8.73-3.12a14.33,14.33,0,0,0,1.22-6.29V189.22A22.39,22.39,0,0,0,338,185.84Z" transform="translate(-155.91 -178.44)"/> </g> </svg> <div class="_cm-volume-text">{{expandedText}}</div> </div> ')(this._settings);this.$el.append(e)},_renderComponent(){var e=this.model.get("wurfl.browser.name");e===y.l.BROWSER.IE||e===y.l.BROWSER.EDGE?setTimeout((()=>{xt(this.container).append(this.el)}),200):xt(this.container).append(this.el)},_setInitialParameters(e){this.log=new A.A({unitType:this.model.get("unitType"),className:"volumeButtonView",version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this.container=e.container,this.currModel=e.globalModel?e.globalModel:this.model,this._settings=this.model.get("components.volume"),this._isMuted=!0,this._unitType=y.l.UNIT_TYPES[this.model.get("unitType")],this._isAlwaysBottom=this.model.get("components.volume.isAlwaysBottom"),this.componentsVisibilityListener=e.componentsVisibilityListener,this.componentsVisibilityListener&&this._setComponentsVisibilityListener()},_initVolumeState(){void 0===this.currModel.get("volumeMuted")&&this.currModel.set("volumeMuted",!0)},_setMinimizeOnClickCallback(){this._minimizeOnClick=Ct.once(this._minimize.bind(this,Rt))},_onLastVolumeStateCheck(){this._onVolumeChange()},_toggleVolume(){this._isMuted?(this._unMute(),this._fireUnmute()):(this._mute(),this._fireMute()),this._minimizeOnClick(),this.currModel.set("volumeUserInteraction",!0)},_mute(){this._showMute(),this._hideUnmute(),this._isMuted=!0},_unMute(){this._hideMute(),this._showUnmute(),this._isMuted=!1},_fireMute(){this.currModel.set("volumeMuted",!0),this.currModel.set("onUnMuteClicked",!1)},_fireUnmute(){this.currModel.set("volumeMuted",!1),this.currModel.set("onUnMuteClicked",!0)},_onVolumeChange(){this.currModel.get("volumeMuted")?this._mute():this._unMute()},_minimizeAfterRender(){this.currModel.get("volumeMustBeMinimized")?this._minimize(Nt):setTimeout(function(){this._isMinimized||this._minimize(Rt)}.bind(this),this._settings.timeToMinimize)},_minimize(e){xt("#_cm-css-reset._cm-volume-area > ._cm-volume-border").css(e),this._isMinimized=!0,this.currModel.set("volumeMustBeMinimized",!0)},_hideMute(){xt("#_cm-css-reset._cm-volume-area > ._cm-volume-border > ._cm-volume-mute").css(It)},_showMute(){xt("#_cm-css-reset._cm-volume-area > ._cm-volume-border > ._cm-volume-mute").css(Ot)},_hideUnmute(){xt("#_cm-css-reset._cm-volume-area > ._cm-volume-border > ._cm-volume-unmute").css(It)},_showUnmute(){xt("#_cm-css-reset._cm-volume-area > ._cm-volume-border > ._cm-volume-unmute").css(Ot)},_setPosition(){this.hasCloseButton||this._isAlwaysBottom?this.$el.addClass("_cm-volume-area-bottom"):this.$el.addClass("_cm-volume-area-top"),this._handleDetach&&this._handleVideoViewState()},_isHandleDetach(){this._handleDetach=!1,this._unitType===y.l.UNIT_TYPES.FEED_MANAGER&&!1===this.model.get("hasCloseButton")&&!0===this.model.get("detachToSlider.hasCloseButton")&&(this._handleDetach=!0)},_hasCloseButton(){this._unitType!==y.l.UNIT_TYPES.FEED_MANAGER&&this._unitType!==y.l.UNIT_TYPES.INLINE_INSTREAM&&this._unitType!==y.l.UNIT_TYPES.MSN_WIDGET||(this.hasCloseButton=this.model.get("closeButton.hasCloseButton")),this._unitType===y.l.UNIT_TYPES.WIDGET_ITEM&&(this.hasCloseButton=this.model.get("components.CloseButtonView.hasCloseButton"))},_handleVideoViewState(){if(!this._isAlwaysBottom){var e=this.model.get("videoViewState");e===Me.A.videoViewState.attached&&(this.$el.addClass("_cm-volume-area-top"),this.$el.removeClass("_cm-volume-area-bottom")),e===Me.A.videoViewState.detached&&this.hasCloseButton&&(this.$el.addClass("_cm-volume-area-bottom"),this.$el.removeClass("_cm-volume-area-top"))}},_styleCustomization(){this._settings.style&&(this.hide(),Ct.isEmpty(this._settings.style.border)||xt("#_cm-css-reset._cm-volume-area > ._cm-volume-border").css(this._settings.style.border),Ct.isEmpty(this._settings.style.mute)||xt("#_cm-css-reset._cm-volume-area > ._cm-volume-border > ._cm-volume-mute").css(this._settings.style.mute),Ct.isEmpty(this._settings.style.unmute)||xt("#_cm-css-reset._cm-volume-area > ._cm-volume-border > ._cm-volume-unmute").css(this._settings.style.unmute),Ct.isEmpty(this._settings.style.text)||xt("#_cm-css-reset._cm-volume-area > ._cm-volume-border > ._cm-volume-text").css(this._settings.style.text))},_checkIfMinimized(){this._unitType===y.l.UNIT_TYPES.FEED_MANAGER&&this.currModel.get("volumeMinimized")&&this._minimize(Nt)},setButtonVisible(){this.log.info("_onTopComponentChange",this.model.get("viewTopComponent")),this.model.get("viewTopComponent")===y.l.FLOATING_VIEW_TOP_COMPONENT.video?this.show():this.hide()},hide(){this.$el.hide()},show(){this.$el.show()},_createStatesAction:function(){this.adStateActions={completed:this.hide.bind(this),repeating:this.show.bind(this)},this.model.get("detachToSlider.isStartFromSlider")&&this.model.get("detachToSlider.animation")||(this.adStateActions.q0=this.show.bind(this))},_onAdStateChange:function(e,t){var i=this.adStateActions[t];i&&i()},_onComponentsVisibilityChange(){this.currModel.get(this.componentsVisibilityListener)?this.show():this.hide()}});var Mt=s(391),Vt=s(140);const kt=Mt.View.extend({className:"_cm-close-area",id:"_cm-close-area",events:{"click ":"_onClick"},initialize:function(e){this.log=new A.A({unitType:e.unitType,className:"closeButtonView",version:e.model.get("version"),isDebug:e.model.get("isDebug")}),this.container=e.container,this._rendered=!1,this._bindEvents(),this.createStateHandlers=nt.f,this.componentsVisibilityListener=e.componentsVisibilityListener,this.componentsVisibilityListener&&this._setComponentsVisibilityListener()},render:function(){if(!this._rendered){this._rendered=!0,this.$el.append('<?xml version="1.0" encoding="utf-8"?> <svg version="1.1" id="_x2014__x5F_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 99 99" xml:space="preserve"> <style>.st0{fill:#fff}</style> <g> <g stroke="null" id="svg_1"> <g stroke="null" id="svg_2"> <path stroke="null" id="svg_3" d="m82.77256,91.4817c-1.64243,0 -3.25444,-0.644 -4.50148,-1.9964l-65.57555,-69.42328c-2.49406,-2.6404 -2.49406,-6.92301 0,-9.56341c2.49406,-2.6404 6.53931,-2.6404 9.03337,0l65.57555,69.45548c2.49406,2.6404 2.49406,6.92301 0,9.56341c-1.24703,1.3202 -2.88946,1.9642 -4.53189,1.9642z" class="st0"/> </g> <g stroke="null" id="svg_4"> <path stroke="null" id="svg_5" d="m17.19702,91.4817c-1.64243,0 -3.25444,-0.644 -4.50148,-1.9964c-2.49406,-2.6404 -2.49406,-6.92301 0,-9.56341l65.57555,-69.42328c2.49406,-2.6404 6.53931,-2.6404 9.03337,0c2.49406,2.6404 2.49406,6.92301 0,9.56341l-65.57555,69.45548c-1.24703,1.3202 -2.88946,1.9642 -4.53189,1.9642z" class="st0"/> </g> </g> </g> </svg> ');var e=this.model.get("wurfl.browser.name").toLowerCase();-1===e.indexOf(y.l.BROWSER.FIREFOX.toLowerCase())&&-1===e.indexOf(y.l.BROWSER.IE.toLowerCase())&&-1===e.indexOf(y.l.BROWSER.EDGE.toLowerCase())||this.$el.addClass("_cm-close-ie-fix"),this.container=Vt.isArray(this.container)?this.container[0]:this.container,this.container.appendChild(this.el),(this.model.get("detachToSlider.isStartFromSlider")||this.model.get("detachToSlider.isDetachToSlider"))&&("detached"===this.model.get("videoViewState")?this.show():this.hide())}},_bindEvents:function(){this.model.get("vForce.isActive")?this.listenTo(this.model,"change:adState",this._onStateChange):this.listenTo(this.model,"change:state",this._onStateChange),(this.model.get("detachToSlider.isStartFromSlider")||this.model.get("detachToSlider.isDetachToSlider"))&&this.listenTo(this.model,"change:videoViewState",this._onVideoViewStateChange)},_onPlaying:function(){var e=this.model.get("components.CloseButtonView.delay");this.renderTimeout=setTimeout(this.render.bind(this),e)},_onClick:function(e){e.stopPropagation(),this.model.get("onClose")||"OMNI_TAG"==this.model.get("unitType")||Vt.firePixel(this.model.getPixel("pixels.close"),"close (user clicked the close button)"),this.model.set("state",this.model.STATE.STOPPED_BY_USER),Mt.trigger("Ad:stoppedByUser"),this.model.trigger("ad:stoppedByUser",Me.A.closeState.terminate)},_onStateChange:function(e,t){t!==e.STATE.PLAYING&&t!==Me.A.adState.playing||this._onPlaying()},_onVideoViewStateChange:function(e,t){switch(t){case"detached":this.show();break;case"attached":this.hide()}},_setComponentsVisibilityListener(){this.listenTo(this.model,"change:".concat(this.componentsVisibilityListener),this._onComponentsVisibilityChange.bind(this)),this.model.get(this.componentsVisibilityListener)||this.hide()},_onComponentsVisibilityChange(){this.model.get(this.componentsVisibilityListener)?this.show():this.hide()},hide:function(){this.$el.hide()},show:function(){this.$el.show()}});const Lt='<div id="_cm-css-reset" class="_cm-repeat-div"> <div class="_cm-repeat-view-wrapper"> <div class="_cm-repeat-buttons-wrapper"> <img class="_cm-repeat-button"/> <img class="_cm-repeat-button-hover"/> </div> <div class="_cm-learn-more-buttons-wrapper"> <img class="_cm-learn-more-button"/> <img class="_cm-learn-more-button-hover"/> </div> </div> </div> ',Ft={JP:!0};var Bt=s(391),zt=s(568),Ut=s(140);const Ht=Bt.View.extend({className:"_cm-loading",id:"_cm-css-reset",initialize:function(e){this.log=new A.A({unitType:"Component",className:"LoadingView",version:this.model.get("version"),isDebug:this.model.get("isDebug")}),e.globalModel&&(this.globalModel=e.globalModel),this.container=e.container,this.isShowReplayScreen=e.isStartWithReplay,this.isReplayable=e.isReplayable,this._createStatesAction(),this._bindEvents(),this.render()},_bindEvents:function(){this.listenTo(this.model,"change:adQState",this._onAdStateChange.bind(this,this.adStateActions)),this.listenTo(this.model,"change:adManagerState",this._onAdStateChange.bind(this,this.getAdStateActions)),this.model.on("change:viewTopComponent",this._toggleLoadingVisibility,this),this.model.on("change:repeatState",this._onReplayAdShowing,this),this.globalModel&&this.listenTo(this.globalModel,"change:adManagerState",this._onGlobalModelAdStateChange.bind(this,this.getAdStateActions))},_createStatesAction:function(){this.adStateActions={q0:this._onAdPlaying.bind(this),completed:this._onVideoComplete.bind(this),stopped:this._stop.bind(this)},this.getAdStateActions={stopped:this._stop.bind(this)}},_onGlobalModelAdStateChange:function(e,t,i){if(i==Me.A.adManagerState.stopped){var n=e[i];n&&n()}},_onAdStateChange:function(e,t,i){var n=e[i];n&&n()},render:function(){this.$el.append('<div class="_cm-loading-div"></div> '),this.loadingDiv=this.$el.find("._cm-loading-div"),"css"==this.model.get("components.Loading.type")?this.loadCss():"img"==this.model.get("components.Loading.type")&&this.loadImage(),this._applyAdditionalCss(),this.isShowReplayScreen&&this.$el.css("background","transparent"),this.$el.hide(),this.container.appendChild(this.el),this._renderReapet(),this.currentActiveImage=this.innerDisplay},_renderReapet(){this.repeatEl=zt(Lt),this._setBackground(),this._setRepeatIcon(),this.learnMoreWrapper=this.repeatEl.find("._cm-learn-more-buttons-wrapper"),this.learnMoreWrapper.hide(),this.model.get("renderLearnMore")&&this._setLearnMoreIcon(),this.repeatEl.hide(),this.loadingDiv.append(this.repeatEl)},_setRepeatIcon(){this.repeatViewWrapper=this.repeatEl.find("._cm-repeat-view-wrapper"),this.repeatButtonsWrapper=this.repeatEl.find("._cm-repeat-buttons-wrapper");var e,t,i=this.repeatEl.find("._cm-repeat-button"),n=this.repeatEl.find("._cm-repeat-button-hover");this._isTranslationExist()?(e=this.model.get("components.Repeat.replayIconByLang"),t=this.model.get("components.Repeat.replayHoverIconByLang")):(e=this.model.get("components.Repeat.replayIcon"),t=this.model.get("components.Repeat.replayHoverIcon")),this._setButtonSrc(i,n,e,t)},_setLearnMoreIcon(){var e,t,i=this.repeatEl.find("._cm-learn-more-button"),n=this.repeatEl.find("._cm-learn-more-button-hover");this._isTranslationExist()?(e=this.model.get("components.Repeat.learnMoreIconByLang"),t=this.model.get("components.Repeat.learnMoreHoverIconByLang")):(e=this.model.get("components.Repeat.learnMoreIcon"),t=this.model.get("components.Repeat.learnMoreHoverIcon")),this._setButtonSrc(i,n,e,t),this.model.get("adClickThroughUrl")?this.repeatEl.click(this._onLearnMoreClick.bind(this)):this.listenTo(this.model,"change:adClickThroughUrl",this._updateLearnMoreUrl)},_isTranslationExist(){return this.model.get("components.Repeat.isTranslateText")&&this.model.get("language")&&Ft[this.model.get("language").toUpperCase()]},_setButtonSrc(e,t,i,n){e.attr("src",i),t.attr("src",n)},_setBackground(){var e=this.model.get("components.Repeat.backgroundImage");this.repeatEl.css("background-image",'url("'.concat(e,'") !important'))},loadCss:function(){var e=document.createElement("div");e.className="_cm-loading-icon",this.loadingDiv.append(e),this.innerDisplay=zt(e)},loadImage:function(){var e=document.createElement("img");e.src=this.model.get("components.Loading.imgUrl"),e.className="_cm_loader_img",this.loadingDiv.append(e),this.innerDisplay=zt(e)},hide:function(){this.isRepeatShowing=!1,this.$el.hide(),this._setModel("loadingViewState",Me.A.loadingViewState.hiding)},show:function(){this.isShowReplayScreen&&this._showRe(),this.$el.show();var e=this.currentActiveImage[0];this._setLoadingViewSize(Ut.width(e),Ut.height(e)),this._setModel("loadingViewState",Me.A.loadingViewState.showing)},showRepeat:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._stop(e),this.globalModel.increaseCounter("repeatShown")},_onRepeatClick:function(e){e.stopPropagation(),this.log.info("User click"),this.clickEventRegistered=!1,this._setModel("loadingViewState",Me.A.loadingViewState.clicked),this.repeatEl.hide(),this.innerDisplay.show(),this.currentActiveImage=this.innerDisplay;var t=this.currentActiveImage[0];this._setLoadingViewSize(Ut.width(t),Ut.height(t))},_onLearnMoreClick(e){Ut.clickThru.call(this,this.model.get("adClickThroughUrl")),this._triggerModel("change:learnMoreClick",this.learnMoreWrapper),this.model.increaseCounter("learnMoreWasClicked",!0)},_onAdPlaying:function(){this.hide()},_onVideoComplete:function(){var e=this.model.get("activeAdData");this.model.get("displayFiller.betweenAds")!==y.l.DISPLAY_FILLER.BETWEEN_ADS.CONTENT&&e&&!e.singleAd&&this.show()},_stop(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.model.get("isAdClosedByTimer")||this.model.get("closeState")||(this.clickEventRegistered||(this.repeatButtonsWrapper.one("click",this._onRepeatClick.bind(this)),this.clickEventRegistered=!0),this._isAboveTheFeedAndHip()&&this.$el.addClass("_cm-above-the-feed-container"),this.show(),this.innerDisplay.hide(),this.currentActiveImage=this.repeatEl,this._setLoadingViewSize("auto","auto"),this.learnMoreWrapper&&this.model.get("adClickThroughUrl")&&this.model.get("renderLearnMore")&&this.learnMoreWrapper.show(),this.isReplayable||this.repeatButtonsWrapper.hide(),e&&this.repeatViewWrapper.addClass("_cm-repeat-view-wrapper-detached"),this.repeatEl.show())},_isAboveTheFeedAndHip(){return this.globalModel.get("isAboveTheFeedPlacement")&&this.globalModel.get("isHipAd")&&this.globalModel.get("isNeedHipCard")},_showRe(){this.isRepeatShowing||(this.innerDisplay.hide(),this.clickEventRegistered||(this.repeatButtonsWrapper.one("click",this._onRepeatClick.bind(this)),this.clickEventRegistered=!0),this.currentActiveImage=this.repeatEl,this._setLoadingViewSize("auto","auto"),this.learnMoreWrapper&&this.model.get("adClickThroughUrl")&&this.model.get("renderLearnMore")&&this.learnMoreWrapper.show(),this.isReplayable||this.repeatButtonsWrapper.hide(),this.repeatEl.show(),this.isRepeatShowing=!0)},_setLoadingViewSize(e,t){this.loadingDiv.css({width:e,height:t})},_setModel(e,t){this.globalModel&&this.globalModel.set(e,t),this.model.set(e,t)},_triggerModel(e,t){this.globalModel&&this.globalModel.trigger(e,t),this.model.trigger(e,t)},_applyAdditionalCss(){var e=this.model.get("additionalCss");e&&((e["z-index"]||e.zIndex)&&this.$el.css({"z-index":e["z-index"]}))},_updateLearnMoreUrl(){this.model.get("adClickThroughUrl")&&(this.repeatEl.click(this._onLearnMoreClick.bind(this)),this.learnMoreWrapper.show())},_toggleLoadingVisibility(){var e=this.model.get("viewTopComponent");this.log.info("_onTopComponentChange",e),e===y.l.FLOATING_VIEW_TOP_COMPONENT.loading?this.show():this.hide()},_onReplayAdShowing:function(){this.model.get("repeatState")===Me.A.repeatState.showing&&this.hide()},resize(e){this._isLoadingViewDisplayed()&&this.loadingDiv.css(e)},onAttach(){this._isLoadingViewDisplayed()&&this.repeatViewWrapper.removeClass("_cm-repeat-view-wrapper-detached")},_isLoadingViewDisplayed(){return this.model.get("loadingViewState")===Me.A.loadingViewState.showing}}),Wt={DE:!0};var jt=s(391),Gt=s(568),$t=s(140);const Yt=jt.View.extend({className:"_cm-repeat",id:"_cm-css-reset",initialize:function(e){this.log=new A.A({unitType:"Component",className:"RepeatView",version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this.container=e.container,this.active=!1,this._createStatesAction(),this._bindEvents(),this._render()},_render(){this.repeatEl=Gt(Lt),this._setRepeatIcon(),this.learnMoreWrapper=this.repeatEl.find("._cm-learn-more-buttons-wrapper"),this.learnMoreWrapper.hide(),this.model.get("renderLearnMore")&&this._setLearnMoreIcon(),this._setBackground(),this.$el.hide(),this.$el.append(this.repeatEl),this.container.appendChild(this.el)},_setRepeatIcon(){this.repeatWrapper=this.repeatEl.find("._cm-repeat-buttons-wrapper");var e,t,i=this.repeatEl.find("._cm-repeat-button"),n=this.repeatEl.find("._cm-repeat-button-hover");this._isTranslationExist()?(e=this.model.get("components.Repeat.replayIconByLang"),t=this.model.get("components.Repeat.replayHoverIconByLang")):(e=this.model.get("components.Repeat.replayIcon"),t=this.model.get("components.Repeat.replayHoverIcon")),this._setButtonSrc(i,n,e,t),this.repeatWrapper.click(this._onClick.bind(this))},_setLearnMoreIcon(){var e,t,i=this.repeatEl.find("._cm-learn-more-button"),n=this.repeatEl.find("._cm-learn-more-button-hover");this._isTranslationExist()?(e=this.model.get("components.Repeat.learnMoreIconByLang"),t=this.model.get("components.Repeat.learnMoreHoverIconByLang")):(e=this.model.get("components.Repeat.learnMoreIcon"),t=this.model.get("components.Repeat.learnMoreHoverIcon")),this._setButtonSrc(i,n,e,t),this.model.get("adClickThroughUrl")?this.learnMoreWrapper.click(this._onLearnMoreClick.bind(this)):this.listenTo(this.model,"change:adClickThroughUrl",this._updateLearnMoreUrl)},_isTranslationExist(){return this.model.get("components.Repeat.isTranslateText")&&this.model.get("language")&&(Ft[this.model.get("language").toUpperCase()]||this.model.get("isYahooWidget")&&Wt[this.model.get("language").toUpperCase()])},_setButtonSrc(e,t,i,n){e.attr("src",i),t.attr("src",n)},_setBackground(){var e=this.model.get("components.Repeat.backgroundImage");this.repeatEl.css("background-image",'url("'.concat(e,'") !important'))},hide:function(){this.$el.hide(),this.active=!1,this.isSpinning=!1,this.model.set("repeatState",Me.A.repeatState.hiding)},show:function(){this.learnMoreWrapper&&this.model.get("adClickThroughUrl")&&this.model.get("renderLearnMore")&&this.learnMoreWrapper.show(),this.repeatWrapper&&this.model.get("dontRenderRepeatButton")&&this.repeatWrapper.hide(),this.$el.show(),this.active=!0,this.model.set("repeatState",Me.A.repeatState.showing)},_bindEvents:function(){this.listenTo(this.model,"change:adQState",this._onAdStateChange),this.listenTo(this.model,"change:adManagerState",this._onAdManagerStateChange)},_onClick:function(e){e.stopPropagation(),this.isSpinning||this.model.getPixel&&$t.firePixel(this.model.getPixel("pixels.repeatClick"),"repeat click Pixel"),this.model.set("repeatState",Me.A.repeatState.clicked),this.trigger("cm:repeat:click")},_createStatesAction:function(){this.adStateActions={q0:this._onAdPlaying.bind(this),completed:this._onVideoComplete.bind(this),repeating:this._onAdPlaying.bind(this)},this.adManagerStateActions={empty:this._onAllVideosEnded.bind(this)}},_onAdStateChange:function(e,t){var i=this.adStateActions[t];i&&i()},_onAdManagerStateChange:function(e,t){var i=this.adManagerStateActions[t];i&&i()},_onAdPlaying:function(){setTimeout((()=>{this.hide()}),100)},_onVideoComplete:function(){this.model.get("isReplayAd")&&this.show()},_onLearnMoreClick(e){$t.clickThru.call(this,this.model.get("adClickThroughUrl")),this.model.increaseCounter("learnMoreWasClicked",!0)},_updateLearnMoreUrl(){this.model.get("adClickThroughUrl")&&(this.learnMoreWrapper.click(this._onLearnMoreClick.bind(this)),this.learnMoreWrapper.show())},addAdditionalCss(e){Gt(this.repeatEl).addClass(e)},_onAllVideosEnded(){this.model.get("preventSwapToSC")&&this.show()},setStyle(e){for(var t in e)this.el.style[t]=e[t]}});var qt=s(391),Kt=s(140),Qt="._cm-branding-view-title-text",Zt="._cm-branding-view-branding-text";const Xt=qt.View.extend({className:"_cm-branding-title",id:"_cm-css-reset",events:{},initialize:function(e){this.log=new A.A({unitType:"Component",className:"BrandingTitleView",version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this.container=e.container,this.render(),this.bindEvents()},bindEvents:function(){this.model.listenTo(this.model,"change:customization.titleContainer.branding",this._customize.bind(this)),this.model.listenTo(this.model,"change:customization.titleContainer.branding.displayState",this._onDisplayStateChange.bind(this))},render:function(){this.template=Kt.template('<span class="_cm-branding-view-title-text">{{titleContainer.titleText}}</span> <span class="_cm-branding-view-branding-text">{{titleContainer.BrandingText}}</span> '),this.$el.append(this.template(this.model.attributes)),this.ui={title:this.$el.find(Qt),branding:this.$el.find(Zt)},this._customize(),this.container.appendChild(this.el),this.model.get("isFitToSize")&&this._fitToSize()},_customize:function(){var e=this.model.get("customization.titleContainer.title"),t=this.model.get("customization.titleContainer.branding");e&&((e=Kt.toCssObj(e)).height="auto",this.ui.title.css(e)),t&&((t=Kt.toCssObj(t)).height="auto",this.ui.branding.css(t))},_fitToSize:function(){var e=Kt.height(this.container),t=this.model.get("videoPlaceholderSize");e&&t&&(Number(t.height)+Kt.height(this.$el[0])>=e?Number(t.height)+Kt.height(this.ui.title[0])<e?this._hideDescription():this._hide():this._show())},_hide:function(){this.$el.hide()},_show:function(){this.$el.show()},_onDisplayStateChange:function(e){e===Me.A.brandingDisplayState.show?this._showAndFitToSize():this._hide()},_showAndFitToSize:function(){this._show(),this._fitToSize()},_hideDescription:function(){this.ui.branding.hide()}});var Jt=s(907),ei=s(140),ti=s(568);class ii{constructor(e){this.model=e,this.log=new A.A({unitType:"Util",className:"AnimationUtil",version:this.model.get("version"),isDebug:this.model.get("isDebug")})}expand(e){ei.height(e.$el[0])>=e.height?this.log.info("No expand needed"):this.animateHeight(e)}collapse(e){ei.height(e.$el[0])<=e.height?this.log.info("No collapse needed"):this.animateHeight(e)}animateHeight(e){this.model.set("isAnimationRunning",!0);var t={transition:"height ".concat(e.timeMS,"ms"),height:e.height};requestAnimationFrame((()=>{e.$el.css(t)})),this.oneAnimationEnd(e.$el,e.cb,e.timeMS)}animateOpacity(e){this.model.set("isAnimationRunning",!0);var t={transition:"opacity ".concat(e.timeMS,"ms"),opacity:e.opacity};requestAnimationFrame((()=>{e.$el.css(t)})),this.oneAnimationEnd(e.$el,e.cb,e.timeMS)}detectAnimationEvent(e,t){var i="animation".concat(t);if(!e)return i;var n,s={animation:i,WebkitAnimation:"webkitAnimation".concat((n=t,n.charAt(0).toUpperCase()+n.slice(1))),OAnimation:"oanimation".concat(t),MozAnimation:i,MSAnimation:"MSAnimation".concat(t)};if(this._cachedSupportedAnimationKey)return s[this._cachedSupportedAnimationKey];var o=Object.keys(s).find((t=>t in e.style));return this._cachedSupportedAnimationKey=o||"animation",s[this._cachedSupportedAnimationKey]}attach(e){if(e.$el){var t={top:e.target.top,left:e.target.left};if(e.isAnimated){t.width=this.model.get("isYahooWidget")?"100%":"".concat(this.model.get("videoPlaceholderSize.width"),"px"),t.height="".concat(this.model.get("videoPlaceholderSize.height"),"px");var i=e.$el.offset(),n={position:"absolute",top:"".concat(i.top,"px"),left:"".concat(i.left,"px"),width:this.model.get("isYahooWidget")?"100%":"".concat(i.width,"px"),height:"".concat(i.height,"px")};requestAnimationFrame((()=>{e.$el.css(n),ei.flushCss(e.$el[0])})),t.transition="all ".concat(e.timeMS,"ms ease"),t=ti.extend(t,e.additionalCss),requestAnimationFrame(function(){e.$el.css(t)}.bind(this))}else{var s={position:"absolute",top:"auto",bottom:"auto",left:"auto",right:"auto"};t=ti.extend(s,t),t=ti.extend(s,e.additionalCss),e.$el.css(s),requestAnimationFrame((()=>{ei.flushCss(e.$el[0])}))}this.oneAnimationEnd(e.$el,e.cb,e.timeMS)}else this.log.warning("Called attach without an element!")}detach(e){var t,i;if(this.model.get("nextUp.isActive")&&this.model.get("nextUp.selector")&&(t=document.querySelector(this.model.get("nextUp.selector")),i=getComputedStyle(t).bottom),e.isAmp)this.detachSliderAmp(e);else{var n={position:"fixed",top:"auto",bottom:"auto",left:"auto",right:"auto"};if(e.isSlideIn)t?(n[e.sliderOptions.position.horizontal]=0,n[e.sliderOptions.position.vertical]=i,n.height="".concat(this.model.get("detachToSlider.height")+e.sliderOptions.position.verticalOffset,"px")):(n[e.sliderOptions.position.horizontal]="".concat(e.sliderOptions.position.horizontalOffset,"px"),n[e.sliderOptions.position.vertical]="".concat(e.sliderOptions.position.verticalOffset,"px"),n.height="".concat(this.model.get("detachToSlider.height"),"px")),e.isSlideVertically?n.height=0:n.width=0;else{var s=ti.extend({},ei.safeGetBoundingClientRect(e.$el[0]));s.right=window.innerWidth-s.left-s.width,s.bottom=window.innerHeight-s.bottom,n[e.sliderOptions.position.horizontal]="".concat(s[e.sliderOptions.position.horizontal],"px"),n[e.sliderOptions.position.vertical]="".concat(s[e.sliderOptions.position.vertical],"px")}var o={transition:"all ".concat(e.timeMS,"ms ease")};t?(o[e.sliderOptions.position.vertical]=i,o[e.sliderOptions.position.horizontal]=0,o.height="".concat(this.model.get("detachToSlider.height")+e.sliderOptions.position.verticalOffset,"px")):(o[e.sliderOptions.position.vertical]="".concat(e.sliderOptions.position.verticalOffset,"px"),o[e.sliderOptions.position.horizontal]="".concat(e.sliderOptions.position.horizontalOffset,"px"),o.height="".concat(this.model.get("detachToSlider.height"),"px")),o.width="".concat(this.model.get("detachToSlider.width"),"px"),e.isAnimated?(e.$el.css(n),requestAnimationFrame((()=>{e.$el.css(n),ei.flushCss(e.$el[0])})),requestAnimationFrame(function(){e.$el.css(o)}.bind(this))):(e.$el.css(n),o.transition="none !important",e.$el.css(o)),this.oneAnimationEnd(e.$el,e.cb,e.timeMS+1)}}detachSliderAmp(e){var t={position:"absolute",top:"auto",bottom:"auto",left:"auto",right:"auto"};e.isSlideIn?(t[e.sliderOptions.position.horizontal]="".concat(e.sliderOptions.position.horizontalOffset,"px"),t.top=this._getSliderPositionVerticalAmp(e.sliderOptions),t.height="".concat(this.model.get("detachToSlider.height"),"px"),e.isSlideVertically?t.height=0:t.width=0):(t[e.sliderOptions.position.horizontal]="".concat(e.sliderOptions.position.horizontalOffset,"px"),t.top=this._getSliderPositionVerticalAmp(e.sliderOptions));var i={position:"absolute",top:"auto",bottom:"auto",left:"auto",right:"auto",transition:"all  ".concat(e.sliderOptions.detachAnimationTime," ").concat(e.sliderOptions.animationStyle)};i[e.sliderOptions.position.horizontal]="".concat(e.sliderOptions.position.horizontalOffset,"px"),i.top=this._getSliderPositionVerticalAmp(e.sliderOptions),i.width="".concat(this.model.get("detachToSlider.width"),"px"),i.height="".concat(this.model.get("detachToSlider.height"),"px"),e.isSlideIn&&e.$el.css(t),requestAnimationFrame(function(){e.$el.css(i)}.bind(this)),setTimeout(function(){this.correctSliderDetachPosition({$el:e.$el,sliderOptions:e.sliderOptions,isSlideVertically:e.isStickyCardActive})}.bind(this),e.sliderOptions.animationTime+10),this.oneAnimationEnd(e.$el,e.cb,e.timeMS+1)}detachAmpSticky(e){ei.dispatchTRC("videoSliderOn",this.model),e.timeMS=150;var t={transition:"top ".concat(e.timeMS,"ms ease-in-out"),position:"absolute"};t[e.sliderOptions.position.horizontal]="".concat(e.sliderOptions.position.horizontalOffset,"px"),t[e.sliderOptions.position.vertical]="".concat(e.sliderOptions.position.verticalOffset,"px"),t.width="".concat(this.model.get("detachToSlider.width"),"px"),t.height="".concat(this.model.get("detachToSlider.height"),"px"),e.$el.css(t),this.oneAnimationEnd(e.$el,e.cb,e.timeMS+1)}correctSliderDetachPosition(e){ei.dispatchTRC("videoSliderOn",this.model);var t=e.sliderOptions.amp.correctionAnimationTime,i={transition:"top ".concat(t,"ms ease-in-out"),position:"absolute"};i.top=this._getSliderPositionVerticalAmp(e.sliderOptions),e.$el.css(i),this.oneAnimationEnd(e.$el,e.cb,t+1)}slideOut(e){var t={transition:"all ".concat(e.timeMS,"ms linear")};e.isVerticalSlideOut?(t[e.sliderOptions.position.horizontal]="".concat(e.sliderOptions.position.horizontalOffset,"px"),this.model.get("nextUp.isActive")&&this.model.get("nextUp.selector")?e.sliderOptions.position.verticalOffset?t[e.sliderOptions.position.vertical]="-".concat(e.sliderOptions.position.verticalOffset+e.sliderOptions.height,"px"):t[e.sliderOptions.position.vertical]="-".concat(ei.height(e.$el[0]),"px"):t[e.sliderOptions.position.vertical]="-".concat(e.sliderOptions.height+parseFloat(e.sliderOptions.position.verticalOffset),"px")):(t[e.sliderOptions.position.horizontal]="-".concat(e.sliderOptions.width+parseFloat(e.sliderOptions.position.horizontalOffset),"px"),t[e.sliderOptions.position.vertical]="".concat(e.sliderOptions.position.verticalOffset,"px")),requestAnimationFrame(function(){e.$el.css(t)}.bind(this)),this.oneAnimationEnd(e.$el,e.cb,e.timeMS)}oneAnimationEnd(e,t,i){setTimeout(function(){this.model.set("isAnimationRunning",!1),e.css("transition","none"),t&&t()}.bind(this),i)}PrefixedEvent(e,t,i,n){i=i.toLowerCase(),ei.each(["webkit","moz","MS","o",""],(function(s){e[t](s+i,n)}))}_getSliderPositionVerticalAmp(e){var t=0,i=this.model.get("ampPageTopLimit")||0,n=this.model.get("ampPageBottomLimit")||0;return"bottom"===e.position.vertical?(t=n-e.height-e.position.verticalOffset,t=Math.max(0,t)):t=i+e.position.verticalOffset,"".concat(t,"px")}updateModel(e){this.model=e}}var ni=function(){var e;return function(t){return e||(e=new ii(t)),e.updateModel(t),e}}();const si=ni;var oi=s(140);class ai extends Jt.A{constructor(e){super(),this.model=e.model,this.globalModel=e.globalModel,this.log=new A.A({unitType:this.model.get("unitType"),className:this.constructor.name,version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this.components={},this.container=e.container,this.componentsConfig={},this.baseOptions={model:this.model,globalModel:this.globalModel,container:this.container},this.animationUtil=si(this.model)}_bindEvents(){}_initComponents(){var e,t=this._getActiveComponentsInitialVisibility();this._loadActiveComponents(t),this.model.set("componentVisibility",t),null===(e=this.globalModel)||void 0===e||e.set("componentVisibility",t)}_loadActiveComponents(e){for(var t in e){var i={componentsVisibilityListener:"componentVisibility.".concat(t)},n=oi.extend(this.componentsConfig[t].options,i);this.components[t]=this._loadComponent(this.componentsConfig[t].module,n),this.componentsConfig[t].afterLoad&&this.componentsConfig[t].afterLoad()}}_getActiveComponentsInitialVisibility(){var e={};for(var t in this.componentsConfig)this.componentsConfig[t].isActive&&(e[t]=this.componentsConfig[t].isVisibleOnLoad);return e}_showActiveComponents(){for(var e in this.componentsConfig)this.componentsConfig[e].isActive&&this.model.set("componentVisibility.".concat(e),this.componentsConfig[e].isVisibleOnLoad)}_hideActiveComponents(){for(var e in this.componentsConfig)this.componentsConfig[e].isActive&&this.model.set("componentVisibility.".concat(e),!1)}_loadComponent(e,t){if(e)return new e(t);this.log.error("can't load component - component is undefined")}detach(e,t){this.currentAnimation=y.l.ANIMATION_TYPE.detaching;var i=t?0:this.model.get("animation.detach");this.animationUtil.detach({$el:e,timeMS:i,sliderOptions:this.detachToSlider,isSlideIn:this.isFirstDetach,cb:this.postDetach.bind(this)}),e.css(this.model.get("additionalCss"))}postDetach(){this.currentAnimation===y.l.ANIMATION_TYPE.detaching&&(this.currentAnimation=y.l.ANIMATION_TYPE.none)}attach(e,t,i){var n=this.model.get("animation.attach"),s=!i&&this.model.get("detachToSlider").animation;this.currentAnimation=y.l.ANIMATION_TYPE.attaching,this.animationUtil.attach({$el:e,target:t,isAnimated:s,timeMS:n,additionalCss:this.model.get("additionalCss"),cb:this.postAttach.bind(this)})}postAttach(){this.currentAnimation===y.l.ANIMATION_TYPE.attaching&&(this.currentAnimation=y.l.ANIMATION_TYPE.none)}slideOut(e,t,i){var n=this.model.get("animation.slideOut");this.animationUtil.slideOut({$el:e,timeMS:n,sliderOptions:this.detachToSlider,isVerticalSlideOut:t,cb:i})}}const ri=ai;var li=s(568),di=s(140),ci=s(391),hi="_cm-native-ad",mi={title:"._cm-native-ad-title",ctaButtone:"._cm-native-ad-cta-button",description:"._cm-native-ad-description",icon:"._cm-native-ad-icon",branding:"._cm-native-ad-branding",adChoice:"._cm-ad-choice",placeholder:"._cm-feed-manager-video-placeHolder",wrapper:"._cm-native-ad-bottom"};class pi extends Ke.A{constructor(e){super(e),this.model=e.model,this.globalModel=e.globalModel,this.shouldHideBrandingText=e.shouldHideBrandingText||!1,this.shouldFitToSize=e.shouldFitToSize||!1,this.sendNasOpp=e.sendNasOpp||!1,this.overrideHiddenOnHIPDemand=e.overrideHiddenOnHIPDemand||!1,this.elasticLogger=this.model.get("elasticLogger"),this.isMultiFloatingNASElements=e.isMultiFloatingNASElements||!1,e.additionalCss&&this._addAdditionalCss(e.additionalCss),this.log=new A.A({unitType:this.model.get("unitType"),className:constructor.name,version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this._setTemplate(),this.container=li(e.container),this.nativeAdMapping=this.globalModel.get("nativeAdMapping"),(this.model.get("stickyCard.isActive")||!this.model.get("detachToSlider.isStartFromSlider")&&!this.model.get("detachToSlider.isDetachToSlider"))&&(this.isSticky=!0,this._setToModel("floatingNAS.isActive",!1)),this.model.get("isPreviewAdSettings")&&(window.setPreviewAdSettings=e=>{var{title:t,description:i,branding:n}=e;this.model.set("adNativeSettings",{[this.nativeAdMapping.title]:t,[this.nativeAdMapping.description]:i,[this.nativeAdMapping.branding]:n}),this._updateAdData()}),this.bindEvents()}_setTemplate(){this._isTitleOnTop()?this.template='<div class="_cm-native-ad-top"> <div class="_cm-native-ad-title" data-click-name="adTitleClick"></div> <div class="_cm-native-ad-cta-wrapper"> <div class="_cm-native-ad-cta-button" data-click-name="adCtaButtonClick"></div> </div> <div class="_cm-native-ad-description" data-click-name="adDescriptionClick"></div> <div class="_cm-native-ad-icon"></div> <div class="_cm-native-ad-branding" data-click-name="adBrandingClick"></div> <div class="_cm-ad-choice"></div> </div> ':this.template='<div class="_cm-native-ad-bottom"> <div class="_cm-native-ad-title" data-click-name="adTitleClick"></div> <div class="_cm-native-ad-cta-wrapper"> <div class="_cm-native-ad-cta-button" data-click-name="adCtaButtonClick"></div> </div> <div class="_cm-native-ad-description" data-click-name="adDescriptionClick"></div> <div class="_cm-native-ad-icon"></div> <div class="_cm-native-ad-branding" data-click-name="adBrandingClick"></div> <div class="_cm-ad-choice"></div> </div> '}_setToModel(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.model.set(e,t,i),this.globalModel&&this.globalModel.set(e,t,i)}_render(){this.renderTemplate(),this._adjustRTL(),this._adjustToDarkMode(),this.$el.addClass(hi),this._isAboveTheFeedAndHip()?(this._loadAboveTheFeedFont(),this._renderAboveTheFeedTitle()):(this.container.append(this.$el),this._addAdChoiceTitle()),this.rendered=!0}_loadAboveTheFeedFont(){var e=document.createElement("link");e.setAttribute("rel","stylesheet"),e.setAttribute("type","text/css");var t=this.model.get("aboveTheFeedFont");e.setAttribute("href",t),document.head.appendChild(e)}_renderAboveTheFeedTitle(){this.$el.addClass("item-label-href _cm-above-the-feed-title-wrapper _cm-native-ad"),this.container.append(this.$el),this.$el.find("._cm-native-ad-bottom").addClass("video-label-box"),this.$el.find("._cm-native-ad-title").addClass("video-label video-title trc_ellipsis"),this.$el.find("._cm-native-ad-description").addClass("video-label video-description trc_ellipsis"),this._addAdChoiceTitle()}_renderAboveTheFeedDescription(e){var t,i=this.$el.find("._cm-native-ad-description");e.after(i),i.addClass("video-label video-description trc_ellipsis"),i.text(null===(t=this.adNativeSettings)||void 0===t?void 0:t.desc)}_adjustRTL(){var e=this._getCssFromSelector(this.model.get("rboxCssSelectors.title"));e&&"rtl"===e.direction&&(this.ui.wrapper.css({"flex-direction":"row-reverse",direction:"ltr"}),this.ui.icon.addClass("_cm-native-ad-icon-rtl").removeClass("_cm-native-ad-icon"))}_adjustToDarkMode(){this.model.get("adjustToDarkMode.isActive")&&(this._logToElasticLogger("adjust to dark mode"),this.ui.wrapper.css({"background-color":"unset !important"}))}_logToElasticLogger(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Oe.C.INFO,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.elasticLogger&&e&&this.elasticLogger.log({message:e,severity:t,extraData:i})}bindEvents(){this.model.on("openOutOfView",this.show.bind(this)),this.createStateHandlers([{event:"adNativeSettings",funcName:"_updateAdData"},{event:"repeatState:".concat(Me.A.repeatState.hiding),funcName:"show"},{event:"loadingViewState:".concat(Me.A.loadingViewState.hiding),funcName:"show"},{event:"floatingView:".concat(Me.A.floatingView.detach),funcName:"detach"},{event:"floatingView:".concat(Me.A.floatingView.attach),funcName:"attach"},{event:"floatingView:".concat(Me.A.floatingView.postAttach),funcName:"postAttach"},{event:"floatingView:".concat(Me.A.floatingView.permanentClosed),funcName:"permanentClosed"}])}_getAdNativeSettings(){return this.model.get("adNativeSettings")}_updateAdData(){this.isMobile=this.model.get("isMobile"),this.adNativeSettings=this._getAdNativeSettings(),this.rendered||this._render(),this._displayTitleOnTop(),this._setRandomTitle(),this._handleBranding(),this.isClickable=this.adNativeSettings.isClickable;var e=this._getTitleSelector();this._updateContainerViewTitleVisibility(),this._adjustDescFontToTitleFont(e),this._updateContainerEl(this.ui.ctaButtone,this.adNativeSettings[this.nativeAdMapping.ctaButtone],"",this.model.get("customization.cta")),this._updateContainerEl(this.ui.title,this.adNativeSettings[this.nativeAdMapping.title],e,this.model.get("customization.title")),this._updateContainerEl(this.ui.description,this.adNativeSettings[this.nativeAdMapping.description],this.model.get("rboxCssSelectors.description"),this.model.get("customization.description")),this._updateContainerEl(this.ui.branding,this.adNativeSettings[this.nativeAdMapping.branding],this.model.get("rboxCssSelectors.branding"),this.model.get("customization.branding")),this._updateIcon(this.adNativeSettings[this.nativeAdMapping.icon]),this._createFloatingNAS(),this._adjustRTLByLanguage(),this._isAboveTheFeedAndBrandingExist()&&this._renderAboveTheFeedbrandingElement(),this._isSuperSlider()?this.hide():this.show(),this._fitToSize(),this._checkSendNasOpp(),this.adDataUpdated=!0,this.model.trigger("nativeAdSettingsUpdated")}_getTitleSelector(){return this._isAboveTheFeedAndHip()?"":this.model.get("rboxCssSelectors.title")}_isAboveTheFeedAndBrandingExist(){return this._isAboveTheFeedAndHip()&&this.adNativeSettings[this.nativeAdMapping.branding]}_adjustRTLByLanguage(){if(di.isLanguageRTL(this.model)){var e={"text-align":"right",direction:"rtl"};this.ui.title.css(e),this.ui.description.css(e),this.ui.branding.css(e),this.ui.wrapper.css(e)}}_isAboveTheFeedAndHip(){return this.globalModel.get("isAboveTheFeedPlacement")&&this.globalModel.get("isHipAd")&&this.globalModel.get("isNeedHipCard")}_renderAboveTheFeedbrandingElement(){var e=document.createElement("div");e.className="branding-separator",e.innerText="|";var t=this.$el.find("._cm-native-ad-branding");t.addClass("branding composite-branding"),t.append(e),t.append(this.$el.find("._cm-ad-choice-text"))}_checkSendNasOpp(){this.sendNasOpp&&(this.detached?this.model.trigger("displayingNASTitleOnly"):this.model.trigger("displayingFullNAS"))}_setRandomTitle(){this.model.get("getRandomNativeAdTitle")&&!this.adNativeSettings[this.nativeAdMapping.title]&&(this.adNativeSettings[this.nativeAdMapping.title]=di.getRandomFromList(this.model.get("randomTitlesList")),this.adNativeSettings.isClickable=!0)}_displayTitleOnTop(){this._isTitleOnTop()&&(this.model.set("isTitleOnTop",!0),this.model.set("getRandomNativeAdTitle",!1),this._displayTitleOnly(),li(this.ui.title).css({"max-width":"340px"}),setTimeout((()=>li(this.ui.title).css({"max-width":"225px"})),2e3))}_isTitleOnTop(){return this.model.get("unitType").indexOf(y.l.RECO_REEL_WIDGET.NAME)>-1&&this.model.get("frameType")===y.l.FRAME_TYPE.amp&&this.model.get("showTitleOnTop")}_handleBranding(){this.shouldHideBrandingText&&(this.containerHeight=this.containerHeight||di.height(li("._cm-widget-item")[0]),this.model.trigger("change:customization.titleContainer.branding.displayState",this._hasNASTitle()?Me.A.brandingDisplayState.hide:Me.A.brandingDisplayState.show))}_fitToSize(){if(this.shouldFitToSize)if(this.hasNAS=this._hasNASTitle(),this.hasNAS){if(!this.detached){this.fitToSizeDisplaying=y.l.NATIVE_AD.FIT_TO_SIZE.NONE;var e=this.model.get("videoPlaceholderSize");this.containerHeight&&e&&(this._canFitTitleAndDescription(e)?this._canFitTitleOnly(e)?(this.fitToSizeDisplaying=y.l.NATIVE_AD.FIT_TO_SIZE.TITLE,this._displayTitleOnly(),this.model.trigger("displayingNASTitleOnly")):this.hide():(this.fitToSizeDisplaying=y.l.NATIVE_AD.FIT_TO_SIZE.FULL,this.show(),this.model.trigger("displayingFullNAS")))}}else this.hide()}_canFitTitleAndDescription(e){return Number(e.height)+di.safeGetBoundingClientRect(this.el).height>this.containerHeight}_canFitTitleOnly(e){return Number(e.height)+di.height(this.ui.title[0])<this.containerHeight}_displayTitleOnly(){this.ui.title.show(),this.ui.description.hide(),this.ui.ctaButtone.hide(),this.ui.branding.hide(),this.ui.icon.hide(),this.container.height(this.containerHeight)}_isSuperSlider(){return this.model.get("detachToSlider.isStartFromSlider")&&this.model.get("detachToSlider.isDetachToSlider")&&-1===this.model.get("unitType").indexOf("MID_ARTICLE_SLIDER")}_updateContainerViewTitleVisibility(){var e=this.adNativeSettings.title||this.adNativeSettings.ctatext||this.adNativeSettings.desc||this.adNativeSettings.sponsored,t=this.container.find("._cm-ad-title");e?(t.hide(),this.ui.adChoice.show()):(t.show(),this.ui.adChoice.hide())}_adjustDescFontToTitleFont(e){var t=this.model.get("customization.description");if(!t)try{var i=parseInt(this._getCssFromSelector(e).fontSize);isNaN(i)||(t={},di.extend(t,{"font-size":"".concat(i*y.l.NATIVE_AD.DESC_TITLE_FONT_RATIO,"px")}),this.model.set("customization.description",t))}catch(e){this.log.info("No title selector found - apply default values")}}_updateContainerEl(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>3?arguments[3]:void 0,n=arguments.length>2?arguments[2]:void 0;(e.text(t),e.attr("data-text",t),t)?(this._isAboveTheFeedAndHip()||this._applyCssFromSelector(e,n,i),e.show()):e===this.ui.ctaButtone&&e.hide();this._updateTitleContainerClickability(e)}_applyCssFromSelector(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=di.pick(this._getCssFromSelector(t),y.l.CSS_PROPERTIES_FROM_RBOX);di.extend(n,i),e.css(di.toCssObj(n))}_getCssFromSelector(e){if(!e)return{};var t=e;return di.isString(e)&&(t=this.globalModel.get("isAboveTheFeedPlacement")?document.querySelectorAll(e)[1]:document.querySelector(e)),t&&getComputedStyle(t)}_updateTitleContainerClickability(e){this.isClickable?(e[0].onclick=this._onClick.bind(this),e.css({cursor:"pointer"}),e.attr("role","link")):(e[0].onclick=null,e.css({cursor:"default"}),e.removeAttr("role"))}_onClick(e){var t,i=null==e||null===(t=e.target)||void 0===t?void 0:t.getAttribute("data-click-name");i&&(ci.trigger("change:nativeAdClick",e,i),this.model.set("nativeAdClick",i,{silent:!0}),this.model.trigger("change:nativeAdClick",i))}_updateIcon(e){e?(this.iconImg||this._createIconImg(),this.iconImg.src=e,this._updateTitleContainerClickability(this.ui.icon),this.ui.icon.show()):this.ui.icon.hide()}_createIconImg(){this.iconImg=document.createElement("img"),this.iconImg.className="_cm-native-ad-icon-img",this.iconImg.setAttribute("data-click-name","adIconClick"),this.iconImg.addEventListener("error",this._onError.bind(this)),this.ui.icon.css(di.toCssObj(di.extend({},this.model.get("customization.icon")))),this.ui.icon.append(this.iconImg)}_onError(){this.log.error("can't load native ad icon"),this.ui.icon.hide()}_addAdChoiceTitle(){this.model.get("components.adChoice.isActive")&&this.model.get("components.adChoice.title.isActive")&&(this.adChoice=new Pt({model:this.model,container:this.ui.adChoice,parent:this.el,type:y.l.AD_CHOICE_TYPE.TITLE}))}_addAdditionalCss(e){li(this.el).addClass(e)}hide(){this.$el.hide()}show(){this._isSuperSlider()||(this.$el.show(),this.overrideHiddenOnHIPDemand&&this.model.get("isHipAd")&&this._isHidden()&&this.$el[0].classList.add("_cm-native-ad-override-hidden"))}_isHidden(){return getComputedStyle(this.$el[0]).display===y.l.DISPLAY_STYLE.HIDDEN}_createFloatingNAS(){this.globalModel.get("floatingNAS.isActive")&&(this.hasNAS=this._hasNASTitle(),this.hasNAS&&(this.isMultiFloatingNASElements&&this._removePreviousFloatingNASElement(),this.ui.floatingNAS={},this._createFloatingNASWrapper(),this._createFloatingNASTitle(),this._appendFloatingNAS()))}_removePreviousFloatingNASElement(){this.ui.floatingNAS&&this.ui.floatingNAS.wrapper&&this.ui.floatingNAS.wrapper.parentElement.removeChild(this.ui.floatingNAS.wrapper)}_createFloatingNASWrapper(){this.ui.floatingNAS.wrapper=document.createElement("div"),this.ui.floatingNAS.wrapper.className="".concat(mi.wrapper.replace(/^\./,"")," _cm-native-ad-bottom-floating"),this.shouldFitToSize&&!this.detached&&li(this.ui.floatingNAS.wrapper).addClass("hide"),this.ui.floatingNAS.wrapper.style.width="".concat(this.model.get("detachToSlider.width"),"px")}_createFloatingNASTitle(){this.ui.floatingNAS.title=this.ui.title[0].cloneNode(!0),this.ui.floatingNAS.title.className+=" _cm-native-ad-title-floating"}_appendFloatingNAS(){this.ui.floatingNAS.wrapper.appendChild(this.ui.floatingNAS.title),this._getActiveAd().appendChild(this.ui.floatingNAS.wrapper)}_getActiveAd(){return document.getElementsByClassName("_cm-ad-active")[0]||this.container.get(0)}_getFloatingView(){return document.getElementsByClassName("_cm-floating-view")[0]}_hasNASTitle(){return di.isString(this.adNativeSettings[this.nativeAdMapping.title])}detach(){this.isSticky||this.shouldFitToSize&&this.fitToSizeDisplaying===y.l.NATIVE_AD.FIT_TO_SIZE.NONE||(this.detached=!0,this.hasNAS&&(this.ui.floatingNAS.wrapper.style.width="".concat(this.model.get("detachToSlider.width"),"px"),this.ui.floatingNAS.wrapper.className=this.ui.floatingNAS.wrapper.className.replace(" hide","")))}attach(){this.isSticky||this.shouldFitToSize&&this.fitToSizeDisplaying===y.l.NATIVE_AD.FIT_TO_SIZE.NONE||this.hasNAS&&this.detached&&(this.ui.floatingNAS.wrapper.style.width="".concat(this.model.get("width"),"px"))}postAttach(){this.isSticky?this._displayFitToSizeNAS():this.shouldFitToSize&&this.fitToSizeDisplaying===y.l.NATIVE_AD.FIT_TO_SIZE.NONE||(this.hasNAS&&this.detached&&(this._handleActiveAdWithoutNAS(),this.ui.floatingNAS.wrapper.className+=" hide",this._displayFitToSizeNAS()),this.detached=!1)}_displayFitToSizeNAS(){this.shouldFitToSize&&this.fitToSizeDisplaying!==y.l.NATIVE_AD.FIT_TO_SIZE.NONE&&(this.fitToSizeDisplaying===y.l.NATIVE_AD.FIT_TO_SIZE.TITLE?this._displayTitleOnly():this.fitToSizeDisplaying===y.l.NATIVE_AD.FIT_TO_SIZE.FULL&&this.show())}triggerDetachIfRendered(){this.adDataUpdated&&this.model.trigger("nativeAdSettingsUpdated")}getFloatingNASHeight(){return this.ui.floatingNAS&&this.ui.floatingNAS.wrapper?di.safeGetBoundingClientRect(this.ui.floatingNAS.wrapper).height:0}getNASHeight(){return this.shouldFitToSize&&this.fitToSizeDisplaying!==y.l.NATIVE_AD.FIT_TO_SIZE.NONE?this.fitToSizeDisplaying===y.l.NATIVE_AD.FIT_TO_SIZE.TITLE?di.height(this.ui.title[0]):di.safeGetBoundingClientRect(this.el).height:0}onAdComplete(){this.prevAdNAS=this.hasNAS,this.adDataUpdated=!1,this.hasNAS&&this.detached&&this._isSuperSlider()&&this._handleActiveAdWithoutNAS()}onAdDisplayChange(){if(this.hasNAS&&this.detached){if(this.prevAdNAS&&this._isSuperSlider())return;this._handleFloatingViewWithNAS(),this._isSuperSlider()&&this._handleActiveAdWithNAS()}else this.hideFloatingNAS(!0)}onAdSwapped(){this.hasNAS=this._hasNASTitle()||this._isActiveAdContainNAS(),this.detached&&this.hasNAS!==this.prevAdNAS&&(this.hasNAS?this._handleFloatingViewWithNAS():this._handleActiveAdWithNAS()),this.adDataUpdated=!0,this.prevAdNAS=this.hasNAS}_handleFloatingViewWithNAS(){var e=this._getFloatingView();e&&(e.style.bottom="".concat(parseInt(e.style.bottom)+this.getFloatingNASHeight(),"px"))}_handleActiveAdWithNAS(){var e=this._getActiveAd();e&&(e.style.height="".concat(parseInt(e.style.height)+this.getFloatingNASHeight(),"px"))}_handleActiveAdWithoutNAS(){var e=this._getActiveAd();if(e){var t=parseInt(e.style.height);t>this.model.get("videoPlaceholderSize").height&&(e.style.height="".concat(t-this.getFloatingNASHeight(),"px"))}}_isActiveAdContainNAS(){var e=this._getActiveAd();return!!e&&e.getElementsByClassName("_cm-native-ad-bottom-floating").length>0}permanentClosed(){this._isSuperSlider()&&this.hide()}hideFloatingNAS(e){var t;(e||this.detached)&&(null===(t=this.ui.floatingNAS)||void 0===t||null===(t=t.wrapper)||void 0===t||t.classList.add("hide"))}showFloatingNAS(){var e;this.detached&&(null===(e=this.ui.floatingNAS)||void 0===e||null===(e=e.wrapper)||void 0===e||e.classList.remove("hide"))}get className(){return hi}get ui(){return this.UI?this.UI:this.UI=mi}set ui(e){return this.UI=e}}const ui=pi;const gi=Yt.extend({className:"cm_yahoo-repeat-view",id:"",initialize:function(e){Yt.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"change:repeatState",this._onRepeatStateChange)},_onRepeatStateChange:function(e,t){t===Me.A.repeatState.showing?this.el.classList.add("showing"):this.el.classList.remove("showing")},_render(){var e,t;this.el.innerHTML='<button class="cm_yahoo-repeat-replay-btn" type="button" title="Replay"> <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"> <g clip-path="url(#clip0_219_608)"> <path d="M7.99996 3.33335V0.666687L4.66663 4.00002L7.99996 7.33335V4.66669C10.2066 4.66669 12 6.46002 12 8.66669C12 10.8734 10.2066 12.6667 7.99996 12.6667C5.79329 12.6667 3.99996 10.8734 3.99996 8.66669H2.66663C2.66663 11.6134 5.05329 14 7.99996 14C10.9466 14 13.3333 11.6134 13.3333 8.66669C13.3333 5.72002 10.9466 3.33335 7.99996 3.33335Z" fill="white"/> </g> <defs> <clipPath id="clip0_219_608"> <rect width="16" height="16" fill="white"/> </clipPath> </defs> </svg> </button> <button class="cm_yahoo-repeat-learn-btn" type="button">Learn More</button> ',this.el.style.display="none",this.videoContainer=this.container.querySelector("._cm-yahoo-widget"),this.videoContainer.appendChild(this.el),this.replayBtn=this.el.querySelector(".cm_yahoo-repeat-replay-btn"),this.learnMoreBtn=this.el.querySelector(".cm_yahoo-repeat-learn-btn"),this.setLearnMoreBtnText(),null===(e=this.replayBtn)||void 0===e||e.addEventListener("click",this._onClick.bind(this)),null===(t=this.learnMoreBtn)||void 0===t||t.addEventListener("click",this._onLearnMoreClick.bind(this))},setLearnMoreBtnText:function(){this.learnMoreBtnTxt=this.model.get("learnMoreBtnText"),this.learnMoreBtnTxt&&(this.learnMoreBtn.textContent=this.learnMoreBtnTxt)}});class vi{constructor(e){if(!e)throw new Error("No element provided to initialize native ad template.");this.template=this._buildTemplate(this._analyze(e))}getTemplateClone(){return this.template.cloneNode(!0)}_analyze(e){var t=e=>{var t={},i=["class","style","id","role"];return Array.from(e.attributes||[]).forEach((e=>{var{name:n,value:s}=e;i.includes(n)||n.startsWith("aria-")||(t[n]=s)})),t},i=e=>{var t={};if(null!=e&&e.style)for(var i=0;i<e.style.length;i++){var n=e.style[i];t[n]=e.style.getPropertyValue(n)}return t},n=e=>e?{classes:Array.from(e.classList),attributes:t(e),styles:i(e),textContent:e.textContent}:null,s=t=>e.querySelector('[slot="'.concat(t,'"]'));return{wrapper:{classes:Array.from(e.classList),attributes:t(e)},title:n(s("title")),description:n(s("description")),branding:n(e.querySelector('[slot="branding"]')),brandingInner:n(e.querySelector(".branding-inner")),separator:n(e.querySelector(".branding-separator")),logoDiv:n(e.querySelector(".logoDiv"))}}_buildTemplate(e){var t=this._createWrapperElement(e);return t.appendChild(this._createBrandingElement(e)),t.appendChild(this._createTitleElement(e)),t.appendChild(this._createDescriptionElement(e)),t}_createWrapperElement(e){var t=document.createElement("span");return this._applyElementInfo(t,e.wrapper),t}_createBrandingElement(e){var t=document.createElement("span");return t.setAttribute("slot","branding"),e.branding&&this._applyElementInfo(t,e.branding),t.appendChild(this._createBrandingInner(e)),t.appendChild(this._createSeparator(e)),t.appendChild(this._createLogoDiv(e)),t}_createBrandingInner(e){var t=document.createElement("span");return t.classList.add("branding-inner"),e.brandingInner&&this._applyElementInfo(t,e.brandingInner,["aria-","role"]),t}_createSeparator(e){var t=document.createElement("span");return t.classList.add("branding-separator"),e.separator&&(this._applyElementInfo(t,e.separator),t.textContent=e.separator.textContent||"  "),t}_createLogoDiv(e){var t=document.createElement("div");return t.classList.add("logoDiv"),e.logoDiv&&this._applyElementInfo(t,e.logoDiv),t.appendChild(this._createDisclosureLink("desktop")),t.appendChild(this._createDisclosureLink("mobile")),t}_createDisclosureLink(e){var t=document.createElement("a");t.href="#",t.rel="nofollow sponsored noopener",t.target="_blank",t.className="trc_".concat(e,"_disclosure_link trc_attribution_position_after_branding");var i=document.createElement("span");return i.textContent="Ad",t.appendChild(i),t}_createTitleElement(e){var t=document.createElement("span");return t.setAttribute("slot","title"),e.title&&this._applyElementInfo(t,e.title),t}_createDescriptionElement(e){var t=document.createElement("span");return t.setAttribute("slot","description"),e.description&&this._applyElementInfo(t,e.description),t}_applyElementInfo(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];t.classes&&t.classes.forEach((t=>e.classList.add(t))),t.attributes&&Object.entries(t.attributes).forEach((t=>{var[n,s]=t;i.some((e=>"string"==typeof e?n.startsWith(e):n===e))||e.setAttribute(n,s)})),t.styles&&Object.entries(t.styles).forEach((t=>{var[i,n]=t;e.style[i]=n}))}}var fi=null;var _i=s(568),bi=s(140),yi=s(391);class Ai extends Ke.A{constructor(e){super(e),this.model=e.model,this.globalModel=e.globalModel,this.elasticLogger=this.model.get("elasticLogger"),this.yahooUIMode=this.model.get("yahooUIMode"),this.log=new A.A({unitType:this.model.get("unitType"),className:constructor.name,version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this.container=_i(e.container),this.nativeAdMapping=this.globalModel.get("nativeAdMapping"),this.model.get("isPreviewAdSettings")&&(window.setPreviewAdSettings=e=>{var{title:t,description:i,branding:n}=e;this.model.set("adNativeSettings",{[this.nativeAdMapping.title]:t,[this.nativeAdMapping.description]:i,[this.nativeAdMapping.branding]:n}),this._updateAdData()}),this.bindEvents()}bindEvents(){this.createStateHandlers([{event:"adNativeSettings",funcName:"_updateAdData"}])}_mapScStructureToUI(e){var t={};return t.title=this._safeQuerySelector(e,'[slot="title"]'),t.description=this._safeQuerySelector(e,'[slot="description"]'),t.branding=this._safeQuerySelector(e,".branding-inner"),t.ctaButtone=this._safeQuerySelector(e,'[slot="title"]'),t.wrapper=_i(e),t.adChoice=this._safeQuerySelector(e,".logoDiv"),this._setClickAttribute(t.title,"adTitleClick"),this._setClickAttribute(t.ctaButtone,"adCtaButtonClick"),this._setClickAttribute(t.branding,"adBrandingClick"),t}_safeQuerySelector(e,t){if(!e)return this._logToElasticLogger("Parent element is null for selector: ".concat(t),Oe.C.WARN),_i();var i=e.querySelector(t);return i?_i(i):_i()}_setClickAttribute(e,t){e&&e[0]&&e[0].setAttribute("data-click-name",t)}_render(){var e=this._getClonedTemplate();if(e){this.el=e,this.$el=_i(this.el);var t=this._mapScStructureToUI(e);this.ui=t,this.container.append(this.el),this._addAdChoiceTitle(),this.model.set("isNasRendered",!0)}else this._logToElasticLogger("Failed to get cloned template",Oe.C.ERROR)}_getClonedTemplate(){try{return null===(e=fi)||void 0===e?void 0:e.getTemplateClone()}catch(e){return this._logToElasticLogger("Error getting cloned template: ".concat(e.message),Oe.C.ERROR),null}var e}_logToElasticLogger(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Oe.C.INFO,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.elasticLogger&&e&&this.elasticLogger.log({message:e,severity:t,extraData:i})}_getAdNativeSettings(){return this.model.get("adNativeSettings")}_updateAdData(){this.isMobile=this.model.get("isMobile"),this.adNativeSettings=this._getAdNativeSettings(),!this.model.get("isNasRendered")&&this._render(),this.isClickable=this.adNativeSettings.isClickable,this._clearAllNasFields(),this._updateContainerEl(this.ui.ctaButtone,this.adNativeSettings[this.nativeAdMapping.ctaButtone]),this._updateContainerEl(this.ui.title,this.adNativeSettings[this.nativeAdMapping.title]),this._updateContainerEl(this.ui.description,this.adNativeSettings[this.nativeAdMapping.description]),this._updateContainerEl(this.ui.branding,this.adNativeSettings[this.nativeAdMapping.branding])}_clearAllNasFields(){this.ui&&([this.ui.ctaButtone,this.ui.title,this.ui.description,this.ui.branding].forEach((e=>{e&&e.length>0&&(e.text(""),e.attr("data-text",""))})),this.log.info(" Cleared all NAS fields before updating with new ad data"))}generateFallbackSettings(e){var t,i={};if(this.model.get("getRandomNativeAdTitle")&&this.model.get("randomTitlesList")){var n=this.model.get("randomTitlesList");n&&n.length>0&&(i[this.nativeAdMapping.title]=bi.getRandomFromList(n),i.isClickable=!0)}var s=null==e||null===(t=e.vpaidData)||void 0===t?void 0:t.brand;return s&&"string"==typeof s&&(i[this.nativeAdMapping.branding]=s),i}_updateContainerEl(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";e&&0!==e.length&&(this._updateElementText(e,t),this._toggleElementVisibility(e,t),this._bindClickHandler(e),e===this.ui.branding&&this._updateDisclosureLinks())}_updateElementText(e,t){e&&0!==e.length&&(e.text(t),e.attr("data-text",t))}_toggleElementVisibility(e,t){e&&0!==e.length&&(t||e===this.ui.branding?(e.show(),e.css("display",""),this._handleStreamPlacement(e)):e===this.ui.ctaButtone&&e.hide())}_bindClickHandler(e){e&&0!==e.length&&(this.isClickable?(e[0].onclick=this._onClick.bind(this),e.css({cursor:"pointer"}),e.attr("role","link")):(e[0].onclick=null,e.css({cursor:"default"}),e.removeAttr("role")))}_updateDisclosureLinks(){if(this.adNativeSettings&&this.ui.adChoice&&0!==this.ui.adChoice.length){var e=this.ui.adChoice[0];if(e){var t=this.model.get("isMobile")?".trc_mobile_disclosure_link":".trc_desktop_disclosure_link",i=e.querySelector(t),n=this.adNativeSettings.url||this.adNativeSettings.clickUrl||"#";i&&(i.href=n)}}}_handleStreamPlacement(e){this.ui.branding}_onClick(e){var t,i=null==e||null===(t=e.target)||void 0===t?void 0:t.getAttribute("data-click-name");i&&(yi.trigger("change:nativeAdClick",e,i),this.model.set("nativeAdClick",i,{silent:!0}),this.model.trigger("change:nativeAdClick",i))}_addAdChoiceTitle(){this.model.get("components.adChoice.isActive")&&this.model.get("components.adChoice.title.isActive")&&(this.adChoice=new Pt({model:this.model,container:this.ui.adChoice,parent:this.el,type:y.l.AD_CHOICE_TYPE.TITLE}))}hide(){var e;null===(e=this.el)||void 0===e||e.classList.add("hide")}show(){var e;null===(e=this.el)||void 0===e||e.classList.remove("hide")}}const Si=Ai;var wi=s(140);const Ti=class extends ri{constructor(e){super(e),this.model=e.model,this.globalModel=e.globalModel,this.container=e.container,this.isYahooWidget=this.model.get("isYahooWidget"),this.log=new A.A({unitType:this.model.get("unitType"),className:this.constructor.name,version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this.init(),this._bindEvents()}init(){this.componentsConfig=this._getComponentConfiguration(),this._initComponents()}_bindEvents(){this.createStateHandlers([{event:"adState:playing",funcName:"initLoadingView",isListenOnce:!0},{event:"renderWasCalled:true",funcName:"initBrandingTitle",isListenOnce:!0},{event:"swappedAdHasEnded:true",funcName:"onSwappedAdHasEnded"}])}_getComponentConfiguration(){return{CloseButtonView:{module:kt,options:this.baseOptions,isActive:this.isCloseButtonViewActive(),isVisibleOnLoad:!0},AdChoiceView:{module:Pt,options:wi.extend({},this.baseOptions,{type:y.l.AD_CHOICE_TYPE.VIDEO_AD}),isActive:this.isAdChoiceActive(),isVisibleOnLoad:!0},VolumeButtonView:{module:Dt,options:this.baseOptions,isActive:this.model.get("components.volume.isActive"),isVisibleOnLoad:!0},NativeAdView:this._getNativeAdViewConfiguration()}}isCloseButtonViewActive(){var e=wi.parseBool(this.model.get("components.CloseButtonView.hasCloseButton")),t=wi.parseBool(this.model.get("closeButton.hasCloseButton"));return e||t}isAdChoiceActive(){return this.model.get("components.adChoice.isActive")&&this.model.get("components.adChoice.videoAd.isActive")}_getNativeAdViewConfiguration(){var e={model:this.model,globalModel:this.model,isActive:this.model.get("components.nativeAd.isActive"),isMultiFloatingNASElements:!0};return this.isYahooWidget?this._getMultiWidgetNativeAdViewConfiguration(e):this._getStandardNativeAdViewConfiguration(e)}_getStandardNativeAdViewConfiguration(e){return{module:ui,isActive:e.isActive,options:{model:e.model,globalModel:e.globalModel,container:"._cm-video",shouldHideBrandingText:!0,shouldFitToSize:!0,additionalCss:"_cm-native-ad-widget",isMultiFloatingNASElements:e.isMultiFloatingNASElements}}}_getMultiWidgetNativeAdViewConfiguration(e){return{module:Si,isActive:e.isActive,options:{model:e.model,globalModel:this.globalModel,container:this.container,shouldHideBrandingText:!1,shouldFitToSize:!0,additionalCss:"_cm-native-ad-widget",isMultiFloatingNASElements:e.isMultiFloatingNASElements}}}initLoadingView(){!this.model.get("isMultiAd")||this.model.get("preventSwapToSC")?this.loadingView=this.model.get("isYahooWidget")?new gi(this.baseOptions):new Yt(this.baseOptions):this.loadingView=new Ht(wi.extend({},this.baseOptions,{container:this.container.parentElement}))}initBrandingTitle(){var e;if(this.model.get("components.brandingTitle.isActive")){var t=wi.extend({},this.baseOptions,{isActive:!0,container:null===(e=this.model.get("containerViewPlaceHolder"))||void 0===e?void 0:e.parentElement});this.model.get("streamDrawerPlacement")||(this.brandingTitleView=new Xt(t))}}onSwappedAdHasEnded(){setTimeout((()=>this.loadingView.hide()),0),this.model.set("swappedAdHasEnded",!1,{silent:!0})}};var Pi=s(140),Ei=s(568),Ci=s(391);const xi=class extends yt{constructor(e){super(e,"MultiWidgetVideoView ".concat(e.model.get("placement")),e.globalModel),this._initializeCoreProperties(e),this._initializeUI(),this._terminateOnUrlChange(),this._finalizeInitialization(),e.ad&&this._setAd(e.ad)}_initializeCoreProperties(e){this.isWaitingContentViewTimeout=!1,this.globalModel=e.globalModel,this.isMobile=this.globalModel.get("isMobile"),this.container=e.container||"body",this.figureElm=e.figureElm,this.template=it,this.animationUtil=si(this.model)}_initializeUI(){this.$el.addClass(y.l.CSS_CLASSES.VIDEO),this.$el.addClass(y.l.CSS_CLASSES.MULTI_WIDGET),this.model.set("videoViewSize",{width:0,height:0})}_finalizeInitialization(){this.model.set("videoViewState",Me.A.videoViewState.rendered),Pi.trcPerformanceMeasurement(this.model.get("trcPerformanceMeasurementEnabled"),"videoInitToRender".concat(this.model.get("perfUnitType")),y.l.TRC_PERFORMANCE_ACTIONS.STOP)}_setAd(e,t){t?this._handleAdReplacement(e):(this._prepareAdProperties(e),this._initializeAd(e,t))}_handleAdReplacement(e){switch(this.model.get("replacementContext")){case y.l.REPLACEMENT_CONTEXTS.PRIORITY:this._handlePriorityReplacement(e);break;case y.l.REPLACEMENT_CONTEXTS.NATURAL:this._handleNaturalReplacement(e);break;default:this.log.warn("No replacement context set, defaulting to natural replacement"),this._handleNaturalReplacement(e)}this.model.unset("replacementContext")}_handlePriorityReplacement(e){this._holdCurrentAd(),this._prepareAdProperties(e),this._initializeAd(e,!0),this.model.set("hasHeldAd",!0)}_holdCurrentAd(){this.activeAd&&this.$el&&("playing"===this.activeAd.adState&&this.activeAd.pause(y.l.PAUSE_REASONS.PRIORITY_HOLD),this.heldAd={ad:this.activeAd,element:this.el,$element:this.$el,isRV:this.isCurrentAdRV,wasPlaying:"playing"===this.activeAd.adState,playbackPosition:this.activeAd.currentTime||0},this.$el.addClass(y.l.CSS_CLASSES.HELD_ASIDE))}_handleNaturalReplacement(e){this._prepareAdProperties(e),this._initializeAd(e,!0)}_prepareAdProperties(e){var t,i;this.model.get("predictors.postRepeat.isActive")&&null!==(t=e.adTypeConfig)&&void 0!==t&&null!==(t=t.singleAd)&&void 0!==t&&t.isPlacementSingleAd&&this.model.set("components.contentVideo.isActive",!1),this.el=null==e?void 0:e.vpaidWrapper.adTarget,this.isCurrentAdRV=null==e?void 0:e.adData.requiredViewability,this._moveAdToContainer(),this.model.get("isReplayAd")&&e.vpaidWrapper.isReplayable&&e.vpaidWrapper.dontDie&&(null==e||e.vpaidWrapper.dontDie()),this.model.get("volumeMuted")||"iOS"!==(null===(i=this.ua)||void 0===i?void 0:i.os.name)||this.model.set("volumeMuted",!0)}_moveAdToContainer(){this.el.firstChild.style.position="relative",this.container.firstChild?this.container.insertBefore(this.el,this.container.firstChild):this.container.appendChild(this.el)}_initializeAd(e,t){this.$el=Ei(this.el),this.activeAd=e,this._configureAdHandlers(e),this._configureAdPresentation(t)}_configureAdHandlers(e){this.activeAd.completeCb=this.onAdComplete.bind(this),this._setVastClickUrl(e.vpaidData),this._setCurrentModelParamsToAdModel()}_configureAdPresentation(e){this.$el.addClass("_cm-video ".concat(this.model.get("placement")," ").concat(this.isMobile&&Pi.isPortrait()?"mobile":"desktop")),this._switchToActiveAd("set ad"),this._setVolumeEvents(),this._setAdNativeSettings(e),this._setLoadingView(),this.resize(this.model.get("videoPlaceholderSize"),!0)}_setVastClickUrl(e){null!=e&&e.vastClickThruLink&&this.activeAd.model.set("vastClickThruLink",e.vastClickThruLink)}_setCurrentModelParamsToAdModel(){this.activeAd.model.set("videoViewContainer",this.$el),this.activeAd.model.set("placement",this.model.get("placement")),this.activeAd.model.set("parentSelector",this.model.get("parentSelector")),this.activeAd.model.set("isReplayAd",!0)}_setLoadingView(){this.componentManager.initLoadingView()}_setAdNativeSettings(e){this.componentManager||(this.componentManager=new Ti({model:this.model,globalModel:this.globalModel,container:this.container})),this._setNativeAdView(this.componentManager)}_setNativeAdView(e){var t,i,n=null===(t=e.components)||void 0===t?void 0:t.NativeAdView;if(this.nativeAdSettings=n,n){var s=null===(i=this.activeAd)||void 0===i||null===(i=i.vpaidData)||void 0===i?void 0:i.adNativeSettings,o=s;this._isAdNativeSettingsDataInvalid(s)&&(o=n.generateFallbackSettings(this.activeAd)),this.model.get("adNativeSettings")&&this.model.unset("adNativeSettings",{silent:!0}),this.model.set("adNativeSettings",o);var a=this._getNativeAdViewHeight();this.model.set("nasHeight",a||0)}}_isAdNativeSettingsDataInvalid(e){return!e||0===Object.keys(e).length||!e.title||""===e.title}_getNativeAdViewHeight(){return parseFloat(window.getComputedStyle(this.nativeAdSettings.el).height)||0}_bindEvents(){this.createStateHandlers([{event:"videoPlaceholderSize",funcName:"_onVideoPlaceholderSizeChange",withBind:!1},{event:"repeatState:clicked",funcName:"replayAd"},{event:"isEligibleToPlay",funcName:"checkEligible"},{event:"progressLoaderTimerReached:true",funcName:"hide",isListenOnce:!0},{event:"readMoreClicked:true",funcName:"playAd",isListenOnce:!0},{event:"newAdReady:true",funcName:"_onActiveAdChange"}]),this._setVolumeEvents(),this.model.listenTo(this.model,"displayingFullNAS",this._onDisplayingFullNAS.bind(this)),this.model.listenTo(this.model,"displayingNASTitleOnly",this._onDisplayingNASTitleOnly.bind(this)),this.currModel.on("change:isInTab",this.checkEligible.bind(this))}hideInternalItem(){var e,t=document.querySelector(this.model.get("parentSelector")),i=null==t||null===(e=t.parentNode)||void 0===e?void 0:e.querySelector("[data-item-id]");i&&(i.id="hidden-internal-item",i.classList.add("hide-internal-item",this.model.get("yahooUIMode")))}animateOpacity(){var e=this.model.get("animation.transitionAnimationTime");this.animationUtil.animateOpacity({$el:this.$el,timeMS:void 0===e?y.l.TIME_UNITS.SECOND:e,opacity:1,cb:null})}_switchToActiveAd(){this.$el.removeClass("_cm-ad"),this.$el.addClass("_cm-ad-active"),this.$el.addClass("stream-placement"),this.$el.css({width:"auto",height:"100%"}),this.model.set("isActiveAd",!0);var e=!!this.model.get("isYahooWidget");this.changeBackgroundColor(e)}changeBackgroundColor(e){if(e)this.$el.css("background-color","transparent"),this.globalModel.set("style.videoBackgroundColor","transparent");else{var t=this.model.get("style.videoBackgroundColor");t&&(this.$el.css("background-color",t),this.globalModel.set("style.videoBackgroundColor",t))}}playAd(){this.activeAd&&(this.repeatingAd&&this.model.set("repeatState",Me.A.repeatState.hiding),this.activeAd.play(),this._handleVolume(),this.viewabiltyService=this._viewabilitySerivcesFactory.getViewabilityService({model:this.globalModel,ad:this.activeAd,onViewabilityCallback:this._onViewability.bind(this)}),this.viewabiltyService.updateActiveAd(this.activeAd))}pauseAd(e){this.activeAd&&this.activeAd.pause(e)}replayAd(){this.model.get("isReplayAd")&&this.repeatingAd&&(this.activeAd=this.repeatingAd,this._showVideoElm(this._getVideoElm()),this.activeAd.vpaidWrapper.restartAd(),this._resizeRepeatingAd(),this.model.listenTo(this.model,"change:isEligibleToPlay",this.checkEligible.bind(this)),this.model.listenTo(this.model,"change:isInTab",this.checkEligible.bind(this)),this.componentManager.loadingView.hide(),this.playAd()),this.model.set("isAdClosedByTimer",!1)}isEligibleToPlay(){var e=this.globalModel.get("isInTab");return!("pause"===this.model.get("onOutOfView")&&!e||this.isEndCardActive())&&(!!e&&!!this.model.get("isEligibleToPlay"))}isEndCardActive(){return this.model.get("repeatState")===Me.A.repeatState.showing}checkEligible(){this.activeAd&&(this.model.get("isEligibleToPlay")||this.activeAd.adState!==Me.A.adState.playing?this.model.get("isEligibleToPlay")&&this.globalModel.get("isInTab")&&this.isEligibleToPlay()&&this.playAd():this.pauseAd(y.l.PAUSE_REASONS.LOST_ELIGIBILITY))}onAdComplete(){Ci.trigger("checkAvailableAds"),this.model.get("hasHeldAd")&&this.heldAd?this._resumeHeldAd():this._checkNextAd()}_resumeHeldAd(){var{ad:e,element:t,isRV:i,wasPlaying:n,playbackPosition:s}=this.heldAd;this.activeAd&&this.$el&&this.activeAd.vpaidWrapper.adTarget.remove(),this.activeAd=e,this.el=t,this.isCurrentAdRV=i,n&&s>0&&this.activeAd.seek(s),this.el.classList.remove(y.l.CSS_CLASSES.HELD_ASIDE),this._initializeAd(this.activeAd,!0),this._clearHeldAd(),this.checkEligible()}_clearHeldAd(){this.heldAd=null,this.model.set("hasHeldAd",!1)}_checkNextAd(){this.repeatingAd=null,this._canPlayNextAd()?this._playNextAvailableAd():this._canSetupReplay()&&this._setupReplayAd()}_canPlayNextAd(){var e;return!(null!==(e=this.activeAd.vpaidWrapper.tag)&&void 0!==e&&e.singleAd)&&this.globalModel.get("hasAvailableAds")}_playNextAvailableAd(){this.activeAd.vpaidWrapper.adTarget.remove(),this.activeAd=void 0;var e=this.model.get("placement");this.model.set("replacementContext",y.l.REPLACEMENT_CONTEXTS.NATURAL),Ci.trigger("replaceAdOnEligiblePlacement",this.model,e)}_canSetupReplay(){return this.model.get("isReplayAd")&&this.activeAd&&this.activeAd.vpaidWrapper.isReplayable}_setupReplayAd(){this.repeatingAd=this.activeAd,this._handleEndCard(),this._handleSingleAdCompletion()}_handleEndCard(){this.componentManager.loadingView||this.componentManager.initLoadingView(),this.componentManager.loadingView.show(),this.componentManager.loadingView.setStyle({position:"absolute",top:"0px"})}_handleSingleAdCompletion(){this.activeAd=this.repeatingAd,this.model.stopListening(this.model,"change:isEligibleToPlay"),this.model.stopListening(this.model,"change:isInTab")}resize(e,t,i){this.currentSize&&this.currentSize.width===e.width&&this.currentSize.height===e.height&&!t||0!==e.height&&0!==e.width&&(this.activeAd&&this.activeAd.vpaidWrapper?this.activeAd.resize(e):this.repeatingAd&&this.repeatingAd.vpaidWrapper&&this.repeatingAd.resize(e),this.currentSize=Ei.extend(!0,{},e),this.model.trigger("change:videoViewSize",e))}_resize(e,t){if(t&&((this.model.get("animation.onTransitionOpen")||this.model.get("openingEffect")===y.l.OPENNING_EFFECT.EXPAND_FROM_TOP)&&this.model.get("isExpanded")&&(this.$el.addClass("none-transition"),setTimeout(function(){this.$el.removeClass("none-transition")}.bind(this),1e3)),this._updateStyleVariable(t),this.isMobile&&Pi.isPortrait())){var i=Ei.extend(!0,{},t);this.model.get("streamDrawerPlacement")===y.l.STREAM_DRAWER_PLACEMENTS.DRAWER_PLACEMENT.NAME&&(i.height="auto"),this.$el.css(i),this.model.set("videoViewSize",t,{silent:!0}),this.model.trigger("change:videoViewSize",this.model,this.model.get("videoViewSize"))}}_updateStyleVariable(e){this.figureElm.parentElement.style.setProperty("--video-container-view-height","".concat(e.height+(this.isMobile&&Pi.isPortrait()?this.model.get("nasHeight"):0),"px")),this.el.firstChild.style.setProperty("--video-size-height","".concat(e.height,"px")),this.el.firstChild.style.setProperty("--video-size-width","".concat(e.width,"px"))}_resizeRepeatingAd(){setTimeout((()=>{var e=this.model.get("videoPlaceholderSize");this.activeAd.vpaidWrapper.resizeAd(this.activeAd.vpaidWrapper.resizeAd(null==e?void 0:e.width,null==e?void 0:e.height))}),0)}_getVideoElm(){var e;if(null!==(e=this.activeAd)&&void 0!==e&&null!==(e=e.vpaidWrapper)&&void 0!==e&&e.localTarget)return this.activeAd.vpaidWrapper.localTarget.querySelector("video")}_hideVideoElm(e){e&&(e.style.visibility="hidden")}_showVideoElm(e){e&&(e.style.visibility="initial")}_onVideoPlaceholderSizeChange(e,t){this._resize(e,this.model.get("videoPlaceholderSize"))}_onActiveAdChange(e,t,i){this.model.set("newAdReady",!t),this._setAd(i,!0),this.model.set("newAdSet",t),this.checkEligible()}_isActiveAdHasNativeAdSettings(){return this.activeAd&&this.activeAd.vpaidData&&this.activeAd.vpaidData.adNativeSettings}_terminateOnUrlChange(){if(this.model.get("shouldTerminateOnUrlChange")){var e=location.href;document.body.addEventListener("click",(()=>{requestAnimationFrame((()=>{e!==location.href&&(this.model.set("closeState",Me.A.closeState.terminate),e=location.href)}))}),!0)}}};var Oi=s(391),Ii=s(140);class Ri{constructor(e){var{model:t,globalModel:i,containerView:n,placement:s}=e;this.model=t,this.globalModel=i,this.containerView=n,this.placement=s,this.log=new A.A({unitType:"Service",className:"SubFeedEligibility",version:this.model.get("version"),isDebug:this.model.get("isDebug")})}_setIsViewable100(e){this.model.set("isViewable100",e),this.globalModel.set("isViewable100",e)}updateEligibility(e,t){this.model.set("isEligibleToPlay",e),this.globalModel.set("isEligibleToPlay",e),this.log.info("Eligible is: ".concat(e,", on ").concat(this.placement," due to ").concat(t))}observeElement(){var e,t=null===(e=this.containerView)||void 0===e?void 0:e.el;if(t){var i={rootMargin:"0px",threshold:[0,this.model.get("viewPercent")/100,this.model.get("100viewPercent")/100]},n=!1,s=new IntersectionObserver((e=>{e.forEach((e=>{var t=100*e.intersectionRatio,i=t>=this.model.get("viewPercent");this._setIsViewable100(t>=this.model.get("100viewPercent")),i&&!n?(n=!0,this.log.info("INTERSECTING: ".concat(this.model.get("placement"))),Oi.trigger("scrolledIntoView",this.model,this.model.get("placement"))):!i&&n&&(n=!1,this.log.info("NOT INTERSECTING: ".concat(this.model.get("placement"))),Oi.trigger("scrolledOutOfView",this.model,this.model.get("placement")))}))}),i);Ii.safeObserve(s,t)}}}class Ni{constructor(e){var{model:t,logger:i,onViewportUpdate:n}=e;this.model=t,this.log=i||new A.A({unitType:t.get("unitType"),className:"ProximityObserverService",version:t.get("version"),isDebug:t.get("isDebug")}),this.onViewportUpdate=n,this.observer=null,this.observedElement=null}init(e){e?(this.observer&&this.destroy(),this.observer=new IntersectionObserver((e=>{var t,i=e[0],n=i.boundingClientRect,s=window.innerHeight,o=i.intersectionRatio>0,a=n.top>s,r=n.bottom<0,l=this._calculateViewportDistance(n,s);null===(t=this.onViewportUpdate)||void 0===t||t.call(this,{isInViewport:o,isBelowViewport:a,isAboveViewport:r,distanceFromViewport:l,rect:n})}),{root:null,rootMargin:"0px",threshold:[0,.01]}),this.observer.observe(e),this.observedElement=e,this.log.info(" Started observing figure element",{figureId:e.id})):this.log.error("No figure element provided for observation")}_calculateViewportDistance(e,t){return e.bottom<0?-Math.abs(e.bottom):e.top>t?e.top-t:0}destroy(){this.observer&&(this.observer.disconnect(),this.observer=null,this.observedElement=null,this.log.info(" Observer cleaned up"))}getStatus(){var e;return{isInitialized:!!this.observer,isObserving:!!this.observedElement,elementId:null===(e=this.observedElement)||void 0===e?void 0:e.id}}}var Di=s(391);function Mi(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const Vi=class extends qe{constructor(e){var t;super(e),Mi(this,"canAssignAd",(()=>this.model.get("waitingForAd")&&!this.activeAd)),Mi(this,"updateEligibility",((e,t)=>this.eligibilityService.updateEligibility(e,t))),this.model=e.model,this.globalModel=e.globalModel,this.activeAd=e.ad,this.model.set("adState",Me.A.adState.pending),this.placement=this.model.get("placement"),this.yahooUIMode=e.yahooUIMode,this.manager=e.manager,this.isRV=null===(t=this.activeAd)||void 0===t?void 0:t.rv,this.isInViewPort=!1,TRC.listen("widgetTakeoverSizeChange",this.updateContainerSize.bind(this)),this._initProximityTracking(),this.activeAd?(this.log.info("Ad ready in ".concat(this.placement)),this._handleFirstInit()):this.model.set("waitingForAd",!0)}_initProximityTracking(){var e=document.querySelector(this.model.get("parentSelector"));this.proximityObserver=new Ni({model:this.model,logger:this.log,onViewportUpdate:this._handleViewportUpdate.bind(this)}),this.proximityObserver.init(e)}_handleViewportUpdate(e){var{isInViewport:t,isBelowViewport:i,isAboveViewport:n,distanceFromViewport:s}=e;this.model.set("viewportDistance",s),this.distanceFromViewport=s,this.isInViewPort=t,(t||i&&this._isClosestToViewport())&&(this.globalModel.set("placement",this.placement),this.globalModel.set("scrolledCloseToViewport",this.placement))}_isClosestToViewport(){var e=this.manager.subWidgetsList;if(!e)return!0;var t=Math.abs(this.model.get("viewportDistance")||1/0);for(var[i,n]of e.entries()){if(i!==this.placement)if(Math.abs(n.model.get("viewportDistance")||1/0)<t)return!1}return!0}assignAd(e,t){var i;this.activeAd=e,this.isRV=null===(i=this.activeAd)||void 0===i?void 0:i.rv,this.model.set("waitingForAd",!1),t?this.onAdReplaced():this._handleFirstInit(),this.log.info("Ad ready in ".concat(this.placement))}_handleFirstInit(){var e=this.model.get("parentSelector"),t=document.querySelector(e);t?(this._renderPlaceholder(t),this._triggerOpenOutOfView(),this.model.set("adClickThroughUrl",this.activeAd.vpaidWrapper.clickThruUrl)):this._observeForRender(e)}_observeForRender(e){new MutationObserver(((t,i)=>{var n=document.querySelector(e);n&&(i.disconnect(),this._renderPlaceholder(n),this._triggerOpenOutOfView())})).observe(document.body,{childList:!0,subtree:!0})}_hideCarouselIfNecessary(e){var t=e.querySelector("taboola-sc-carousel");t&&(t.style.visibility="hidden",this.log.info("Hiding carousel in container: ".concat(e.id)))}_renderPlaceholder(e){this.globalModel.set("parentSelector","#".concat(e.id)),Di.trigger("setupSCNAS"),this._hideCarouselIfNecessary(e.parentElement),this.containerView=new tt({model:this.model,globalModel:this.globalModel,yahooUIMode:this.yahooUIMode}),this.containerView.render(e),this.activeAd.setAdParametersToModel(),this.videoView=new xi({model:this.model,globalModel:this.globalModel,container:this.containerView.el,figureElm:e,componentManager:this.componentManager,ad:this.activeAd}),this.videoView.hideInternalItem(),this.eligibilityService=new Ri({model:this.model,globalModel:this.globalModel,containerView:this.containerView,placement:this.placement}),this.eligibilityService.observeElement(),this.model.set("isRendered",!0),this.log.info("Rendered video placeholder in container: ".concat(e.id))}_triggerOpenOutOfView(){this.globalModel.set("openOutOfView",this.model.get("videoPlaceholderSize"))}updateContainerSize(e){this.model.set("width",e.width),this.model.set("customization",e.customization)}onAdReplaced(){var e;null!==(e=this.activeAd)&&void 0!==e&&null!==(e=e.vpaidWrapper)&&void 0!==e&&e.adTarget&&this.model.set("newAdReady",!0,this.activeAd)}};var ki=s(140),Li=s(391);class Fi extends W.f{constructor(e){super(e.model),this.model=e.model,this.log=new A.A({unitType:this.model.get("unitType"),className:"PlayPriorityHandler",version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this.isRvPriority=this.model.get("isRvPriority")&&this._isAllowedInFT(),this.isHadFirstSetAd=!1,this.detachToSlider=this.model.get("detachToSlider"),this.isStickyCardActive=this.model.get("stickyCard.isActive"),this.isDetachActive=this.detachToSlider&&(this.detachToSlider.isStartFromSlider||this.detachToSlider.isDetachToSlider),this.isForceDetachOnGotAd=(this.isDetachActive||this.isStickyCardActive)&&this.model.get("detachToSlider.forceDetach.isActive"),this._bindEvents()}_isAllowedInFT(){return!!this.model.get("playPriority.isAllowInIframes")||this.model.get("frameType")===y.l.FRAME_TYPE.plainPage}_bindEvents(){}setNextAd(e){this.lastAd=e,this._isForceAdToDetach(e)?this._setReadyAd(e):this.isRvPriority&&!this.isHadFirstSetAd?this._handleRvPriority(e):this._setReadyAd(e)}_isForceAdToDetach(e){if(!this.isForceDetachOnGotAd||this.model.get("hadStickyDetach"))return!1;var t=this.model.get("detachToSlider.forceDetach.restrictions.rv"),i="any"===t||t===e.adData.requiredViewability;return this.log.info("force ad detach:",{isForced:i,activeAdRV:e.adData.requiredViewability}),i}_setReadyAd(e){e.onAdSetToUnits(),this.lastSetAdId=e.adId;var t=e.adData.requiredViewability,i=!e.adData.alwsldr;this.model.setNextAd(e),setTimeout(function(){this.model.set("isNextAdRV",t),this.model.set("isNextAdNotAllowSlider",i),this.model.set("hasReadyAd",!0)}.bind(this),0)}_handleRvPriority(e){var t=!1;if(e.adData.requiredViewability)t=!0;else{var i=this._isAtDecisionPoint();t=this._shouldSetReadyAd(i)}t&&(this._setReadyAd(e),e._bringToFront(),this.isHadFirstSetAd=!0)}_shouldSetReadyAd(e){if(!e)return!1;return this.model.get("playPriority.isAlwaysWaitForRv")?!this.model.get("playerHasRvInQ"):!this.model.get("playerHasRvInQ")||this.model.get("isSkippedDistancePredict")||this._isLoaderInRequiredPercentage()}_isAtDecisionPoint(){if(!this.model.get("playPriority.checkForRvPriority"))return!1;var e=this.model.get("playPriority.checkForRvPriority");return this[y.l.CHECK_FOR_RV_PRIORITY[e]].bind(this)()}_reCheckAd(e){this.isHadFirstSetAd||(this.hasListener=!1,this.setNextAd(this.lastAd))}hasReachedEligibility(){return!(!this.model.get("isEligibleToPlay")&&!this.model.get("hadEligibility"))||(this.hasListener?void 0:(this._waitForEligibility(),this.hasListener=!0,!1))}_waitForEligibility(){this.createStateHandlers([{event:"isEligibleToPlay:true",funcName:"_reCheckAd",isListenOnce:!0}])}hasReachedPixelsFromSelector(){if(void 0===this.model.get("playPriority.pixelsFromSelector"))return!1;var e=ki.hasPassedPixelFromSelector(this.model.get("parentSelector"),this.model.get("scrollSelector"),this.model.get("playPriority.pixelsFromSelector"),this.model.get("isNeedValidateParentSelector"));return e||this.hasListener||(this.hasListener=!0,Li.once("window:scroll:change",this._reCheckAd.bind(this))),e}intersectionPercent(){if(void 0===this.model.get("playPriority.intersectionPercent"))return!1}_activeSecondsToGetRVTime(){}_secondsAfterGetAdRv(){}beforeLoaderEnd(){return!!this._isLoaderInRequiredPercentage()||(this.createStateHandlers([{event:"loaderCurrCount",funcName:"_reCheckAd",isListenOnce:!0}]),!1)}_isLoaderInRequiredPercentage(){return this.model.get("loaderCurrCount")>=this.model.get("playPriority.loaderPercent")}}const Bi=Fi;var zi=s(654),Ui=s(140),Hi=s(391);function Wi(e,t,i,n,s,o,a){try{var r=e[o](a),l=r.value}catch(e){return void i(e)}r.done?t(l):Promise.resolve(l).then(n,s)}function ji(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function Gi(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ji(Object(i),!0).forEach((function(t){$i(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ji(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function $i(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class Yi extends W.f{constructor(e,t){super(e),this.model=e,this.eligibilityService=t,this.log=new A.A({unitType:this.model.get("unitType"),className:"adsManager",version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this.model.set("adState",Me.A.readyState),this.model.set("getAdState",Me.A.getAdState.notCalled),this.model.set("adManagerState",Me.A.adManagerState.empty,{silent:!0}),this._createAdsList(),this.model.set("nextPredict",NaN),this.adId=0,this.currentAdIndex=-1,this.model.set("activeTag",!1),this.model.set("activeAd",!1),this.model.set("impressionCount",0),this.playPriorityHandler=new Bi({model:this.model}),this._bindEvents(),Ui.sendingEventToTaboolaBridge("sessionStart",this.model.get("unitName")),this.model.get("isCancelGetAdOnEligibilityLost.isActive")&&(this.cancelGetAdOnEligibilityLostForRVAny=this.model.get("isCancelGetAdOnEligibilityLost.includeRVAny"),this._trackEligibilityLost())}_createAdsList(){for(var e in this.adsList={},y.l.RV_TYPES)this.adsList[y.l.RV_TYPES[e]]=[]}_bindEvents(){this.createStateHandlers([{event:"getAdState:failed",funcName:"_onFailedToGetAd"},{event:"hasReadyAd:false",funcName:"_updateNextAd"},{event:"cancelRV:true",funcName:"_cancelAllRVCalls"},{event:"adState:playing",funcName:"_onFirstAdPlay",isListenOnce:!0},{event:"exploreMore",funcName:"_onExploreMore"}])}adPredict(e,t){var i=this.model.get("adxDurationDebtPay");if(this._countReadyAdsByRV(!1,y.l.RV_TYPES.NON_RV)==this.model.get("maxNonRvVimpsInQueue")&&this.model.set("onMaxNonRvVimpsInQueue",!0),e===y.l.PREDICT_NAMES.immediateStartPredict&&this._countReadyAdsByRV(!1,y.l.RV_TYPES.RV)==this.model.get("maxVimpsInQueue")&&this.model.set("onMaxVimpsInQueue",!0),!(this._countReadyAdsByRV(!1,y.l.RV_TYPES.RV)>=this.model.get("maxVimpsInQueue")&&this._countReadyAdsByRV(!1,y.l.RV_TYPES.NON_RV)>=this.model.get("maxNonRvVimpsInQueue"))){var n=this.model.get("nextPredict");n!==y.l.RV_TYPES.RV||!this.model.get("isGettingRv1Ad")||this.model.get("immediateStartAdInPrediction")?i&&!this.model.get("isRV1InQueue")||(this.firstGetAdFired||(this.log.info("First Get Ad Fired"),this.model.set("firstGetAdFired",!0),this.firstGetAdFired=!0),this._checkIfAlreadyHas1InList(),Ui.isArray(n)?Ui.forEach(n,(i=>{(!this.alreadyHas1InList||this.alreadyHas1InList&&0===i||this.alreadyHas1InList&&this.hasRV1AdxInQueue)&&(this.createNewAd(i,e,t),this._checkIfAlreadyHas1InList())}),this):(!this.alreadyHas1InList||this.alreadyHas1InList&&0===n||this.alreadyHas1InList&&this.hasRV1AdxInQueue)&&this.createNewAd(n,e,t),"mp4Predict"===this.model.get("nextPredictName")?this.model.set("mp4Predict",!0):this.model.set("mp4Predict",!1)):this.log.warning("Already getting rv1 ad, ignoring")}}_isAdListContainsDuplicateKeys(e){return this.adsList[e].some((t=>(t.adQState===Me.A.adQState.readyState||t.adQState===Me.A.adQState.impression)&&t.getAdKey===e))}static _getPublisherDemandAdProperties(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?"adProperties":"excAdProperties";return Gi(Gi({},e),{},{[t]:Gi(Gi({},e[t]),{},{advType:[y.l.ADVERTISER_TYPE.PUBLISHER_DEMAND]})})}_setPriorityAdProperties(e){var t=this.model.get("adPriority");if(!t)return e;var i=this.model.get("playerReadyAds")||{},{PUBLISHER_DEMAND:n,TABOOLA_DEMAND:s}=y.l.AD_PRIORITY,o={[n]:{includePublisherAds:!0,check:i.publisher},[s]:{includePublisherAds:!1,check:i.taboola}},{check:a,includePublisherAds:r}=o[t];return a?Yi._getPublisherDemandAdProperties(e,r):e}createNewAd(e,t,i){var n,o=this;return(n=function*(){if((o.model.get("isAllowDuplicateKey")||!o._isAdListContainsDuplicateKeys(e))&&o.adsList[e]){var n=o.model.get("nextPredictName");o.model.set("adId",o.adId);var{AdService:a}=yield s.e(449).then(s.bind(s,251)),r=new a({model:o.model,ppKey:e,adId:o.adId,impressionCb:o.onAdImpression.bind(o),completeCb:o.onAdComplete.bind(o),predictName:n,getAdProperties:o._setPriorityAdProperties(i),predictId:t});o.adsList[e].push(r),o.adId++}},function(){var e=this,t=arguments;return new Promise((function(i,s){var o=n.apply(e,t);function a(e){Wi(o,i,s,a,r,"next",e)}function r(e){Wi(o,i,s,a,r,"throw",e)}a(void 0)}))})()}_checkIfAlreadyHas1InList(){this.alreadyHas1InList=!1,this.hasRV1AdxInQueue=!1,Ui.forEach(this.adsList[y.l.RV_TYPES.RV],(e=>{if("multiAdPredict"!==this.model.get("nextPredictName"))return this.alreadyHas1InList=!0,this.hasRV1AdxInQueue=e.predictId===y.l.PREDICT_NAMES.adxPredict,!1}),this)}onAdImpression(e){e.setActiveTag(),this._updateNextAd(),this.model.set("adManagerState",Me.A.adManagerState.hasAds),this.model.get("hadReady")||this.model.get("isEligibilityNomination")||this.model.get("isRvPriority")||(this.eligibilityService?(this.eligibilityService._calculateEligibility(),this.model.get("isEligibleToPlay")?this._triggerReady():this.createStateHandlers([{event:"isEligibleToPlay:true",funcName:"_triggerReady",isListenOnce:!0}])):this._triggerReady(),this.model.set("hadReady",!0));var t=e.getAdData();if(this._isRV1withRV0InStack=function(){return t.requiredViewability&&this.adsList[y.l.RV_TYPES.NON_RV].length>0},"any"===e.getAdKey&&this._moveAdFromAnyQueue(e,t.requiredViewability),e.rv=t.requiredViewability,e.itemType=t.itemType,this.model.increaseCounter(t.requiredViewability?"adsList.rvAds":"adsList.nonRvAds"),!this.model.get("isEligibleToPlay")&&this.model.get("lostEligibilityTime")&&e.fireSkipVimp1EligibilityLost(t.requiredViewability),t.requiredViewability&&!this._isSwapEnabled()){var i=this.getPlayingAdRVType();void 0!==i&&e.fireSkipVimp1AdIsPlaying(i)}this._isRV1withRV0InStack()&&e.onAdPlayingRV1StackWithRV0()}_isSwapEnabled(){return this.model.get("isForceSwapToRV")}_triggerReady(){Hi.trigger("ready")}_moveAdFromAnyQueue(e,t){Ui.each(this.adsList[y.l.RV_TYPES.ANY],((t,i)=>{t.adId===e.adId&&this.adsList[y.l.RV_TYPES.ANY].splice(i,1)})),this.adsList[t?y.l.RV_TYPES.RV:y.l.RV_TYPES.NON_RV].push(e)}getPlayingAdRVType(){return this.adsList[y.l.RV_TYPES.NON_RV].some((e=>e.adState===Me.A.adState.playing))?y.l.RV_TYPES.NON_RV:this.adsList[y.l.RV_TYPES.RV].some((e=>e.adState===Me.A.adState.playing))?y.l.RV_TYPES.RV:void 0}onAdComplete(e,t){if(this._removeAd(e.adId,e.adData&&void 0!==e.adData.requiredViewability?e.adData.requiredViewability:e.getAdKey,!1),this.model.get("hasReadyAd")){var i=this.model.getStorage("nextAd");(null==i?void 0:i.adId)===e.adId&&this.model.set("hasReadyAd",!1)}t&&!this.model.get("hasReadyAd")&&(this.model.set("lastAutoKilledPredict",e.getAdKey),this.model.set("adState",e.adState))}close(){this.model.set("adManagerState",Me.A.adManagerState.stopped),this.model.set("closeState",Me.A.closeState.adManagerStop)}pauseGetAds(){for(var e in this.model.set("adManagerState",Me.A.adManagerState.paused),this.adsList)this.adsList[e]=[];this.model.set("hasReadyAd",!1)}_cancelAllRVCalls(){Ui.forEach(this.adsList[y.l.RV_TYPES.RV],function(e){e.cancelGetAd(),this._removeAd(e.adId,y.l.RV_TYPES.RV,!0)}.bind(this)),this.model.set("cancelRV",!1)}_removeAdsByKeyAndStatus(e,t){Ui.forEach(this.adsList[e],function(i){t.indexOf(i.getAdState)>-1&&(i.cancelGetAd(),this._removeAd(i.adId,e,!0))}.bind(this))}_onFailedToGetAd(){var e,t=this.model.get("getAdCurrId");for(var i in this.adsList)e||(e=Ui.find(this.adsList[i],(function(e){return e.adId===t}),this));this.model.set("lastFailedPredictProperties",e.getAdProperties),this.model.set("lastFailedPredict",e.getAdKey),this._removeAd(t,e.adData&&void 0!==e.adData.requiredViewability?e.adData.requiredViewability:e.getAdKey,!0)}_removeAd(e,t,i){var n=this,s=t?y.l.RV_TYPES.RV:y.l.RV_TYPES.NON_RV;Ui.size(this.adsList[s])>0&&(this.adsList[s]=this.adsList[s].filter((function(t){return t.adId===e&&n.model.decreaseCounter(t.rv?"adsList.rvAds":"adsList.nonRvAds"),t.adId!==e}))),0===this.countReadyAds(i)&&this.model.set("adManagerState",Me.A.adManagerState.empty)}_filterAds(){var e=[];for(var t in this.adsList)e=e.concat(this.adsList[t].filter((e=>e.adQState===Me.A.adQState.impression&&!e.isUsed&&(this.getPlayingAdRVType()===y.l.RV_TYPES.NON_RV||this._isAllowAd(e)))));return e}_updateNextAd(){var e=this,t=this._filterAds(),i=this._chooseBestAd(t),n=t[i];n&&(this.playPriorityHandler.setNextAd(n),n.getAdKey&&n.getAdKey===y.l.RV_TYPES.RV&&this._countReadyAdsByRV(!0,y.l.RV_TYPES.RV)>1&&n.oppsService.onAdPlayingNextAdReadyRV1());var s=n;if(this.model.get("hasReadyAd")){var o=this.model.get("playPriority.type"),a=function(t){Ui.each(e.adsList[t],function(e,n){i===n&&t==s.getAdKey||e.adQState===Me.A.adQState.impression&&s&&s.getAdData&&("rpox"===o?e.reportRpoxSkip(s.getAdData()):"ppKey"===o&&e.reportPpKeySkip(s.getAdData()))}.bind(e))};for(var r in this.adsList)a(r)}}_chooseBestAd(e){var t=0;if(1===Ui.size(e))return t;var i=this.model.get("playPriority.type")||"rpox";if("ppKey"===i)Ui.find(e,((e,i)=>{e.getAdKey===this.model.get("playPriority.key")&&(t=i)}));else if("function"===i){var n=this.model.get("playPriority.func");t=n(e)}else"rpox"===i&&(t=this.priorityByRpox(e));return t}priorityByRpox(e){var t=0,i=0;return Ui.each(e,((e,n)=>{e.rpox>=i&&(i=e.rpox,t=n)})),t}_hasPlayingAd(){return!!this.model.get("activeTag")}countReadyAds(e){var t=0;for(var i in this.adsList)t+=this._countReadyAdsByRV(e,i);return t}_countReadyAdsByRV(e,t){var i=0;return Ui.forEach(this.adsList[t],(function(t){(e&&t.adQState!==Me.A.adQState.readyState||t.adQState===Me.A.adQState.impression)&&i++}),this),i}_onFirstAdPlay(){this.model.set("hadPlayedAd",!0)}_isAllowAd(e){return this._isAllowSingleAd(e)}_isAllowSingleAd(e){if(this.model.get("postRepeatMode"))return!0;var t=e.adTypeConfig&&e.adTypeConfig.singleAd&&e.adTypeConfig.singleAd.isPlacementSingleAd;return!(t&&this.model.get("hadPlayedAd")||this.model.get("isPreventNextAd"))&&(!t||!this._isAdTypeDropped(zi.K.singleAd.name))}_isAdTypeDropped(e){var t=this.model.get("droppedAdTypes");return!!Ui.isArray(t)&&0!==(t=t.filter((t=>e===t))).length}_getLastActiveAd(){for(var e in this.adsList){var t=this.adsList[e].filter((e=>e.adId===this.model.get("lastActiveAd")));if(t&&t[0])return t}return[]}_onExploreMore(){this.model.get("exploreMoreConfig.clearAdsQ")&&this._removeAdsByKeyAndStatus(y.l.RV_TYPES.NON_RV,["gotAd","waiting","failed","stopped","finished"]);var e=this.model.get("exploreMoreConfig.maxNonRvVimpsInQueue");e&&this.model.set("maxNonRvVimpsInQueue",e)}_trackEligibilityLost(){this.createStateHandlers([{event:"isEligibleToPlay:false",funcName:"_cancelGetAdOnLostEligibility"}])}_cancelGetAdOnLostEligibility(){this._cancelGetAdOnLostEligibilityByRVType(y.l.RV_TYPES.RV),this.cancelGetAdOnEligibilityLostForRVAny&&this._cancelGetAdOnLostEligibilityByRVType(y.l.RV_TYPES.ANY)}_cancelGetAdOnLostEligibilityByRVType(e){this.adsList[e].map((e=>{e.getAdState===Me.A.getAdState.gettingAd&&(e.cancelGetAd(y.l.CANCEL_GET_AD_REASONS.LOST_ELIGIBILITY),this.model.fireCancelGetAdOnEligibilityLost())}))}}const qi=Yi;var Ki=s(391),Qi=s(568),Zi=s(140);class Xi extends W.f{constructor(e){super(e),this.model=e,this.log=new A.A({unitType:this.model.get("unitType"),className:"pixelsService",version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this.hadEligibility=!1,this.hadImpression=!1,this.playerHadRvInQ=!1,this.shouldFirePauseAfterPlay=!1,this.adsList={},this._bindEvents(),this.model.set("hadEligibility",!1)}_bindEvents(){this.createStateHandlers([{event:"adQState:impression",funcName:"_onAdImpression"},{event:"adState:playing",funcName:"_onAdPlaying"},{event:"adState:completed",funcName:"_onAdCompleted"},{event:"loadingViewState:clicked",funcName:"_onRepeatClicked"},{event:"isEligibleToPlay",funcName:"_onEligibilityChange"},{event:"closeTimer",funcName:"_fireTimerPixel"},{event:"isTerminateOnResize:true",funcName:"_onTerminateOnResize"},{event:"readMoreClicked:true",funcName:"_onReadMoreClick",isListenOnce:!0},{event:"TRCDispatchFailed:true",funcName:"_onTRCDispatchFailed",isListenOnce:!0},{event:"organicVideoPlaying",funcName:"_reportOrganicVideoId"},{event:"onMaxNonRvVimpsInQueue",funcName:"_reportOnMaxNonRvVimpsInQueue",isListenOnce:!0},{event:"terminateOnNoAds",funcName:"_onTerminateOnNoAds",isListenOnce:!0},{event:"onMaxVimpsInQueue",funcName:"_reportOnMaxVimpsInQueue",isListenOnce:!1}]),Ki.once("global:passback",this._onPassbackFunctionCalled.bind(this))}_onAdImpression(){this._firePixel(this.model.getPixel("pixels.addImpresion"),"addImpresion (the player got an ad)")}_onAdPlaying(){var e=this.model.get("activeAdData");!e||!e.adId||this.adsList[e.adId]&&this.adsList[e.adId].hadPlay||(this.adsList[e.adId]=e,this.adsList[e.adId].hadPlay=!0,this._firePixel(this.model.getPixel("pixels.conversion"),"conversion (the ad is playing)"))}_onAdCompleted(){this.isViewed=!1,this.activeTag=void 0}_onEligibilityChange(e,t,i){this.stopSendingEligibility||(t&&!this.hadEligibility?this._onEligibility():!t&&this.hadEligibility&&i&&!i.isValidation&&(this._firePixel(this.model.getPixel("pixels.lostEligibility"),"Lost first eligible"),this.model.set("lostEligibilityTime",(new Date).getTime()),this.stopSendingEligibility=!0))}_onEligibility(){this.model.set("hadEligibility",!0),this.hadEligibility=!0,this._firePixel(this.model.getPixel("pixels.eligible"),"First eligible")}_onRepeatClicked(){this._firePixel(this.model.getPixel("pixels.repeatClick"),"repeat click Pixel")}_firePixel(e,t,i){if(e&&this.model.get("isFirePixel")){e=this._setAdditionalData(e,i),this.log.pixel("firing pixel: ".concat(t," url: ").concat(e));var n=document.createElement("IMG");return n.src=e,n}}_setAdditionalData(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.model.get("modifiedPlacement")&&(t.mp=this.model.get("modifiedPlacement")),this.model.get("subUnitType")&&(t.su=this.model.get("subUnitType")),this._addParametersToUrl(e,t,-1===e.indexOf("?"))}_addParametersToUrl(e,t,i){var n=e;return n+=i?"?":"&",Qi.each(t,(function(e,t){void 0!==t&&""!==t&&(n+="".concat(e,"=").concat(t,"&"))})),n}_fireTimerPixel(e,t){this.model.get("pixels.".concat(t,"Timer.isFire"))&&this._firePixel(this.model.getPixel("pixels.".concat(t,"Timer")),"".concat(t," timer"))}_onTerminateOnResize(){this._firePixel(this.model.getPixel("pixels.terminateOnResize"),"closeDueResize")}_onPassbackFunctionCalled(){(Zi.isFunction(this.model.get("onPassback"))||this.model.get("isApiPassbackExist"))&&this._firePixel(this.model.getPixel("pixels.passbackFunctionCalled"),"passback function called")}_onTRCDispatchFailed(){this._firePixel(this.model.getPixel("pixels.TRCDispatchFailed"),"TRCDispatchFailed")}_reportOrganicVideoId(){this._firePixel(this.model.getPixel("pixels.organicVideoPlaying"),"Playing Organic video")}_reportOnMaxNonRvVimpsInQueue(){this._firePixel(this.model.getPixel("pixels.onMaxNonRvVimpsInQueue"),"onMaxNonRvVimpsInQueue")}_reportOnMaxVimpsInQueue(){this._firePixel(this.model.getPixel("pixels.onMaxVimpsInQueue"),"onMaxVimpsInQueue")}_onTerminateOnNoAds(){this._firePixel(this.model.getPixel("pixels.terminateOnNoAds"),"terminateOnNoAds")}}const Ji=Xi;var en=s(140);class tn{constructor(e){this.adsList=[],this.listeners=[],this.registerIndex=0,this.model=e}updateAdsList(e){e&&!en.isEmpty(e)?(this.adsList=e.items,this._notifyListeners(e)):(this.model.set("generalErrorData",1),this.model.increaseCounter("generalError"))}_isPlayerHasReadyAds(e){var{readyDemands:t=0,readyPublisherDemands:i=0}=e,n={taboola:t-i,publisher:i};this.model.set("playerReadyAds",n)}_notifyListeners(e){this._isPlayerHasVideoInQ(e),this.isPlayerHasRvInQ(e),this.isPlayerHasAdxInQ(e),this._isPlayerHasReadyAds(e);var t=[];this.listeners.forEach((e=>{var i=this._findAdsByStatusAndType(e.type,e.typeValue,e.status,e.cb);e.isListenOnce&&i&&t.push(e.index)})),t.forEach((e=>this.unregisterToPlayerQueueStatusChange(e)))}_findAdsByStatusAndType(e,t,i,n){var s=!1,o=[];return this.adsList.forEach((n=>{(!e||this[e]&&this[e](n,t))&&(!i||y.l.AD_STATUS[i]&&n.vw&&n.vw.st===y.l.AD_STATUS[i])&&(o.push(n),s=!0)})),s&&en.isFunction(n)&&n(o),s}singleAd(e,t){return!!(t&&e.sa||!t&&!e.sa)}hip(e,t){return!!(t&&e.hip||!t&&!e.hip)}registerIsPlayerHasRvInQ(e){this.isPlayerHasRvInQCb=e}registerIsPlayerHasAdxInQ(e){this.isPlayerHasAdxInQCb=e}registerIsPlayerHasVideoInQ(e){this.isPlayerHasVideoInQCb=e}isPlayerHasRvInQ(e){this.isPlayerHasRvInQCb&&e.requiredViewabilityCount&&this.isPlayerHasRvInQCb()}isPlayerHasAdxInQ(e){this.isPlayerHasAdxInQCb&&this.isPlayerHasAdxInQCb(e.adxCount>0)}_isPlayerHasVideoInQ(e){if(this.isPlayerHasVideoInQCb){var t=e.items.some((e=>e.mt===y.l.MEDIA_TYPE_ID_TO_NAME[y.l.MEDIA_TYPE.MP4]));this.isPlayerHasVideoInQCb(t)}}registerToPlayerQueueStatusChange(e){var{type:t,typeValue:i,status:n=y.l.AD_STATUS.new,cb:s,isListenOnce:o=!1}=e,a={type:t,typeValue:i,status:n,cb:s,isListenOnce:o,index:this.registerIndex};return this.registerIndex=this.registerIndex+1,this.listeners.push(a),a.index}unregisterToPlayerQueueStatusChange(e){this.listeners=this.listeners.filter((t=>t.index!==e))}}var nn=function(){var e;return function(t){return e||(e=new tn(t)),e}}();const sn=nn;var on=s(140),an=s(391),rn=s(568);class ln extends W.f{constructor(e){var t;super(e),this.model=e,this.log=new A.A({unitType:this.model.get("unitType"),className:"playerService",version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this.oppsula=null===(t=j.A.oppsula)||void 0===t?void 0:t.oppsula,this.isRestarted=!1}_init(){this._bindEvents(),this.model.get("isPlayerLoaded")&&this._onPlayerLoaded()}_bindEvents(){this.createStateHandlers([{event:"isPlayerLoaded",funcName:"_onPlayerLoaded"},{event:"getAdState:stopped",funcName:"_pausePlayer"},{event:"isInTab",funcName:"_onTabEvent"},{event:"startWF",funcName:"startWf"},{event:"canStartPlayer:true",funcName:"_onPlayerLoaded"},{event:"isReadMoreInViewport",funcName:"_onReadMoreInViewport"},{event:"publisherVideoDetected",funcName:"_onPublisherVideoDetectChange"}]),this.model.get("pixelsBeforeEligibility")&&(this.shouldFireWfOnFirstInView=this.model.get("startWfOnOutOfViewPortChange"),this.isOutOfView=this.model.get("isOutOfView"),this.model.on("isOutOfViewPort",this._onIsOutOfViewChanged.bind(this)))}_onPlayerLoaded(){if(this.model.get("isPlayerLoaded")&&this.model.get("canStartPlayer")&&!this.player&&this._validatePlayerSize()){if(this.isMuted="on"!==this.model.get("volume"),this.volume="off"!==this.model.get("volume")?40:0,this.contentIndex=0,this.playlist=this.model.get("player.playlist"),this.playlist&&on.isEmpty(this.playlist))return void this.model.listenToOnce(this.model,"change:player.playlist",this._onPlayerLoaded.bind(this));on.trcPerformanceMeasurement(this.model.get("trcPerformanceMeasurementEnabled"),"videoPlayerInit",y.l.TRC_PERFORMANCE_ACTIONS.START);var e=this.playlist[this.contentIndex];this.model.set("isInIdleMode",!this.model.get("isInTab")&&this.model.get("isCallIDLE"));var t=this._getAdTypesToDrop();this.data={abTest:this.model.get("abTest"),ad_controls:this.model.get("player.hasAdControls"),aspect_ratio:this.model.get("aspectRatio"),auc_dast:this.model.get("cmDast"),autostart:this.model.get("autoPlay"),base_url:this.model.get("urls.base"),bug_feature:this.model.get("player.hasBFeature"),cipid:this.model.get("cipid"),cirf:decodeURIComponent(this.model.get("referrer")),creativeId:this.model.get("creativeId"),country:this.model.get("country"),debug:this.model.get("isDebug")?["*"]:[],default_ad_parameters:this.model.get("defaultAdParameters"),default_ad_timeout:this.model.get("adMaxPlaySeconds"),ga_factor:this.model.get("gaFactor"),ga_frame_src:this.model.get("gaFrameSrc"),image:this.model.get("loaderImage"),ip:this.model.get("ip"),keywords:this.model.get("adTitle"),oid:this.model.get("originId"),opps_base_path:this.model.get("player.urls.oppsBasePath"),non_bllb_opps_base_path:this.model.get("player.urls.nonBllbOppsBasePath"),page_url:decodeURIComponent(this.model.get("referrer")),referrer:decodeURIComponent(this.model.get("referrer")),repeat:this.model.get("repeat"),ron_percent:this.model.get("ronPercent"),schedule_auto:this.model.get("timeBetweenAds"),tags:this.model.get("tags"),time_between_waterfall:this.model.get("secondsBW"),version:this.model.get("adTitle"),vertical:this.model.get("vertical"),wf_base_path:this.model.get("player.urls.wfBasePath"),domain_wf_base_path:this.model.get("player.urls.domainWfBasePath"),opps_url:this.model.get("player.urls.oppsRequest"),height:""+parseInt(this.model.get("height")),width:""+parseInt(this.model.get("width")),dplayerSettings:this.model.get("player.settings"),loadrsrc:!0,preset:this.model.get("preset"),isDFP:this.model.get("iframeData.inDFP"),can_opt_out:!1,description:e.title,domain:window.location.hostname,mute:this.isMuted,title:e.title,volume:this.volume,isIdleMode:this.model.get("isInIdleMode"),dlywf:this.model.get("dlywf"),target_id:this.getTarget(),schedule:this.model.getScheduleArr(),dtagid:this.model.get("dtagid"),dpubid:this.model.get("dpubid"),isMobile:this.model.get("isMobile"),queue_size:this.model.get("player.settings.queueSize"),max_ready_vpaid:this.model.get("player.settings.maxReadyVpaid"),adto:this.model.get("player.settings.adto"),vakll:this.model.get("player.settings.vakll"),mintimwf:this.model.get("player.settings.mintimwf"),agressiveLevel:this.model.get("preset.level"),suppressContentZindex:this._getSuppressContentZindex(),vimpFireEvent:this.model.get("vimpFireEvent"),subUnitType:this.model.get("subUnitType"),vForce:this.model.get("vForce.isActive"),get_ad_timeout_seconds:this.model.get("vForce.getAdTimeoutSeconds"),wf_manual:this.model.get("wfManual"),wf_dynmc_ps:this.model.get("wfDynamicPause"),run_wf_when_empty:this.model.get("runWfWhenEmpty"),rndmt:this.model.get("rndmt"),unit_name:this.model.get("unitName"),unit_loader_version:this.model.get("version"),unit_main_version:this.model.get("unitVersion"),mprdct:this.model.get("player.settings.mprdct"),gdprApplies:this.model.get("gdprApplies"),cdb:this.model.get("consentDaisyBit"),oppsQS:this.model.get("oppsQS"),adTypesToDrop:t,red_id:this.model.get("redId"),files:[e],pixelsUrl:this.model.get("pixels.url"),numOfWfUntilDcSwitch:this.model.get("numOfWfUntilDcSwitch"),isReadMoreOnPage:on.isMidArticleOnReadMorePage(this.model.get("isHip")),isSliderCutOff:this.model.get("isSliderCutOff"),enableStickyOnNonAllowSlider:this.model.get("enableStickyOnNonAllowSlider"),isNextUp:this.model.get("nextUp.isActive"),onPlayerClose:this._onPlayerClose.bind(this),onPlayerError:this._onPlayerError.bind(this),onPlayerReady:this._onPlayerReady.bind(this),onPlayerStop:this._onPlayerStop.bind(this),wurfl:{os:{name:this.model.get("wurfl.os.name"),version:this.model.get("wurfl.os.version")},browser:{name:this.model.get("wurfl.browser.name"),version:this.model.get("wurfl.browser.version")}},shouldSendDataToElastic:this.model.get("shouldSendDataToElastic"),elasticSessionId:this.model.get("elasticSessionId"),oppsula:this.oppsula,shouldLoadAdxScript:this.model.get("withAdx"),isImmediateStartPredictorEnabled:this.model.get("predictors.immediateStart.isActive"),shouldPlayInATFWithoutSC:this.model.get("shouldPlayInATFWithoutSC"),shouldPlayInATFWithSC:this.model.get("shouldPlayInATFWithSC"),isOutOfViewPort:this.model.get("isOutOfViewPort"),distancePixelPredictData:this.model.get("distancePixelPredictData"),placement:this.model.get("placement"),taboolaNetworkId:this.model.get("taboolaNetworkId")},on.extend(this.data,this.extraData||{}),on.trcPerformanceMeasurement(this.model.get("trcPerformanceMeasurementEnabled"),"videoOvaMediaPlayerInit",y.l.TRC_PERFORMANCE_ACTIONS.START),this.player=new OvaMediaPlayer(this.data),on.trcPerformanceMeasurement(this.model.get("trcPerformanceMeasurementEnabled"),"videoOvaMediaPlayerInit",y.l.TRC_PERFORMANCE_ACTIONS.STOP),j.A.player=this.player,this.player.on("AdClickThru",this._onAdClickThru.bind(this)),on.trcPerformanceMeasurement(this.model.get("trcPerformanceMeasurementEnabled"),"videoPlayerInit",y.l.TRC_PERFORMANCE_ACTIONS.STOP),this._registerListeners(),this._onPublisherVideoDetectChange(this.model,this.model.get("publisherVideoDetected"))}}_registerListeners(){this.player.on&&(this.player.on("AdImpression",this._onAdImpression.bind(this)),this.player.on("FirstAdImpression",this._onFirstAdImpression.bind(this)))}_onIsOutOfViewChanged(){if(this.player){var e=this.model.get("forceOutOfView")||this.model.get("isOutOfView");this.player.set("isOutOfViewPort",e),this.player.set("distancePixelPredictData",this.model.get("distancePixelPredictData")),this.shouldFireWfOnFirstInView&&!e&&this.isOutOfView&&(this.shouldFireWfOnFirstInView=!1,this.startWf(!0)),this.isOutOfView=e}}_onAdImpression(){this.hadImpression||(an.trigger("filledImpression"),this.hadImpression=!0)}_onFirstAdImpression(){var e,t,i=this.model.get("placement");null===(e=TRC)||void 0===e||null===(t=e.dispatch)||void 0===t||t.call(e,"onVideoFill".concat(i?"_".concat(i.replace(" - Video","")):"")),this.model.set("isFirstAdImpression",!0),an.trigger("global:creativeEvent",{type:"conversion"})}_validatePlayerSize(){var e=this.model.get("width"),t=this.model.get("height"),i=!0;return on.isWidthValid(e)?on.isHeightValid(t)||(this.model.set("height",on.getVideoHeight(e)),this.model.set("playerHeightLost",!0)):(i=!1,this.model.set("playerWidthLost",!0)),i}_getSuppressContentZindex(){return this.model.get("suppressContentZindex")&&this.model.get("vForce.isActiv")||!1}_onAdClickThru(){this.model.set("clickThruState",Me.A.clickThruState.clicked)}_onPlayerReady(){this.playerQueueSeeker=new sn(this.model),this.playerQueueSeeker.registerIsPlayerHasRvInQ(this.isPlayerHasRvInQ.bind(this)),this.playerQueueSeeker.registerIsPlayerHasAdxInQ(this.isPlayerHasAdxInQ.bind(this)),this.playerQueueSeeker.registerToPlayerQueueStatusChange({instance:this,type:void 0,typeValue:void 0,status:"adLoaded",cb:this.isFirstAdLoaded.bind(this),isListenOnce:!0}),this._onTabEvent(this.model,this.model.get("isInTab")),this.model.set("playerVersion",this.player.get("player_version")),this.model.set("playerRepeatCount",this.player.repeatCount),this.model.set("playerState",Me.A.readyState),this.player.on("AdVolumeChange",this._onVolumeChange.bind(this)),this.player.on("AdPaused",this._onAdPaused.bind(this)),this.player.on("AdPlaying",this._onAdPlaying.bind(this)),this.player.on("UserInteractionPauseState",this._onPausedChanged.bind(this)),this.player.on("queueStatus",this.playerQueueSeeker.updateAdsList.bind(this.playerQueueSeeker)),this.player.on("queueStatus",this._onQueueStatusChange.bind(this)),this.player.on("adxAdStop",this._onAdxAdStop.bind(this)),this.player.on("delayedItem",this._onItemDelayed.bind(this)),this.isRestarted?(this.model.set("playerState",Me.A.playerState.restarted),this.model.get("player.settings.dlywf")&&this.startWf()):this.model.set("playerState",Me.A.readyState)}_onAdxAdStop(e){this.model.set("playerQueue",e.items),this.model.trigger("loadNewAdxAd")}_onItemDelayed(){this.model.trigger("newDelayedItem")}_onQueueStatusChange(e){this.model.set("playerQueue",e.items)}_onPausedChanged(e){this.model.set("generalPlayingUnitState",!e)}_onAdPaused(){this.model.set("generalPlayingUnitState",!1)}_onAdPlaying(){this.model.set("generalPlayingUnitState",!0)}_onPlayerClose(){this._setGeneralPlayingUnitState(!1),this.model.set("playerState",Me.A.playerState.closed)}_setGeneralPlayingUnitState(e){this.model.set("generalPlayingUnitState",null),this.model.set("generalPlayingUnitState",e)}_onPlayerStop(){this.model.set("playerState",Me.A.playerState.stopped)}_onPlayerError(){this.model.set("playerState",Me.A.playerState.error)}isPlayerHasRvInQ(){this.model.set("playerHasRvInQ",!0)}isPlayerHasAdxInQ(e){this.model.set("playerHasAdxInQ",e)}isFirstAdLoaded(){this.model.set("isFirstAdLoaded",!0)}close(){setTimeout(function(){this.player&&(this.player.closeCleanPlayer(),this.player=null,this.model.set("closeState",Me.A.closeState.playerClosed),this.model.set("playerState",Me.A.playerState.closed),this.log.info("player was closed"))}.bind(this),0)}_pausePlayer(){this.close()}_onLoadingClick(){this.isRestarted=!0,setTimeout(this._onPlayerLoaded.bind(this),0)}_hasPlayer(){return this.player&&!this.player.playerIsClosed}_onVolumeChange(e){this.isMuted=0===e.adVolume}getTarget(){if(this.model.get("targetId"))return this.model.get("targetId").toString();var e=on.now().toString(),t=rn("<div>");return t.attr("id",e),t.css({width:"".concat(this.model.get("width"),"px"),height:0,position:"absolute",top:0,left:0,display:"none"}),this.model.get("unitType")!==y.l.FEED_MANAGER.NAME&&t.css({}),t.appendTo("body"),this.playerDiv=t,e}_onTabEvent(e,t){this.model.get("isCallIDLE")&&this.player&&this.player.startIdleMode&&this.player.stopIdleMode&&(t?(this.player.stopIdleMode(),this.model.set("isInIdleMode",!1),this.log.info("Stop idle mode")):(this.player.startIdleMode(),this.model.set("isInIdleMode",!0),this.log.info("Start idle mode")))}_onPublisherVideoDetectChange(e,t){var i;null!==(i=this.player)&&void 0!==i&&i.onPublisherVideoDetectChange&&this.player.onPublisherVideoDetectChange(t)}startWf(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._hasPlayer()&&this.player.startWf&&!this.model.get("isInIdleMode")?(this.log.info("Starting Waterfall"),this.player.startWf(e)):this.model.get("isInIdleMode")&&this.createStateHandlers([{event:"isInIdleMode:false",funcName:"startWf",isListenOnce:!0}])}_getAdTypesToDrop(){var e=this.model.get("adsToDrop")||[];if(Array.isArray(e)||(e=[e]),this.model.get("aboveTheFeed.isActive")){var t=zi.K.hip.name;on.canPlayInAboveTheFeedPlacement(this.model)||e.includes(t)||e.push(t)}return e}}const dn=ln;var cn=s(140);const hn=class extends dn{constructor(e){super(e),this.videoContainerSelector=this.model.get("videoContainerSelector"),this.isMobile=this.model.get("isMobile"),this.isYahooApp=this.model.get("isYahooApp"),this._init()}close(){setTimeout(function(){this.player&&(this.player.closeCleanPlayer(),this.player=null,this.model.set("closeState",Me.A.closeState.playerClosed),this.model.set("playerState",Me.A.playerState.closed),this.log.info("player was closed"),this.createStateHandlers([{event:"loadingViewState:clicked",funcName:"_onLoadingClick",isListenOnce:!0}]),"onHover"===this.model.get("volume")&&this.model.stopListening(this.model,"change:isMouseOn"))}.bind(this),0)}getTarget(){return this._hasExplicitTargetId()?this._getExplicitTargetId():this._isVpaidNoContainerMode()?this._getVpaidContainerSelectorOrDefault():this._createAndAppendPlayerDiv()}_hasExplicitTargetId(){return Boolean(this.model.get("targetId"))}_getExplicitTargetId(){return this.model.get("targetId").toString()}_isVpaidNoContainerMode(){return this.model.get("isVpaidNoContainerMode")}_getVpaidContainerSelectorOrDefault(){return this.videoContainerSelector?this.videoContainerSelector.toString():"body"}_createAndAppendPlayerDiv(){var e,t=cn.now().toString(),i=this._createPlayerDivElement(t),n=this.videoContainerSelector||"body";return"string"==typeof n?(e=document.querySelector(n))||(this.log&&this.log.warn('Container selector "'.concat(n,'" not found, using document.body instead')),e=document.body):e=n||document.body,e.appendChild(i),this.playerDiv=i,t}_getThumbBlockClass(){return this.isYahooApp?y.l.SC_WRAPPER_SELECTORS.THUMB_BLOCK_APP:this.isMobile?y.l.SC_WRAPPER_SELECTORS.VIDEO_BLOCK:y.l.SC_WRAPPER_SELECTORS.THUMB_BLOCK}_createPlayerDivElement(e){var t=document.createElement("div"),i=this.model.get("yahooUIMode");return t.id=e,t.classList.add("_cm-yahoo-widget","_cm-widget-manager-player-target",this._getThumbBlockClass(),this.isMobile&&cn.isPortrait()?"portrait":"landscape"),i&&t.classList.add(i),t}};var mn=s(140);const pn=class{constructor(e){this.model=e,this._loadOvaMediaPlayer()}_loadOvaMediaPlayer(){var e="".concat(this.model.get("player.urls.playerLocation"),"/OvaMediaPlayer.js");window.OvaMediaPlayer?this._onOvaMediaPlayerLoaded():mn.loadJs(e,this._onOvaMediaPlayerLoaded.bind(this),{crossOrigin:"anonymous"})}_onOvaMediaPlayerLoaded(){this.model.set("isPlayerLoaded",!0)}};var un=s(140);class gn extends W.f{constructor(e){super(e.model),this.model=e.model,this.onPredict=e.onPredict,this.adProperties=e.adProperties,this.onPredictCallback=e.onPredictCallback,this.currentKey=0,this.log=new A.A({unitType:this.model.get("unitType"),className:"basePredictService",version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this._bindEvents()}_bindEvents(){}_setCuerrentKey(e){this.currentKey=un.last(e.split(".")),this.model.set("adsManagerLastPredictKey",this.currentKey)}_predicted(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.model.get("isGetRv1OnlyForEligible.isActive")||e!=y.l.RV_TYPES.RV||this.model.get("isEligibleToPlay")){if(this.model.set("lastPredictPoint",e),this.model.set("lastPredictPath",this.predictPath),this.model.get("".concat(this.predictPath,".isStartWF"))&&this.startWf&&(this.log.info("startWF predicted"),this.startWf(t)),this._checkIsGet1OnlyOnAdLoaded()&&parseInt(e)===y.l.RV_TYPES.RV&&!this.model.get("playerHasRvInQ"))return this.log.warning("no rv=1 in adLoaded skipping predict"),void this.model.set("isSkippedDistancePredict",!0);this.predictPath&&!this.model.get("".concat(this.predictPath,".isActive"))||(this._logPredict(e),this.onPredict(e,this.log.className,this.adProperties))}else this.model.get("isGetRv1OnlyForEligible.delayPrediction")&&this._delayRvPredict(e)}_canTerminate(){return!this.model.get("isFirstAdImpression")&&!this.hasVideoInQueue}_checkIsGet1OnlyOnAdLoaded(){var e=this.model.get("predictors.isGet1OnlyAfterAdLoaded");return this.predictPath&&void 0!==this.model.get("".concat(this.predictPath,".isGet1OnlyAfterAdLoaded"))&&(e=this.model.get("".concat(this.predictPath,".isGet1OnlyAfterAdLoaded"))),e}_logPredict(e){var t="predicted with key: ".concat(e);this.adProperties?this.log.info("".concat(t," with properties: "),this.adProperties):this.log.info(t)}_delayRvPredict(e){this.delayedPredictPointKey=e,this.delayStartTimeStamp=Date.now(),this.model.set("delayRvPredict",y.l.PREDICT_NAMES[this._getPredictName()]),this.createStateHandlers([{event:"isEligibleToPlay:true",funcName:"_predictOnDelayRvPredict",isListenOnce:!0}])}_predictOnDelayRvPredict(){this.model.set("executeDelayedRvPredict",{name:y.l.PREDICT_NAMES[this._getPredictName()],time:Date.now()-this.delayStartTimeStamp}),this._predicted(this.delayedPredictPointKey)}_getPredictName(){return this.predictPath.split(".")[1]}}const vn=gn;const fn=class extends vn{constructor(e){super(e),this.log=new A.A({unitType:this.model.get("unitType"),className:"autoKillPredict",version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this.predictPath="predictors.autoKill",this.predictPoint="".concat(this.predictPath,".predictPoint"),this.allowedPredictPoint=this.model.get("".concat(this.predictPath,".allowedPredictPoint")),this.log.predict("predict created")}_bindEvents(){this.createStateHandlers([{event:"adState:autoKill",funcName:"_onAutoKillPredict"}])}_onAutoKillPredict(){if(this._canPredict()){var e=this._getLastAutoKilledAdKey();this.log.predict("predicted with key ".concat(e)),setTimeout(this._predicted.bind(this,e),0)}else this.log.predict("Not allowed to predict")}_canPredict(){return this.allowedPredictPoint===this._getLastAutoKilledAdKey()}_getLastAutoKilledAdKey(){return this.model.get("lastAutoKilledPredict")}};var _n=s(568),bn=s(140),yn=(e,t)=>{e.model=t,e.parentSelectorStr=void 0,e.model.get("permanentCard")?e.parentSelectorStr='[data-card-index="'.concat(e.model.get("permanentCard"),'"]'):e.model.get("predictors.isUseWidgetSelector")?e.parentSelectorStr=e.model.get("widgetSelector"):e.model.get("isRecoReelAboveFeed")?e.parentSelectorStr=e.model.get("aboveFeedSelector"):e.model.get("midArticleSelector")?e.parentSelectorStr=e.model.get("midArticleSelector"):e.parentSelectorStr=e.model.get("parentSelector");return{getParentSelector:()=>{if(e.model.get("isYahooWidget")&&(e.parentSelectorStr=e.model.get("parentSelector")),e.parentSelectorStr){var t=e.parentSelectorStr.toString(),i=_n(t);return e.model.get("predictors.isNeedValidateParentSelector")?bn.getValidSelectorElements(i)[0]:i[0]}},calcPredicts:()=>{var t=e.model.get(e.predictPoints);bn.each(t,((t,i)=>{e._calcPredict(t,i)}))}}},An=s(391);const Sn=class extends vn{constructor(e){super(e),this.log=new A.A({unitType:this.model.get("unitType"),className:"baseDistancePredicts",version:this.model.get("version"),isDebug:this.model.get("isDebug")})}_initPredict(e){this.predictPoint=e.predictPoint,this.predictKey=e.predictKey,this.startWf=e.startWfFunc,this.utils=yn(this,this.model),this.scrollManager=new me.A,this._setParentSelector()}_setParentSelector(){if(!this.isSelectorFound){var e=this.utils.getParentSelector();e?(this.isSelectorFound=!0,this.parentSelector=e,this.log.info("parentSelector found staring to predict viewability"),this._bindEvents(),this._calcPredict()):(this.log.info("no parentSelector can't predict distance waiting for parentSelector"),An.once("window:scroll:change",this._setParentSelector.bind(this)),this.model.listenToOnce(this.model,"change:parentSelector",this._setParentSelector.bind(this)))}}_bindEvents(){this.parentSelector&&(window.taboolaBridge&&!this.registeredOnNotifyExternalRects&&(this.registeredOnNotifyExternalRects=!0,window.taboolaBridge.on("notifyExternalRects",this._calcPredict.bind(this))),An.once("window:scroll:change",this._calcPredict.bind(this)))}_calcPredict(){}_onDistancePredicted(e){if(this.log.predict("predict key ".concat(e,": max pps = ").concat(this.maxPPS,", current pps = ").concat(this.scrollManager.pps)),this.maxPPS&&Math.abs(this.scrollManager.pps)>this.maxPPS)return this.log.warning("Distance Predicted, speed is too high",this.scrollManager.pps),this.model.set("isSkippedDistancePredict",!0),void this.log.predict("predict key ".concat(e,": skipping on pps"));this.log.warning("Distance Predicted, speed is OK",this.scrollManager.pps),this.log.predict("predict key ".concat(e,": predicted")),this._predicted(e)}};var wn=s(568),Tn=s(140);const Pn=class extends Sn{constructor(e){super(e),this.log=new A.A({unitType:this.model.get("unitType"),className:"distancePercentPredict",version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this.predictPath="predictors.distancePercent",this.maxPPS=this.model.get("predictors.distancePercent.maxPPS"),this.utils=yn(this,this.model),this._initPredict(e)}_calcPredict(){if(!this.isPredicted){var e=wn(this.model.get("scrollSelector"))[0],t=void 0!==e,i=t?e.clientHeight:window.innerHeight,n=t?i+e.scrollTop:i+window.pageYOffset,s=100/(this.predictPoint||1),o=Tn.getTopOfEl(this.parentSelector),a=o+this.model.get("height")/(100/this.model.get("viewPercent")||1),r=i+(a-i)/s;this.model.get("logViewabilityCalc")&&this.log.info("topParentSelector: ".concat(o,"\n                eligibilityPoint: ").concat(a,"\n                startPoint: ").concat(i,"\n                bottomViewPort: ").concat(n,"\n                predictionPoint: ").concat(r,"\n                calc: predictionPoint <= bottomViewPort: ").concat(r<=n)),r<=n?(this.model.set("distancePercentPredictData",{topParentSelector:o,bottomViewPort:n,eligibilityPoint:a,startPoint:i,predictionPoint:this.predictionPoint,predictKey:this.predictKey}),this.isPredicted=!0,this._onDistancePredicted(this.predictKey)):this._bindEvents()}}};const En=e=>class extends e{onScrollSpeedChangeCallback(){this.scrollManager.getPps()>this.maxPPS?this.log.predict("onScrollSpeedChangeCallback - Could not predict, scroll speed higher then maxPPS"):this._isAllowedForPredictOnScrollEnd()?(this.log.predict("onScrollSpeedChangeCallback - Predicted!"),this._predictWithPredictKey()):this.log.predict("onScrollSpeedChangeCallback - Could not predict, not eligible to play")}};var Cn=s(140);const xn=En(class extends Sn{constructor(e){super(e),this.log=new A.A({unitType:this.model.get("unitType"),className:"distancePixelsPredict",version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this.predictPath="predictors.distancePixels",this.maxPPS=this.model.get("predictors.distancePixels.maxPPS"),this.log.predict("predict created with key = ".concat(e.predictKey,", predict point = ").concat(e.predictPoint,", maxPPS = ").concat(this.maxPPS)),this._initPredict(e),this.model.get("".concat(this.predictPath,".isListenToScrollSpeedChange"))&&this.scrollManager.registerForPPSChange(this.onScrollSpeedChangeCallback.bind(this))}_calcPredict(){this.isPredicted||(this.isPixelsPoint=Cn.hasPassedPixelFromSelector(this.parentSelectorStr,this.model.get("scrollSelector"),this.predictPoint,this.model.get("predictors.isNeedValidateParentSelector")),this.isPixelsPoint?(this.model.set("distancePixelPredictData",{predictionPoint:this.predictPoint,predictKey:this.predictKey,actualPredictionPoint:this.model.get("actualPredictionPoint")}),this.isPredicted=!0,this.log.predict("predict key ".concat(this.predictKey,": distance from selector is lower than ").concat(this.predictPoint,"px, checking max pps")),this._predictWithPredictKey()):this._bindEvents())}_isSlider(){var e=this.model.get("unitType");return e===y.l.FEED_MANAGER.NAME&&this.model.get("detachToSlider.isStartFromSlider")||e===y.l.SLIDER.NAME||e===y.l.SLIDER.INSTREAM}_isAllowedForPredictOnScrollEnd(){return this.isPixelsPoint}_predictWithPredictKey(){this._onDistancePredicted(this.predictKey)}_onQueueChange(e){this.hasVideoInQueue=e}});var On=s(140);const In=class extends vn{constructor(e){super(e),this.log=new A.A({unitType:this.model.get("unitType"),className:"getAdFailPredict",version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this.allowedPredictPoints="predictors.getAdFail.allowedPredictPoints",this.keysToPredict=this.model.get(this.allowedPredictPoints),this.log.predict("predict created with keys to predict ".concat(this.keysToPredict))}_bindEvents(){this.createStateHandlers([{event:"getAdState:failed",funcName:"_onFailedToGetAd"}])}_onFailedToGetAd(){var e=this.model.get("lastFailedPredict");this._shouldPredict(e)&&(this.adProperties=this.model.get("lastFailedPredictProperties"),setTimeout(this._predicted.bind(this,this.model.get("lastFailedPredict")),200))}_shouldPredict(e){var t=!1;return t=Array.isArray(this.keysToPredict)?On.contains(this.keysToPredict,e):"any"===this.keysToPredict.toString()||this.keysToPredict===e,this.log.predict("can predict key ".concat(e," = ").concat(t)),t}};const Rn=class extends vn{constructor(e){super(e),this.log=new A.A({unitType:this.model.get("unitType"),className:"multiAdPredict",version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this.predictPath="predictors.multiAd",this.predictPoints="".concat(this.predictPath,".predictPoints"),this.predictKey=e.predictKey,this.predictOptions=this.model.get("".concat(this.predictPoints,".").concat(this.predictKey)),this.log.predict("predict created with key = ".concat(this.predictKey)),this.predictOptions.hasOwnProperty("secondsUntilComplete")?(this.secondsUntilAdComplete=this.predictOptions.secondsUntilComplete,this.log.predict("predict created with key = ".concat(this.predictKey,", seconds to ad complete = ").concat(this.secondsUntilAdComplete)),this._bindPredictSecondsUntilAdEnd()):this.predictOptions.hasOwnProperty("qState")&&(this.adQState=this.predictOptions.qState,this.log.predict("predict created with key = ".concat(this.predictKey,", ad quartile = ").concat(this.adQState)),this._bindPredictAdQState())}_bindPredictSecondsUntilAdEnd(){this.createStateHandlers([{event:"activeAdCurrentTime",funcName:"_checkAdTimeLeft"}])}_bindPredictAdQState(){var e=this.adQState;this.createStateHandlers([{event:"adQState:".concat(e),funcName:"_onPredictPoint"}])}_checkAdTimeLeft(){var e=this.model.get("adDuration");if(e){var t=e<this.secondsUntilAdComplete?e:this.secondsUntilAdComplete,i=this.model.get("activeAdCurrentTime");e-i<=t&&!this.timePredicted&&(this.timePredicted=!0,this.log.predict("ad duration = ".concat(e,", ad current time = ").concat(i)),this._onPredictPoint())}}_allowPredict(){var e=this.model.get("activeAdData");return!(!(this.model.get("isEligibleToPlay")&&this.model.get("isMultiAd")&&e)||e.singleAd)}_onPredictPoint(){if(this._allowPredict())return this.log.predict("allowing predict - in multi ad mode"),void this._predicted(this.predictKey);this.log.predict("disallowing predict - in single ad mode")}};const Nn=class extends vn{constructor(e){super(e),this.startWf=e.startWfFunc,this._init()}_init(){this.initialized||(this.log=new A.A({unitType:this.model.get("unitType"),className:"playerReadyPredict",version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this.predictPath="predictors.playerReady",this.predictKey=this.model.get("".concat(this.predictPath,".predictPoint")),this.predictPoint="".concat(this.predictPath,".predictPoint"),this.initialized=!0,this.log.predict("predict created with key = ".concat(this.predictKey)))}_bindEvents(){!this.initialized&&this._init(),"ready"===this.model.get("playerState")?(this.log.predict("player is ready"),this._onPlayerReady()):(this.log.predict("waiting for player ready event"),this.createStateHandlers([{event:"playerState:ready",funcName:"_onPlayerReady",isListenOnce:!0}]))}_onPlayerReady(){this._predicted(this.predictKey)}};var Dn=s(391),Mn=s(568);const Vn=class extends vn{constructor(e){super(e),this.log=new A.A({unitType:this.model.get("unitType"),className:"firstScrollPredict",version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this.predictPath="predictors.firstScroll",this.predictPoints="".concat(this.predictPath,".predictPoints"),this.predictKey=this.model.get("".concat(this.predictPath,".predictPoints")),this.startWf=e.startWfFunc,this.isPredicted=!1,this.log.predict("predict created with predict key = ".concat(this.predictKey)),this.model.get("isEligibleToPlay")?(this.log.predict("eligible to play on creation, calling predict"),this._callPredict()):this._onFirstScroll()}_bindEvents(){Dn.once("window:scroll:change",this._onFirstScroll.bind(this)),this.createStateHandlers([{event:"isEligibleToPlay:true",funcName:"_callPredict"}])}_onFirstScroll(){if(!this.isPredicted){var e=window.pageYOffset,t=5,i=Mn(this.model.get("scrollSelector"))[0];if(void 0!==i){var n=i.clientHeight;e=n+i.scrollTop,t=n+5}t<=e?(this.log.predict("scrolled more than 5px, calling predict"),this._callPredict()):this._bindEvents()}}_callPredict(){this.isPredicted||(this.isPredicted=!0,this._predicted(this.predictKey))}};const kn=class extends vn{constructor(e){super(e),this.log=new A.A({unitType:this.model.get("unitType"),className:"emptyQueuePredict",version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this.log.predict("predict created"),this.predictKey=this.model.get("predictors.emptyQueue.predictPoints"),this._bindEmptyQueuePredict()}_bindEvents(){}_bindEmptyQueuePredict(){this.createStateHandlers([{event:"adManagerState:".concat(Me.A.adManagerState.empty),funcName:"_onQEmpty"}])}_allowPredict(){return this.model.get("isMultiAd")}_onQEmpty(){if(this.model.get("getAdState")!==Me.A.getAdState.gettingAd)return this.log.predict("queue is empty, no get ad is process"),void this._onPredictPoint();this.log.predict("queue is empty, waiting for get ad reply")}_onPredictPoint(){if(this._allowPredict())return this.log.predict("predict allowed - in multi ad mode"),void this._predicted(this.predictKey);this.log.predict("predict disallowed - in single ad mode")}};var Ln=s(391);const Fn=En(class extends vn{constructor(e){super(e),this.log=new A.A({unitType:this.model.get("unitType"),className:"fullEligibilityPredict",version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this.predictPoint=e.predictPoint,this.predictKey=this.model.get("predictors.fullEligibility.predictPoints"),this.predictPath="predictors.fullEligibility",this.startWf=e.startWfFunc,this.hadGetAdRv=!1,this.maxPPS=this.model.get("predictors.fullEligibility.maxPPS"),this.log.predict("predict created with key = ".concat(this.predictKey,", maxPPS = ").concat(this.maxPPS)),this.scrollManager=new me.A,this.model.get("".concat(this.predictPath,".isListenToScrollSpeedChange"))&&this.scrollManager.registerForPPSChange(this.onScrollSpeedChangeCallback.bind(this)),this._bindEvents()}_bindEvents(){if(this.scrollManager)if(this.createStateHandlers([{event:"getAdState:".concat(Me.A.getAdState.gettingAd),funcName:"_onGettingAd",isListenOnce:!0}]),this.model.get("frameType")===y.l.FRAME_TYPE.plainPage)this.log.predict("listening to window scroll"),Ln.once("window:scroll:change",this._calcPredict.bind(this)),this.scrollManager.registerForScrollEnd(this._calcPredict.bind(this));else{var e=this.model.get("predictors.fullEligibility.checkPredictsSeconds");this.log.predict("checking eligibility every ".concat(e)),this.calcPredictInterval=setInterval(this._calcPredict.bind(this),1e3*e)}else this.log.predict("predict aborted, scroll manager not created")}_onGettingAd(){if(1===this.model.get("lastGetAdKey"))return this.hadGetAdRv=!0,void this.log.predict("stop predict because get ad 1 in process");this.createStateHandlers([{event:"getAdState:".concat(Me.A.getAdState.gettingAd),funcName:"_onGettingAd",isListenOnce:!0}])}_calcPredict(){this.hadGetAdRv||this.isPredicted||(this._canPredict()&&this.maxPPS&&Math.abs(this.scrollManager.pps)<this.maxPPS?(this.isPredicted=!0,this.calcPredictInterval&&(clearInterval(this.calcPredictInterval),this.calcPredictInterval=void 0),this.model.set("fullEligibilityPredicted",!0),this.log.predict("allowed due to max pps - current pps = ".concat(this.scrollManager.pps," is lower than max pps ").concat(this.maxPPS)),this._predicted(this.predictKey)):(this.log.predict("disallowed due to max pps - current pps = ".concat(this.scrollManager.pps," is higher than or equal to max pps ").concat(this.maxPPS)),Ln.once("window:scroll:change",this._calcPredict.bind(this))))}_canPredict(){var e=this.model.get("adState")===Me.A.adState.playing,t=this.model.get("isEligibleToPlay"),i=this.model.get("isSkippedDistancePredict"),n=t&&i&&!e;if(this.log.predict("can predict = is eligible (".concat(t,") && skipped distance predict (").concat(i,") && no other ad playing (").concat(!e,") = ").concat(n)),n&&this._checkIsGet1OnlyOnAdLoaded()){var s=this.model.get("playerHasRvInQ");n=n&&s,this.log.predict("can predict = is player having RV1 in queue = ".concat(this.model.get("playerHasRvInQ")))}return n}_isAllowedForPredictOnScrollEnd(){return this._canPredict()}_predictWithPredictKey(){this._predicted(this.predictKey)}});var Bn=s(140),zn=s(568);class Un{constructor(e){this.model=e,this.log=new A.A({unitType:"Util",className:"DeatchUtil",version:this.model.get("version"),isDebug:this.model.get("isDebug")})}setSliderSize(){var e,t;if(this.detachToSlider=this.model.get("detachToSlider"),this.model.get("stickyCard.isActive")){e=this.model.get("width"),t=this.model.get("height");var i=this.getStickyPosition();return this.detachToSlider.position.horizontalOffset=i.left,this.detachToSlider.position.verticalOffset=i.top,this.detachToSlider.position.horizontal="left",this.detachToSlider.position.vertical="top",this.model.set("detachToSlider.width",e),void this.model.set("detachToSlider.height",t)}this.originalSliderWidth&&(this.detachToSlider.width=this.originalSliderWidth,this.originalSliderWidth=void 0),this.originalSliderHeight&&(this.detachToSlider.height=this.originalSliderHeight,this.originalSliderHeight=void 0),this.originalSliderHeight=this.detachToSlider.height,e=this.model.get("width");var n=this.detachToSlider.liquidSize.isActive?this.calcLiquidWidth():this.detachToSlider.width;(e>n||this.detachToSlider.liquidSize.isDisableWidthLimit)&&(e=n),t=Bn.getVideoHeightByRatio(e,this.model.get("aspectRatioNum")<=1?1.77:this.model.get("aspectRatioNum")),this.model.set("detachToSlider.width",e),this.model.set("detachToSlider.height",t)}getStickyPosition(){var e=zn(this.model.get("containerViewPlaceHolder")),t=e.length?e.offset().left:0,i=this.model.get("stickyCard.offset.top")||0,n=t+(this.model.get("stickyCard.offset.left")||0);return{top:"".concat(i),left:"".concat(n)}}setSliderSizeVertical(){this.detachToSlider=this.model.get("detachToSlider");var e=Bn.getVideoHeight(this.model.get("width")),t=this.detachToSlider.liquidSize.isActive?this.calcLiquidHeight():this.detachToSlider.height;e>t&&(e=t);var i=Bn.getVideoWidthByRatio(e,this.model.get("aspectRatioNum"));this.model.set("detachToSlider.width",i),this.model.set("detachToSlider.height",e)}calcLiquidWidth(){this.detachToSlider=this.model.get("detachToSlider");var e=this.detachToSlider.liquidSize.minWidth,t=this.detachToSlider.liquidSize.maxWidth,i=window.innerWidth*(this.detachToSlider.liquidSize.widthPercent/100);return t&&i>t&&(i=t),i<e&&(i=e),i}calcLiquidHeight(){this.detachToSlider=this.model.get("detachToSlider");var e=this.detachToSlider.liquidSize.maxHeight,t=window.innerHeight*(this.detachToSlider.liquidSize.heightPercent/100);return e&&t>e&&(t=e),t}setStickParams(){var e=this.model.get("stickyCard.navBarSelector"),t=document.querySelector(e),i=this.model.get("stickyCard.offset.top");if(t){var n=t.offsetHeight||0;this.model.set("stickyCard.offset.top",i+n)}}}var Hn=function(){var e;return function(t){return e||(e=new Un(t)),e}}();const Wn=Hn;var jn=s(140);const Gn=class extends vn{constructor(e){super(e),this.log=new A.A({unitType:this.model.get("unitType"),className:"intersectionPredict",version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this.predictPoint=e.predictPoint,this.predictKey=e.predictKey,this.isSliderOn=this.model.get("detachToSlider")&&(this.model.get("detachToSlider").isStartFromSlider||this.model.get("detachToSlider").isDetachToSlider),this.isSuperSlider=!!this.isSliderOn&&(this.model.get("detachToSlider.isStartFromSlider")&&this.model.get("detachToSlider.isDetachToSlider")),this.isAMP=this.model.get("frameType")===y.l.FRAME_TYPE.amp,this.predictPath="predictors.intersection",this.startWf=e.startWfFunc,this.utils=yn(this,this.model),this.predictDelayTime=this.model.get("".concat(this.predictPath,".predictDelayTime")),this.scrollManager=new me.A,this.maxPPS=this.model.get("".concat(this.predictPath,".maxPPS")),this.log.predict("predict created with key = ".concat(this.predictKey,", predict point = ").concat(this.predictPoint,"% view, predictDelayTime = ").concat(this.predictDelayTime)),this._setSelector()}_initObserver(){var e=[0,this.predictPoint/100];this.isAMP&&this.isSliderOn&&(this.detachUtil=Wn(this.model),this.detachUtil.setSliderSize(),e=jn.buildObserverThresholdList());var t={rootMargin:"0px",threshold:e};this.observer=new IntersectionObserver(this._observerCallback.bind(this),t),jn.safeObserve(this.observer,this.parentSelector)}_setSelector(){if(!this.isSelectorFound){var e=this.utils.getParentSelector();e?(this.isSelectorFound=!0,this.selectorTimeOut&&(clearTimeout(this.selectorTimeOut),this.selectorTimeOut=void 0),this.parentSelector=e,this.log.predict("parent selector found, starting observer"),this.log.info("parentSelector found staring to predict viewability"),this._bindEvents(),this._initObserver()):(this.log.predict("parent selector couldn't be found, trying again in 1s"),this.log.info("no parentSelector can't predict distance waiting for parentSelector"),this.model.listenToOnce(this.model,"change:parentSelector",this._setSelector.bind(this)),this.selectorTimeOut=setTimeout(this._setSelector.bind(this),1e3))}}_isIntersectingTest(e){return this.isAMP&&this.isSliderOn?e[0].intersectionRect.height>this.model.get("detachToSlider.height"):100*e[0].intersectionRatio>=this.predictPoint}_observerCallback(e,t){var i=this.scrollManager.getPps();if(!this.isPredicted){var n=this._isIntersectingTest(e);this.isSuperSlider&&this.isAMP&&n&&this.model.set("isSliderEligibleToPlay",!0),n?this._isLowerThenMaxPPS()?(this._onPrediction(),this.log.predict("intersected and predicted")):this.log.predict("intersected but can't predict - current pps (".concat(i,") is higher then maxPps (").concat(this.maxPPS,")")):this.log.predict("lost intersection")}}_isLowerThenMaxPPS(){return!this.maxPPS||Math.abs(this.scrollManager.getPps())<this.maxPPS}_onPrediction(){this.isPredicted=!0,this.log.predict("predicted"),this._predicted(this.predictKey),this.observer.disconnect()}};const $n=class extends vn{constructor(e){super(e),this.log=new A.A({unitType:this.model.get("unitType"),className:"timePredict",version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this.predictPath="predictors.time",this.modelKey=e.modelKey?e.modelKey:e.predictKey?"".concat(this.predictPath,".predictPoints.").concat(e.predictKey):this.predictPath,this.predictKey=e.predictKey||this.model.get("".concat(this.modelKey,".predictPoints")),this.isActive=this.model.get("".concat(this.modelKey,".isActive")),this.isActive&&(this.length=1e3*this.model.get("".concat(this.modelKey,".lengthInSeconds")),this.length&&(this.repeat=this.model.get("".concat(this.modelKey,".repeat"))||1,this.log.predict("predict created with key = ".concat(this.predictKey,", length = ").concat(this.length,"ms, repeat = ").concat(this.repeat)),this._bindTimePredict(),this._startPredictTimer()))}_bindEvents(){}_bindTimePredict(){this.createStateHandlers([{event:"time:".concat(this.predictPath),funcName:"_startPredictTimer"}])}_canRepeatPredict(){return this.repeat>0}_canStartTimer(){return!this.stopped&&this._canRepeatPredict()}_startPredictTimer(){if(this._canStartTimer())return this.timer&&(this.timer=clearTimeout(this.timer)),this.log.info("Starting timer",this.predictKey),this.log.predict("repeating ".concat(this.repeat," more times")),void(this.timer=setTimeout((()=>{--this.repeat,this._predicted(this.predictKey),this._startPredictTimer()}),this.length));this.log.predict("no more repeats")}stop(){this.log.info("Timer predict stopped"),this.log.predict("stopping timer"),this.timer=clearTimeout(this.timer),this.stopped=!0}};const Yn=class extends vn{constructor(e){super(e),this.log=new A.A({unitType:this.model.get("unitType"),className:"mp4Predict",version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this.predictPath="predictors.mp4",this.predictKey=this.model.get("".concat(this.predictPath,".predictPoint")),this.predictPoint="".concat(this.predictPath,".predictPoint"),this.log.predict("predict created with key = ".concat(this.predictKey))}_bindEvents(){this.createStateHandlers([{event:"playerQueue",funcName:"_onPlayerQueueStatusChange"}])}_onPlayerQueueStatusChange(){this.adsListFromPlayer=this.model.get("playerQueue"),this._allowPredict()?(this.log.predict("found rv1 video ad in player queue, predicting"),this._predicted(this.predictKey),this.model.stopListening(this.model,"change:playerQueue")):this.log.predict("didn't find rv1 video ad in player queue, waiting for next queue change")}_allowPredict(){return this.adsListFromPlayer.filter((e=>"video"===e.mt&&!0===e.rv)).length>0}};var qn=s(140);class Kn extends W.f{constructor(e,t){super(e),this.model=e,this.log=new A.A({unitType:this.model.get("unitType"),className:this.constructor.name,version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this.cardsSelector=t,this.usedCards=[]}_setMinDistance(){this.minCardDistance=this.model.get("cardsMinDistance")||0;var e=qn.height(window);this.minCardDistance<e&&(this.minCardDistance=e,this.model.set("cardsMinDistance",e))}getCard(e){}cancelGetCard(){}setCardAsUsed(e){this.usedCards.push(e)}_getPlaceHolders(){}_isElementBelowView(e){}}const Qn=Kn;var Zn=s(568),Xn=s(140),Jn=s(391);const es=class extends Qn{constructor(e,t){super(e),this.model=e,this.cardsSelector=t,this.usedCards=[],this.shouldSearchForNewCard=!0,this._setMinDistance(),this._createDecisionFuncs()}_createDecisionFuncs(){this.decisionsFuncs=[this._isNotUsedCard,this._isBelowUsedCard,this._viewPortFunc,this._isMinDistanceOk]}getCard(e,t){if(this.shouldSearchForNewCard||t){t||this.log.info("searching for card");var i=void 0;this.cb=e;for(var n=this._getPlaceHolders(),s=n.length-1;s>=0;s--)this._isCardSuitable(n[s])&&(i=n[s]);i?(this.log.info("found card: ",i),this.model.set("eligiblePlaceholder",i),this._callCardCB(e,i)):(this.shouldSearchForNewCard=!1,this._registerListeners())}}_getPlaceHolders(){var e=this.getElementsForMsnPlaceHolders();return this.model.get("msnWebComponentsEnabled")?this._getShadowDOMPlaceholders(e):this._getNonShadowDOMPlaceholders(e)}_newShadowDomDrilldown(e,t){for(var i=0;i<t.length;i++)e&&e.shadowRoot&&(e=e.shadowRoot.querySelector(t[i]));return e}_extractDrilldownArray(){return this.model.get("msnNewDomDrillDown")?this.model.get("msnNewDomDrillDown").split(","):[]}_returnArrayOfShadowRootNodes(e){return e&&e.shadowRoot&&e.shadowRoot.querySelectorAll(this.cardsSelector)?Array.prototype.slice.call(e.shadowRoot.querySelectorAll(this.cardsSelector)):Zn(this.cardsSelector)}getElementsForMsnPlaceHolders(){var e=document.querySelectorAll(this.model.get("msnFeedRootSelector")),t=this._extractDrilldownArray()||[],i=[];return Xn.forEach(e,(e=>{var n=this._newShadowDomDrilldown(e,t);n&&n.shadowRoot?i.push(this._returnArrayOfShadowRootNodes(n)):i.push(this._returnArrayOfShadowRootNodes(e))}),this),Xn.flattenArray(i)}_getNonShadowDOMPlaceholders(e){var t=[];this.model.get("msnCanOpenFirstRow")?t=this._getRowPlaceHolder(1,this.model.get("msnMinimumCardInFirstRow")):this.model.get("msnCanOpenSecondRow")&&(t=this._getRowPlaceHolder(2,this.model.get("msnMinimumCardInSecondRow")));for(var i=0;i<e.length;i++)t.push(e[i]);return t}_getNewShadowDomPlaceholder(e,t){if(t||t.shadowRoot){var i=t.shadowRoot.querySelector(this.model.get("msnNewDomSecondSizeSelector"));e.push(i.parentElement)}}_getOriginalShadowDomPlaceholder(e,t){t&&t.parentElement&&e.push(t.parentElement)}_getShadowDOMPlaceholders(e){var t=[],i=this.model.get("msnSizeSelector"),n=this.model.get("msnNewDomSizeSelector");return e&&e.length&&i&&e.forEach((e=>{if(e&&e.shadowRoot){var s=e.shadowRoot.querySelector(i),o=e.shadowRoot.querySelector(n);o?this._getNewShadowDomPlaceholder(t,o):this._getOriginalShadowDomPlaceholder(t,s)}})),t}_getRowPlaceHolder(e,t){for(var i=[],n=[],s=document.querySelectorAll(this.model.get("msnUpperRowsSelector")),o=1,a=0,r=0;r<s.length&&o<=e;r++){var l=s[r],d=l.style.top&&Xn.convertRem(parseFloat(l.style.top));if(a!==d&&o++,o===e)!this.model.get("msnIsOpenOnSponsoredCards")&&l.querySelector(this.model.get("msnSponsoredSelector"))||n.push(l);a=d}n.length>=t&&("rtl"===document.querySelector("html").getAttribute("dir").toLowerCase()?i.push([n[1],n[0]]):i.push([n[0],n[1]]));return i}getEligiblePlaceHolders(){var e=this._getPlaceHolders()||[];return Xn.flattenArray(e)}_isCardSuitable(e){for(var t=0;t<this.decisionsFuncs.length;t++){var i=this.decisionsFuncs[t].bind(this),n=e;if(Xn.isArray(e)&&(n=e[0]),!i(n))return!1}return!0}_registerListeners(){Jn.once("window:scroll:change",this._onScroll.bind(this),this)}_unRegisterListeners(){Jn.off("window:scroll:change",this._onScroll.bind(this),this)}_callCardCB(e,t){this.shouldSearchForNewCard=!0,this.cb({cardToHide:Xn.isArray(t)?t[0]:t,additionalCard:Xn.isArray(t)?t[1]:void 0}),this.cb=void 0}_onScroll(){this.getCard(this.cb,!0)}setCardAsUsed(e){var t={cardEl:e,offsetTop:Xn.getTopOfEl(e)};Xn.extend(t,Xn.safeGetBoundingClientRect(e)),t.offsetBottom=t.offsetTop+t.height,this.usedCards.push(t)}_isNotUsedCard(e){return!this.usedCards.some((t=>t.cardEl===e))}_isBelowUsedCard(e){var t=Xn.getTopOfEl(e);return Xn.every(this.usedCards,(function(e){var i=e.offsetBottom;return t>i}))}_viewPortFunc(e){return this.model.get("isOpenInViewPort")&&this._isCardInViewPort(e)||this._isElementBelowView(e)}_isCardInViewPort(e){return Xn.getViewPercent(e,e.offsetWidth,e.offsetHeight)>=this.model.get("cardViewPercent")}_isElementBelowView(e){return Xn.safeGetBoundingClientRect(e).top>(window.innerHeight||document.documentElement.clientHeight)}_isMinDistanceOk(e){var t=Xn.getTopOfEl(e),i=this.minCardDistance;return Xn.every(this.usedCards,(function(e){return t-e.offsetBottom>=i}))}};var ts=s(391),is=s(140);const ns=En(class extends vn{constructor(e){super(e),this.log=new A.A({unitType:this.model.get("unitType"),className:"msnFullEligibilityPredict",version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this.predictPath="predictors.msnFullEligibility",this.maxPPS=this.model.get("".concat(this.predictPath,".maxPPS")),this.predictKey=this.model.get("".concat(this.predictPath,".predictPoints")),this.msnWebComponentsEnabled=this.model.get("msnWebComponentsEnabled"),this.cardLocator=new es(this.model,this.model.get("msnSelector")),this.scrollManager=new me.A,this.availableCardsElements=this.cardLocator.getEligiblePlaceHolders(),this.model.get("".concat(this.predictPath,".isListenToScrollSpeedChange"))&&this.scrollManager.registerForPPSChange(this.onScrollSpeedChangeCallback.bind(this)),Array.isArray(this.availableCardsElements)&&this.availableCardsElements.length&&(this.msnWebComponentsEnabled?this._observeByScroll():this._observeByObserver())}_observeByScroll(){this.onScroll=this._onScroll.bind(this),ts.on("window:scroll:change",this.onScroll)}_onScroll(){this.availableCardsElements.forEach((e=>{this.isPixelsPoint=is.hasPassedPixelFromSelector(e,void 0,this.predictPoint,!1),this.isPixelsPoint&&this._canPredict()&&this.isPixelsPoint&&this._predictWithPredictKey()}))}_observeByObserver(){this.intersectionObserver=new IntersectionObserver(this.intersectionCallback.bind(this),{root:null,threshold:1,rootMargin:"0px"}),this._observePossibleCards()}_observePossibleCards(){this.availableCardsElements.forEach((e=>{is.safeObserve(this.intersectionObserver,e)}))}intersectionCallback(e,t){this.isSelectorsInViewPort=e.some((e=>e.isIntersecting)),this.isSelectorsInViewPort&&this._canPredict()&&this.isSelectorsInViewPort&&this._predictWithPredictKey()}_canPredict(){var e=this.scrollManager.getPps();if(e>this.maxPPS)return this.log.predict("Can't predict, current pps (".concat(e,") is higher then maxPps (").concat(this.maxPPS,")")),!1;var t=this.model.get("adState")===Me.A.adState.playing,i=this.model.get("isEligibleToPlay"),n=i&&!t;if(this.log.predict("can predict = is eligible (".concat(i,") && no other ad playing (").concat(!t,") = ").concat(n)),n&&this._checkIsGet1OnlyOnAdLoaded()){var s=this.model.get("playerHasRvInQ");n=n&&s,this.log.predict("can predict = is player having RV1 in queue = ".concat(this.model.get("playerHasRvInQ")))}return n}_predictWithPredictKey(){ts.off("window:scroll:change",this.onScroll),this._predicted(this.predictKey)}_isAllowedForPredictOnScrollEnd(){return this._canPredict()}});var ss=s(140);function os(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var as=(e,t)=>{var i;return[0,0,-1*(ss.getRequiredHeight("data-card-index",e)*+(null!==(i=e.get("predictors.feedInViewPredict.firstCardHeightRatio"))&&void 0!==i?i:1)+ss.getFeedTitleHeight()+0),0].map((e=>"".concat(e,"px"))).join(" ")};const rs=class extends vn{constructor(e){super(e),os(this,"reportToLog",(e=>t=>{this.log.debug(e(t),t)})),os(this,"setupAdIsNotPlayingListener",(()=>{var e=()=>this.model.get("adState")!==Me.A.adState.playing;this.model.set("adIsNotPlaying",e.call(this)),this.handleAdStateChange=()=>{this.model.set("adIsNotPlaying",e.call(this)),this._reportAdStateChange(e.call(this))},this._reportAdStateChange(e.call(this)),this.model.on("change:adState",this.handleAdStateChange)})),os(this,"setupFeedInViewObserver",(()=>{var e=e=>{this.model.set("isInView",e),this._reportFeedInView(e)};this.disconnectIntersectionObserver=function(e){var{root:t=null,threshold:i=0,rootMargin:n="0px 0px 0px 0px"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0,o=new IntersectionObserver((e=>{var[{isIntersecting:t}]=e;s(t)}),{root:t,threshold:i,rootMargin:n});return ss.safeObserve(o,e),()=>o.disconnect()}(this.VIDEO_CONTAINER_SELECTOR,this.permanentCard?{threshold:.5}:{threshold:0,rootMargin:as(this.model,this.VIDEO_CONTAINER_SELECTOR)},(t=>{e(t)})),(()=>{var t=ss.safeGetBoundingClientRect(this.VIDEO_CONTAINER_SELECTOR).top<window.innerHeight;e(t)})()})),os(this,"scrollHandler",(()=>{this.model.set("isNotScrolling",!1),this._reportScrolling(!0),clearTimeout(this.debounceTimeout),this.debounceTimeout=setTimeout((()=>{this.model.set("isNotScrolling",!0),this._reportScrolling(!1)}),1e3*(this.scrollDebouncer||1))})),os(this,"setupScrollListener",(()=>{window.addEventListener("scroll",this.scrollHandler),this.model.set("isNotScrolling",!0),this._reportScrolling(!1)})),os(this,"_reportFeedInView",(e=>{this.reportToLog((e=>"".concat(this.permanentCard?"Permanent card ".concat(this.permanentCard):"Feed"," ").concat(e?"IN":"OUTSIDE"," view")))(e)})),os(this,"_reportAdStateChange",(e=>{this.reportToLog((e=>"Ad is ".concat(e?"NOT PLAYING":"PLAYING")))(e)})),os(this,"_reportScrolling",(e=>{this.reportToLog((e=>"User is ".concat(e?"SCROLLING":"NOT SCROLLING")))(e)}));var t=this.model;this.debounceTimeout=null,this.scrollDebouncer=this.model.get("predictors.feedInViewPredict.scrollDebounceSeconds")||.5,this.predicted=!1,this.predictPath="predictors.feedInViewPredict",this.permanentCard=t.get("permanentCard"),this.RV_LEVEL=t.get("".concat(this.predictPath,".predictPoints")),this.VIDEO_CONTAINER_SELECTOR=yn(this,this.model).getParentSelector(),this.log=new A.A({className:"feedInViewPredict",unitType:"".concat(t.get("unitType")," (").concat(t.get("subUnitType"),")"),version:t.get("version"),isDebug:t.get("isDebug")}),this.VIDEO_CONTAINER_SELECTOR?(this.boundEvaluateCombinedConditions=this.evaluateCombinedConditions.bind(this),this.setupScrollListener(),this.setupFeedInViewObserver(),this.setupAdIsNotPlayingListener(),this._bindEvents(),setTimeout((()=>{this.evaluateCombinedConditions()}),50)):this.log.predict("Selector was not found, terminating feed in view predict")}_bindEvents(){this.model.on("change:isInView",this.boundEvaluateCombinedConditions),this.model.on("change:adIsNotPlaying",this.boundEvaluateCombinedConditions),this.model.on("change:isNotScrolling",this.boundEvaluateCombinedConditions)}_unBindEvents(){this.model.off("change:isInView",this.boundEvaluateCombinedConditions),this.model.off("change:adIsNotPlaying",this.boundEvaluateCombinedConditions),this.model.off("change:adState",this.handleAdStateChange),this.model.off("change:isNotScrolling",this.boundEvaluateCombinedConditions),window.removeEventListener("scroll",this.scrollHandler)}evaluateCombinedConditions(){var e=this.model.get("isInView"),t=this.model.get("adIsNotPlaying"),i=this.model.get("isNotScrolling");e&&t&&i&&(this.log.predict("Positive prediction made"),this._predicted(this.RV_LEVEL),this.predicted=!0,this._unBindEvents(),this.disconnectIntersectionObserver())}};var ls=s(140);const ds=class extends vn{constructor(e){super(e),this.log=new A.A({unitType:this.model.get("unitType"),className:"recoReelPredict",version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this.predictPoint=e.predictPoint,this.predictKey=e.predictKey,this.predictPath="predictors.recoReel",this.scrollManager=new me.A,this.maxPPS=this.model.get("".concat(this.predictPath,".maxPPS")),this._setElement(),this.recoReelContainer&&(this._initObserver(),this.log.predict("predict created with key = ".concat(this.predictKey,", predict point = ").concat(this.predictPoint,"% view")))}_setElement(){var e=this.model.get("recoReelContainer");e&&(this.recoReelContainer=e.parentElement)}_initObserver(){var e={rootMargin:"0px",threshold:[0,this.predictPoint/100]};this.observer=new IntersectionObserver(this._observerCallback.bind(this),e),ls.safeObserve(this.observer,this.recoReelContainer)}_isIntersectingTest(e){return 100*e[0].intersectionRatio>=this.predictPoint}_observerCallback(e,t){var i=this.scrollManager.getPps();this.isPredicted||(this._isIntersectingTest(e)?this._isLowerThenMaxPPS()?(this._onPrediction(),this.log.predict("intersected and predicted")):this.log.predict("intersected but can't predict - current pps (".concat(i,") is higher then maxPps (").concat(this.maxPPS,")")):this.log.predict("lost intersection"))}_isLowerThenMaxPPS(){return!this.maxPPS||Math.abs(this.scrollManager.getPps())<this.maxPPS}_onPrediction(){this.isPredicted=!0,this.log.predict("predicted"),this._predicted(this.predictKey),this.observer.disconnect()}};class cs extends vn{constructor(e){super(e),this.log=new A.A({unitType:this.model.get("unitType"),className:"postRepeatPredictor",version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this.predictPath="predictors.postRepeat",this.predictPoints=this.model.get("".concat(this.predictPath,".predictPoints")),this.waitBeforePredictMs=this.model.get("".concat(this.predictPath,".waitBeforePredictMs"))}_bindEvents(){super._bindEvents(),this.createStateHandlers([{event:"repeatShown",funcName:"_onRepeatShown"},{event:"repeatState:showing",funcName:"_onRepeatShown"},{event:"repeatState:clicked",funcName:"_onRepeatClicked"}])}_onRepeatShown(){this._waitBeforePredicting()}_isAllowedToPredict(){return this.model.get("isEligibleToPlay")?this.model.get("closeState")?(this.log.predict("unit is closed, ignoring"),!1):this.model.get("adState")!==Me.A.adState.playing||(this.log.predict("ad is playing"),!1):(this.log.predict("unit is not eligible to play, ignoring"),!1)}_onRepeatClicked(){this.log.predict("clear post repeat predict timeout"),this.predictTimeout&&(clearTimeout(this.predictTimeout),this.predictTimeout=null),this.log.predict("post repeat predict timeout cleared")}_waitBeforePredicting(){this.log.predict("waiting for 2 seconds before predicting"),this.predictTimeout=setTimeout((()=>{this._isAllowedToPredict()?(this.log.predict("predicting"),this._predicted(this.predictPoints),this.log.predict("predicted"),this.model.increaseCounter("postRepeatMode")):this.log.predict("Can't predict, ignoring")}),this.waitBeforePredictMs)}}var hs=s(140);const ms=En(class extends Sn{constructor(e){super(e),this.log=new A.A({unitType:this.model.get("unitType"),className:"adxPredict",version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this.predictPath="predictors.adx",e.predictKey=this.model.get("".concat(this.predictPath,".predictPoint")),this._initPredict(e),this.utils=yn(this,this.model),this.maxPPS=this.model.get("".concat(this.predictPath,".maxPPS")),this.predictPoint=this.model.get("".concat(this.predictPath,".pixelsFromSelectors"))||100,this.model.get("".concat(this.predictPath,".isListenToScrollSpeedChange"))&&this.scrollManager.registerForPPSChange(this.onScrollSpeedChangeCallback.bind(this)),this._bindAdxLoadEvent(),this.log.predict("predict created")}_calcPredict(){this.predicted||(this.isPixelsPoint=hs.hasPassedPixelFromSelector(this.parentSelectorStr,this.model.get("scrollSelector"),this.predictPoint,this.model.get("predictors.isNeedValidateParentSelector")),this.isPixelsPoint?(this.predicted=!0,this.log.info("distance from selector is lower than ".concat(this.predictPoint,"px")),this._loadAdxAd()):this._bindEvents())}_bindAdxLoadEvent(){this.log.predict("listening to Adx events"),this.model.on("loadNewAdxAd",this._loadAdxAd.bind(this))}_loadAdxAd(){this.log.predict("loading new adx and pulling from queue"),this._onDistancePredicted(this.predictKey)}});var ps=s(140);const us=En(class extends Sn{constructor(e){super(e),this.log=new A.A({unitType:this.model.get("unitType"),className:"immediateStartPredict",version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this.predictPath="predictors.immediateStart",e.predictKey=this.model.get("".concat(this.predictPath,".predictPoint")),this._initPredict(e),this.model.on("newDelayedItem",this._onDelayedItem.bind(this)),this.utils=yn(this,this.model),this.maxPPS=this.model.get("".concat(this.predictPath,".maxPPS")),this.predictPoint=this.model.get("".concat(this.predictPath,".pixelsFromSelectors"))||100,this.model.get("".concat(this.predictPath,".isListenToScrollSpeedChange"))&&this.scrollManager.registerForPPSChange(this.onScrollSpeedChangeCallback.bind(this)),this.log.predict("predict created")}_calcPredict(){this.isPixelsPoint=ps.hasPassedPixelFromSelector(this.parentSelectorStr,this.model.get("scrollSelector"),this.predictPoint,this.model.get("predictors.isNeedValidateParentSelector")),this._bindEvents(),this.isPixelsPoint&&(this.log.info("distance from selector is lower than ".concat(this.predictPoint,"px")),this._loadAd())}_loadAd(){this.log.predict("loading new ad and pulling from queue"),this._onDistancePredicted(this.predictKey)}_onDelayedItem(){this.isPixelsPoint=ps.hasPassedPixelFromSelector(this.parentSelectorStr,this.model.get("scrollSelector"),this.predictPoint,this.model.get("predictors.isNeedValidateParentSelector"),this.model.get("unitType")),this.isPixelsPoint?(this.log.predict("found delayed item and distance from selector is lower than ".concat(this.predictPoint,"px, predicting")),this._predicted(this.predictKey)):this.log.predict("didn't found delayed item or distance from selector is lower than ".concat(this.predictPoint,"px, waiting for next queue change"))}});var gs="WatchVideoPredict",vs="predictors.watchVideo";class fs extends vn{constructor(e){super(e),this.log=new A.A({unitType:this.model.get("unitType"),className:gs,version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this.predictPoint=e.predictPoint,this.predictKey=this.model.get("predictors.watchVideo.predictPoints"),this.predictPath=vs,this.startWf=e.startWfFunc,this.hadGetAdRv=!1,this.log.predict("predict created with key = ".concat(this.predictKey)),this.createStateHandlers([{event:"isEligibleToPlay:true",funcName:"_calcPredict"}])}_calcPredict(){this.log.predict("calculating predict"),!this.hadGetAdRv&&this._canPredict()&&this._predicted(this.predictKey)}_canPredict(){var e=this.model.get("adState")===Me.A.adState.playing,t=this.model.get("isEligibleToPlay"),i=this.model.get("watchVideoEnter"),n=t&&!e&&i;return this.log.predict("can predict = Watchvideo entered (".concat(i,") && is eligible (").concat(t,") && no other ad playing (").concat(!e,") = ").concat(n)),n}}const _s=class extends vn{constructor(e){super(e),this.log=new A.A({unitType:this.model.get("unitType"),className:"prebidPredictor",version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this.predictPath="predictors.prebid",this.predictKey=this.model.get("".concat(this.predictPath,".predictPoint")),this.predictPoint="".concat(this.predictPath,".predictPoint"),this.log.predict("predict created with key = ".concat(this.predictKey))}_bindEvents(){this.createStateHandlers([{event:"playerQueue",funcName:"_onPlayerQueueStatusChange"}])}_onPlayerQueueStatusChange(){this.adsListFromPlayer=this.model.get("playerQueue"),this._allowPredict()?(this.log.predict("found prebid ad in player queue, predicting"),this._predicted(this.predictKey)):this.log.predict("didn't find rv1 video ad in player queue, waiting for next queue change")}_allowPredict(){return this.adsListFromPlayer.filter((e=>13===e.at)).length>0}};var bs=s(391);function ys(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class As extends vn{constructor(e){super(e),ys(this,"_canPredict",(()=>this.adsListFromPlayer&&this.adsListFromPlayer.length>0)),this.log=new A.A({unitType:this.model.get("unitType"),className:"multiWidgetPredict",version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this.startWf=e.startWfFunc,this.predictPath="predictors.multiWidget",this.predictKey=this.model.get("".concat(this.predictPath,".predictPoint.default"))||[1,0],this.aggressiveRVKey=this.model.get("".concat(this.predictPath,".predictPoint.rv"))||[1,1,0],this.aggressiveNoneRVKey=this.model.get("".concat(this.predictPath,".predictPoint.noneRv"))||[0,0,0],this.adsListFromPlayer=this.model.get("playerQueue"),this.log.predict("predict created with key = ".concat(this.predictKey))}_bindEvents(){bs.on("streamBatchLoaded",this._predictWithWF.bind(this)),this.createStateHandlers([{event:"createSubWidgetController",funcName:"_predictWithKeyNoWF"}]),this.createStateHandlers([{event:"isEligibleToPlay:true",funcName:"_predictWithKeyNoWF"}]),this.createStateHandlers([{event:"parentSelector:change",funcName:"_predictWithWF"}]),this.createStateHandlers([{event:"playerQueue",funcName:"_updateQueue"}]),this.createStateHandlers([{event:"scrolledCloseToViewport",funcName:"_tryViewportBasedRV1"}])}_updateQueue(){this.adsListFromPlayer=this.model.get("playerQueue")}_predictWithWF(){this._canPredict()&&this._predictFromList(!0)}_predictWithKeyNoWF(){this._canPredict()&&this._predictFromList(!1,this.predictKey)}_predictFromList(e,t){this.model.set("".concat(this.predictPath,".isStartWF"),e);var i=t||this.adsListFromPlayer.some((e=>e.rv))?this.aggressiveRVKey:this.aggressiveNoneRVKey;this._predicted(i,e)}_tryViewportBasedRV1(){this._canPredict()?this._predicted(1,!1):this.log.debug("Cannot predict - no ads in player queue")}}const Ss=class extends vn{constructor(e){super(e),this.log=new A.A({unitType:this.model.get("unitType"),className:"userEventPredict",version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this.predictPath="predictors.userEvent",this.eventType=this.model.get("".concat(this.predictPath,".event.type")),this.selector=this.model.get("".concat(this.predictPath,".event.selector")),this.predictKey=this.model.get("".concat(this.predictPath,".predictPoints")),this._bindUserEvent()}_bindUserEvent(){if(this.eventType&&this.selector){var e=document.querySelector(this.selector);e?(this.log.predict("Binding event '".concat(this.eventType,"' to selector '").concat(this.selector,"'")),e.addEventListener(this.eventType,(()=>this._onUserEvent()),{once:!0})):this.log.predict("No elements found for selector: ".concat(this.selector))}else this.log.predict("Invalid eventType or selector")}_onUserEvent(){this.log.predict("Event '".concat(this.eventType,"' triggered for selector '").concat(this.selector,"', predicting key '").concat(this.predictKey,"'")),this._predicted(this.predictKey)}};var ws=s(140);class Ts extends Jt.A{constructor(e){var{model:t,onPredictCallback:i}=e;super({model:t,onPredictCallback:i}),this.model=t,this.onPredictCallback=i,this.log=new A.A({unitType:this.model.get("unitType"),className:"seerService",version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this.activePredict={},this._handleForcePredict(),this._createPlayerReadyPredict(),this._createRequestedPredictors()}_handleForcePredict(){var e=this.model.get("seer.force");Array.isArray(e)?(this._activatePredictors(e),this._disableAllPredictsExpectGiven(...e)):ws.isString(e)&&(this._activatePredictor(e),this._disableAllPredictsExpectGiven(e))}_disableAllPredictsExpectGiven(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=this.model.get("predictors");Object.keys(n).filter((e=>"isGet1OnlyAfterAdLoaded"!==e&&!t.includes(e))).forEach(this._disablePredict.bind(this))}_disablePredict(e){this.model.set("predictors.".concat(e,".isActive"),!1),this.model.set("predictors.".concat(e,".isStartWF"),!1)}multiAd(){this.activePredict.multiAd||(this.activePredict.multiAd=[]);var e=this.model.get("predictors.multiAd.predictPoints");this._createMultiPointPredict({predictPoints:e,pointKey:"qState",predictArr:this.activePredict.multiAd,predict:Rn})}emptyQueue(){this.activePredict.emptyQueue=this._createPredict(kn,this.getAdProperties("emptyQueue"))}getAdFail(){this.activePredict.getAdFailPredict=this._createPredict(In,this.getAdProperties("getAdFail"))}autoKill(){this.activePredict.autoKillPredict=this._createPredict(fn,this.getAdProperties("autoKill"))}fullEligibility(){this.activePredict.fullEligibilityPredict=this._createPredict(Fn,this.getAdProperties("fullEligibility"))}distancePercent(){this.activePredict.distancePercent||(this.activePredict.distancePercent=[]);var e=this.model.get("predictors.distancePercent.predictPoints");this._createMultiPointPredict({predictPoints:e,pointKey:"requirePercentageToSelector",predictArr:this.activePredict.distancePercent,predict:Pn})}distancePixels(){this.activePredict.distancePixels||(this.activePredict.distancePixels=[]);var e=this.model.get("predictors.distancePixels.predictPoints");this._createMultiPointPredict({predictPoints:e,pointKey:"pixelsFromSelectors",predictArr:this.activePredict.distancePixels,predict:xn})}userEvent(){this.activePredict.userEvent||(this.activePredict.userEvent=[]),this.activePredict.userEvent=this._createPredict(Ss,{})}immediateStart(){this.activePredict.immediateStartPredictor=this._createPredict(us,this.getAdProperties("immediateStart"))}watchVideo(){this.activePredict.watchVideoPredict=this._createPredict(fs,this.getAdProperties("watchVideo"))}prebid(){this.activePredict.prebidPredictor=this._createPredict(_s,this.getAdProperties("prebid"))}adx(){this.activePredict.adxPredictor=this._createPredict(ms,this.getAdProperties("adx"))}multiWidget(){this.activePredict.multiWidgetPredict=this._createPredict(As,this.getAdProperties("multiWidget"))}firstScroll(){this.activePredict.firstScrollPredict=this._createPredict(Vn,this.getAdProperties("firstScroll"))}time(){this.activePredict.time||(this.activePredict.time=[]);var e=this.model.get("predictors.time.predictPoints");"number"==typeof e||Array.isArray(e)?this._createPredict($n,{}):this._createMultiPointPredict({predictPoints:e,predictArr:this.activePredict.time,predict:$n})}intersection(){this.activePredict.intersectionPredict||(this.activePredict.intersectionPredict=[]);var e=this.model.get("predictors.intersection.predictPoints");this._createMultiPointPredict({predictPoints:e,pointKey:"intersectionPercent",predictArr:this.activePredict.intersectionPredict,predict:Gn})}mp4(){this.activePredict.mp4Predict=this._createPredict(Yn,this.getAdProperties("mp4"))}msnFullEligibility(){this.activePredict.msnFullEligibilityPredict=this._createPredict(ns,{})}feedInViewPredict(){this.activePredict.feedInViewPredict=this._createPredict(rs,this.getAdProperties("feedInViewPredict"))}recoReel(){this.activePredict.recoReelPredict||(this.activePredict.recoReelPredict=[]);var e=this.model.get("predictors.recoReel.predictPoints");this._createMultiPointPredict({predictPoints:e,pointKey:"percentage",predictArr:this.activePredict.recoReelPredict,predict:ds})}postRepeat(){this.activePredict.postRepeat=this._createPredict(cs,{})}_createPlayerReadyPredict(){this.log.debug("Creating player ready predict"),this.model.get("predictors.playerReady")&&this.model.get("predictors.playerReady.isActive")&&(this.activePredict.playerPredict=this._createPredict(Nn,this.getAdProperties("playerReady"))),this.log.debug("playerReadyPredict created")}onPredict(e,t,i){this.model.get("stopPredicts")&&y.l.PREDICT_NAMES[t]!==y.l.PREDICT_NAMES.postRepeatPredictor||(this.model.set("nextPredictName",t),this.model.set("nextPredict",e),this.onPredictCallback(t?y.l.PREDICT_NAMES[t]:-1,i))}startWF(){this.model.set("startWF",!0)}_createRequestedPredictors(){if(this.model.get("playerState")===Me.A.readyState){var e=this.model.get("predictors")||{};Object.keys(e).forEach((t=>{var i=e[t];i&&this[t]&&(i.isActive||i.isStartWF)&&!this.activePredict[t]&&(this.log.info("Predict activePredict",t),ws.defer(this[t].bind(this)))}))}else this.model.listenToOnce(this.model,"change:playerState",this._createRequestedPredictors.bind(this))}_activatePredictors(e){e.forEach((e=>{this._activatePredictor(e)}))}_activatePredictor(e){this.model.set("predictors.".concat(e,".isActive"),!0)}_createMultiPointPredict(e){var t=e.predictPoints,i=e.pointKey,n=e.predictArr,s=e.predict;ws.each(t,((e,t)=>{n.push(this._createPredict(s,{predictPoint:e[i],predictKey:void 0!==e.key?e.key:t,adProperties:{adProperties:e.adProperties,excAdProperties:e.excAdProperties}}))}))}_createPredict(e,t){return ws.extend(t,{model:this.model,onPredict:this.onPredict,startWfFunc:this.startWF,onPredictCallback:this.onPredictCallback}),new e(t)}getAdProperties(e){return{adProperties:{adProperties:this.model.get("predictors.".concat(e,".adProperties")),excAdProperties:this.model.get("predictors.".concat(e,".excAdProperties"))}}}}const Ps=Ts;function Es(e){return e.get("isUseHasFocus")?document.hasFocus():!document.hidden}var Cs=s(391),xs=s(140);class Os extends W.f{constructor(e){super(e),this.model=e,this.shouldConsiderBlurAsTabOut=this.model.get("usePageEventsForTabStatus")&&!0===this.model.get("isMobile");var t=Es(this.model);this.model.set("isInTab",t),this.log=new A.A({unitType:this.model.get("unitType"),className:"tabStatusService",version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this.bindEvent()}bindEvent(){this.model.listenTo(Cs,"window:tab:change",this._onTabEvent.bind(this))}_onTabEvent(e){this.model.set("tabState",xs.find(Object.keys(y.l.TAB_STATE),(t=>y.l.TAB_STATE[t]===e))),this._isTabOut(e)?this.model.set("isInTab",!1):this.model.set("isInTab",!0)}_isTabOut(e){return e===y.l.TAB_STATE.tabOut||!!this.shouldConsiderBlurAsTabOut&&e===y.l.TAB_STATE.blur}}const Is=Os;var Rs=s(140),Ns=s(391);function Ds(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function Ms(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Ds(Object(i),!0).forEach((function(t){Vs(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Ds(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function Vs(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class ks{constructor(e){var{logger:t,model:i,availablePlacements:n}=e;this.log=t,this.model=i,this.availablePlacements=n,this.allowedPlacement=null,this.taboolaStreamPrefix="taboola-stream-",this.isMobile=this.model.get("isMobile"),this.yahooUIMode=this.model.get("yahooUIMode")||y.l.YAHOO_UI_MODES.STANDARD,this.figureClassName=this.isMobile&&Rs.isPortrait()?"taboola-stream-figure-mobile":"taboola-stream-figure-desktop",this.yahooImplementation=this.model.get("yahoo.implementation")||{};var s,o,{moduleStreamSelectorType:a="id",moduleStreamId:r="module-stream",streamWrapperSelector:l="ul",identifierAttribute:d="data-placement-name",placementPrefix:c="taboola-stream-"}=this.yahooImplementation;this.placementConfig={moduleStreamSelectorType:a,moduleStreamId:r,streamWrapperSelector:l,identifierAttribute:d,placementPrefix:c,regexPattern:(s=c,o=!0,o?new RegExp("^".concat(s,"(\\d+)$")):new RegExp("^".concat(s)))}}_getFigureStyle(e,t){var i=t.querySelector("[data-item-id]"),n=e.querySelector(y.l.SC_SELECTORS.TRC_RBOX_OUTER),s=window.getComputedStyle(i),o=window.getComputedStyle(n),a=parseFloat(null==s?void 0:s.marginLeft)||0,r=parseFloat(null==o?void 0:o.marginLeft)||0,l=i.offsetLeft-a-(r+a),d={position:"absolute",top:"".concat(i.offsetTop,"px"),width:"auto","z-index":"1"};return this.isMobile||(d=Ms(Ms({},d),{},{float:s.float,left:"".concat(l,"px"),margin:"".concat(s.marginTop," ").concat(s.marginRight," ").concat(s.marginBottom," ").concat(s.marginLeft)})),Object.entries(d).map((e=>{var[t,i]=e;return"".concat(t,": ").concat(i)})).join("; ")}processStreams(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;this.allowedPlacement="".concat(this.placementConfig.placementPrefix).concat(e);var t=document.querySelector("[".concat(this.placementConfig.moduleStreamSelectorType,'="').concat(this.placementConfig.moduleStreamId,'"]'));if(t){var i=t.querySelector(this.placementConfig.streamWrapperSelector);if(i)this._observeStreamChanges(i),this._trecsRenderHandler(e),i.querySelectorAll("div[".concat(this.placementConfig.identifierAttribute,'^="').concat(this.placementConfig.placementPrefix,'"]')).forEach((t=>this._processStreamElement(t,e)));else this.log.error("No <ul> found within #module-stream.")}else this.log.error('Element with ID "'.concat(this.placementConfig.moduleStreamId,'" not found.'))}_updatePlacementRects(){for(var[e,t]of this.availablePlacements){var i=t.element;i?(t.rect=Rs.safeGetBoundingClientRect(i),this.availablePlacements.set(e,t)):this.log.warning("Element for placement ".concat(e," not found."))}}_calculatePlacementMargin(e,t){return e&&t?t.top-e.bottom:Number.MAX_VALUE}_calculateSafePlacementMargin(){var e=window.innerHeight||document.documentElement.clientHeight,t=document.querySelector(y.l.SC_SELECTORS.TRC_RBOX_OUTER).offsetHeight;if(!e||!t)return y.l.STREAM.DEFAULT_MARGIN_3_ELEMENTS;var i=t*y.l.STREAM.HEIGHT_AND_HEADER_MARGIN_FACTOR;return e*this._calculateRemainingPercentage(i,e)}_calculateRemainingPercentage(e,t){return 1-e/t}_hasEnoughPlacementMargin(e,t){var i=this._calculateSafePlacementMargin();return this._calculatePlacementMargin(t,e)>=i}_estimatePlacementPosition(e){var t=parseInt(e.replace("".concat(this.placementConfig.placementPrefix),""),10),i=Array.from(this.renderedPlacements.values()).pop(),n=null==i?void 0:i.rect,s=this._calculateSafePlacementMargin(),o=n?n.height:250,a=n?n.bottom+s:500*t;return{top:a,bottom:a+o,left:0,right:window.innerWidth,height:o,width:window.innerWidth}}_processStreamElement(e,t){var i=this._getValidPlacementMatch(e,this.placementConfig);if(i){var n=parseInt(i[1],10);if(!(n<t)){var s="".concat(this.placementConfig.placementPrefix).concat(n,"-video"),o=this._getInternalTrc(e);if(this.figureStyle=this._getFigureStyle(e,o),o){this._updatePlacementRects();var a=Array.from(this.availablePlacements.values()).pop(),r=null==a?void 0:a.rect,l=Rs.safeGetBoundingClientRect(o)||this._estimatePlacementPosition(n);a&&!this._hasEnoughPlacementMargin(l,r)||(this.availablePlacements.set(e.id,{rect:l,element:o}),o.querySelector("#".concat(s))||(this._insertFigure(s,o),this._setupWidget(s,i[0])))}else this.log.warning('No div with id starting "internal_trc_" found in '.concat(e.id))}}}_getValidPlacementMatch(e,t){if(e.classList.contains("scrollable-carousel-placement"))return null;var i=e.getAttribute(t.identifierAttribute);return i?i.match(t.regexPattern):null}_getInternalTrc(e){return e.querySelector('div[id^="internal_trc_"]')}_isAlreadyHasFigure(e,t){return e.querySelector("#".concat(t))}_insertFigure(e,t){var i=document.createElement("figure");i.id=e,i.classList.add(this.figureClassName,this.yahooUIMode,y.l.SC_WRAPPER_SELECTORS.THUMB,y.l.SC_WRAPPER_SELECTORS.VIDEO_CUBE,y.l.SC_WRAPPER_SELECTORS.SYNDICATED_ITEM),i.style.cssText=this.figureStyle,t.insertBefore(i,t.firstChild),this.log.info("Inserted <figure> with ID: ".concat(e," inside ").concat(t.id))}_setupWidget(e,t){Ns.trigger("createSubWidgetController",{placement:t,parentSelector:"#".concat(e),yahooUIMode:this.yahooUIMode})}_observeStreamChanges(e){new MutationObserver(this._triggerStreamBatchLoaded.bind(this)).observe(e,{childList:!0})}_triggerStreamBatchLoaded(){Ns.trigger("streamBatchLoaded")}_trecsRenderHandler(e){window._taboola=window._taboola||[],window._taboola.push({listenTo:"render",handler:t=>{var i=t.detail.container;i&&i.nodeType===Node.ELEMENT_NODE&&this._getInternalTrc(i)&&this._processStreamElement(i,e)}})}}class Ls{constructor(e){var{model:t,logger:i,multiWidgetPlacementService:n}=e;this.model=t,this.log=i||new A.A({unitType:t.get("unitType"),className:"MultiWidgetAdHandler",version:t.get("version"),isDebug:t.get("isDebug")}),this.multiWidgetPlacementService=n,this.adQueue=[]}handleReadyAd(e,t){if(e){var i=this.getAdRV(e);this.log.info("Handling ready ad (RV".concat(i,")"),{queue:this.getQueueStatus()}),i===y.l.RV_TYPES.RV?this._handleRV1Ad(e,t):this._handleRV0Ad(e,t)}else this.log.warn("handleReadyAd called with no ad.")}_handleRV1Ad(e,t){var i=this.multiWidgetPlacementService.findBestPlacementForRV1(t);if(i){var{placement:n,isReplacement:s}=i,o=t.get(n);s?(this.log.info("Found replacement for RV1 ad in ".concat(n)),this._replaceAdInPlacement(e,o)):(this.log.info("Found empty placement for RV1 ad in ".concat(n)),this._assignAdToPlacement(e,o))}else this.log.info("No suitable placement for RV1 ad, queueing with high priority."),this.addAd(e,!0)}_handleRV0Ad(e,t){var i=this.multiWidgetPlacementService.findRV0AssignablePlacement(t);if(i){this.log.info("Found placement for RV0 ad in ".concat(i));var n=t.get(i);n.assignAd(e,n.model.get("isRendered"))}else this.log.info("No suitable placement for RV0 ad, queueing with standard priority."),this.addAd(e,!1)}handleInViewportSwitching(e,t){if(t&&t.activeAd&&!t.isRV){var i=this.getFirstAdByRV(y.l.RV_TYPES.RV);i&&(this.log.info("Upgrading in-viewport RV0 ad in ".concat(e," with a queued RV1 ad.")),this._replaceAdInPlacement(i,t))}}_replaceAdInPlacement(e,t){t&&t.activeAd&&(t.model.set("replacementContext","priority_replacement"),t.assignAd(e,!0),this.log.info("Replaced ad in ".concat(t.placement," with RV").concat(this.getAdRV(e)," ad.")))}_assignAdToPlacement(e,t){t&&(t.assignAd(e,!1),this.log.info("Assigned ad to empty placement ".concat(t.placement)))}getAvailableAd(){var e=this.getFirstAdByRV(y.l.RV_TYPES.RV)||this.adQueue.shift();return this.model.set("hasAvailableAds",this.adQueue.length>0),e}addAd(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this.adQueue.unshift(e):this.adQueue.push(e),this.model.set("hasAvailableAds",this.adQueue.length>0)}getAdRV(e){var t;return null!=e&&null!==(t=e.adData)&&void 0!==t&&t.requiredViewability?y.l.RV_TYPES.RV:y.l.RV_TYPES.NON_RV}getFirstAdByRV(e){var t=this.adQueue.findIndex((t=>this.getAdRV(t)===e));if(t>-1){var[i]=this.adQueue.splice(t,1);return this.model.set("hasAvailableAds",this.adQueue.length>0),i}}getQueueStatus(){return{total:this.adQueue.length,rv0:this.adQueue.filter((e=>this.getAdRV(e)===y.l.RV_TYPES.NON_RV)).length,rv1:this.adQueue.filter((e=>this.getAdRV(e)===y.l.RV_TYPES.RV)).length,hasAds:this.adQueue.length>0}}clearQueue(){this.adQueue=[],this.model.set("hasAvailableAds",!1)}}class Fs{constructor(e){var{model:t,logger:i}=e;this.model=t,this.log=i||new A.A({unitType:t.get("unitType"),className:"MultiWidgetPlacementService",version:t.get("version"),isDebug:t.get("isDebug")})}findRV0AssignablePlacement(e){var t=Array.from(e.values()).find((e=>e.canAssignAd()&&!e.isInViewPort));return t?t.placement:this.findAnyAssignablePlacement(e)}findBestPlacementForRV1(e){var t=Array.from(e.values()),i=t.find((e=>e.isInViewPort&&e.activeAd&&!1===e.isRV));if(i)return{placement:i.model.get("placement"),isReplacement:!0};var n=t.filter((e=>!e.activeAd)).map((e=>({placement:e.model.get("placement"),distance:e.distanceFromViewport||1/0,isInViewPort:e.isInViewPort}))).sort(((e,t)=>e.isInViewPort!==t.isInViewPort?e.isInViewPort?-1:1:e.distance-t.distance));if(n.length>0)return{placement:n[0].placement,isReplacement:!1};var s=t.filter((e=>!e.isInViewPort&&e.activeAd&&!1===e.isRV)).map((e=>({placement:e.model.get("placement"),distance:e.distanceFromViewport||1/0}))).sort(((e,t)=>e.distance-t.distance));return s.length>0?{placement:s[0].placement,isReplacement:!0}:void 0}findAnyAssignablePlacement(e){var t=Array.from(e.values()).find((e=>e.canAssignAd()));return!!t&&t.model.get("placement")}}var Bs=s(568),zs=s(391);function Us(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class Hs extends W.f{constructor(e){super(e),Us(this,"createSubModel",(()=>Bs.extend(!0,{},this.model))),Us(this,"getSubModel",(()=>Bs.extend(!0,{},this.initialModel))),this.model=e.model,this.yahooUIMode=this.model.get("yahooUIMode")||y.l.YAHOO_UI_MODES.STANDARD,this.availablePlacements=new Map,this.subWidgetsList=new Map,this.initialModel=this.createSubModel(),this._initDependencies(),this._initServices(),this._initStateHandlers(),this.taboolaStreamProcessor.processStreams(this.model.get("taboolaStreamIndex")||10)}_initDependencies(){this.log=new A.A({unitType:this.model.get("unitType"),className:this.constructor.name||"widgetManager",version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this.playerLoader=new pn(this.model),this.windowEventManager=he(),this.tabStatusService=new Is(this.model),this.playerService=new hn(this.model),this.adsManager=new qi(this.model),this.seerService=new Ps({model:this.model,onPredictCallback:this._handleAdPrediction.bind(this)}),this.playerQueueSeeker=new sn(this.model),this.pixelsService=new Ji(this.model),this.taboolaStreamProcessor=new ks({logger:this.log,model:this.model,availablePlacements:this.availablePlacements})}_initServices(){this.multiWidgetPlacementService=new Fs({model:this.model,logger:this.log}),this.multiWidgetAdHandler=new Ls({model:this.model,logger:this.log,multiWidgetPlacementService:this.multiWidgetPlacementService})}_initStateHandlers(){this.createStateHandlers([{event:"hasReadyAd:true",funcName:"_handleReadyAd"}]),zs.on("playerState:closed",this._closePlayer.bind(this)),zs.on("createSubWidgetController",this._createSubWidgetController.bind(this)),zs.on("scrolledIntoView",this._handleScroll.bind(this,y.l.SCROLL.INTO_VIEW)),zs.on("scrolledOutOfView",this._handleScroll.bind(this,y.l.SCROLL.OUT_OF_VIEW)),zs.on("replaceAdOnEligiblePlacement",this._setNextAd.bind(this)),zs.on("checkAvailableAds",this._checkAvailableAds.bind(this)),zs.on("setupSCNAS",this._setupSCNAS.bind(this))}_setupSCNAS(){var e,t=this.yahooUIMode.toUpperCase(),i=document.querySelector(y.l.SC_SELECTORS.SC_DATA_ITEM[t])||document.querySelector(y.l.SC_SELECTORS.SC_DATA_ITEM.STANDARD),n=null==i?void 0:i.querySelector(y.l.SC_SELECTORS.VIDEO_LABEL_BOX);n&&(e=n,fi||(fi=new vi(e)))}_setupNewModel(e,t){var i=this.getSubModel();return i.set("modelId",Date.now()),i.set("placement",e),i.set("parentSelector",t),i}_handleScroll(e,t,i){var n=this.subWidgetsList.get(i);n&&(e===y.l.SCROLL.INTO_VIEW?(n.updateEligibility(!0,"scrollIntoView"),this.log.info(" Placement ".concat(i," scrolled INTO view - eligibility updated")),this.multiWidgetAdHandler.handleInViewportSwitching(i,n)):e===y.l.SCROLL.OUT_OF_VIEW&&(n.updateEligibility(!1,"scrollOutOfView"),this.log.info(" Placement ".concat(i," scrolled OUT OF view - eligibility updated"))))}_checkAvailableAds(){var e=this.multiWidgetAdHandler.getQueueStatus();this.model.set("hasAvailableAds",e.hasAds)}_closePlayer(){var e;null===(e=this.playerService)||void 0===e||e.close()}_handleAdPrediction(e,t){this.adsManager.adPredict(e,t)}_handleReadyAd(){var e=this.model.getNextAd();e?this.multiWidgetAdHandler.handleReadyAd(e,this.subWidgetsList):this.log.warn("No ready ad available")}_createSubWidgetController(e){var{placement:t,parentSelector:i,yahooUIMode:n}=e;this._updateCustomization(t);var s=this._setupNewModel(t,i);if(!this.subWidgetsList.has(t)){var o=new Vi({model:s,globalModel:this.model,ad:this.multiWidgetAdHandler.getAvailableAd(),yahooUIMode:n,manager:this});return this.subWidgetsList.set(t,o),o}}_setNextAd(e,t){var i=this.subWidgetsList.get(t);if(i){i.model.get("replacementContext")||i.model.set("replacementContext","natural_completion"),i.model.set("waitingForAd",!0),i.activeAd=void 0;var n=this.multiWidgetAdHandler.getAvailableAd();n&&i.canAssignAd()&&(i.assignAd(n,i.model.get("isRendered")),this.log.info(" Ad replaced on placement: ".concat(t),{adRV:this.multiWidgetAdHandler.getAdRV(n),replacementContext:i.model.get("replacementContext")}))}else this.log.warn("SubWidget not found for placement: ".concat(t))}_updateCustomization(e){var t,i=document.querySelector('[data-placement-name="'.concat(e,'"]'));if(i){var n=window.getComputedStyle(i),s=parseFloat(n.width)||0,o=parseFloat(n.height)||0;this.initialModel.set("customization.unitContainer",{width:"".concat(s,"px"),height:"".concat(o,"px")}),null!==(t=this.playerService)&&void 0!==t&&t.player?this.playerService.player.resize(s,o):(this.model.set("width",s),this.model.set("height",o))}}}const Ws=Hs;var js=s(391),Gs=s(568),$s=s(140),Ys={title:"._cm-ad-title",placeholder:"._cm-inline-video"},qs=0,Ks=1,Qs=2;class Zs extends Ke.A{initialize(e){this.log=new A.A({unitType:this.model.get("unitType"),className:"FeedContainerView",version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this.template='<div class="_cm-ad-title"></div> <div class="_cm-inline-video"></div> ',this.animationCss={transition:"all 200ms ease-in-out"},this.noAnimationCss={transition:"none"},this.model.get("unitType")===y.l.WIDGET_ITEM.NAME&&this.$el.attr("class","_cm-widget-item"),this.model.get("isFitToSize")?(this.isFitToSize=!0,this.placeholderSizeType=qs,this.$el.addClass("_cm-fit-to-size")):this.model.get("unitType")===y.l.WIDGET_ITEM.NAME?this.placeholderSizeType=Qs:this.placeholderSizeType=Ks,this.model.set("containerViewState",Me.A.readyState),this.createStateHandlers([{event:"videoViewState:detached",funcName:"_detachCss"},{event:"videoViewState:attached",funcName:"_attachCss"}])}_bindWindowEvents(){this.isFitToSize?(this.listenTo(js,"window:orientation:change",this.terminate.bind(this)),this.listenTo(js,"window:resize:change",this.terminate.bind(this,!0))):(this.listenTo(js,"window:orientation:change",this._orientationChange.bind(this)),this.listenTo(js,"window:resize:change",this._onPlaceHolderDomChange.bind(this))),this.listenTo(js,"window:scroll:change",this._onPlaceHolderDomChange.bind(this,!1)),this.listenTo(js,"taboola:readmore:click",this._onPlaceHolderDomChange.bind(this,!0)),this.listenTo(js,"publisher:dom:change",this._onPlaceHolderDomChange.bind(this,!0)),this.bindLoaderEvens()}bindLoaderEvens(){this.model.get("isStartWithLoader")&&this.createStateHandlers([{event:"progressLoaderTimerReached:true",funcName:"onLoaderEnded",isListenOnce:!0}])}_positionPreserve(){var e=this.container.getBoundingClientRect().top;e!==this.lastPosition&&(this._onPlaceHolderDomChange(),this.lastPosition=e),requestAnimationFrame(this._positionPreserve.bind(this))}render(e){this.container=e,this.$container=Gs(this.container),this.model.get("isYahooWidget")&&(this.lastPosition=this.container.getBoundingClientRect().top,this._positionPreserve()),this.renderTemplate(),this._customize(),this.el.id="_cm-video-unit",Gs(e).append(this.el),this._onPlaceHolderDomChange(),this.model.set("containerViewPlaceHolder",this.ui.placeholder[0]),this._bindWindowEvents(),this.model.set("containerViewState",Me.A.containerViewState.rendered),$s.trcPerformanceMeasurement(this.model.get("trcPerformanceMeasurementEnabled"),"videoInitToRender".concat(this.model.get("perfUnitType")),y.l.TRC_PERFORMANCE_ACTIONS.STOP)}terminate(e,t){e&&t&&Math.abs(t.heightChange)<this.model.get("allowedHeightChange")&&0===t.widthChange||(this.model.set("isTerminateOnResize",!0),this.stopListening(js,"window:scroll:change"),this.model.set("closeState",Me.A.closeState.terminate))}hide(){this.$el.hide()}show(){this.$el.show(),this._onPlaceHolderDomChange()}close(){if(this.model.get("unitType")===y.l.WIDGET_ITEM.NAME){if(this._runAnimation(!1,this.hide.bind(this)),this.model.get("isMobile")){var e,t=null===(e=document.querySelector(".mobile-stream-item"))||void 0===e?void 0:e.closest(".stream-item");t&&(t.style.height="auto")}this.model.set("closeState",Me.A.closeState.containerViewClosed)}else setTimeout(function(){this.model.set("closeState",Me.A.closeState.containerViewClosed)}.bind(this),1500)}_customize(){var e=this.model.get("customization.unitContainer");if(this.model.get("isCoverWidgetHorizontal")){var t=this.container.parentElement.clientWidth;e.width="".concat(t,"px")}if(this.model.get("isCoverWidgetVertical")){for(var i=0,n=Gs(".trc_rbox_outer"),s=0;s<n.length;s++){if(Gs(this.container,n[s]).length>0){i=n[s].clientHeight;break}}e.height="".concat(i,"px")}this.model.get("streamDrawerPlacement")===y.l.STREAM_DRAWER_PLACEMENTS.STREAM_PLACEMENT.NAME&&(this.$container[0].style.zIndex=1,this.model.set("customization",{placeHolder:{margin:"0px",width:"auto"}})),this.model.get("streamDrawerPlacement")===y.l.STREAM_DRAWER_PLACEMENTS.DRAWER_PLACEMENT.NAME&&this.model.set("customization",{placeHolder:{height:"auto"}});var o=this.model.get("customization.placeHolder"),a=this.model.get("customization.adTitle");switch(this.placeholderSizeType){case qs:this._customizeFitToSize();break;case Ks:this._customizeFeed();break;case Qs:this._customizeWidget()}this.$el.css($s.toCssObj(e)),this.ui.title.css($s.toCssObj(a)),this.ui.placeholder.css($s.toCssObj(o))}_customizeFitToSize(){this._updateBrandingStyle(),this.ui.title.css("display","none")}_minimizeCard(){this.log.info("_minimizeCard");var e=$s.height(Gs("._cm-inline-video",this.$el)[0])+this._getElementHeight(Gs("._cm-branding-title",this.$el))+"px";this.$el.css({height:e}),this.$el.css(this.animationCss),this.bottomCard=Gs(this.$el.parent()).next(),this.cardOriginalheight=$s.height(this.bottomCard[0]),this.bottomCard.css({height:this.cardOriginalheight}),this.bottomCard.css(this.animationCss),this.bottomCard.css({height:e}),setTimeout(function(){this.bottomCard.css(this.noAnimationCss)}.bind(this),200)}_getElementHeight(e){return $s.height(e[0])+(Number(e.css("margin-top").replace("px",""))+Number(e.css("margin-bottom").replace("px","")))+(Number(e.css("padding-top").replace("px",""))+Number(e.css("padding-bottom").replace("px","")))}_restoreBottomCard(){this.bottomCard.css({height:this.cardOriginalheight}),setTimeout(function(){this.bottomCard.css(this.noAnimationCss),this.bottomCard.css({height:"auto"})}.bind(this),200)}_customizeWidget(){this.ui.title.css("display","none"),this.$el.height("auto")}_customizeFeed(){this.ui.title.text(this.model.get("unitTitle"))}_onPlaceHolderDomChange(){this._calcPlaceholderSize(),this._calcPlaceholderPosition()}_calcPlaceholderSize(){switch(this.placeholderSizeType){case qs:this._calcPlaceholderSizeFitToSize();break;case Ks:this._calcPlaceholderSizeFeed();break;case Qs:this._calcPlaceholderSizeWidgetItem()}}_calcPlaceholderSizeFitToSize(){this.isAnimated||(this._runAnimation(!0,js.trigger.bind(js,"renderAnimation:completed")),this.isAnimated=!0);var{containerWidth:e,containerHeight:t}=this._getContainerSize(),i=$s.getVideoBestSize(e,t);this.model.set("videoPlaceholderSize",i),this.ui.placeholder.css(i),this.model.set("width",i.width),this.model.set("height",i.height),this.model.trigger("change:videoPlaceholderSize",this.model,this.model.get("videoPlaceholderSize"))}_getContainerSize(){if(this.model.get("streamDrawerPlacement")===y.l.STREAM_DRAWER_PLACEMENTS.DRAWER_PLACEMENT.NAME)return this._getDrawerContainerSize();if(this.model.get("streamDrawerPlacement")===y.l.STREAM_DRAWER_PLACEMENTS.STREAM_PLACEMENT.NAME)return this._getAndHandleStreamContainerSize();var e=this.$container[0];return{containerHeight:$s.height(e),containerWidth:$s.width(e)}}_getDrawerContainerSize(){var e=$s.safeGetBoundingClientRect(document.querySelector(".stream-related-item .item-thumbnail-href > .thumbBlock_holder")).height;return{containerHeight:e,containerWidth:$s.getVideoWidthByRatio(e,this.model.get("aspectRatioNum"))}}_getAndHandleStreamContainerSize(){var e,t,i,n=this.model.get("yahooUIMode");(n===y.l.YAHOO_UI_MODES.STANDARD?e="[data-test-locator=".concat(this.model.get("isMobile")?y.l.STREAM_DRAWER_PLACEMENTS.STREAM_PLACEMENT.PLACEMENT_ITEM:y.l.STREAM_DRAWER_PLACEMENTS.STREAM_PLACEMENT.PLACEMENT_THUMBNAIL):n===y.l.YAHOO_UI_MODES.MEGA?e="[data-test-locator=mega] > .Cf > div:first-child":n===y.l.YAHOO_UI_MODES.APAC_STREAM?e=".stream-panel.active [data-test-locator=apac-stream-item-image]":n===y.l.YAHOO_UI_MODES.ROCKET&&(e=document.querySelector("[data-ylk*=singlestory]").closest("div").previousSibling),n===y.l.YAHOO_UI_MODES.ROCKET&&this.model.get("isMobile"))?t=this.model.get("width"):t=e&&"object"==typeof e?e.clientWidth:(null===(i=document.querySelector(e))||void 0===i?void 0:i.clientWidth)||this.model.get("width");var s=$s.getVideoHeightByRatio(t,this.model.get("aspectRatioNum"))+(this.model.get("nasHeight")||0);if(this.model.get("isMobile")){if(!this.$container)return;var o="".concat(s,"px");this.$container.addClass("mobile-stream-item"),this.$container.height(o),this.$container[0].nextElementSibling.style.height=o,this.$container.closest(".stream-item").height(o)}return this.model.set("videoPlaceholderSize",{height:s,width:t}),{containerHeight:s,containerWidth:t}}_isMinimizeCardAvailable(e){this.model.get("isMinimizeCardOnMobile")&&this.model.get("isMobile")&&(e?setTimeout(function(){this._minimizeCard()}.bind(this),0):setTimeout(function(){this._restoreBottomCard()}.bind(this),0))}_runAnimation(e,t){$s.oneAnimationEnd(this.$el,function(){this.$el.removeClass("animated"),this.$el.removeClass("slideInTop"),this.$el.removeClass("slideOutTop"),t&&(t(),this._isMinimizeCardAvailable(e))}.bind(this));var i=this.model.get("openingEffect");i===y.l.OPENNING_EFFECT.NONE?e||this.hide():(i===y.l.OPENNING_EFFECT.REGULAR_EXPAND&&this.$el.addClass(e?"slideInTop":"slideOutTop"),this.$el.addClass("animated"))}_calcPlaceholderSizeWidgetItem(){var e=$s.width(this.ui.placeholder[0]);this.ui.placeholder.height($s.getVideoHeight(e));var t=$s.height(this.ui.placeholder[0]);this.model.set("videoPlaceholderSize",{width:e,height:t}),this.model.set("width",e),this.model.set("height",t),this.model.trigger("change:videoPlaceholderSize",this.model,this.model.get("videoPlaceholderSize"))}_calcPlaceholderSizeFeed(){var e=$s.width(this.ui.placeholder[0]),t=$s.getVideoHeight(e);this.model.set("width",e),this.model.set("height",t),this.$el.css({height:t+$s.height(this.ui.title[0]),width:e}),this.model.set("videoPlaceholderSize",{width:e,height:t}),this.model.get("videoViewState")!==Me.A.videoViewState.detached&&this.model.trigger("change:videoPlaceholderSize",this.model,this.model.get("videoPlaceholderSize"))}_calcPlaceholderPosition(){this.model.get("streamDrawerPlacement")&&this.model.set("offsetGetterType",1);var e=this._getPlaceholderSelector(),t=this.model.get("offsetGetterType"),i=this.model.get("isYahooWidget")?null:this.model.get("videoContainerSelector"),n=$s.getOffsetWithContainer(e,t,i),s=this.model.get("videoPlaceholderPosition"),o=this._isOffsetTopChanged(s,n);this._setPlaceholderPosition(n),this.model.get("adState")===Me.A.adState.renderOutOfView&&o&&this.model.set("reAttach",!0),this.model.trigger("change:model, positionObj",this.model,s)}_isOffsetTopChanged(e,t){return e&&e.top!==t.top}_setPlaceholderPosition(e){this.model.set("videoPlaceholderPosition",{top:e.top,left:e.left})}_getPlaceholderSelector(){var e=this.model.get("parentPlaceholderSelector");return e||(this.model.get("streamDrawerPlacement")?this.ui.placeholder.parent():this.ui.placeholder)}_orientationChange(){if(this.placeholderSizeType===Qs){var e=document.querySelector(".videoCube");this.model.set("customization.placeHolder",$s.cssObjToString(getComputedStyle(e)));var t=e.querySelector(".thumbBlock_holder");this.model.set("customization.unitContainer",$s.cssObjToString(getComputedStyle(t))),this._updateBrandingStyle(),this.$el.height("auto")}this._onPlaceHolderDomChange()}_updateBrandingStyle(){if(this.container.parentElement){var e=this.container.parentElement.querySelector(".videoCube"),t=e.querySelector(this.model.get("widgetTitleSelector"));t&&this.model.set("customization.titleContainer.title",$s.cssObjToString(getComputedStyle(t)));var i=e.querySelector(this.model.get("brandingTitleSelector"));i&&this.model.set("customization.titleContainer.branding",$s.cssObjToString(getComputedStyle(i)))}}hideUnit(){this._runAnimation(!1,this._isHideOnMidroll.bind(this)),this.model.set("isAnimationRunning",!0)}_isHideOnMidroll(){this.hide(),this.model.set("isAnimationRunning",!1)}onLoaderEnded(){this.hideUnit(),this.createStateHandlers([{event:"hasReadyAd:true",funcName:"show",isListenOnce:!0}])}get className(){return"_cm-inline"}get ui(){return this.UI?this.UI:this.UI=Ys}set ui(e){return this.UI=e}_detachCss(){this.$el.addClass("widget-detached"),this.$el.parent().addClass("widget-detached-figure")}_attachCss(){this.$el.removeClass("widget-detached"),this.$el.parent().removeClass("widget-detached-figure")}}const Xs=Zs;var Js=s(391),eo=s(568),to=s(140);const io=class extends yt{constructor(e){super(e),this.$el.addClass("_cm-video"),this.template=it,this.container=e.container||"body",this.isFirstAttach=!0,this.animationUtil=si(this.model),this.detachUtil=Wn(this.model),this.model.set("videoViewSize",{width:0,height:0}),this.isStickyCardActive=this.model.get("stickyCard.isActive"),this.copyPropertiesActive=this.model.get("copyProperties.isActive"),this.copyProprtiesSelector=document.querySelector(this.model.get("copyProperties.selector")),this.copyProprtiesMap=this.model.get("copyProperties.propertiesMap"),this.detachUtil.setStickParams(),this._terminateOnUrlChange(),this.render()}setNativeAdViewObj(e){this.nativeAdSettings=e}_bindEvents(){this.createStateHandlers([{event:"videoPlaceholderSize",funcName:"_onVideoPlaceholderSizeChange",withBind:!1},{event:"videoPlaceholderPosition",funcName:"_rePosition",withBind:!1},{event:["containerViewState:rendered","adState:playing"],funcName:"_startComponent",isListenOnce:!0},{event:["containerViewState:rendered","adState:".concat(Me.A.adState.renderOutOfView),"isOpenInViewPort:false"],funcName:"_startComponent",isListenOnce:!0},{event:"reAttach:true",funcName:"attach"},{event:"repeatState:clicked",funcName:"replayAd"},{event:"learnMoreWasClicked",funcName:"_onLearnMoreClick"},{event:"adState:repeating",funcName:"onHasReadyAd"},{event:"isEligibleToPlay",funcName:"checkEligible"},{event:"isInTab",funcName:"checkEligible"},{event:"videoViewState:detached",funcName:"checkEligible"},{event:"hasReadyAd:true",funcName:"onHasReadyAd"},{event:"adState:completed",funcName:"onAdComplete"},{event:"progressLoaderTimerReached:true",funcName:"hide",isListenOnce:!0},{event:"readMoreClicked:true",funcName:"playAd",isListenOnce:!0},{event:"closeState",funcName:"_onTerminate",isListenOnce:!0}]),this._setVolumeEvents(),Js.on("window:scroll:change",this._onWindowScroll.bind(this));var e=this.model.get("isMultiAd")&&!this.model.get("isPlacementSingleAd");this.model.get("isForceSwapToRV")&&e&&(this.currModel.on("hasReadyAd:true",this.onGotRVAd.bind(this)),this.currModel.on("change:isNextAdRV",this.onGotRVAd.bind(this))),this.model.listenTo(this.model,"displayingFullNAS",this._onDisplayingFullNAS.bind(this)),this.model.listenTo(this.model,"displayingNASTitleOnly",this._onDisplayingNASTitleOnly.bind(this))}render(){this.renderTemplate(),this._customize(),this.ui.video[0].id=this.videoAdId,this.$el.css({width:this.model.get("width"),height:"0px"}),eo(this.container).append(this.el),this.model.set("videoViewContainer",this.ui.video[0]),this.model.set("targetId",this.videoAdId),this.model.set("videoViewState",Me.A.videoViewState.rendered),this._addDisclosureText(),to.trcPerformanceMeasurement(this.model.get("trcPerformanceMeasurementEnabled"),"videoInitToRender".concat(this.model.get("perfUnitType")),y.l.TRC_PERFORMANCE_ACTIONS.STOP)}_startComponent(){this.isStartComponent=!0,this.attach(!0)}attach(e){this.log.info("attaching to placeholder"),this.model.set("videoViewState",Me.A.videoViewState.attached);var t=this.model.get("videoPlaceholderPosition");if(!isNaN(t.top)){var i=this.model.get("detachToSlider.animationTimes.attach"),n=!e&&this.model.get("detachToSlider").animation;this.attachedOnceToNewCard=!0,this.log.info("Attaching",this.$el),this.currentAnimation=y.l.ANIMATION_TYPE.attaching,this.isDetached=!1,this._resize(this.model,this.model.get("videoPlaceholderSize")),this.isFirstAttach&&this.$el.css({opacity:0}),this.isStickyCardActive&&(n=!1),this.model.set("floatingView",Me.A.floatingView.attach),this._attach(n,i),this.isFirstAttach&&this.animateOpacity(),this.model.set("reAttach",!1),this.isFirstAttach=!1}}_attach(e,t){this._hasNAS()&&(this.model.set("oldVideoPlaceholderPosition.height",this.model.get("videoPlaceholderPosition.height")),this.model.set("videoPlaceholderPosition.height",this.model.get("containerHeight"))),this.animationUtil.attach({$el:this.$el,target:this.model.get("videoPlaceholderPosition"),isAnimated:e,timeMS:t,additionalCss:this.model.get("additionalCss"),cb:this.postAttach.bind(this)}),this._hasNAS()&&this.model.set("videoPlaceholderPosition.height",this.model.get("oldVideoPlaceholderPosition.height"))}postAttach(){this.model.set("floatingView",Me.A.floatingView.postAttach),this.currentAnimation===y.l.ANIMATION_TYPE.attaching&&(this.currentAnimation=y.l.ANIMATION_TYPE.none,this._hasNAS()&&this._resize(this.model,this.sizeObject),this.model.get("isMultiAd")&&this.checkEligible())}animateOpacity(){var e=this.model.get("animation.transitionAnimationTime");this.animationUtil.animateOpacity({$el:this.$el,timeMS:void 0===e?y.l.TIME_UNITS.SECOND:e,opacity:1,cb:null})}detach(e,t){if(this.model.set("floatingView",Me.A.floatingView.detach),e||!this.isDetached){this.isDetached=!0,this.log.info("detaching"),this.currentAnimation=y.l.ANIMATION_TYPE.detaching;var i=t?0:this.model.get("detachToSlider.animationTimes.detach");this.isFirstDetach&&(this.model.get("animation.firstDetach"),function(e){throw new TypeError('"'+e+'" is read-only')}("animation")),this.detachUtil.setSliderSize();var n={width:this.model.get("detachToSlider.width"),height:this.model.get("detachToSlider.height")};this._resize(this.model,n),this.$el.css(this.model.get("additionalCss")),this.hide(),this._detach(i),this.model.set("videoViewState",Me.A.videoViewState.detached)}}_detach(e){var t=eo.extend(!0,{},this.detachToSlider);if(this._hasNAS()){var i=this.nativeAdSettings.getFloatingNASHeight();t.height+=i,this.model.set("detachToSlider.oldHeight",this.model.get("detachToSlider.height")),this.model.set("detachToSlider.height",this.model.get("detachToSlider.height")+i)}this.animationUtil.detach({$el:this.$el,timeMS:e,sliderOptions:t,isSlideIn:!1,cb:this.postDetach.bind(this)}),this._hasNAS()&&this.model.set("detachToSlider.height",this.model.get("detachToSlider.oldHeight"))}_hasNAS(){return this.nativeAdSettings&&this.nativeAdSettings.hasNAS}postDetach(){this.currentAnimation===y.l.ANIMATION_TYPE.detaching&&(this.currentAnimation=y.l.ANIMATION_TYPE.none)}hide(){this.$el.css("height","0px")}reShowUnit(){this.log.info("reopening unit"),this._rePosition(this.model,this.model.get("videoPlaceholderPosition")),this._resize(this.model,this.model.get("videoPlaceholderSize"))}close(){this.hide(),yt.prototype.close.call(this)}_resize(e,t){if(t&&((this.model.get("animation.onTransitionOpen")||this.model.get("openingEffect")===y.l.OPENNING_EFFECT.EXPAND_FROM_TOP)&&this.model.get("isExpanded")&&(this.$el.addClass("none-transition"),setTimeout(function(){this.$el.removeClass("none-transition")}.bind(this),1e3)),this.isStartComponent)){this.sizeObject=t;var i=eo.extend(!0,{},t);if(this._hasNAS()&&(i.height+=this.nativeAdSettings.detached?this.nativeAdSettings.getFloatingNASHeight():this.nativeAdSettings.getNASHeight()),this.model.get("streamDrawerPlacement")===y.l.STREAM_DRAWER_PLACEMENTS.STREAM_PLACEMENT.NAME){var n="#".concat(this.model.get("placement")).concat(this.model.get("yahooUIMode")===y.l.YAHOO_UI_MODES.STANDARD?"-container":""),s=document.querySelector(n),o=document.querySelector("".concat(n," .wafer-toggle"));i.width=s?"".concat(to.safeGetBoundingClientRect(s).width-(o?to.safeGetBoundingClientRect(o).width:0),"px"):"auto"}this.model.get("streamDrawerPlacement")===y.l.STREAM_DRAWER_PLACEMENTS.DRAWER_PLACEMENT.NAME&&(i.height="auto"),this.$el.css(i),this.model.set("videoViewSize",t,{silent:!0}),this.model.trigger("change:videoViewSize",this.model,this.model.get("videoViewSize"))}}_terminateOnUrlChange(){if(this.model.get("shouldTerminateOnUrlChange")){var e=location.href;document.body.addEventListener("click",(()=>{requestAnimationFrame((()=>{e!==location.href&&(this.model.set("closeState",Me.A.closeState.terminate),e=location.href)}))}),!0)}}onAdComplete(){this.setRepeatingAd(),this.activeAd=void 0;var e=this.model.get("unitType");if(this.model.get("isMultiAd")||this.model.get("isKeepViewOnMidroll")||this.repeatingAd||e!==y.l.WIDGET_ITEM.NAME){var t=!1;this.isDetached&&this.isStickyCardActive&&(t=!0,this.permanentAttach()),this.isSwappedAd&&!this.hadPossibleRV&&this.swapBackToSavedAd(t),this.model.get("isReplayAd")&&this._handleSingleAdCompletion(),this.model.get("isMultiAd")&&this.checkEligible(),this._handleNASOnAdChange(t),this.hadPossibleRV=!1}else this.model.set("closeState",Me.A.closeState.terminate)}_onTerminate(){var e;if(this.model.get("streamDrawerPlacement")){var t=Array.from(null===(e=this.el)||void 0===e?void 0:e.classList).filter((e=>e.startsWith("taboola-stream-")))[0],i=document.querySelector(".tbl-carousel-".concat(t,"-video"));i&&(i.parentElement.style.height="auto",i.style.display="block")}}_onReplayAd(){this.limitRepeatByTimer=clearTimeout(this.limitRepeatByTimer),this._handleNasOnSingleAd(!1),this.model.listenTo(this.model,"change:isEligibleToPlay",this.checkEligible.bind(this)),this.model.listenTo(this.model,"change:isInTab",this.checkEligible.bind(this))}_handleSingleAdCompletion(){this.model.set("detachToSlider.isDetachToSlider",!1),this.activeAd=this.repeatingAd,this._handleNasOnSingleAd(!0),this.model.stopListening(this.model,"change:isEligibleToPlay"),this.model.stopListening(this.model,"change:isInTab"),this.createStateHandlers([{event:"adState:repeating",funcName:"_onReplayAd"}]),this.limitRepeatByTimer=setTimeout((()=>this.permanentAttach()),this.model.get("limitRepeatTimerBySec")||5e3)}_handleNasOnSingleAd(e){this.isDetached&&this._hasNAS()&&(e?this.nativeAdSettings.hideFloatingNAS():this.nativeAdSettings.showFloatingNAS(),this._resize(this.model,this.isDetached?this.model.get("detachToSlider"):this.model.get("videoPlaceholderSize")))}onHasReadyAd(){this.model.get("isAnimationRunning")?this.createStateHandlers([{event:"isAnimationRunning:false",funcName:"onHasReadyAd",isListenOnce:!0}]):(this.checkEligible(),this.activeAd&&this.model.get("videoViewState")===Me.A.videoViewState.detached&&this.activeAd.resize(this.sizeObject))}checkEligible(){this._isEligibleToPlayChange(),this.model.get("isInTab")&&this.isEligibleToPlay()?(this.activeAd&&!this.model.get("postRepeatMode")||this.getReadyAd(),this.activeAd&&this.playAd()):this.isDetached||this.pauseAd(y.l.PAUSE_REASONS.LOST_ELIGIBILITY)}pauseAd(e){this.activeAd&&(this.log.info("Pause Ad: adId:".concat(this.activeAd.adId)),this.activeAd.pause(e))}_isEligibleToPlayChange(){if(this.canAttach())this.attach();else if(this.canDetach()){this.detach(),this.isStickyCardActive&&this.model.get("stickyCard.restrictions.adPercent.percent")&&this._setStickySizeRestrication()}}_setStickySizeRestrication(){if(!this.rvTimerWasSet){var e=to.getViewportHeight(this.model.get("scrollSelector"));if(this.model.get("height")/e*100>=this.model.get("stickyCard.restrictions.adPercent.percent")){this.rvTimerWasSet=!0;this.stickyTimer=new Ve(this.model,{startCondition:{stateToListen:"",state:""}},this._onStickyTimerEnd.bind(this,"Sticky timer subUnit end"),1e3*this.model.get("stickyCard.restrictions.adPercent.secondsToClose")),this.stickyTimer.start(this.model,"",null,!0)}}}isEligibleToPlay(){return!("pause"===this.model.get("onOutOfView")&&!this.model.get("isInTab"))&&(this.model.get("isInTab")?!!this.model.get("isEligibleToPlay")||this.model.get("videoViewState")===Me.A.videoViewState.detached:this.model.get("videoViewState")===Me.A.videoViewState.detached&&"play"===this.model.get("detachToSlider").onOutOfView)}canAttach(){return(!this.isStickyCardActive||!this.model.get("isEligibleToStick"))&&(!!this.model.get("isEligibleToPlay")&&(this.model.get("videoViewState")===Me.A.videoViewState.detached&&!!this.model.get("renderWasCalled")))}canDetach(){if(this.detachToSlider=this.model.get("detachToSlider"),this.model.get("isUnitHidden"))return!1;if(this.isStickyCardActive){if(!this._isActiveAdCanStick()||!this.model.get("isEligibleToStick"))return!1}else if(this.model.get("isEligibleToPlay"))return!1;return(this.model.get("videoViewState")===Me.A.videoViewState.attached||this.model.get("videoViewState")===Me.A.videoViewState.rendered)&&(!(this.model.get("videoViewState")===Me.A.videoViewState.rendered&&!this.detachToSlider.isStartFromSlider)&&(!!this.detachToSlider.isDetachToSlider&&(!!this.model.get("isInTab")&&!!this._isDetachAvailable())))}_isActiveAdCanStick(){return("any"===this.model.get("stickyCard.restrictions.rv")||this.model.get("activeAdRV")===this.model.get("stickyCard.restrictions.rv"))&&this._getQueryFuncResult()}_getQueryFuncResult(){var e=this.model.get("stickyCard.isActive.restrictions.queries.function");if(!e)return!0;var t=this.model.get("activeAdData");if(!t)return!1;var i=e(this.model.attributes,t);return this.log.info("query language function results for sticky.isActive",{activeAd:this.model.get("activeAdData"),function:e,result:i}),i}_isDetachAvailable(){return to.safeGetBoundingClientRect(this.el).top>0?this.model.get("detachToSlider.isDetachAbove"):this.model.get("detachToSlider.isDetachBelow")}_rePosition(e,t){this.isDetached||super._rePosition(e,t)}_onVideoPlaceholderSizeChange(e,t){this.isDetached||(this.detachUtil.setSliderSize(),this._resize(e,this.model.get("videoPlaceholderSize")))}postGetAd(){this.model.set("aspectRatioNum",this.activeAd.aspectRatioNum),this.isDetached&&this._resize(this.model,this.sizeObject)}permanentAttach(){this.activeAd&&this.isDetached&&this.activeAd.onSliderClose(),this.model.set("detachToSlider.isDetachToSlider",!1),this.model.set("floatingView",Me.A.floatingView.permanentClosed),this.isDetached&&this._slideOut((()=>{this.attach(!0)}))}_slideOut(e){if(this.isDetached){var t=this.model.get("animation.slideOut"),i=this.isStickyCardActive;this.animationUtil.slideOut({$el:this.$el,timeMS:t,sliderOptions:this.detachToSlider,isVerticalSlideOut:i,cb:e}),this.isDetached=!1}}playAd(){super.playAd(),this._handleVolume(),this.createStateHandlers([{event:"isSliderEligibleToPlay",funcName:"_onSliderEligibilityChange"}])}_onSliderEligibilityChange(){this.isDetached&&!this.isPermanentAttachCalled&&this.activeAd&&(this.model.get("isSliderEligibleToPlay")?this.activeAd.play():this.activeAd.pause(y.l.PAUSE_REASONS.SLIDER_LOST_ELIGIBILITY))}_onWindowScroll(){this.model.get("stickyCard.isActive")&&this._checkDetachToStickyOnScroll(),this.copyPropertiesActive&&this._copyPropertiesOnScroll()}_copyPropertiesOnScroll(){if(this.copyProprtiesSelector)for(var e in this.copyProprtiesMap){var t=e,i=this.copyProprtiesMap[e];this.copyProprtiesSelector.style[t]&&(this.$el[0].style[i]=this.copyProprtiesSelector.style[t])}}_checkDetachToStickyOnScroll(){if(this.isDetached&&this.isStickyCardActive){var e=eo(".trc_rbox_container").has("#_cm-video-unit");if(e.length>0){var t=e.offset().top,i=t+to.height(e[0]),n=this.$el.offset().top;(i<n+this.$el.offset().height||n<t)&&(this.log.info("Unstick Sticky Ad"),this.permanentAttach())}else this.permanentAttach(),this.log.warning("there is no valid placement. cant sticky")}}_onStickyTimerEnd(e){this.log.info(e),this.model.get("stickyCard.restrictions.adPercent.keepUntilScroll")?(this.log.info("Sticky wait for scroll"),Js.once("window:scroll:change",this._attachSticky.bind(this))):this._attachSticky()}_attachSticky(){this.log.info("Sticky attach"),this.permanentAttach(),this.rvTimerWasSet=!1}onGotRVAd(){var e=this.currModel.get("isNextAdRV");this.currModel.set("isNextAdRV",null,{silent:!0}),this.activeAd&&e&&(this.isCurrentAdRV=this.activeAd.adData.requiredViewability,this.isCurrentAdRV&&e||!this.isEligibleToPlay()?this.hadPossibleRV=!0:this.swapToNewReadyAd())}swapToNewReadyAd(){this.isSwappedAd=!0,this.swappedAd=this.activeAd,this.swappedAd.onAdSwappedOut(),this.pauseAd(y.l.PAUSE_REASONS.AD_SWAPPED),this.swappedAd._bringToBack(),this.currModel.set("hasReadyAd",!0,{silent:!0}),this.getReadyAd(),this.onHasReadyAd(),this._handleNASOnAdChange(),setTimeout((()=>this.activeAd.onAdSwappedIn()),0)}swapBackToSavedAd(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.model.set("swappedAdHasEnded",!0),this.activeAd=this.swappedAd,this.swappedAd=void 0,this.isSwappedAd=!1,this._handleNASOnAdChange(e),this.postGetAd()}_handleNASOnAdChange(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.model.get("preventSwapToSC")||this.nativeAdSettings&&this.nativeAdSettings.shouldFitToSize&&(this._isActiveAdHasNativeAdSettings()?(this.model.set("adNativeSettings",this.activeAd.vpaidData.adNativeSettings),e&&this.nativeAdSettings.hide()):(this.model.set("adNativeSettings",{}),this.isDetached?this.nativeAdSettings.hideFloatingNAS():this.nativeAdSettings.hide()),this._resize(this.model,this.isDetached?this.model.get("detachToSlider"):this.model.get("videoPlaceholderSize")))}_isActiveAdHasNativeAdSettings(){return this.activeAd&&this.activeAd.vpaidData&&this.activeAd.vpaidData.adNativeSettings}setRepeatingAd(){this.repeatingAd=null,this.model.get("isReplayAd")&&this.activeAd&&this.activeAd.vpaidWrapper.isReplayable&&(this.repeatingAd=this.activeAd)}};var no=s(391),so=s(140),oo=s(568);class ao extends W.f{constructor(e,t){super(e),this.model=e,this.globalModel=t,this.model.set("isEligibleToPlay",!1),this.model.get("isTestParentSelector")&&this._bindScroll(),this.model.get("isInAppBridgeOn")&&window.taboolaBridge&&this._observeInAppIntersectionChange(),this.oldRect={},this.viewabilityPercent=this.model.get("viewabilityPercent"),this.printCurrentViewPercent=this.model.get("printCurrentViewPercent"),this.isListenToScrollSpeedChange=this.model.get("eligibility.isListenToScrollSpeedChange"),this.isListenToScrollSpeedChange&&(this.scrollManager=new me.A,this.maxPPS=this.model.get("eligibility.maxPPS"),this.scrollManager.registerForPPSChange(this._testEligibility.bind(this)))}_bindScroll(){this._testTopParentSelector(),no.on("window:scroll:change",this._testTopParentSelector.bind(this))}_isLowerThenMaxPPS(){return!this.maxPPS||Math.abs(this.scrollManager.getPps())<this.maxPPS}_initObserver(){var e={rootMargin:"0px",threshold:[0,this.model.get("viewPercent")/100,this.model.get("viewabilityPercent")/100,this.model.get("100viewPercent")/100]};if(this.model.get("stickyCard.isActive")){var t=this.model.get("stickyCard.observerThreshold");t&&e.threshold.push(...t)}this.observer=new IntersectionObserver(this._observerCallback.bind(this),e),this.log.info("IntersectionObserver was created")}bindEvent(){}_getDimensions(e){return{width:so.width(e)||this.model.get("width"),height:so.height(e)||this.model.get("height")}}_calculateEligibility(){this.model.get("isUseObserver")||(this.inViewDiv=this._getInViewDiv()),this._testEligibility()}_onTabEvent(e){}_printCurrentViewPercent(e,t){this.printCurrentViewPercent&&this.log.info("".concat(e,": "),t||0)}_getInViewDiv(){for(var e=0;e<this.placeHolders.length;e++){var t=this.placeHolders[e],i=this._getDimensions(t),n=so.getViewPercent(t,i.width,so.getVideoHeight(i.width),this.model.get("scrollSelector"));this._printCurrentViewPercent("currViewPercent",n);var s=this.model.get("viewPercent")||100;if(this.model.set("isViewable",this.viewabilityPercent<=n),this.model.set("isViewable100",n>=this.model.get("100viewPercent")),this.model.get("stickyCard.isActive")){var o=n<this.model.get("stickyCard.attachPercent")&&this._canStickToTop(t);this.model.set("isEligibleToStick",o)}if(s<=n)return this.placeHolders[e]}}_observerCallback(e,t){this.inViewDiv=void 0;for(var i=0;i<e.length;i++){var n=100*e[i].intersectionRatio;if(this.model.set("isViewable100",n>=this.model.get("100viewPercent")),this.model.set("isViewable",this.viewabilityPercent<=n),this.model.get("stickyCard.isActive")){var s=n<this.model.get("stickyCard.attachPercent")&&e[i].boundingClientRect.top<=0;this.model.set("isEligibleToStick",s)}if(n>=this.model.get("viewPercent")){this.inViewDiv=e[i];break}}this._testEligibility()}_testEligibility(){}_testTopParentSelector(){var e=this._getTopParentSelector();this.topParentSelector||(this.topParentSelector=e),this.topParentSelector&&!e&&this.model.get("isCheckTopParentSelectorLost")&&(this.model.set("topParentSelectorLost",!0),this._stopObserver())}_getTopParentSelector(){var e=this.model.get("parentSelector");return e=Array.isArray(e)?e[0]:e,e=oo(e)[0],so.getTopOfEl(e)}_observeInAppIntersectionChange(){window.taboolaBridge.on("intersectionChanged",this._onIntersectionChanged.bind(this)),window.taboolaBridge.active=!0}_onIntersectionChanged(e){var t=e.rects.boundingClientRect,i={width:function(){return t.width},height:function(){return Math.abs(t.top-window.taboolaBridge.data.rootBounds.height)},top:function(){var e=0;return t.top<0&&(e-=t.top),e}};this.model.set("scrollSelector",i),this._calculateEligibility()}_canStickToTop(e){return!!e&&so.safeGetBoundingClientRect(e).top<=0}_getFromModel(e){return(this.globalModel||this.model).get(e)}_stopObserver(){this.observer&&this.observer.disconnect&&this.observer.disconnect()}_setToModel(e,t){this.model.set(e,t),this.globalModel&&this.globalModel.set(e,t)}}const ro=ao;var lo=s(568),co=s(391),ho=s(140);const mo=class extends ro{constructor(e,t){super(e),this.$parentElement=lo(t),this.model.set("isInTab",Es(this.model)),this.log=new A.A({unitType:"Service",className:this.constructor.name,version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this.placeHolders=[],this.model.get("isUseObserver")&&this._initObserver(),this.bindEvent(),this._createPlaceHolders(),this._initEligibilityListener()}bindEvent(){this.model.listenTo(co,"window:tab:change",this._onTabEvent.bind(this)),this.createStateHandlers([{event:"containerViewState:rendered",funcName:"_setPlaceHolderToVideoView"},{event:"getAdState:gotAd",funcName:"_testEligibility"},{event:"componentVisibility",funcName:"_calculateEligibility"}])}_setPlaceHolderToVideoView(){var e=this.model.get("containerViewPlaceHolder");this.model.get("isUseObserver")?(this.observer.disconnect(),this._clearTempDivs(),ho.safeObserve(this.observer,e)):(this._clearTempDivs(),this.placeHolders=[e],this._calculateEligibility())}_clearTempDivs(){if(this.model.get("frameType")!==y.l.FRAME_TYPE.plainPage&&this.model.get("isDataTrackDivHasDim"))for(var e in this.placeHolders)lo(this.placeHolders[e]).hide()}_initEligibilityListener(){this.model.get("isUseObserver")?this._registerObserverListeners():(this._calculateEligibility(),co.on("window:scroll:change",this._calculateEligibility.bind(this)),this.model.listenTo(this.model,"change:aspectRatioNum",this._calculateEligibility.bind(this)))}_createPlaceHolders(){for(var e=this.$parentElement.length>0?this.$parentElement:lo(this.model.get("parentSelector").toString()),t=0;t<e.length;t++){var i=e[t];if(!i.querySelector("#_cm-css-reset")){var n=this._createTempDiv(i);i.appendChild(n),this.placeHolders.push(n)}}}_createTempDiv(){var e=document.createElement("div");return e.classList.add("_cm-div"),e.id="_cm-css-reset",this.model.get("isDataTrackDivHasDim")&&this.model.get("frameType")!==y.l.FRAME_TYPE.plainPage&&lo(e).css({height:"1px !important",width:"1px !important",visibility:"hidden !important",position:"absolute !important"}),e.setAttribute("data-tracked","true"),e}_onTabEvent(e){e===y.l.TAB_STATE.tabOut?(this.model.set("isViewable",!1),this.model.set("isInTab",!1),this.model.get("isIgnoreTabInIframe")&&this.model.get("frameType")!==y.l.FRAME_TYPE.plainPage||this.model.set("isEligibleToPlay",!1)):(this._calculateEligibility(),this.model.set("isInTab",!0))}_registerObserverListeners(){for(var e=0;e<this.placeHolders.length;e++)ho.safeObserve(this.observer,this.placeHolders[e])}_testEligibility(){if(this.inViewDiv){this._setFirstEligiblePosition(),this.model.set("isEligibleToPlay",!0),this.model.set("isViewable",!this.model.get("isIgnoreTabInIframe")||this.model.get("frameType")===y.l.FRAME_TYPE.plainPage||this.model.get("isInTab"));var e=this.model.get("getAdState");this.model.get("eligiblePlaceholder")||e!==Me.A.getAdState.gotAd||this.model.set("eligiblePlaceholder",this.inViewDiv),this.model.get("hadEligibility")||this.model.set("hadEligibility",!0)}else this.model.set("isEligibleToPlay",!1)}_getInViewDiv(){for(var e=this.model.get("inlineVideoAbsolutePos"),t=0;t<this.placeHolders.length;t++){var i=this.placeHolders[t],n=this._getDimensions(i),s=n.height||ho.getVideoHeightByRatio(n.width,this.model.get("aspectRatioNum")),o=ho.getViewPercent(i,n.width,s,this.model.get("scrollSelector"),e);this._printCurrentViewPercent("currViewPercent",o);var a=this.model.get("viewPercent")||100;if(this.model.set("isViewable",this.model.get("viewabilityPercent")<=o),this.model.set("isViewable100",o>=this.model.get("100viewPercent")),this.model.set("isEligibleToStick",o<100),a<=o)return this.placeHolders[t]}}_setFirstEligiblePosition(){if(this.model.get("placementOffsetValidation.isActive")&&!this.firstEligibilePosition){this.firstEligibilePosition=!0;var e=this.inViewDiv.target?this.inViewDiv.target:this.inViewDiv,t=ho.getOffsetWithContainer(e,this.model.get("offsetGetterType"),this.model.get("videoContainerSelector"));t&&this.model.set("eligibleContainerOffset",{left:t.left,top:t.top,el:e})}}};var po=s(568),uo=s(140);const go=class extends dn{constructor(e){super(e),this.targetElem=po("#".concat(this.model.get("targetId").toString())),this._waterfallRetries=Number(this.model.get("waterfallRetries")),isNaN(this._waterfallRetries)&&(this._waterfallRetries=0),this._init()}_bindEvents(){super._bindEvents(),this.model.on("openOutOfView",this._resizePlayer.bind(this)),this.createStateHandlers([{event:"videoPlaceholderSize",funcName:"resize"},{event:"aspectRatioNum",funcName:"resizeOnAspectRatioChange"},{event:"videoViewSize",funcName:"resizeDetach"},{event:"videoViewState:detached",funcName:"_onDetach"},{event:"loadingViewState:clicked",funcName:"_onLoadingClick"},{event:"adState:playing",funcName:"_dropSingleAds",isListenOnce:!0}])}resizeOnAspectRatioChange(){var e=this.model.get("videoPlaceholderSize");e&&this.resize(e,void 0,!0)}resize(e,t,i){if(this.model.get("videoViewState")!==Me.A.videoViewState.detached||i){var n=t||e;if(this.lastSize=this.lastSize||{},this.lastSize.width===n.width&&this.lastSize.height===n.height)return;this._resizePlayer(n)}}_resizePlayer(e){this.player&&this.player.resize&&e&&e.width&&e.height&&(this.lastSize=uo.extend({},e),this.player.resize(e.width,e.height),this.log.info("player was resize",e))}_onDetach(){var e,t,i={width:null!==(e=this.model.get("sliderWidth"))&&void 0!==e?e:this.model.get("width"),height:null!==(t=this.model.get("sliderHeight"))&&void 0!==t?t:this.model.get("height")};this.resize(i,null,!0)}resizeDetach(e,t){this.resize(e,t,!0)}_dropSingleAds(){this.model.get("predictors.postRepeat.isActive")||this.dropAds(zi.K.singleAd.name)}dropAds(e){this.player&&this.player.dropAds&&(this.player.dropAds(zi.K[e].playerType),this.log.info("dropping ".concat(e," ads from player Q")),this.model.appendArray("droppedAdTypes",e))}_onAdError(){this.log.error("onAdError"),this._errorCount++,this._waterfallRetries&&!this._hasImpression&&this._errorCount>=this._waterfallRetries&&(this.log.info("number of errors reached the allowed waterfall retries - stopping the unit",this._waterfallRetries),this.model.set("closeState",Me.A.closeState.terminate))}};var vo=s(568),fo=s(140),_o=s(391);const bo=class extends qe{constructor(e){super(e),this.model.set("renderWasCalled",!1),this.createStateHandlers([{event:"playerState:ready",funcName:"_onPlayerStateReady"},{event:"isFirstAdImpression",funcName:"_onFirstAdImpression"},{event:"playerState:restarted",funcName:"_onPlayerStateReady"},{event:"hasReadyAd:true",funcName:"sendWidgetReadyEvent",isListenOnce:!0},{event:"isEligibleToPlay",funcName:"_onEligibilityChange"},{event:"crossUnitInfo",funcName:"_onUpdateFromOtherPlacements"}]),this.windowEventManager=he(),this.tabStatusService=new Is(this.model),this.eligibilityService=new mo(this.model),this.adService=new qi(this.model,this.eligibilityService),this.model.get("isHipMode")&&this._bindHipEvents(),this.seerService=new Ps({model:this.model,onPredictCallback:this.adService.adPredict.bind(this.adService)}),this.playerQueueSeeker=new sn(this.model),this.playerLoader=new pn(this.model),this.containerView=new Xs({model:this.model}),this.videoView=new io({model:this.model,container:this.model.get("videoContainerSelector"),eligibilityService:this.eligibilityService}),this.playerService=new go(this.model),this.pixelsService=new Ji(this.model),this._initComponentsManager(),this._timeBetweenEvents=100;var t=this.model.get("observedContainerSelector");t&&vo(t)[0]&&this._setMutationObserver(vo(t)[0]),this._setSubUnitType(),TRC.listen("widgetTakeoverSizeChange",this.updateContainerSize.bind(this)),this.model.get("isHip")&&TRC.trcHipCloseUnit&&TRC.trcHipCloseUnit[this.model.get("rboxContainerId")]&&this.terminate(!1,"SC Hip"),this.model.get("isStreamPlacement")&&this._addClassToStreamCarousel()}_onFirstAdImpression(){this.model.get("terminated")||this.model.get("isOpenInViewPort")||this.model.get("isEligibleToPlay")||(this._updateCrossUnitCommunication(Me.A.externalUnit.playing),this.model.set("adState",Me.A.adState.renderOutOfView),this.containerView.render(this._getParentSelector()),this.model.trigger("openOutOfView",this.model.get("videoPlaceholderSize")))}play(e){this.model.get("renderWasCalled")||(this.model.get("isOpenInViewPort")?this.containerView.render(e):this.model.trigger("openOutOfView",this.model.get("videoPlaceholderSize")),this.model.get("isStreamPlacement")&&(this._hideStreamCarousel(e),this._addFeedbackButtonClickEvent()),this.log.info("play was called with container: ".concat(e)),this.model.set("renderWasCalled",!0))}terminate(e,t){if(this._updateCrossUnitCommunication(Me.A.externalUnit.stopped),e&&this.model.get("videoViewState")===Me.A.videoViewState.detached)this.videoView.permanentAttach();else{if(this.log.info("Terminate reason: ".concat(t)),this._setTimerReason(t),this.model.get("preventSwapToSC"))return void(this.model.get("continueAuctionOnTermination")&&this.model.set("terminated",!0));if(this.model.get("isKeepUnitOnMidroll")&&"midrollCollapse"===t)return void this._doNotStopOnMidroll();if(this.model.get("continueAuctionOnTermination"))this.model.set("terminated",!0);else{var i;this.model.set("closeState",Me.A.closeState.terminate);var n=this._getParentSelector();null==n||null===(i=n.parentNode)||void 0===i||i.removeChild(n)}}}_getParentSelector(){return document.querySelector(this.model.get("parentSelector"))}pause(e){this._setTimerReason(e),this.adService&&this.adService.pauseGetAds()}_addClassToStreamCarousel(){var e=document.querySelectorAll("tbl-sc-carousel");null==e||e.forEach((e=>{var t=e.querySelector("figure");t&&(e.before(t),t.style.top=0,e.classList.add("tbl-carousel-".concat(t.id)))}))}_hideStreamCarousel(e){var t=document.querySelector(".tbl-carousel-".concat(null==e?void 0:e.id));t&&(t.style.display="none",e.parentNode.style.height="".concat(this.model.get("videoPlaceholderSize").height,"px"))}_addFeedbackButtonClickEvent(){var e,t=null===(e=this.containerView)||void 0===e||null===(e=e.container)||void 0===e?void 0:e.id;if(t){var i=null==t?void 0:t.replace(/(?:.(?!-))+$/,"-container"),n='[data-wf-toggle-target="#'.concat(i,' .stream-item"]'),s=document.querySelector(n);s&&s.addEventListener("click",this.terminate.bind(this))}}_setMutationObserver(e){var t=fo.throttle(this._handleMutationCb.bind(this),this._timeBetweenEvents);new MutationObserver(t).observe(e,{attributes:!0,childList:!0,characterData:!0,subtree:!0,attributeOldValue:!0})}_handleMutationCb(e){this._trigger("publisher:dom:change",{})}_trigger(e,t){_o.trigger(e,t)}_doNotStopOnMidroll(){this.model.get("isKeepViewOnMidroll")||(this.model.set("isUnitHidden",!0),this.videoView.hide(),this._hideParentSelector(),this.model.get("isMobile")&&this.model.get("streamDrawerPlacement")&&(this.containerView.el.closest(".".concat(y.l.STREAM_DRAWER_PLACEMENTS.STREAM_PLACEMENT.PLACEMENT_ITEM)).style.height="auto"),this.containerView.hideUnit(),this.createStateHandlers([{event:"hasReadyAd:true",funcName:"_reopenUnit",isListenOnce:!0}]))}_hideParentSelector(){var e=this._getParentSelector();null==e||e.classList.add("hide")}_showParentSelector(){var e=this._getParentSelector();null==e||e.classList.remove("hide")}_reopenUnit(){this.log.info("!!! reopenUnit isAnimationRunning: ",this.model.get("isAnimationRunning")),this.model.set("isUnitHidden",!1),this.model.get("isAnimationRunning")?this.createStateHandlers([{event:"isAnimationRunning:false",funcName:"_reopenUnit",isListenOnce:!0}]):(this.containerView.show(),this.videoView.reShowUnit(),this._showParentSelector())}_initComponentsManager(){var e;this.componentManager=new Ti({model:this.model,container:this.model.get("videoViewContainer")}),null!==(e=this.componentManager)&&void 0!==e&&null!==(e=e.components)&&void 0!==e&&e.NativeAdView&&(this.nativeAdView=this.componentManager.components.NativeAdView,this.videoView.setNativeAdViewObj(this.nativeAdView))}updateContainerSize(e){this.model.set("width",e.width),this.model.set("customization",e.customization)}sendWidgetReadyEvent(e){if(!this.model.get("hadReady")){var t=e||this.model.peekNextAd(),i=this._prepareDataForRbox(t);_o.trigger("ready",i),this.model.set("hadReady",!0)}}_prepareDataForRbox(e){if(e&&e.adTypeConfig){var t={},i=this.model.get("rboxContainerRatio"),n=this.model.get("maxValidRatioForTakeover"),s=this.model.get("minValidRatioForTakeover");return this.log.debug("rBox container ratio",i),i&&i>s&&i<n&&(t.isContainerRatioValidForTakeOver=!0),t}}_setSubUnitType(){var e={isSticky:this.model.get("stickyCard.isActive"),isDetachBelow:this.model.get("detachToSlider.isDetachBelow"),isDetachAbove:this.model.get("detachToSlider.isDetachAbove"),isStartFromSlider:this.model.get("detachToSlider.isStartFromSlider"),isDetachToSlider:this.model.get("detachToSlider.isDetachToSlider")};this.model.set("subUnitType",fo.getSubUnitType(e))}_bindHipEvents(){"undefined"!=typeof TRC&&TRC.listen&&TRC.listen("rBoxVisible",this._stopHipMode.bind(this))}_stopHipMode(){TRC.trcHipContainersShowing&&TRC.trcHipContainersShowing[this.get("rboxContainerId")]&&(this.model.setPredictorsToNonHIP(),this.log.info("Stop Hip Mode Update Predictors"),this.seerService._createRequestedPredictors())}_onEligibilityChange(){this._updateCrossUnitCommunication()}_updateCrossUnitCommunication(e){if(this.model.get("isUpdateCrossUnitCommunicationForPlacementTracking")){var t=this.model.get("placement"),i=this.model.get("crossUnitInfo")||{};i[t]=i[t]||{},i[t]={state:e||i[t].state,isEligibleToPlay:this.model.get("isEligibleToPlay")||!1},this.model._updateCrossUnitCommunication(i)}}_onUpdateFromOtherPlacements(){if(this.model.get("isUpdateCrossUnitCommunicationForPlacementTracking")){var e=this.model.get("placement"),t=this.model.get("crossUnitInfo")||{};for(var[i,n]of Object.entries(t))if(i!==e&&n.isEligibleToPlay&&n.state===Me.A.externalUnit.playing)return void this.terminate(!1,y.l.TERMINATE_REASON.ANOTHER_STREAM_PLACEMENT_PLAYING)}}};var yo=s(391),Ao=s(140);function So(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function wo(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?So(Object(i),!0).forEach((function(t){To(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):So(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function To(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const Po=yo.DeepModel.extend({STATE:{READY:0,GOT_AD:1,PLAYING:2,PAUSED:3,PAUSED_BY_USER:4,STOPPED_BY_USER:5,DETACHED:6,ATTACHED:7,DONE:8,PLAYER_READY:9,PLAYER_CLOSE:10,PLAYER_STOP:11,AD_STOPPED:12,OPT_OUT:13,OPEN_WITH_PAUSE:14,WAITING_FOR_EXPAND:15,REPEAT_STAND_BY:16,REPEAT_SPINNING:17,SKIPPED_BY_USER:18},defaults:{isDebug:!1},storage:{},initialize:function(){this.log=new A.A({unitType:this.get("unitType"),className:"BaseUnitModel",version:this.get("version"),isDebug:this.get("isDebug")}),this._parseFrameType();var e=this.get("demo");e&&this.set("preset.demo",e),this.get("isDebug")&&this.set("preset.isDebug",1);var t=this._getSettingsByConditions();this.set(t.preset);var i=this._getPresets(j.A.pms);for(var n in this.log.info("Presets Settings: ",[i.weakerThenSetByCon,i.strongerThenSetByCon]),i.weakerThenSetByCon)this.set(i.weakerThenSetByCon[n].presetData);for(var s in this.set(t.settings),i.strongerThenSetByCon)this.set(i.strongerThenSetByCon[s].presetData);this._setUrlParameters(),this._processPushArray(),this.get("isUseObserver")&&!Ao.isObserverSupported("IntersectionObserver",this.get("isUseNonNativeObserver"))&&this.set("isUseObserver",!1),this.get("isUseObserverForCardLocator")&&!Ao.isObserverSupported("IntersectionObserver",this.get("isUseNonNativeObserver"))&&this.set("isUseObserverForCardLocator",!1),this.volume=this.get("volume"),this.set("volume","off"),this._bindEvents(),this.log.info("unit model created:",this.attributes),this._handleABTest(),this._handleLiteUnitPixels(),(this.get("isApiPassbackExist")||this.get("onPassback"))&&(this.set("dlywf",!1),this.set("player.settings.rvfrquesttsemttr","any")),"body"===String(this.get("videoContainerSelector")).toLowerCase()&&this.set("videoContainerSelector",!1),this._setQueriesFunctions(),this._setCrossUnitCommunication(),this.get("isChangePredictPointsWithAny")&&this._changeAnyToZeroInPredictors(),this._decideSuperSlider(),!0===this.get("isGetRv1OnlyForEligible")&&(this.set("isGetRv1OnlyForEligible.isActive",!0),this.set("isGetRv1OnlyForEligible.delayPrediction",!0))},get(e){var t=yo.DeepModel.prototype.get.call(this,e);if(!t||!Ao.isString(t))return t;for(var i=t.match(/\{\{(.*?)\}\}/g);i;){for(var n=0;n<i.length;n++){var s=i[n].substr(2,i[n].length-4),o=yo.DeepModel.prototype.get.call(this,s);o||(o=""),t=t.replace(i[n],o)}i=t.match(/\{\{(.*?)\}\}/g)}return t},_setQueriesFunctions(){Ao.forEach(y.l.UNIT_QUERY_LANGUAGE.SUPPORTED_CONFIG_FLAGS,(e=>{var t=this.get("".concat(e,".restrictions"));Ao.forEach(t,((t,i,n)=>{var s="".concat(e,".restrictions.").concat(i),o=this.get("".concat(s,".queries"));if(o){var a=this.get("".concat(s,".default"));a=Ao.isBoolean(a)?a:'"'.concat(a,'"');var r=this._getQueryFunction(o,a);this.set("".concat(s,".decisionFunction"),r)}}))}))},_getQueryFunction(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i="";Ao.forEach(e,(e=>{i+=this._getQueryIfStatment(e)})),t=void 0!==t?"return ".concat(t,";"):"";var n="".concat(i,"\n").concat(t);return new Function("model","activeAd",n)},_getQueryIfStatment(e){var t=e.rule,i=e.valueIfTrue;return i=Ao.isBoolean(i)?i:'"'.concat(i,'"'),Ao.forEach(y.l.UNIT_QUERY_LANGUAGE.MAPPING,(e=>{t=t.split(e.search).join(e.replaceWith)}),this),"if(".concat(t,"){return ").concat(i,"};\n")},getPixel:function(e){!this.pixel&&this._createPixel();var t=this.get(e);if(t&&t.isFire)return this.pixel({type:t.type||"",pixelId:t.id,timestamp:Date.now(),subUnit:this.get("subUnitType")})},_createPixel:function(){var e="".concat(this.get("pixels.url"),"?cijs=convusmp&ttype={{type}}&cisd=convusmp&cipid=").concat(this.get("cipid"),"&crid=").concat(this.get("creativeId"),"&dast=").concat(this.get("dast"),"&cmcv=").concat(this.get("cmcv"),"&pix={{pixelId}}&cb={{timestamp}}&uv=").concat(this.get("unitVersion"),"&tms={{timestamp}}&su={{subUnit}}");this.get("abTest")&&(e+="&abt=".concat(this.get("abTest"))),this.get("referrerUrl")&&(e+="&ru=".concat(this.get("referrerUrl"))),e+="&ft=".concat(this.get("frameType")),e=this._addPixelParameter("tagCpmFloor","cft",e),e=this._addPixelParameter("unitId","blid",e),e=this._addPixelParameter("unitName","unm",e),e=this._addPixelParameter("debugKey1","dk1",e),e=this._addPixelParameter("debugKey2","dk2",e),e=this._addPixelParameter("order","order",e),this.pixel=Ao.template(e)},_addPixelParameter:function(e,t,i){return(this.get(e)||0===this.get(e)||!1===this.get(e))&&(i+="&".concat(t,"=").concat(this.get(e))),i},getImpressionPixel:function(){},_getSchedule:function(e,t,i){return{roll_type:e,volume:"on"===this.get("volume")?100:0,mute:"on"!==this.get("volume"),oid:this.get("originId"),sortOrderType:this.get("sortOrderType"),ad_parameters:JSON.stringify(this.get("demandConfig")),pubid:t,tagid:i,defaultTagTimeout:this.get("defaultTagTimeout"),noaop:this.get("noaop"),skip_vast:!0}},_handleABTest:function(){if(this.get("abTest")&&this.get("pixels.startWithABT.isFire")){window.cmTag.customDataForTest.startWithABT=!0;var e=window.performance.timeOrigin?window.performance.timeOrigin:"",t={debug:"pn:!sqg:!torgn:".concat(e,"!ts:").concat(Date.now())};Ao.firePixel(this.getPixel("pixels.startWithABT"),"AB Test started",t)}},_handleLiteUnitPixels:function(){this.get("isFirePixel")&&(Ao.firePixel(this.getPixel("pixels.unitLoaded"),"Unit loaded from lite unit",{mntl:this.get("preset.level")}),Ao.firePixel(this.getPixel("pixels.unitLoadedWithFill"),"Unit loaded from lite unit with fill"))},_processPushArray:function(){var e=this.get("pushedArr")||[];this.get("unitType")!==y.l.FEED_MANAGER.NAME&&this.get("unitType")!==y.l.MSN_WIDGET.NAME&&this.get("unitType")!==y.l.WIDGET_ITEM.NAME||this._setFeedManagerSubType(e);var t={};if(e)for(var i in e.forEach((e=>{var i=Object.keys(e)[0];t[i]||(t[i]=[]),t[i].push(e[i])})),t){var n=t[i],s=this.get(i);s&&n.push(s);var o=n.sort().join("!");this.set(i,o)}},_setFeedManagerSubType(e){var t=this.get("stickyCard.isActive"),i=this.get("detachToSlider.isDetachBelow"),n=this.get("detachToSlider.isDetachAbove"),s=this.get("detachToSlider.isStartFromSlider"),o=this.get("detachToSlider.isDetachToSlider"),a="ufm";t||s||o?t||!s||o?t||s||!o?!t&&s&&o?a+="_vD":t&&i&&!n?a+="_vE":t&&!i&&n?a+="_vF":t&&i&&n&&(a+="_vG"):a+="_vC":a+="_vB":a+="_vA",e.push({abTest:a})},_removeSoundOnHover(){var e,t=this.get("wurfl.browser.name").toLowerCase(),i=this.get("wurfl.browser.version"),n=this.get("noSoundBrowsers");n&&n[t]&&(e=n[t].minVersion),i>=e&&this.set("volume","off")},setStorage(e,t){this.storage[e]=t},getStorage(e){return this.storage[e]},setNextAd(e){this.setStorage("nextAd",e)},setNextSliderCutOffAd(e){this.setStorage("nextSliderCutOffAd",e)},getNextSliderCutOffAd(){var e=this.getStorage("nextSliderCutOffAd");return this.setNextSliderCutOffAd(void 0),e},peekNextSliderCutOffAd(){return this.getStorage("nextSliderCutOffAd")},getNextAd(){var e=this.getStorage("nextAd");return e&&(this.log.info("NEXT AD TYPE = ".concat(parseInt(e.adData.requiredViewability?"1":"0")),e),e.isUsed=!0),this.setStorage("nextAd",void 0),setTimeout(this.set.bind(this,"hasReadyAd",!1),0),e},getNextAdRv(){var e=this.getStorage("nextAd");if(e)return e.adData.requiredViewability},peekNextAd(){return this.getStorage("nextAd")},_bindEvents(){this.on("change:getAdState",this._onAdImpression)},_onAdImpression(){"gotAd"!==this.get("getAdState")||this._gotAd||(this.log.info("Triggering filledImpression event."),yo.trigger("filledImpression",{lineItemId:this.get("lineItemId"),placement:this.get("placement"),redId:this.get("redId")}),this._gotAd=!0)},_setUrlParameters(){for(var e,t,i,n=this._getWindow(),s=n.location.href.slice(n.location.href.indexOf("?")+1).split("&"),o=0;o<s.length;o++)0===(t=(e=s[o].split("="))[0]).indexOf("cm_")&&(t=t.slice(3),i=decodeURIComponent(e[1]),this.set(t,i))},_getWindow(){var e=this.get("isStayInIframe"),t=this.get("iframeData");return!0===e&&Ao.isInFriendlyIframe(t)||!Ao.getTopWindow?window:Ao.getTopWindow()},_getPresets(e){var t={strongerThenSetByCon:[],weakerThenSetByCon:[]},i=this.get("isMobile")?"Mobile":"Desktop";for(var n in this.get("preset")){var s=e.getPreset({key:n,value:this.get("preset.".concat(n)),unitType:this.get("unitName"),platform:i});s&&(s.strength>100?t.strongerThenSetByCon.push(s):t.weakerThenSetByCon.push(s))}return t.strongerThenSetByCon=Ao.sortBy(t.strongerThenSetByCon,"strength"),t.weakerThenSetByCon=Ao.sortBy(t.weakerThenSetByCon,"strength"),t},increaseCounter(e){var t=this.get(e);t?t++:t=1,this.set(e,t)},decreaseCounter(e){var t=this.get(e);!t||t<=0||(t--,this.set(e,t))},_parseFrameType(){var e=y.l.FRAME_TYPE.plainPage;void 0!==window.taboolaMobile?e=y.l.FRAME_TYPE.inApp:window.TRC&&window.TRC.isAMP?e=y.l.FRAME_TYPE.amp:Ao.isInIframe(this.get("iframeData"))&&(e=Ao.isInFriendlyIframe(this.get("iframeData"))?y.l.FRAME_TYPE.friendlyIframe:y.l.FRAME_TYPE.nonFriendlyIframe),this.set("frameType",e),this.set("player.settings.frameType",e)},_getSettingsByConditions(){var e={preset:{},settings:{}},t=this.get("settingsByConditions");if(t&&t.length>0)for(var i=0;i<t.length;i++){var n=t[i].conditions,s=t[i].settings;if(this._checkConditions(n))for(var o in s)-1!==o.indexOf("preset")?e.preset[o]=s[o]:e.settings[o]=s[o]}return e},_checkConditions(e){for(var t=!0,i=0;i<e.length;i++)if(e[i].func)e[i].func(this)||(t=!1);else if(e[i].val&&"function"==typeof e[i].val){var n=e[i].val(this);this.get(e[i].key)!==n&&(t=!1)}else this.get(e[i].key)!==e[i].val&&(t=!1);return t},fireUnitDelayedPixel(){Ao.firePixel(this.getPixel("pixels.unitDelayed"),"unit delayed")},fireUnitLoadAfterDelayPixel(){Ao.firePixel(this.getPixel("pixels.unitLoadAfterDelay"),"unit delayed")},isLoadcomponent(e,t){return this.get("displayFiller.".concat(t))===e},appendArray(e,t,i){var n=this.get(e);Ao.isArray(n)||(n=[]),i&&n.includes(t)||(n.push(t),this.set(e,n))},handleAutoPlayData(e){this.log.info("autoplayDetector returned",e),this.set("AutoPlayDetectorData",e),e&&e.unmuted&&e.unmuted.supported?(this.set("volume",this.volume),this.set("autoplaySoundOn",!0)):(this.set("volume","off"),this.set("autoplaySoundOn",!1)),this.log.info("Unit set volume to: ",this.get("volume"))},_setStickyCardParams:function(){this.set("detachToSlider.isDetachAbove",!1),this.set("detachToSlider.isDetachBelow",!0),this.set("detachToSlider.isDetachToSlider",!0),this.set("detachToSlider.isStartFromSlider",!1),this.set("animation.detach",this.get("stickyCard.detachAnimationTime"))},_setCrossUnitCommunication(){if(this.get("isUseCrossUnitCommunication")){var e=document.querySelector("._cm-communication-input");e||((e=document.createElement("div")).className="_cm-communication-input",e.setAttribute("data-unit-info",""),document.querySelector("body").appendChild(e)),this.set("communicationInputElement",e),this._observeCrossUnitCommunication()}},_observeCrossUnitCommunication(){if(this.get("isObserveCrossUnitCommunication")){var e=this.get("communicationInputElement");this.crossUnitCommunicatioObserver=new MutationObserver(this._updateCrossUnitData.bind(this)),this.crossUnitCommunicatioObserver.observe(e,{attributes:!0,childList:!1,subtree:!1}),this.on("closeState:".concat(Me.A.closeState.terminate),this._stopCrossUnitCommunicationObserver),this._updateCrossUnitData()}},_addExtraDataToCrossUnitCommunication(e){if(this.get("isUseCrossUnitCommunication")){var t=this._getExtraDataFromCrossUnitCommunication()||{},i=this.get("unitType");t[i]=t[i]||{},t[i]=wo(wo({},t[i]),e),this.get("communicationInputElement").setAttribute("data-cross-unit-info-extra",JSON.stringify(t))}},_getExtraDataFromCrossUnitCommunication(){if(this.get("isUseCrossUnitCommunication")){var e=this.get("communicationInputElement").dataset.crossUnitInfoExtra;if(e)return JSON.parse(e)}},_updateCrossUnitCommunication(e){this.get("isUseCrossUnitCommunication")&&this.get("isUpdateCrossUnitCommunication")&&this.get("communicationInputElement").setAttribute("data-cross-unit-info",JSON.stringify(e))},_updateCrossUnitData(){var e=this.get("communicationInputElement").dataset.crossUnitInfo;e&&e.unit!==this.get("unitType")&&this.set("crossUnitInfo",JSON.parse(e));var t=this._getExtraDataFromCrossUnitCommunication();t&&this.set("crossUnitExtraInfo",t)},_stopCrossUnitCommunicationObserver(){this.crossUnitCommunicatioObserver.disconnect()},fireCancelGetAdOnEligibilityLost(){Ao.firePixel(this.getPixel("pixels.cancelGetAdOnEligibilityLost"),"cancel GetAd on EligibilityLost")},_changeAnyToZeroInPredictors(){var e=this.get("predictors");e&&(Object.keys(e).forEach((t=>{var i=e[t].predictPoints,n=e[t].predictPoint,s=e[t].allowedPredictPoints;i&&(e[t].predictPoints=this._validateAndChangePredictPointsIfAny(i)),s&&(e[t].allowedPredictPoints=this._validateAndChangePredictPointsIfAny(s)),n&&(e[t].predictPoint=this._validateAndChangePredictPointsIfAny(n))})),this.set("predictors",{}),this.set("predictors",e))},_validateAndChangePredictPointsIfAny:e=>Ao.isString(e)&&"any"===e.toLowerCase()?0:e,_decideSuperSlider(){this.get("detachToSlider.isStartFromSlider")&&this.set("detachToSlider.isDetachToSlider",!0)}}),Eo=Po.extend({initialize:function(){Po.prototype.initialize.call(this),this.set("player.playlist",[{url:this.get("player.urls.blankLocation"),name:"Blank",title:"Blank",type:"video/mp4"}]),this.get("frameType")!==y.l.FRAME_TYPE.plainPage&&(window.taboolaBridge||(this.set("predictors.distancePixels.isActive",!1),this.set("predictors.distancePixels.isStartWF",!1)),this.set("predictors.distancePercent.isActive",!1),this.set("predictors.distancePercent.isStartWF",!1)),window.category=this.get("category")},getScheduleArr:function(){var e=[];return e.push(this._getSchedule("pre-roll",this.get("pubId"),this.get("pubTagId"))),e},_onContentLoad:function(){window.playlist.forEach((function(e,t,i){i[t].image="".concat(this.get("player.urls.contentImagesLocation"),"/").concat(e.image),i[t].title=e.title.replace(/([A-Z])/g,"$1").replace(/^./,(function(e){return e.toUpperCase()})),i[t].url="".concat(this.get("player.urls.organicContentVideosLocation"),"/").concat(i[t].filename),i[t].name=i[t].filename,i[t].type="video/mp4"}),this),this.set("player.playlist",window.playlist)},isVerticalVideoEnabled:function(e){return(e||this.get("videoPlaceholderSize.width"))<=this.get("verticalWidthThreshold")}}),Co=Eo.extend({initialize:function(){Eo.prototype.initialize.call(this),this.isHipMode()?(this.set("tempPredictors",this.get("predictors")),this.set("predictors",{}),this.set("predictors",this.get("hipPredictors")),this.set("isHipMode",!0)):this.set("isHipMode",!1)},isHipMode:function(){return(!TRC.trcHipContainersShowing||!TRC.trcHipContainersShowing[this.get("rboxContainerId")])&&this.get("isHip")},setPredictorsToNonHIP:function(){this.set("predictors",{}),this.set("predictors",this.get("tempPredictors"))}}),xo=Co.extend({initialize:function(){Co.prototype.initialize.call(this),this.get("frameType")!==y.l.FRAME_TYPE.plainPage&&(this.set("predictors.isUseWidgetSelector",!0),this.set("detachToSlider.isDetachToSlider",!1)),this.get("width")&&0!==this.get("width")||!this.get("isOverrideWidthOnZero")||(this.set("width",300),this.set("isFitToSize",!0)),this.set("stickyCard.isActive",!1),this.get("isForceStopObserver")&&this.get("frameType")===y.l.FRAME_TYPE.plainPage&&this.set("isUseObserver",!1)}}),Oo=Co.extend({initialize:function(){Co.prototype.initialize.call(this),this.get("frameType")!==y.l.FRAME_TYPE.plainPage&&(this.set("predictors.isUseWidgetSelector",!0),this.set("detachToSlider.isDetachToSlider",!1));var e=this.get("frameType")===y.l.FRAME_TYPE.plainPage;this.get("stickyCard.isActive")&&e?(this.set("detachToSlider.isDetachAbove",!1),this.set("detachToSlider.isDetachBelow",!0),this.set("detachToSlider.isDetachToSlider",!0),this.set("detachToSlider.isStartFromSlider",!1)):this.set("stickyCard.isActive",!1),this.get("width")&&0!==this.get("width")||!this.get("isOverrideWidthOnZero")||(this.set("width",300),this.set("isFitToSize",!0)),this.get("isForceStopObserver")&&this.get("frameType")===y.l.FRAME_TYPE.plainPage&&this.set("isUseObserver",!1)}});window.startCMTagMain=function(e,t){var i;De(e,t,{model:e.isMobile?Oo:xo,unitController:e.isYahooWidget?Ws:bo},null===(i=e.isUnitPlay)||void 0===i||i)}})()})();