try{(i=>{var n={};function r(e){var t;return(n[e]||(t=n[e]={i:e,l:!1,exports:{}},i[e].call(t.exports,t,t.exports,r),t.l=!0,t)).exports}r.m=i,r.c=n,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(i,n,function(e){return t[e]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=35)})({0:function(e,t){function o(e){return(e=>{if(Array.isArray(e))return n(e)})(e)||(e=>{if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)})(e)||((e,t)=>{var i;if(e)return"string"==typeof e?n(e,t):"Map"===(i="Object"===(i={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:i)||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(e,t):void 0})(e)||(()=>{throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=Array(t);i<t;i++)n[i]=e[i];return n}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.reduce(function(e,t){for(var i in t){var n,r;Object.prototype.hasOwnProperty.call(t,i)&&(n=e[i],r=t[i],"object"!==s(n)||"object"!==s(r)||null===n||null===r||Array.isArray(n)||Array.isArray(r)?Array.isArray(n)&&Array.isArray(r)?e[i]=[].concat(o(n),o(r)):e[i]=r:e[i]=a(n,r))}return e},{})}e.exports={deepMerge:a,deepMergeAll:function(e){return e.reduce(function(e,t){return a(e,t)},{})},objectEntriesPolyfill:function(){Object.entries||(Object.entries=function(e){for(var t=Object.keys(e),i=[],n=0;n<t.length;n++)i.push([t[n],e[t[n]]]);return i})}}},1:function(e,t,i){var n="object"==typeof Reflect?Reflect:null,l=n&&"function"==typeof n.apply?n.apply:function(e,t,i){return Function.prototype.apply.call(e,t,i)};var r=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)},o=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}e.exports=s,e.exports.once=function(a,l){return new Promise(function(e,t){function i(e){a.removeListener(l,n),t(e)}function n(){"function"==typeof a.removeListener&&a.removeListener("error",i),e([].slice.call(arguments))}var r,o,s;y(a,l,n,{once:!0}),"error"!==l&&(o=i,s={once:!0},"function"==typeof(r=a).on)&&y(r,"error",o,s)})},(s.EventEmitter=s).prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var a=10;function c(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function u(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function f(e,t,i,n){var r,o;return c(i),void 0===(r=e._events)?(r=e._events=Object.create(null),e._eventsCount=0):(void 0!==r.newListener&&(e.emit("newListener",t,i.listener||i),r=e._events),o=r[t]),void 0===o?(o=r[t]=i,++e._eventsCount):("function"==typeof o?o=r[t]=n?[i,o]:[o,i]:n?o.unshift(i):o.push(i),0<(r=u(e))&&o.length>r&&!o.warned&&(o.warned=!0,(n=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",n.emitter=e,n.type=t,n.count=o.length,i=n,console)&&console.warn&&console.warn(i)),e}function d(e,t,i){e={fired:!1,wrapFn:void 0,target:e,type:t,listener:i},t=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}.bind(e);return t.listener=i,e.wrapFn=t}function h(e,t,i){e=e._events;if(void 0===e)return[];e=e[t];if(void 0===e)return[];if("function"==typeof e)return i?[e.listener||e]:[e];if(i){for(var n=e,r=new Array(n.length),o=0;o<r.length;++o)r[o]=n[o].listener||n[o];return r}return g(e,e.length)}function p(e){var t=this._events;if(void 0!==t){t=t[e];if("function"==typeof t)return 1;if(void 0!==t)return t.length}return 0}function g(e,t){for(var i=new Array(t),n=0;n<t;++n)i[n]=e[n];return i}function y(i,n,r,o){if("function"==typeof i.on)o.once?i.once(n,r):i.on(n,r);else{if("function"!=typeof i.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof i);i.addEventListener(n,function e(t){o.once&&i.removeEventListener(n,e),r(t)})}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");a=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return u(this)},s.prototype.emit=function(e){for(var t=[],i=1;i<arguments.length;i++)t.push(arguments[i]);var n="error"===e,r=this._events;if(void 0!==r)n=n&&void 0===r.error;else if(!n)return!1;if(n){if((o=0<t.length?t[0]:o)instanceof Error)throw o;n=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw n.context=o,n}var o=r[e];if(void 0===o)return!1;if("function"==typeof o)l(o,this,t);else for(var s=o.length,a=g(o,s),i=0;i<s;++i)l(a[i],this,t);return!0},s.prototype.on=s.prototype.addListener=function(e,t){return f(this,e,t,!1)},s.prototype.prependListener=function(e,t){return f(this,e,t,!0)},s.prototype.once=function(e,t){return c(t),this.on(e,d(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return c(t),this.prependListener(e,d(this,e,t)),this},s.prototype.off=s.prototype.removeListener=function(e,t){var i,n,r,o,s;if(c(t),void 0!==(n=this._events)&&void 0!==(i=n[e]))if(i===t||i.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,i.listener||t));else if("function"!=typeof i){for(r=-1,o=i.length-1;0<=o;o--)if(i[o]===t||i[o].listener===t){s=i[o].listener,r=o;break}if(r<0)return this;if(0===r)i.shift();else{for(var a=i,l=r;l+1<a.length;l++)a[l]=a[l+1];a.pop()}1===i.length&&(n[e]=i[0]),void 0!==n.removeListener&&this.emit("removeListener",e,s||t)}return this},s.prototype.removeAllListeners=function(e){var t,i=this._events;if(void 0!==i)if(void 0===i.removeListener)0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==i[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete i[e]);else if(0===arguments.length){for(var n,r=Object.keys(i),o=0;o<r.length;++o)"removeListener"!==(n=r[o])&&this.removeAllListeners(n);this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0}else if("function"==typeof(t=i[e]))this.removeListener(e,t);else if(void 0!==t)for(o=t.length-1;0<=o;o--)this.removeListener(e,t[o]);return this},s.prototype.listeners=function(e){return h(this,e,!0)},s.prototype.rawListeners=function(e){return h(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},s.prototype.listenerCount=p,s.prototype.eventNames=function(){return 0<this._eventsCount?r(this._events):[]}},18:function(e,t){e.exports=function(){return JSON.parse('{"unitsBaseUrl":"//www.cmbestsrv.com/vpaid/units/","version":"23_2_8","units":{},"gaRatio":10000,"stayInIframe":true,"settingsByConditions":[],"isLoadUnitOnWindowLoaded":false,"abTest":"","adMaxPlaySeconds":181,"adTitle":"Video","aspectRatio":"16:9","aspectRatioNum":"{{defaultAspectRatioNum}}","defaultAspectRatioNum":1.7777777777777777,"autoPlay":true,"baseReportD":"basebanner.com","oppsDataCenter":"la","country":"","clickTestSeconds":0.5,"defaultAdParameters":"","defaultTagTimeout":20,"gaFactor":10000,"height":0,"ip":"","isAllowDuplicateKey":true,"isDebug":false,"isFirePixel":true,"isMobile":false,"isPlayerViewable":false,"isRepeat":true,"isCallIDLE":false,"isShowOnAd":false,"isSoundOnHover":false,"isUnitEligible":false,"isUnitViewable":false,"isUseObserver":false,"isUseNonNativeObserver":false,"kbnul":"//vidanalytics.taboola.com","lineItemId":"","loaderImage":"","logViewabilityCalc":false,"mute":true,"noaop":2,"openingEffect":0,"originId":15,"placement":"","playerContainer":"body","playerEndSeconds":0,"printCurrentViewPercent":false,"repeat":true,"ronPercent":5,"secondsBW":10,"secondsToClose":200,"secondsToCloseGlobal":0,"sortOrderType":0,"state":null,"timeBetweenAds":1,"traceViewabilitySeconds":2,"traceViewability100Seconds":2,"vertical":"_#VERTICAL#_","viewabilityPercent":50,"volumeMuted":true,"wfManual":true,"volume":"onHover","width":0,"maxVimpsInQueue":2,"autoplayDetectorTimeoutSec":1,"billableEvents":[1,21,22,23,24,25,30,32],"dataCenter":"_#DATA_CENTER#_","numOfWfUntilDcSwitch":20,"domain_wf_base_path":"//{{oppsDataCenter}}-wf.taboola.com","activateCookieSync":true,"isPWOV":false,"PPD":{"preferPPD":false,"ppdTimeout":5500},"frameType":0,"100viewPercent":98,"predictors":{"mp4":{"adProperties":{"vpaidWrapper/type":["video"]},"predictPoint":1},"postRepeat":{"isActive":false,"predictPoints":1,"waitBeforePredictMs":2000},"isGet1OnlyAfterAdLoaded":false,"autoKill":{"isActive":true,"allowedPredictPoint":0},"getAdFail":{"isActive":true,"allowedPredictPoints":"any"},"multiAd":{"isActive":true,"predictPoints":{}},"emptyQueue":{"isActive":true,"predictPoints":"any"},"playerReady":{"isActive":true,"predictPoint":0},"distancePercent":{"isActive":false,"predictPoints":{}},"distancePixels":{"isActive":false,"predictPoints":{}},"firstScroll":{"isActive":false,"predictPoints":0},"fullEligibility":{"isActive":false,"predictPoints":1,"maxPPS":1,"checkPredictsSeconds":0.5},"intersection":{"isActive":false}},"sliderCutOffDefaultCard":1,"cookieMatchActive":false,"fmNoAboveSelector":"no-vabove","fmNoBelowSelector":"no-vbelow","validateAutoplayOniOS":{"isActive":false},"vForce":{"isActive":true,"getAdTimeoutSeconds":60,"secondsToGetAdFail":{"0":60,"1":60}},"detach":{"width":320,"position":{"horizontal":"right","vertical":"bottom"}},"customization":{"unitContainer":{},"adTitle":{},"placeHolder":{},"playerView":{}},"midrollCollapse":{"isActive":false,"time":5},"pixels":{"pageView":{"type":0,"isFire":true},"conversion":{"id":31425418,"type":2,"isFire":true},"close":{"id":31579687,"type":5,"isFire":true},"timeout":{"id":31574457,"type":5,"isFire":true},"addImpresion":{"id":31579657,"type":5,"isFire":true},"eligible":{"id":31579697,"type":16,"isFire":true},"lostEligibility":{"type":43,"isFire":true},"quarterly1":{"id":31608197,"type":5,"isFire":true},"quarterly2":{"id":31608207,"type":5,"isFire":true},"quarterly3":{"id":31608217,"type":5,"isFire":true},"complete":{"id":31608237,"type":5,"isFire":true},"startWithABT":{"id":31589837,"type":45,"isFire":false},"repeatClick":{"type":46},"adChoice":{"type":67},"noCMPonPage":{"type":72},"hasCMPonPage":{"type":73,"isFire":true},"testPixels":{"type":100},"terminateOnResize":{"type":89},"unitDelayed":{"type":93},"unitLoadAfterDelay":{"type":94},"passbackFunctionCalled":{"type":99,"isFire":true},"unitLoaded":{"type":120},"unitLoadedWithFill":{"type":121},"feedHasNoCardsToOpen":{"type":122},"cancelGetAdOnEligibilityLost":{"type":152,"name":"cancelGetAdOnEligibilityLost","isFire":false},"placementPushedOutOfViewport":{"type":154,"name":"placementPushedOutOfViewport","isFire":false},"TRCDispatchFailed":{"type":156,"name":"TRCDispatchFailed","isFire":false},"disabledAutoPlay":{"type":160,"name":"disabledAutoPlay","isFire":false},"organicVideoPlaying":{"type":168,"name":"organicVideoPlaying","isFire":false},"onMaxNonRvVimpsInQueue":{"type":171,"name":"onMaxNonRvVimpsInQueue","isFire":false},"terminateOnNoAds":{"type":176,"name":"terminateOnNoAds","isFire":false},"onMaxVimpsInQueue":{"type":179,"name":"onMaxVimpsInQueue","isFire":false},"url":"//conv{{dataCenter}}mp.{{baseReportD}}/st","pvUrl":"//impr{{dataCenter}}mp.taboola.com/st"},"closeButton":{"hasCloseButton":true},"urls":{"base":"//vidstat.taboola.com","staticImage":""},"rtlLanguagesArray":["he"],"player":{"versions":{"vplayer":"v9.0.77"},"urls":{"vplayerLocation":"{{urls.base}}/vpaid/vPlayer","playerLocation":"{{player.urls.vplayerLocation}}/player/{{player.versions.vplayer}}","contentVideosLocation":"//vidstat.taboola.com/vid","organicContentVideosLocation":"//magazine-api.taboola.com/video-content","oppsBasePath":"//opps.{{baseReportD}}","nonBllbOppsBasePath":"//{{oppsDataCenter}}-vid-events.taboola.com","oppsRequest":"{{player.urls.oppsBasePath}}/OpportunityServlet","nonBllboppsRequest":"{{player.urls.nonBllbOppsBasePath}}/OpportunityServlet","wfBasePath":"//wf.{{baseReportD}}","domainWfBasePath":"//{{oppsDataCenter}}-wf.{{baseReportD}}","blankLocation":"{{player.urls.contentVideosLocation}}/blackScreen5.mp4","contentLocation":"{{urls.base}}/content{{player.versions.content}}.js","contentImagesLocation":"{{player.urls.contentVideosLocation}}/img"},"settings":{"overrideSessionDataOnEveryWfResponse":true,"queue_size":6,"max_ready_vpaid":3,"mprdct":0.025,"isMultiVpaidUnit":false,"vakll":240000,"time_between_waterfall":1,"mintimwf":10000,"wf_manual":false,"wf_dynmc_ps":false,"disctxt":"Advertisement","rstmrai":true,"pstn":"vforce2"},"hasAdControls":true,"playlist":[]},"components":{"CloseButtonView":{"hasCloseButton":false,"delay":1500,"imageLocation":"{{urls.base}}/assets/x-close-24.png"},"TimerView":{"hasTimer":false,"time":3,"countdownAction":"closeButton"},"Repeat":{"isActive":false,"replayIcon":"{{urls.base}}/assets/replay-button.svg","replayIconByLang":"{{urls.base}}/assets/replay-button_{{language}}.svg","replayHoverIcon":"{{urls.base}}/assets/replay-button-hover.svg","replayHoverIconByLang":"{{urls.base}}/assets/replay-button-hover_{{language}}.svg","learnMoreIcon":"{{urls.base}}/assets/learn-more-button.svg","learnMoreIconByLang":"{{urls.base}}/assets/learn-more-button_{{language}}.svg","learnMoreHoverIcon":"{{urls.base}}/assets/learn-more-button-hover.svg","learnMoreHoverIconByLang":"{{urls.base}}/assets/learn-more-button-hover_{{language}}.svg","backgroundImage":"{{urls.base}}/assets/blurry-image.png"},"Loading":{"type":"img","imgUrl":"{{urls.base}}/assets/loading2.png","staticUrl":"{{urls.base}}/assets/repeat1.PNG"},"contentVideo":{"loadingImgae":"{{components.Loading.imgUrl}}","muteImgUrl":"{{urls.base}}/assets/video_controls/desk_muted2.svg","unmuteImgUrl":"{{urls.base}}/assets/video_controls/desk_playing2.svg","pauseImgUrl":"{{urls.base}}/assets/video_controls/pause2.svg"},"contentCarousel":{"backgroundImage":"{{urls.base}}/img/play_image_3.jpg"},"adChoice":{"isActive":false,"fallbackUrl":"https://popup.taboola.com/en","icon":"//cdn.taboola.com/static/c5/c5ef96bc-30ab-456a-b3d5-a84f367c6a46.svg","title":{"isActive":false,"text":"Sponsored Video by Taboola","style":{},"logoStyle":{},"adViewStyle":{}},"videoAd":{"isActive":false,"text":"Ad","style":{},"logoStyle":{}}},"volume":{"isActive":false,"expandedText":"Unmute","timeToMinimize":2000,"style":{"border":{},"mute":{},"unmute":{},"text":{}}}},"content":{"playClicked":true},"noSoundBrowsers":{"chrome":{"minVersion":66},"safari":{"minVersion":11},"firefox":{"minVersion":66}},"style":{"videoBackgroundColor":"black"},"isUseCrossUnitCommunication":true,"isObserveCrossUnitCommunication":true,"isUpdateCrossUnitCommunication":true,"blockedByExternalUnit":false,"playingNowString":"NOW <br/> PLAYING","isGetRv1OnlyForEligible":{"isActive":false,"delayPrediction":false},"isCancelGetAdOnEligibilityLost":false,"isChangePredictPointsWithAny":true,"isVideoAutoplayDetectorEnabled":true,"elasticLogger":{"isActive":false,"secondsBetweenEvents":5},"secondsToFill":5,"secondsToPassback":5,"isMultiAd":true,"runWfWhenEmpty":true,"viewPercent":20,"wfDynamicPause":false,"isCheckTopParentSelectorLost":true,"playPriority":{"type":"rpox","key":1,"checkForRvPriority":"onEligibility"},"rboxCssSelectors":{"title":".video-label.video-title","description":".video-label.video-description","branding":".video-label-box .branding"},"renderLearnMore":true,"nativeAdMapping":{"title":"title","ctaButtone":"ctatext","description":"desc","branding":"sponsored","icon":"icon"},"isViewableAMP":false,"isUseAmpObserver":false,"animation":{"onTransitionOpen":false,"onTransitionClose":true,"slideOut":500},"allowedHeightChange":75,"isFitToSize":true,"brandingTitleSelector":".video-label-box .branding","widgetTitleSelector":".video-label-box .video-title","detachToSlider":{"isStartFromSlider":false,"isDetachToSlider":false,"isDetachAbove":false,"isDetachBelow":true,"width":400,"height":400,"position":{"horizontal":"right","vertical":"bottom","horizontalOffset":0,"verticalOffset":0},"liquidSize":{"isActive":false,"widthPercent":33,"minWidth":200,"heightPercent":30,"maxHeight":350},"customCss":null,"animation":true,"animationTimes":{"detach":1000,"attach":1000},"hasCloseButton":true,"onOutOfView":"pause","components":{"disclosureText":{"text":"ADVERTISEMENT","isActive":false}}},"parentSelector":".tbl-feed-container","isDataTrackDivHasDim":true,"widgetSelector":".videoCube","category":"blankblack5","pubId":169497,"pubTagId":953497,"preroll":{"pubId":169497,"pubTagId":953497},"midroll":{"pubId":169497,"pubTagId":953497},"postroll":{"pubId":169497,"pubTagId":953497},"titleContainer":{"titleText":"Video from our partners","BrandingText":"Brought to you by Taboola"},"secondsToCloseFeed":20,"onOutOfView":"pause","unitTitle":"Sponsored Video by Taboola","additionalCss":{"z-index":"999 !important"},"isKeepUnitOnMidroll":false,"maxValidRatioForTakeover":2.36,"minValidRatioForTakeover":1,"isCoverWidgetHorizontal":false,"isCoverWidgetVertical":false}')}},2:function(U,e,t){t.d(e,"a",function(){return Ne});var s=t(0),W=t(1);function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t,i){return(t=(e=>(e=((e,t)=>{if("object"!=n(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0===i)return("string"===t?String:Number)(e);if("object"!=n(i=i.call(e,t||"default")))return i;throw new TypeError("@@toPrimitive must return a primitive value.")})(e,"string"),"symbol"==n(e)?e:e+""))(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var e={PLAIN:0,START_FROM_SLIDER:1,DETACH_TO_SLIDER:2,SUPER_SLIDER:3,INLINE_SINGLE_SELECTOR:4,INLINE_MULTI_SELECTOR:5,STICKY_BELOW:6,STICKY_ABOVE:7,STICKY_BELOW_ABOVE:8,WIDGET:9,DETACH_OPT_OUT:10},o={SUB_UNIT_TYPE:e,UFM_AB_TEST_GROUPS:i(i(i(i(i(i(i(i({},e.PLAIN,"_vA"),e.START_FROM_SLIDER,"_vB"),e.DETACH_TO_SLIDER,"_vC"),e.SUPER_SLIDER,"_vD"),e.STICKY_BELOW,"_vE"),e.STICKY_ABOVE,"_vF"),e.STICKY_BELOW_ABOVE,"_vG"),e.DETACH_OPT_OUT,"_vH"),FRAME_TYPES:{PLAIN_PAGE:0,FRIENDLY_IFRAME:1,NON_FRIENDLY_IFRAME:2,AMP:3,IN_APP:4},INVALID_SELECTOR_TAG_NAMES:["IMG","UL","BUTTON","INPUT","LABEL"],NODE_TYPES:{NODE_ELEMENT:1},AGG_LEVELS:{LEVELS:{STANDARD:"1",SAFE_WF_NO_POLITICS_AND_NO_GAMBLING:"101",LIGHT_WATERFALL:"2",VERY_LIGHT_WATERFALL:"3",DIRECT_AND_TREMOR_RTB:"4",DIRECT_ONLY:"5",PASSBACK:"PASSBACK"}},ADV_TYPES:{TAGS:7,PREBID:13},SELECTORS:{BODY:"body"},ITEM_TYPES:{ADX:27},BROWSERS:{IOS:"iOS"},RV_TYPES:{NON_RV:0,RV:1,ANY:"any"}},r={SETTINGS:'\n{\n    "psthdrs": "text/plain",\n    "dnapmxvl": 0,\n    "player_version": {{PLAYER_VERSION}},\n    "wfv": 1,\n    "isAmp": {{IS_AMP}},\n    "encwfrs": true,\n    "wf_base_path": "//wf.taboola.com",\n    "domain_wf_base_path": "//{{oppsDataCenter}}-wf.taboola.com",\n    "wf_path": "VideoBidRequestHandlerServlet",\n    "updtcmpbfrwf": false,\n    "ab_test": "{{AB_TEST}}",\n    "auc_dast": "{{AUC_DAST}}",\n    "queue_size": 6,\n    "isPrivateBrowsing": "no",\n    "firstWaterfallNoaop": 0,\n    "max_ready_vpaid": 3,\n    "vpaidReadyCount": 0,\n    "fmpw": "",\n    "preset.level": {{PRESET_LEVEL}},\n    "mxtmbtwfs": 900,\n    "mntmbtwfs": 5,\n    "time_between_waterfall": 10,\n    "mintimwf": 5000,\n    "conversionsCount": 0,\n    "failsCount": 0,\n    "numOfWfUntilDcSwitch": 20,\n    "sndgdprprmswf": false,\n    "prbdjsv": "1.0.8",\n    "prbdjse": true,\n    "wfsrc": "liteUnit"\n    \n}',TAG_DEFAULT:'\n{\n    "pubid": "",\n    "tagid": "",\n    "cirf": "{{CIRF}}",\n    "muted": {{MUTED}},\n    "oid": {{ORIGIN_ID}},\n    "noaop": "10",\n    "sortOrderType": 0,\n    "isvideo": 0,\n    "mindur": 1,\n    "maxdur": {{DEFAULT_AD_TIMEOUT}},\n    "minbr": 1,\n    "maxbr": 10000,\n    "plmd": 0,\n    "use_as_is": false\n}\n',DEFAULT_VPAID_PARAMETERS:'\n{\n    "PUBID": 0,\n    "TAGID": 0,\n    "SERVICE": "WhiteLabelBidRequestHandlerServlet",\n    "CIRF": "",\n    "ISVIDEO": 1,\n    "PLMD": 2,\n    "MINDUR": 1,\n    "MAXDUR": 60,\n    "MINBR": 1,\n    "MAXBR": 512,\n    "SORTORDERTYPE": 0,\n    "OID": "",\n    "NOAOP": "",\n    "CM_DOMAIN": "http://exchange.basebanner.com",\n    "MUTED": false,\n    "PLAYER_WIDTH": 0,\n    "PLAYER_HEIGHT": 0\n}\n'},M="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function N(e){return Math.floor(9*e/16)}function x(e){return e<1e3?e:e/1e3}var a={FEED_MANAGER:"FEED_MANAGER",INLINE_FEED:"INLINE_FEED",WIDGET_ITEM:"WIDGET_ITEM",INLINE_INSTREAM:"INLINE_INSTREAM",SLIDER:"SLIDER",SLIDER_INSTREAM:"SLIDER_INSTREAM",RECO_REEL_WIDGET:"RECO_REEL_WIDGET",MID_ARTICLE_SLIDER:"MID_ARTICLE_SLIDER",WATCH_VIDEO:"WATCH_VIDEO",INSTREAM:"INSTREAM"};function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var l=void 0,c=null;function u(){var e,t,i,n,r;return void 0===l&&((e=c.get("unitType"))===a.INLINE_INSTREAM?(r=c.get("parentSelector"))?1<(r=(e=>{for(var t=document.querySelectorAll(e),i=0,n=0;n<t.length;n++){var r=t[n].getBoundingClientRect();100<=r.width&&0<=r.height&&o.INVALID_SELECTOR_TAG_NAMES.indexOf(r.tagName)<0&&i++}return i})(r))?l=o.SUB_UNIT_TYPE.INLINE_MULTI_SELECTOR:1!==r&&!V()||(l=o.SUB_UNIT_TYPE.INLINE_SINGLE_SELECTOR):V()&&(l=o.SUB_UNIT_TYPE.INLINE_SINGLE_SELECTOR):e===a.FEED_MANAGER||e===a.WIDGET_ITEM?((r=c.get("unitType"))===a.FEED_MANAGER&&(window.TRC&&window.TRC.isAmp&&(f(c,"detachToSlider.isDetachToSlider",!1),f(c,"detachToSlider.isStartFromSlider",!1)),(c.get("detachToSlider.isStartFromSlider")||c.get("detachToSlider.isDetachToSlider"))&&f(c,"stickyCard.isActive",!1),c.get("stickyCard.isActive"))&&(f(c,"detachToSlider.isDetachAbove",!1),f(c,"detachToSlider.isDetachBelow",!1),f(c,"detachToSlider.isDetachToSlider",!1),f(c,"detachToSlider.isStartFromSlider",!1)),r===a.WIDGET_ITEM&&((r=c.get("frameType")===o.FRAME_TYPES.PLAIN_PAGE)||f(c,"detachToSlider.isDetachToSlider",!1),c.get("stickyCard.isActive")&&r?(f(c,"detachToSlider.isDetachAbove",!1),f(c,"detachToSlider.isDetachBelow",!0),f(c,"detachToSlider.isDetachToSlider",!0),f(c,"detachToSlider.isStartFromSlider",!1)):f(c,"stickyCard.isActive",!1),(r=c.get("width"))&&0!==r||!c.get("isOverrideWidthOnZero")||f(c,"width",300)),t=c.get("stickyCard.isActive"),i=c.get("detachToSlider.isStartFromSlider"),(n=c.get("detachToSlider.isDetachToSlider"))&&-1<document.cookie.indexOf("no_scrollable_player=true")?l=o.SUB_UNIT_TYPE.DETACH_OPT_OUT:t||i||!n?!t&&i?l=o.SUB_UNIT_TYPE.SUPER_SLIDER:t&&(l=o.SUB_UNIT_TYPE.STICKY_BELOW):l=o.SUB_UNIT_TYPE.DETACH_TO_SLIDER):e===a.MID_ARTICLE_SLIDER&&(n=c.get("detachToSlider.isStartFromSlider"),i=c.get("detachToSlider.isDetachToSlider"),n?l=o.SUB_UNIT_TYPE.START_FROM_SLIDER:i&&(l=o.SUB_UNIT_TYPE.DETACH_TO_SLIDER))),l}function V(){if(c.get("isUsePlacementElement")){var e=c.get("placementElement");if(e&&e instanceof HTMLElement)return 1;if((e=document.getElementById("_cm_videoUnit_placeHolder".concat(c.get("redId"))))&&!(e=>{for(;e!==document.body&&e!==document.head;)e=e.parentElement;return e===document.head})(e))return 1}}function G(e){if(d(e)){if(!p(e)&&!g(e))try{e=decodeURIComponent(e)}catch(e){}if(e&&"["===e[0]&&"]"===e[e.length-1])try{e=JSON.parse(e)}catch(e){}if(y(e)&&0===e.indexOf("function")){var t=new Function("try { return ".concat(e,"; } catch(ex) {}"))();if(t)return t}return Array.isArray(e)?e.map(G):Y(e)?e.cloneNode(!0):"true"===e||!0===e||"false"!==e&&!1!==e&&(""===e||isNaN(e)?e:Number(e))}}function H(e){for(var t=0;t<e.length;t++){var i=e[t];if((e=>d(e.func)||!(!d(e.key)||!d(e.val)))(i))if(i.func){if(!i.func(c))return}else{var n=i.val;if((n=g(i.val)?i.val(c):n)!=c.get(i.key))return}}return 1}function f(e,t,i){if(-1===t.indexOf("."))if(i&&p(i)&&!Array.isArray(i)&&!Y(i))for(var n in e[t]=e[t]||{},i)f(e[t],n,i[n]);else e[t]=G(i);else{var r=t.split("."),o=r.shift();e[o]=e[o]||{},p(e[o])||(e[o]={}),f(e[o],r.join("."),i)}}function Y(e){return e&&e.nodeType&&e.nodeType===o.NODE_TYPES.NODE_ELEMENT}function z(e){for(var t=e.split("."),i=c,n=0;n<t.length&&i;n++)i=t[n]in i?i[t[n]]:void 0;return i}function q(e){if((r=z(e))&&y(r))for(var t=r.match(/\{\{(.*?)\}\}/g);t;){for(var i=0;i<t.length;i++)var n=(n=z(t[i].substr(2,t[i].length-4)))||"",r=r.replace(t[i],n);t=r.match(/\{\{(.*?)\}\}/g)}return r}function d(e){return void 0!==e}function K(e){if(e)return e.replace("{{dataCenter}}",c.get("dataCenter")).replace("{{oppsDataCenter}}",c.get("oppsDataCenter")).replace("{{baseReportD}}",c.get("baseReportD"))}function h(e){var t,i,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;null!=(t=c)&&t.get("deferTasks.isActive")?(t=n?e.bind(n):e,t=t,(null==(i=TRC)||null==(i=i.util)?void 0:i.isNativeFunction(window.Scheduler))&&g(null==(i=window)||null==(i=i.scheduler)?void 0:i.postTask)?window.scheduler.postTask(t,{priority:"user-blocking"}):(null==(i=window)||null==(i=i.TRC)?void 0:i.sendTaskToFader)?window.TRC.sendTaskToFader(t):(setTimeout(t,0),null!=(i=__trcError)&&i("Video Lite Unit using defer without Fader!"))):e.apply(n)}function p(e){return"object"===j(e)}function g(e){return"function"==typeof e}function y(e){return"string"==typeof e}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function X(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(e=>(e=((e,t)=>{if("object"!=m(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0===i)return("string"===t?String:Number)(e);if("object"!=m(i=i.call(e,t||"default")))return i;throw new TypeError("@@toPrimitive must return a primitive value.")})(e,"string"),"symbol"==m(e)?e:e+""))(n.key),n)}}var Q=null,v=(()=>{function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");if(Q)return Q;this.config=e,this._createBasePixelUrl(),Q=this}return e=t,(i=[{key:"_createBasePixelUrl",value:function(){var e="?cijs=convusmp&ttype={{TTYPE}}&cisd=convusmp&cipid=".concat(this.config.get("cipid"),"&crid=").concat(this.config.get("creativeId"),"&dast=").concat(this.config.get("dast"),"&cmcv=&pix={{PIXEL_ID}}&cb={{TIMESTAMP}}&uv=").concat((()=>{var e=c.get("version");if(e)return e.replace(/_/g,"")})(),"&tms={{TIMESTAMP}}");this.pixelUrl="".concat(this._getPixelUrl(this.config.get("pixels.url"))).concat(e),this.pvPixelUrl="".concat(this._getPixelUrl(this.config.get("pixels.pvUrl"))).concat(e),this._addAbTestToPixelUrl(),this._addReferrerUrlToPixelUrl(),this._addFrameTypeToPixelUrl(),this._addSubUnitToPixelUrl(),this._addOmniTagParams()}},{key:"_getPixelUrl",value:K},{key:"_addAbTestToPixelUrl",value:function(){var e,t=this.config.get("_abTest");e=this.config.get("isHip"),window.TRC&&void 0!==window.TRC.readMoreVisible&&e&&(t+="!rdmr"),t&&this._addToUrl("abt",t)}},{key:"_addToUrl",value:function(e,t){this.pixelUrl+="&".concat(e,"=").concat(t),this.pvPixelUrl+="&".concat(e,"=").concat(t)}},{key:"_addReferrerUrlToPixelUrl",value:function(){var e=this.config.get("referrerUrl");e&&this._addToUrl("ru",e)}},{key:"_addFrameTypeToPixelUrl",value:function(){this._addToUrl("ft",this.config.get("frameType"))}},{key:"_addSubUnitToPixelUrl",value:function(){this._addIfExist(u(),"su")}},{key:"_addOmniTagParams",value:function(){this._addIfExist(this.config.get("tagCpmFloor"),"cft"),this._addIfExist(this.config.get("unitId"),"blid"),this._addIfExist(this.config.get("unitType"),"unm"),this._addIfExist(this.config.get("debugKey1"),"dk1"),this._addIfExist(this.config.get("debugKey2"),"dk2"),this._addIfExist(this.config.get("order"),"order")}},{key:"_addIfExist",value:function(e,t){d(e)&&this._addToUrl(t,e)}},{key:"firePixel",value:function(e,t){var i;this.config.get("isFirePixel")&&(i=this._getPixel(e))&&i.isFire&&(i="".concat(this._generatePixelUrl(i),"&").concat(this._normalizeAdditionalData(t)),this.config.get("activateCookieSync")&&e===this.PIXEL_TYPES.PAGE_VIEW?((t=document.createElement("iframe")).src=i,t.style.display="none",document.body.appendChild(t)):document.createElement("img").src=i)}},{key:"_getPixel",value:function(e){return this.config.get(e)}},{key:"_generatePixelUrl",value:function(e){var t=this.pixelUrl;return(t=0===e.type?this.pvPixelUrl:t).replace("{{TTYPE}}",null!=(t=e.type)?t:"").replace("{{PIXEL_ID}}",e.id).replace(/{{TIMESTAMP}}/g,Date.now())}},{key:"_normalizeAdditionalData",value:function(e){var t,i=[];for(t in e){var n=e[t];d(n)&&""!==n&&i.push("".concat(t,"=").concat(n))}return i.join("&")}},{key:"PIXEL_TYPES",get:function(){return{START_WITH_ABT:"pixels.startWithABT",UNIT_LOADED:"pixels.unitLoaded",UNIT_LOADED_WITH_FILL:"pixels.unitLoadedWithFill",PASSBACK_FUNCTION_CALLED:"pixels.passbackFunctionCalled",PAGE_VIEW:"pixels.pageView",DISABLED_AUTO_PLAY:"pixels.disabledAutoPlay"}}},{key:"_firePageViewPixel",value:function(){var e={splt:!!(window.TRC.isAMPSplitFeed&&1<window.TRC.feedContainerNum)||void 0,aure:window.TRC.usingCacheForPageRefresh||!1,agl:this.config.get("aggLevel"),cirid:this.config.get("redId"),cicmp:this.config.get("bli"),excid:this.config.get("tagId"),tst:1,docw:0,cs:!!this.config.get("activateCookieSync"),cias:this.config.get("activateCookieSync")?1:""};this.firePixel(this.PIXEL_TYPES.PAGE_VIEW,e)}}])&&X(e.prototype,i),n&&X(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,i,n})();function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function J(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(e=>(e=((e,t)=>{if("object"!=_(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0===i)return("string"===t?String:Number)(e);if("object"!=_(i=i.call(e,t||"default")))return i;throw new TypeError("@@toPrimitive must return a primitive value.")})(e,"string"),"symbol"==_(e)?e:e+""))(n.key),n)}}var $=(()=>{function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.config=e,this.pixels=new v(this.config),this._setCreatives()}return e=t,(i=[{key:"_setCreatives",value:function(){this.prerollCreative=this.getPrerollCreatives(),this.tagDefault=this._getTagDefault(),this.creatives=Object(s.deepMerge)(this.tagDefault,this.prerollCreative),this._normalizeCreative(),this.capitalizeCreatives=(e=>{var t,i={};for(t in e)i[t.toUpperCase()]=e[t];return i})(this.creatives),this.creatives=Object(s.deepMerge)(JSON.parse(r.DEFAULT_VPAID_PARAMETERS),this.capitalizeCreatives)}},{key:"getPrerollCreatives",value:function(){return{noaop:this.config.get("noaop")}}},{key:"_getTagDefault",value:function(){return JSON.parse(r.TAG_DEFAULT.replace("{{CIRF}}",this._getCirf()).replace("{{MUTED}}",this._getMuted()).replace("{{ORIGIN_ID}}",this._getOriginId()).replace("{{DEFAULT_AD_TIMEOUT}}",this._getDefaultAdTimeout()))}},{key:"_getCirf",value:function(){return decodeURIComponent(this.config.get("referrer"))}},{key:"_getMuted",value:function(){return this.config.get("mute")?1:0}},{key:"_getOriginId",value:function(){return this.config.get("originId")}},{key:"_getDefaultAdTimeout",value:function(){return this.config.get("adMaxPlaySeconds")}},{key:"_normalizeCreative",value:function(){var e,t=this.config.get("parentSelector"),i=document.querySelector(t),t=this.config.get("unitType")===a.INLINE_INSTREAM&&t&&i?(e=Math.round(i.getBoundingClientRect().width),Math.round(N(e))):(e=this.config.get("width")||this.config.get("dimensions.width")||(()=>{for(var e=document.getElementsByTagName("script")||[],t=0;t<e.length;t++)if(-1<e[t].src.toLowerCase().indexOf("bidrhanser")&&e[t].parentElement){var i=e[t].parentElement.getBoundingClientRect();if(i&&i.width)return i.width}return 0})(),this.config.get("height")||this.config.get("dimensions.height")||N(e));this.config.get("unitType")!==a.INLINE_INSTREAM||0!==e&&0!==t||(e=this.config.get("width"),t=this.config.get("height")),u()===o.SUB_UNIT_TYPE.SUPER_SLIDER&&this.config.get("nextUp.isActive")&&(e=this.config.get("nextUp.width")||window.innerWidth,t=this.config.get("nextUp.height")),this.creatives["player-width"]=e,this.creatives["player-height"]=t,this.creatives.plmd=this._getPlmd()}},{key:"_getPlmd",value:function(){return this.creatives.use_as_is?2:0==this.creatives.plmd?this.creatives.muted?2:1:this.creatives.plmd}},{key:"get",value:function(){return this.creatives}}])&&J(e.prototype,i),n&&J(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,i,n})();function Z(e){if(!e||!y(e))return 0;var t,i;e=(e=>{e=e.replace(/\r\n/g,"\n");for(var t="",i=0;i<e.length;i++){var n=e.charCodeAt(i);n<128?t+=String.fromCharCode(n):t=127<n&&n<2048?(t+=String.fromCharCode(n>>6|192))+String.fromCharCode(63&n|128):(t=(t+=String.fromCharCode(n>>12|224))+String.fromCharCode(n>>6&63|128))+String.fromCharCode(63&n|128)}return t})(e),d(t)||(t=0);t^=-1;for(var n=0,r=e.length;n<r;n++)i=255&(t^e.charCodeAt(n)),t=t>>>8^"0x"+"00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F 63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC 51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E 7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D 806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA 11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F 30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D".substr(9*i,8);return-1^t}function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ee(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(e=>(e=((e,t)=>{if("object"!=b(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0===i)return("string"===t?String:Number)(e);if("object"!=b(i=i.call(e,t||"default")))return i;throw new TypeError("@@toPrimitive must return a primitive value.")})(e,"string"),"symbol"==b(e)?e:e+""))(n.key),n)}}var te=(()=>{return e=function e(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0,n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:void 0,o=this,s=e;if(!(o instanceof s))throw new TypeError("Cannot call a class as a function");this.async=null==i||i,this.withCredentials=null==n||n,this.timeout=r||5e3,this.contentType=t||"application/x-www-form-urlencoded"},(t=[{key:"send",value:function(e){var t=new XMLHttpRequest,i=e.postData||"",n=(t.open(i?"POST":"GET",e.wfUrl,!0),t.withCredentials=this.withCredentials,t.setRequestHeader("Content-type",this.contentType),t.async=this.async,t.timeout=e.timeout||this.timeout,t.gotResponse=!1,this._onFail.bind(t,e)),e=this._onReadyStateChanged.bind(t,e);return t.addEventListener("error",n),t.addEventListener("abort",n),t.addEventListener("timeout",n),t.addEventListener("readystatechange",e),t.send(i),!0}},{key:"_onFail",value:function(e){this.gotResponse||(this.gotResponse=!0,e.onFail&&e.onFail([this.status],e.wfUrl))}},{key:"_onReadyStateChanged",value:function(e){4!=this.readyState||this.gotResponse||(this.gotResponse=!0,e.onSuccess&&e.onSuccess(this.responseText,void 0,e.wfUrl))}}])&&ee(e.prototype,t),i&&ee(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,i})(),ie=[{id:5,mime:"application/javascript",video:!1},{id:8,mime:"video/x-ms-wmv",video:!0},{id:10,mime:"video/mp4",video:!0},{id:11,mime:"video/ogg",video:!0},{id:12,mime:"video/webm",video:!0}];function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ne(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(e=>(e=((e,t)=>{if("object"!=E(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0===i)return("string"===t?String:Number)(e);if("object"!=E(i=i.call(e,t||"default")))return i;throw new TypeError("@@toPrimitive must return a primitive value.")})(e,"string"),"symbol"==E(e)?e:e+""))(n.key),n)}}function re(e){return e*(9/16)}var oe=9999999,se=(()=>{function i(e,t){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");this.config=e,this.store=t,this.isOutOfView=!0,this.width=this.config.get("width"),this.height=this.config.get("height"),this.iframeData=this.config.get("iframeData")||{},this.pixelsBeforeEligibility=this.config.get("pixelsBeforeEligibility"),this.parentSelectorEl=this._getParentSelectorEl(),this.parentSelectorEl&&this.pixelsBeforeEligibility&&this._init()}return e=i,(t=[{key:"_getParentSelectorEl",value:function(){var e=this.config.get("parentSelector");if(this.config.get("unitType")!==a.INSTREAM||(e=this._getInstreamParentSelectorElName()))return document.querySelector(e)}},{key:"_getInstreamParentSelectorElName",value:function(){var e=this.config.get("instreamParentSelector");return e||(this.config.get("isRRIntegration")?(e=this.config.get("placement").replace(" - Video",""),"[data-placement-name='".concat(e,"' ] .story-widget .trc_rbox_div")):window.TRC&&window.TRC.videoReelContainer?"#".concat(window.TRC.videoReelContainer):void 0)}},{key:"_init",value:function(){this.isOutOfView=this._calcIsOutOfView()}},{key:"_getPlacementHeight",value:function(e){var t;return this.iframeData.inIframe?this._getIframeHeight():(t=(null==(e=null==e?void 0:e.getBoundingClientRect())?void 0:e.width)||this.width,(null==e?void 0:e.height)||this.height||re(t))}},{key:"_getIframeHeight",value:function(){var e,t=this.iframeData.iframe;return t?(e=parseInt(t.width)||this.width,parseInt(t.height)||this.height||re(e)):this.height||re(this.width)}},{key:"_calcIsOutOfView",value:function(){var e,t,i,n;return!(!this.pixelsBeforeEligibility||(this.parentSelectorEl?this.config.get("detachToSlider.isStartFromSlider")?(this.store.set("distancePixelPredictData.actualPredictionPoint",0),0):(n=this._getPlacementHeight(this.parentSelectorEl),e=window.innerHeight+window.scrollY,i=(t=this._getTopOfParentElement(this.parentSelectorEl,this.iframeData.inIframe))-this.pixelsBeforeEligibility,n=t+n+this.pixelsBeforeEligibility,this.store.set("distancePixelPredictData.actualPredictionPoint",t-e),i<=e&&n>=window.scrollY):(this.store.set("distancePixelPredictData.actualPredictionPoint",oe),0)))}},{key:"_getTopOfParentElement",value:function(e,t){if(e){if(t)return this._getTopOfIframeParentElement();for(var i=0;e;)i+=e.offsetTop-e.scrollTop,e=e.offsetParent;return i}}},{key:"_getTopOfIframeParentElement",value:function(){try{return this._getTopOfParentElement(window.parent.document.getElementById(this.iframeData.iframe.id),!1)}catch(e){return oe}}},{key:"getIsOutOfView",value:function(){return this._calcIsOutOfView()}}])&&ne(e.prototype,t),n&&ne(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n})();function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ae(e,t){return(e=>{if(Array.isArray(e))return e})(e)||((e,t)=>{var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,r,o,s,a=[],l=!0,c=!1;try{if(o=(i=i.call(e)).next,0===t){if(Object(i)!==i)return;l=!1}else for(;!(l=(n=o.call(i)).done)&&(a.push(n.value),a.length!==t);l=!0);}catch(e){c=!0,r=e}finally{try{if(!l&&null!=i.return&&(s=i.return(),Object(s)!==s))return}finally{if(c)throw r}}return a}})(e,t)||((e,t)=>{var i;if(e)return"string"==typeof e?le(e,t):"Map"===(i="Object"===(i={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:i)||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?le(e,t):void 0})(e,t)||(()=>{throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})()}function le(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=Array(t);i<t;i++)n[i]=e[i];return n}function w(){return(w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i,n=arguments[t];for(i in n)!{}.hasOwnProperty.call(n,i)||(e[i]=n[i])}return e}).apply(null,arguments)}function ce(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(e=>(e=((e,t)=>{if("object"!=T(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0===i)return("string"===t?String:Number)(e);if("object"!=T(i=i.call(e,t||"default")))return i;throw new TypeError("@@toPrimitive must return a primitive value.")})(e,"string"),"symbol"==T(e)?e:e+""))(n.key),n)}}var ue=(()=>{function i(e,t){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");this.store=e,this.creatives=t,this.XHR=new te(this.store.get("psthdrs")||"application/json",!0,!0,5e3),this._init(),this._setBaseUrl(),this._getConsentData(),this._checkMimeTypes()}return e=i,(t=[{key:"_init",value:function(){this._setCounter(),this.dynamicNoaopMaxValue=this.store.get("dnapmxvl"),this.playerVersion=this.store.get("player_version"),this.timezoneOffset=-1*(new Date).getTimezoneOffset(),this.waterfallVersion=this.store.get("wfv"),this.isAmp=this.store.get("isAmp")?"1":"0",this.encodeWaterfallResponse=this.store.get("encwfrs")?1:void 0,this.changedBaseUrlDc=!1,this.providedIds=this._loadProvidedIds(),this.waterfallSource=this._setWfSource(this.store.get("wfsrc"))}},{key:"_setCounter",value:function(){this.dast=this.store.get("auc_dast"),window._cm_wfCounters||(window._cm_wfCounters={}),window._cm_wfCounters.hasOwnProperty(this.dast)||(window._cm_wfCounters[this.dast]=1)}},{key:"_setBaseUrl",value:function(){var e,t=this.store.get("wf_base_path")||this.creatives.CM_DOMAIN,i=this.store.get("wf_path")||this.creatives.SERVICE;this.baseUrl="".concat(e=y(e=t)&&0!==(e=e.replace(/^(http[s]?:|ftp:)/g,"")).indexOf("//")?"//"+e:e).concat(/.*\/$/g.test(t)?"":"/").concat(i)}},{key:"changeWfBasePath",value:function(){var e=this.store.get("domain_wf_base_path");!this.changedBaseUrlDc&&this.getWfCounter()>this.store.get("numOfWfUntilDcSwitch")&&e&&(this.changedBaseUrlDc=!0,this.store.set("wf_base_path",e),this._setBaseUrl())}},{key:"_getConsentData",value:function(){this.updateCMPData=this.store.get("updtcmpbfrwf"),this.updateCMPData&&this._initConsentData()}},{key:"_setWfSource",value:function(e){switch(e){case"liteUnit":return 1;case"player":return 2;default:return-1}}},{key:"_initConsentData",value:function(){this.rboxConsentData=window.TRC&&window.TRC.consentData?window.TRC.consentData:{},this.consentData={cdb:this.store.get("cdb")||this.rboxConsentData.consentDaisyBit,gdprApplies:this.store.get("gdprApplies")||this.rboxConsentData.gdprApplies}}},{key:"_checkMimeTypes",value:function(){var e=document.createElement("video");this.supportedMimeTypes=[],this.supportedMimeTypes.push(5);for(var t=0;t<ie.length;t++){var i=ie[t];i.video&&e.canPlayType(i.mime)&&this.supportedMimeTypes.push(i.id)}e=void 0,this.supportedMimeTypes=this.supportedMimeTypes.join(",")}},{key:"generateUrl",value:function(e){e="".concat(this.baseUrl,"?").concat(this._setWfUrlQuerystring(e));return window.lastWfUrl=e}},{key:"_setServiceName",value:function(){return this.store.get("wf_path")||this.creatives.SERVICE}},{key:"_setWfUrlQuerystring",value:function(e){if(!e.roll)return"";this._updateConsentData();var t,i=w(this._buildParamsForQuerystring(e),this._buildOptionalParamsForQuerystring(),this._buildGDPRParamsForQuerystring(e)),i=this._appendUnitParams(i,e),e=(t=i,Object.keys(t).map(function(e){return"".concat(e,"=").concat(t[e])}));return(e=this._appendWfExtraParams(e)).join("&")}},{key:"_updateConsentData",value:function(){var t=this;this.updateCMPData&&void 0!==window.__cmp&&window.__cmp("getConsentData",null,function(e){t.consentData.cdbUpdated=t.consentData.cdb!==e.consentData,t.consentData.cdb=e.consentData,t.consentData.gdprApplies=e.gdprApplies})}},{key:"_getDistance",value:function(){var e=this.store.get("distancePixelPredictData.actualPredictionPoint");return void 0===e?oe:parseInt(e)}},{key:"_buildParamsForQuerystring",value:function(e){return{oid:this.creatives.OID,width:this.creatives.PLAYER_WIDTH||this.creatives["PLAYER-WIDTH"],height:this.creatives.PLAYER_HEIGHT||this.creatives["PLAYER-HEIGHT"],pubid:e.pubid||this.creatives.PUBID,tagid:e.tagid||this.creatives.TAGID,crid:this.store.get("creativeId")||"",noaop:this._decideNoaop(e.isFirstRun,this.creatives.NOAOP),sortOrderType:this.creatives.SORTORDERTYPE,cb:(new Date).getTime(),mimes:this.supportedMimeTypes,isvideo:this.creatives.ISVIDEO,plmd:this.creatives.PLMD,mindur:this.creatives.MINDUR,maxdur:this.creatives.MAXDUR,minbr:this.creatives.MINBR,maxbr:this.creatives.MAXBR,st:(t=e.roll.roll_type,i=(n={"pre-roll":i=0,preroll:0,"mid-roll":-1,midroll:-1,"post-roll":-2,postroll:-2}).hasOwnProperty(t)?n[t]:i),seq:window._cm_wfCounters[this.dast],pv:this.playerVersion||999,pt:Z(this.store.get("ab_test")||999),tz:this.timezoneOffset,viewable:!document.hidden,ddast:this.store.get("auc_dast"),proto:"2,3,5,6",encoded:1,pstn:this.store.get("pstn")||1,callback:"",wfv:this.waterfallVersion,amp:this.isAmp,qsz:this.store.get("queue_size")||10,ft:this.store.get("frameType"),pb:"yes"===this.store.get("isPrivateBrowsing")?"1":"0",pagg:this.store.get("preset.level")||1,sd:this.store.get("startDelay"),ctsldr:!0===this.store.get("isSliderCutOff")?"1":"0",ioovp:e.ioovp,distance:this._getDistance()};var t,i,n}},{key:"_decideNoaop",value:function(e,t){var i;return(e?this.store.get("firstWaterfallNoaop"):0<this.dynamicNoaopMaxValue?(e=this.store.get("max_ready_vpaid")||0,i=this.store.get("vpaidReadyCount")||0,Math.min(this.dynamicNoaopMaxValue,e-i)):t)||t}},{key:"_buildOptionalParamsForQuerystring",value:function(){var e=this.store.get("mprdct"),t=this.store.get("subUnitType"),e={dtagid:this.store.get("dtagid")||void 0,dpubid:this.store.get("dpubid")||void 0,abtst:this.store.get("ab_test")||void 0,mPre:d(e)?e:void 0,fmli:this.store.get("fmli")||void 0,fmpw:this.store.get("fmpw")||void 0,cirf:this.creatives.CIRF?encodeURIComponent(decodeURIComponent(this.creatives.CIRF)):void 0,en:this.encodeWaterfallResponse,subu:d(t)?t:void 0,panid:this._getPanoramaId()||void 0};return JSON.parse(JSON.stringify(e))}},{key:"_buildGDPRParamsForQuerystring",value:function(){return this.store.get("sndgdprprmswf")?{cdb:(this.updateCMPData?this.consentData.cdb:this.store.get("cdb"))||"",gdprApplies:(this.updateCMPData?this.consentData.gdprApplies:this.store.get("gdprApplies"))||!1}:{}}},{key:"_appendUnitParams",value:function(e,t){return 0<Object.keys(t.unitWfParams).length?w(e,t.unitWfParams):e}},{key:"_appendWfExtraParams",value:function(e){var t=this.store.get("wf_xrta");return t&&e.push(t),e}},{key:"generatePOSTParams",value:function(e){return w(this._buildParamsForPOSTData(e),this._buildOptionalParamsForPOSTData())}},{key:"_buildParamsForPOSTData",value:function(e){var t=this.store.get("navigatorConnection")||{};return{fv:this._buildLineItemsDataForPOSTData(),wfv:this.waterfallVersion,adv:this.store.getWfData(),cdl:t.downlink||0,cet:t.effectiveTypeId||0,ct:t.typeId||0,crt:t.rtt||0,csd:!0===t.saveData?1:0,q:e.queueStatus?e.queueStatus.items:[],qs:e.queueStatus?e.queueStatus.size:0,pq:e.queueStatus?e.queueStatus.prevItems:[],drp:btoa(JSON.stringify(e.droppedAdTypes)),wfsrc:this.waterfallSource}}},{key:"_buildLineItemsDataForPOSTData",value:function(){var i=this,e=this.store.get("lineItems")||[];return 0===e.length?[]:e.map(function(e){var t=i.store.get(e)||{};return{li:e,f:t.fails,fr:t.failsRow,c:t.conversions,t:t.tries}})}},{key:"_buildOptionalParamsForPOSTData",value:function(){var e=this.store.get("subUnitType"),t=this.store.get("EP_PLAYER"),i=this.store.get("sessionData"),i={sd:d(i)?i:void 0,en:this.encodeWaterfallResponse,subu:void 0!==e?e:void 0,ls:!this.sentCookiesData&&t?t:void 0,pids:this._buildProvidedIds()};return this.sentCookiesData||(this.sentCookiesData=!0),JSON.parse(JSON.stringify(i))}},{key:"send",value:function(e){this.XHR.send(e)}},{key:"getWfCounter",value:function(){return window._cm_wfCounters[this.dast]}},{key:"increaseWfCounter",value:function(){window._cm_wfCounters[this.dast]++}},{key:"getConsentData",value:function(){return this.consentData}},{key:"getRboxConsentData",value:function(){return this.rboxConsentData}},{key:"_getPanoramaId",value:function(){try{if(window&&window.localStorage&&window.localStorage.getItem)return window.localStorage.getItem("panoramaId")}catch(e){}}},{key:"_loadProvidedIds",value:function(){try{var e,t;return window&&window.localStorage&&window.localStorage.getItem?(e=window.localStorage.getItem("idproviders"),p(t=window.JSON.parse(e))&&null!==t?t:{}):{}}catch(e){return{}}}},{key:"_buildProvidedIds",value:function(){var e=[];if(!p(this.providedIds)||null===this.providedIds)return[];for(var t=0,i=Object.entries(this.providedIds);t<i.length;t++){var n=ae(i[t],2),r=n[0],n=n[1];if(p(n)&&null!==n)try{for(var o=0,s=Object.entries(n);o<s.length;o++){var a=ae(s[o],2),l=a[0],c=a[1];e.push(this._buildProvidedId(r,l,c))}}catch(e){}}return e}},{key:"_buildProvidedId",value:function(e,t,i){return{pr:e,nm:t,id:i}}}])&&ce(e.prototype,t),n&&ce(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n})();function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fe(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(e=>(e=((e,t)=>{if("object"!=S(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0===i)return("string"===t?String:Number)(e);if("object"!=S(i=i.call(e,t||"default")))return i;throw new TypeError("@@toPrimitive must return a primitive value.")})(e,"string"),"symbol"==S(e)?e:e+""))(n.key),n)}}var de=(()=>{function i(e,t){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");this.config=e,this.store=t,this.baseEligibility=new se(this.config,this.store)}return e=i,(t=[{key:"isEligibleForRTBRV1",value:function(){return this._isAlwaysEligibleUnit()||this._isEligibleToPlay()}},{key:"_isAlwaysEligibleUnit",value:function(){var e=this.config.get("detachToSlider.isStartFromSlider")||this.config.get("unitType")===a.SLIDER||this.config.get("unitType")===a.SLIDER_INSTREAM||this.config.get("unitType")===a.WATCH_VIDEO;return this.store.set("distancePixelPredictData.actualPredictionPoint",0),e}},{key:"_isEligibleToPlay",value:function(){return!this.baseEligibility.getIsOutOfView()}}])&&fe(e.prototype,t),n&&fe(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n})();function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function he(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(e=>(e=((e,t)=>{if("object"!=D(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0===i)return("string"===t?String:Number)(e);if("object"!=D(i=i.call(e,t||"default")))return i;throw new TypeError("@@toPrimitive must return a primitive value.")})(e,"string"),"symbol"==D(e)?e:e+""))(n.key),n)}}function pe(e,t,i){t=ye(t);var n=e,t=ge()?Reflect.construct(t,i||[],ye(e).constructor):t.apply(e,i);if(!t||"object"!=D(t)&&"function"!=typeof t){if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(t=n))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function ge(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(ge=function(){return!!e})()}function ye(e){return(ye=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function me(e,t){return(me=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var ve=(e=>{function n(e,t){var i;if(this instanceof n)return(i=pe(this,n)).config=e,i.store=t,i.creatives=new $(e),i.pixels=new v(e),i.eligibilityHandler=new de(i.config,i.store),i._setWfGenerator(),i._init(),i;throw new TypeError("Cannot call a class as a function")}var t,i=n;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");return i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&me(i,e),i=n,(e=[{key:"_init",value:function(){this.waterfallInProgress=!1,this.isFirstRun=!0,this.maxAllowedEmptyWaterfalls=this.store.get("ltmxemptwf"),this.emptyWaterfallsInARow=0,this.waterfallFailsInARow=0,this.demandFillSuccessful=!1,this.onSuccess=this._onSuccess.bind(this),this.onFail=this._onFail.bind(this),this.callWaterfall=this._callWaterfall.bind(this),this.scrollableElement=this.config.get("scrollableElement")?document.querySelector(this.config.get("scrollableElement")):window,this._setIsOutOfViewPort(),this._initDroppableAdTypes(),this._isVeryLightWaterfall()&&this._initDynamicTimeBetweenWfs()}},{key:"_setIsOutOfViewPort",value:function(){f(this.config,"isOutOfViewPort",this._getIsOutOfViewPort())}},{key:"_getIsOutOfViewPort",value:function(){return!!document.hidden||!this.eligibilityHandler.isEligibleForRTBRV1()}},{key:"_reportDemandFirstWf",value:function(){this.config.get("player.settings.unitFetcherWfRes")?f(this.config,"player.settings.unitFetcherDemand",!0):f(this.config,"player.settings.liteUnitDemand",!0)}},{key:"_onSuccess",value:function(e,t,i,n){e?(n=this._parseWfResponse(e,n),this._didReceivedOnlyAdxInFirstWF(n)&&f(this.config,"onlyAdxInQueue",!0),this._didReceivedDemand(n)?(this._onDemandReceived(e,n),this.demandFillSuccessful=!0,this._reportDemandFirstWf()):this._isStandardWaterfall()&&!this._isEmptyWf(n)?this._onDemandReceived(e,n,!0):(this._isEmptyWf(n)?this._increaseEmptyWaterfalls():this._increaseWaterfallFailsInARow(),this._setFailedItemStats(n.tags),this._emitFailedWaterfall()),this.waterfallInProgress=!1):(this._increaseWaterfallFailsInARow(),this._increaseEmptyWaterfalls())}},{key:"_parseWfResponse",value:function(e,t){try{return(t||this.store.get("encwfrs"))&&(e=(e=>{for(var t="",i=0;i<e.length;i++){var n=i%"PlAyER".length,r=e[i].charCodeAt(0).toString(10),n="PlAyER"[n].charCodeAt(0).toString(10);t+=String.fromCharCode(r^n)}return t})((e=>{try{for(var t=e.length,i=[],n=0;n<M.length;n++)i[M.charCodeAt(n)]=n;for(var r,o,s,a=M.charAt(64),l=(a&&-1!==(r=e.indexOf(a))&&(t=r),[]),c=0,u=0;u<t;u++)u%4&&(o=i[e.charCodeAt(u-1)]<<u%4*2,s=i[e.charCodeAt(u)]>>>6-u%4*2,l[c>>>2]|=(o|s)<<24-c%4*8,c++);for(var f=[],d=0;d<c;d++){var h=l[d>>>2]>>>24-d%4*8&255;f.push(String.fromCharCode(h))}return decodeURIComponent(escape(f.join("")))}catch(e){return""}})(e))),JSON.parse(e.replace(/^\(|\)$/g,""))}catch(e){return""}}},{key:"_didReceivedDemand",value:function(e){var t=this._isEmptyWf(e);if(!this.store.get("overrideSessionDataOnEveryWfResponse")&&t||this.store.set("sessionData",e.sd),!t){if(0<e.tags.length&&(this.emptyWaterfallsInARow=0),this.config.get("demo"))return!0;for(var i=0;i<e.tags.length;i++){var n=e.tags[i];if(this._doesItemContainVAST(n)||this._isPremiumAdvType(n))return!0}}return!1}},{key:"_isEmptyWf",value:function(e){return!e||!e.tags||0===e.tags.length}},{key:"_isStandardWaterfall",value:function(){var e=this.config.get("preset.level");return e==o.AGG_LEVELS.LEVELS.STANDARD||e==o.AGG_LEVELS.LEVELS.SAFE_WF_NO_POLITICS_AND_NO_GAMBLING}},{key:"_isVeryLightWaterfall",value:function(){return this.config.get("preset.level")==o.AGG_LEVELS.LEVELS.DIRECT_AND_TREMOR_RTB}},{key:"_doesItemContainVAST",value:function(e){return e.vast}},{key:"_isPremiumAdvType",value:function(e){return e.advType!==o.ADV_TYPES.TAGS}},{key:"_setFailedItemStats",value:function(e){var t=this;(e||[]).forEach(function(e){t.store.incr("failsCount"),t._setItemStats(e)})}},{key:"_setItemStats",value:function(e){var t=this.store.get("lineItems")||[],i=parseInt(e.lineItemId);-1<t.indexOf(e.lineItemId)?this.store.increaseFails(i):(this.store.setNewItemStats(i),t.push(e.lineItemId),this.store.set("lineItems",t))}},{key:"_increaseEmptyWaterfalls",value:function(){this.emptyWaterfallsInARow++}},{key:"_increaseWaterfallFailsInARow",value:function(){this.waterfallFailsInARow++}},{key:"_emitFailedWaterfall",value:function(){this.emit("failedWaterfall")}},{key:"_onDemandReceived",value:function(e,t,i){this.stop(),this.waterfallFailsInARow=0,this.emptyWaterfallsInARow=0,this._setFirstWaterfallResponse(e),this._emitDemandReceived(!i)}},{key:"stop",value:function(){this.stopped=!0,this._isVeryLightWaterfall()?this.waterfallsInterval=clearTimeout(this.waterfallsInterval):this.waterfallsInterval=clearInterval(this.waterfallsInterval)}},{key:"_setFirstWaterfallResponse",value:function(e){f(this.config,"player.settings.ltuntWfRes",e)}},{key:"_emitDemandReceived",value:function(e){this.emit("demandReceived",e)}},{key:"_onFail",value:function(e,t){this._increaseEmptyWaterfalls(),this._increaseWaterfallFailsInARow(),this.waterfallInProgress=!1,this._emitFailedWaterfall()}},{key:"_initDroppableAdTypes",value:function(){var t=this;this.adsToDrop=[],(this.store.get("drpbletps")||[]).forEach(function(e){t.adsToDrop.push(e)})}},{key:"_initDynamicTimeBetweenWfs",value:function(){this.maxTimeBetweenWaterfalls=this.store.get("mxtmbtwfs"),this.minTimeBetweenWaterfalls=this.store.get("mntmbtwfs"),this.defaultTimeBetweenWaterfalls=this.store.get("time_between_waterfall"),this.timeBetweenWfFunc=this.store.get("tmbtwfs"),g(this.timeBetweenWfFunc)||(this.timeBetweenWfFunc=void 0),this.minTimeBetweenWfFunc=this.store.get("mntmbtwfsf"),g(this.minTimeBetweenWfFunc)||(this.minTimeBetweenWfFunc=void 0),this.defaultMinTimeBetweenWf=this.store.get("mintimwf")||5e3}},{key:"handleUnitFetcherDemand",value:function(){return this._onSuccess(this.config.get("player.settings.unitFetcherWfRes"),null,null,!0),!!this.demandFillSuccessful||(f(this.config,"player.settings.unitFetcherWfRes",void 0),!1)}},{key:"run",value:function(){this._hasUnitFetcherWaterfallResponse()&&this.handleUnitFetcherDemand()||(this._hasStaticWaterfall()||this._hasFirstWaterfallResponse()?(this._updateDelayWf(!1),this._emitDemandReceived(!0)):this._initWfGenerator())}},{key:"_hasUnitFetcherWaterfallResponse",value:function(){return this.config.get("player.settings.unitFetcherWfActive")&&this.config.get("player.settings.unitFetcherWfRes")}},{key:"_hasStaticWaterfall",value:function(){return this.config.get("demandConfig")}},{key:"_hasFirstWaterfallResponse",value:function(){return this.config.get("player.settings.firstWfRes")}},{key:"_waitOnDelayWaterfall",value:function(){this._shouldListenToStoriesDisplayChange()?this._waitForStoriesDisplay():this._waitForFirstScroll()}},{key:"_initWfGenerator",value:function(){var e=this;this.wfGenerator=new ue(this.store,this.creatives.get()),this._canRunWaterfall()?h(function(){e._runWaterfalls()},null):this._shouldDelayWaterfall()?this._waitOnDelayWaterfall():this._waitForTabChange()}},{key:"_setWfGenerator",value:function(){window.TRC=window.TRC||{},window.TRC["wf-generator"]=window.TRC["wf-generator"]||{},window.TRC["wf-generator"].instances=window.TRC["wf-generator"].instances||{},window.TRC["wf-generator"].instances[this.store.get("auc_dast")]=ue}},{key:"_canRunWaterfall",value:function(){return!(this.stopped||this._didPassedMaxEmptyWaterfalls()||this._shouldDelayWaterfall()||this._isInIdleMode())}},{key:"_didPassedMaxEmptyWaterfalls",value:function(){return!!this.maxAllowedEmptyWaterfalls&&this.emptyWaterfallsInARow>this.maxAllowedEmptyWaterfalls}},{key:"_shouldDelayWaterfall",value:function(){return this.store.get("dlywf")}},{key:"_shouldListenToStoriesDisplayChange",value:function(){return this.config.get("predictors.storiesDisplayChange.isActive")}},{key:"_isInIdleMode",value:function(){return document.hidden}},{key:"_runWaterfalls",value:function(){this._startWaterfallsTimer(),this._callWaterfall()}},{key:"_startWaterfallsTimer",value:function(){this._isVeryLightWaterfall()?this._startNextWaterfallsTimer():(this.timeBetweenWfs=x(this.config.get("player.settings.mintimwf")),this.waterfallsInterval=setInterval(this.callWaterfall,1e3*this.timeBetweenWfs))}},{key:"_startNextWaterfallsTimer",value:function(){var e=this;this.timeBetweenWfs=x(this._calcTimeBetweenWfs()),0<this.timeBetweenWfs?this.waterfallsInterval=setTimeout(function(){e._startNextWaterfallsTimer(),e.callWaterfall()},1e3*this.timeBetweenWfs):this.stop()}},{key:"_calcTimeBetweenWfs",value:function(){var e=this._getTimeBetweenWfs();return e>this.maxTimeBetweenWaterfalls?-1:Math.max(e,this.minTimeBetweenWaterfalls)}},{key:"_getTimeBetweenWfs",value:function(){if(this.timeBetweenWfFunc)try{return this.timeBetweenWfFunc(0,this.waterfallFailsInARow,this.store,!document.hidden)}catch(e){return this.defaultTimeBetweenWaterfalls}return-1}},{key:"_callWaterfall",value:function(){var e,t;this._canRunWaterfall()&&(this.lastRun=(new Date).getTime(),e=this._getWaterfallUrl(),t=this._getWaterfallPOSTData(),this.isFirstRun=!1,this.waterfallInProgress=!0,this.wfGenerator.send({wfUrl:e,postData:t,onSuccess:this.onSuccess,onFail:this.onFail,timeout:this.store.get("wfTimeout")}),this.wfGenerator.increaseWfCounter(),this.wfGenerator.changeWfBasePath())}},{key:"_getWaterfallUrl",value:function(){return this.wfGenerator.generateUrl({roll:{roll_type:"pre-roll"},pubid:this.config.get("pubId")||this.config.get("preroll.pubId"),tagid:this.config.get("pubTagId")||this.config.get("preroll.pubTagId"),isFirstRun:this.isFirstRun,ioovp:this._getIsOutOfViewPort(),unitWfParams:{}})}},{key:"_getWaterfallPOSTData",value:function(){return JSON.stringify(this.wfGenerator.generatePOSTParams({queueStatus:{items:[],size:0,prevItems:[]},droppedAdTypes:this.adsToDrop}))}},{key:"_waitForFirstScroll",value:function(){this.config.get("predictors.firstScroll.isActive")&&this._isUserAtTopOfThePage()?(this.checkScroll=this._checkScroll.bind(this),this.scrollableElement.addEventListener("scroll",this.checkScroll)):this._onFirstScroll()}},{key:"_updateDelayWf",value:function(e){this.store.set("dlywf",e),f(this.config,"player.settings.dlywf",e)}},{key:"_waitForStoriesDisplay",value:function(){var e=this;this._shouldListenToStoriesDisplayChange()&&window.TRC&&(this.config.get("predictors.storiesDisplayChange.isStartWf")&&window.TRC.listen("categoriesDisplayed",function(){e._updateDelayWf(!1),e._runWaterfalls()}),this.config.get("predictors.storiesDisplayChange.isStopWf"))&&window.TRC.listen("categoriesHidden",function(){e._updateDelayWf(!0)})}},{key:"_isUserAtTopOfThePage",value:function(){return this.scrollableElement!==window?0===this.scrollableElement.scrollTop:0===document.getElementsByTagName(o.SELECTORS.BODY)[0].scrollTop&&0===document.documentElement.scrollTop}},{key:"_checkScroll",value:function(){this._isUserAtTopOfThePage()||this._onFirstScroll()}},{key:"_onFirstScroll",value:function(){this.scrollableElement.removeEventListener("scroll",this.checkScroll),this._updateDelayWf(!1),this._runWaterfalls()}},{key:"_waitForTabChange",value:function(){this.checkTabChange=this._checkTabChange.bind(this),window.addEventListener("visibilitychange",this.checkTabChange)}},{key:"_checkTabChange",value:function(){document.hidden||(window.removeEventListener("visibilitychange",this.checkTabChange),this._runWaterfalls())}},{key:"getFromStore",value:function(e){return this.store.get(e)}},{key:"isWaterfallInProgress",value:function(){return this.waterfallInProgress}},{key:"_didReceivedOnlyAdxInFirstWF",value:function(e){return!this._isEmptyWf(e)&&e.tags.filter(function(e){return(e.vast||e.url)&&e.t===o.ITEM_TYPES.ADX}).length===e.tags.length}}])&&he(i.prototype,e),t&&he(i,t),Object.defineProperty(i,"prototype",{writable:!1}),i})(W.EventEmitter);function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(e=>(e=((e,t)=>{if("object"!=A(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0===i)return("string"===t?String:Number)(e);if("object"!=A(i=i.call(e,t||"default")))return i;throw new TypeError("@@toPrimitive must return a primitive value.")})(e,"string"),"symbol"==A(e)?e:e+""))(n.key),n)}}var be=(()=>{function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.config=e,this._buildSettings(),this._setDroppableTypes()}return e=t,(i=[{key:"_buildSettings",value:function(){this.settings=this._setSettings(),this._appendFunctionsToSettings(),this._setSubUnitType(),this._setReplacementWfUrl();var t,e=Object(s.deepMerge)(this.config.get("player.settings"),this._getPlayerSettings()),e=Object(s.deepMerge)((t={},["frameType","dtagid","dpubid","creativeId"].forEach(function(e){return t[e]=c[e]}),t),e);this.settings=Object(s.deepMerge)(this.settings,e)}},{key:"_setSettings",value:function(){return JSON.parse(r.SETTINGS.replace("{{PLAYER_VERSION}}",(e=(e=this.config).get("player.versions.vplayer"),e=parseInt(e.replace(/^v|\./g,"")),isNaN(e)?1101:e)).replace("{{IS_AMP}}",window.TRC&&window.TRC.isAMP||!1).replace("{{AB_TEST}}",this.config.get("_abTest")).replace("{{AUC_DAST}}",this._getAucDast()).replace("{{PRESET_LEVEL}}",this._getPresetLevel()));var e}},{key:"_appendFunctionsToSettings",value:function(){this.settings.tmbtwfs=function(e,t,i,n){return i.get("time_between_waterfall")},this.settings.mntmbtwfsf=function(e,t,i,n){return i.get("mintimwf")}}},{key:"_setSubUnitType",value:function(){var e=u();void 0!==e&&(e!==o.SUB_UNIT_TYPE.STICKY_BELOW||(()=>{var e,t,i=document.querySelector(".tbl-feed-container");return i&&(e=!0,(t=document.createElement("div")).style.position="fixed",t.style.left="".concat(5,"px"),i.append(t),5!==t.getBoundingClientRect().left&&(e=!1),t.remove(),e)})()?this.settings.subUnitType=e:this.config.stickyCard.isActive=!1)}},{key:"_setReplacementWfUrl",value:function(){var e=this.config.get("player.urls.domainWfBasePath");e&&(e=K(e),this.settings.domain_wf_base_path=e)}},{key:"_getAucDast",value:function(){return this.config.get("cmDast")||""}},{key:"_getPresetLevel",value:function(){return this.config.get("preset.level")||1}},{key:"_getPlayerSettings",value:function(){var e,t={};for(e in this.config)0===e.indexOf("player.settings.")&&(t[e.split(".")[2]]=this.config[e]);return t}},{key:"_setDroppableTypes",value:function(){this.config.get("unitType")===a.FEED_MANAGER&&this._setFeedManagerDroppableTypes()}},{key:"_setFeedManagerDroppableTypes",value:function(){var e=this.config.get("startCard"),t=this.config.get("permanentCard"),e=!(1!==e&&e||1!==t&&t),t=this.config.get("detachToSlider.isStartFromSlider")&&this.config.get("detachToSlider.isDetachToSlider");if(!t&&e){var i,n=(null==(t=TRCImpl)?void 0:t.boxes)||{};for(i in n){var r=n[i]||{},o=r.isFeedCard,s=!1;if((s=r.itemsTypes&&r.itemsTypes["is-organic"]?r.itemsTypes["is-organic"]:s)&&o&&r.boxes.length)return void r.mode}}}},{key:"get",value:function(e){return this.settings[e]}},{key:"getWfData",value:function(){return[]}},{key:"set",value:function(e,t){this.settings[e]=t}},{key:"increaseFails",value:function(e){var t=this.get(e);t?(t.fails++,t.failsRow++,t.tries++,this.set(e,t)):this.setNewItemStats(e)}},{key:"setNewItemStats",value:function(e){this.set(e,{fails:1,failsRow:1,conversions:0,tries:1})}},{key:"incr",value:function(e){this.settings.hasOwnProperty(e)||(this.settings[e]=0),this.settings[e]++}}])&&_e(e.prototype,i),n&&_e(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,i,n})();function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t,i){return(t=Te(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Ee(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Te(n.key),n)}}function Te(e){e=((e,t)=>{if("object"!=I(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0===i)return("string"===t?String:Number)(e);if("object"!=I(i=i.call(e,t||"default")))return i;throw new TypeError("@@toPrimitive must return a primitive value.")})(e,"string");return"symbol"==I(e)?e:e+""}function we(e,t,i){t=De(t);var n=e,t=Se()?Reflect.construct(t,i||[],De(e).constructor):t.apply(e,i);if(!t||"object"!=I(t)&&"function"!=typeof t){if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(t=n))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function Se(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Se=function(){return!!e})()}function De(e){return(De=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ae(e,t){return(Ae=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Ie=(()=>{function i(e){var t;if(this instanceof i)return(t=we(this,i)).config=e,t.store=new be(e),t._bindedEmitLoadUnit=t._emitLoadUnit.bind(t),t._initActions(),t.pixels=new v(t.config),t;throw new TypeError("Cannot call a class as a function")}var e,t=i,n=W.EventEmitter;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&Ae(t,n),t=i,(n=[{key:"_emitLoadUnit",value:function(e){this._onLoadUnit(e),this.emit("loadUnit",e)}},{key:"_onLoadUnit",value:function(e){var t;this._clearWfHandlerListeners(),this._clearNoDemandTimer(),this.wfHandler&&(f(this.config,"player.settings.ltuntwflstrn",this.wfHandler.lastRun),f(this.config,"player.settings.wf_base_path",this.wfHandler.getFromStore("wf_base_path")),0<(t=this.wfHandler.getFromStore("failsCount"))&&f(this.config,"player.settings.failsCount",t),f(this.config,"player.settings.distancePixelPredictData.actualPredictionPoint",this.wfHandler.getFromStore("distancePixelPredictData.actualPredictionPoint"))),e||this._onLoadingWithoutFill()}},{key:"_clearWfHandlerListeners",value:function(){this.wfHandler&&(this.wfHandler.removeListener("demandReceived",this._bindedEmitLoadUnit),this.wfHandler.removeListener("failedWaterfall",this._bindedEmitLoadUnit),this.wfHandler.stop(),this._setWfsData())}},{key:"_setWfsData",value:function(){this._setSessionData(),this._setLineItems()}},{key:"_setSessionData",value:function(){f(this.config,"player.settings.sessionData",this.wfHandler.getFromStore("sessionData"))}},{key:"_setLineItems",value:function(){var t=this,e=this.wfHandler.getFromStore("lineItems")||[];f(this.config,"player.settings.lineItems",e),e.forEach(function(e){return f(t.config,"player.settings.".concat(e),t.wfHandler.getFromStore(e))})}},{key:"_onLoadingWithoutFill",value:function(){this.wfHandler&&(0<this.wfHandler.emptyWaterfallsInARow&&f(this.config,"player.settings.emptyWaterfallsInARow",this.wfHandler.emptyWaterfallsInARow),0<this.wfHandler.waterfallFailsInARow)&&f(this.config,"player.settings.waterfallFailsInARow",this.wfHandler.waterfallFailsInARow)}},{key:"_clearNoDemandTimer",value:function(){var e;this.noDemandTimer&&(this.noDemandTimer=clearTimeout(this.noDemandTimer),d(this.passbackFunc))&&(e=(new Date).getTime()-this.noDemandTimerStartTime,e=(this.secondsToFill-e)/1e3,f(this.config,"secondsToFill",e))}},{key:"_initActions",value:function(){var e=this._handleVeryLightWaterfall.bind(this),t=this._handleStandardWaterfall.bind(this);this.actions=P(P(P(P(P(P(P({},o.AGG_LEVELS.LEVELS.STANDARD,t),o.AGG_LEVELS.LEVELS.SAFE_WF_NO_POLITICS_AND_NO_GAMBLING,t),o.AGG_LEVELS.LEVELS.LIGHT_WATERFALL,this._handleLightWaterfall.bind(this)),o.AGG_LEVELS.LEVELS.VERY_LIGHT_WATERFALL,t),o.AGG_LEVELS.LEVELS.DIRECT_AND_TREMOR_RTB,e),o.AGG_LEVELS.LEVELS.DIRECT_ONLY,e),o.AGG_LEVELS.LEVELS.PASSBACK,this._handlePassback.bind(this))}},{key:"_hasUnitFetcherWaterfallResponse",value:function(){return this.config.get("player.settings.unitFetcherWfActive")&&this.config.get("player.settings.unitFetcherWfRes")}},{key:"_handleStandardWaterfall",value:function(){window.taboolaBridge?(this.wfHandler=new ve(this.config,this.store),this._hasUnitFetcherWaterfallResponse()&&this.wfHandler.handleUnitFetcherDemand(),this._emitLoadUnit()):(this._initWfHandler(),this.wfHandler.once("failedWaterfall",this._bindedEmitLoadUnit))}},{key:"_handleLightWaterfall",value:function(){this._initWfHandler(),this._startNoDemandTimer(this._bindedEmitLoadUnit)}},{key:"_initWfHandler",value:function(){this.wfHandler=new ve(this.config,this.store),this.wfHandler.once("demandReceived",this._bindedEmitLoadUnit),this.wfHandler.run()}},{key:"_startNoDemandTimer",value:function(e){var t=this.config.get("secondsToFill");d(this.passbackFunc)&&(this.noDemandTimerStartTime=(new Date).getTime(),t=this.config.get("secondsToPassback")),this.secondsToFill=1e3*t,this.noDemandTimer=setTimeout(this._onTimerEnds.bind(this,e),this.secondsToFill)}},{key:"_onTimerEnds",value:function(e){this.wfHandler.isWaterfallInProgress()||this.passbackFunc?d(this.passbackFunc)&&g(e)?e():this.wfHandler.once("failedWaterfall",e):this._emitLoadUnit()}},{key:"_handleVeryLightWaterfall",value:function(){this._initWfHandler()}},{key:"_handlePassback",value:function(){this._startNoDemandTimer(this._invokePassback.bind(this)),this._initWfHandler()}},{key:"_invokePassback",value:function(){this._onLoadUnit(),this.pixels.firePixel(this.pixels.PIXEL_TYPES.PASSBACK_FUNCTION_CALLED),this.passbackFunc()}},{key:"load",value:function(){var e=this._hasPassback()?o.AGG_LEVELS.LEVELS.PASSBACK:this.config.get("preset.level")||1;this.actions[e]()}},{key:"_hasPassback",value:function(){return this.passbackFunc=this.config.get("onPassback")||this._getPassbackHandlerFromTRC(),void 0!==this.passbackFunc}},{key:"_getPassbackHandlerFromTRC",value:function(){if(window.TRC&&window.TRC._taboolaClone)for(var e=0;e<window.TRC._taboolaClone.length;e++)if("video.passback"===window.TRC._taboolaClone[e].listenTo)return window.TRC._taboolaClone[e].handler}},{key:"terminate",value:function(){this._clearWfHandlerListeners()}}])&&Ee(t.prototype,n),e&&Ee(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t})(),t={atr:{},platform:{Desktop:{atr:{pubId:208401,pubTagId:1047981,preroll:{pubId:208401,pubTagId:1047981},midroll:{pubId:208401,pubTagId:1047981},postroll:{pubId:208401,pubTagId:1047981}}},Mobile:{atr:{secondsBW:20,pubId:208401,pubTagId:1047981,preroll:{pubId:208401,pubTagId:1047981},midroll:{pubId:208401,pubTagId:1047981},postroll:{pubId:208401,pubTagId:1047981}}}}},e={atr:{},platform:{Desktop:{atr:{secondsBW:20}},Mobile:{atr:{secondsBW:20}}}},C={atr:{},platform:{Desktop:{atr:{pubId:165757,pubTagId:946347,preroll:{pubId:165757,pubTagId:946347},midroll:{pubId:165757,pubTagId:946347},postroll:{pubId:165757,pubTagId:946347}}},Mobile:{atr:{pubId:165757,pubTagId:946347,preroll:{pubId:165757,pubTagId:946347},midroll:{pubId:165757,pubTagId:946347},postroll:{pubId:165757,pubTagId:946347}}}}},F={demo:{strength:101,atr:{cookieMatchActive:!1},1:{atr:{originId:15,"preroll.pubId":133128,"preroll.pubTagId":779408,"midroll.pubId":133128,"midroll.pubTagId":779408,"postroll.pubId":133128,"postroll.pubTagId":779408,pubId:133128,pubTagId:779408,player:{settings:{mprdct:0,cmbopps:!1,encwfrs:!1,mntmbtwfs:999,mintimwf:999e3,mxtmbtwfs:999,time_between_waterfall:999,frrst1aftrrst93:!1,rmvrvlwntwrk:!1}},onOutOfView:"pause",isPWOV:!1,noaop:1}},2:{atr:{isDebug:!0,originId:15,"preroll.pubId":133128,"preroll.pubTagId":779408,"midroll.pubId":133128,"midroll.pubTagId":779408,"postroll.pubId":133128,"postroll.pubTagId":779408,pubId:133128,pubTagId:779408,player:{settings:{mprdct:0,cmbopps:!1,encwfrs:!1}},onOutOfView:"pause"}},3:{atr:{isDebug:!0,originId:15,"preroll.pubId":133128,"preroll.pubTagId":1184655,"midroll.pubId":133128,"midroll.pubTagId":1184655,"postroll.pubId":133128,"postroll.pubTagId":1184655,pubId:133128,pubTagId:1184655,player:{settings:{mprdct:0,cmbopps:!1,encwfrs:!1}},isPWOV:!1}},4:{atr:{isDebug:!0,originId:15,"preroll.pubId":133128,"preroll.pubTagId":1046821,"midroll.pubId":133128,"midroll.pubTagId":1046821,"postroll.pubId":133128,"postroll.pubTagId":1046821,pubId:133128,pubTagId:1046821,player:{settings:{mprdct:0,cmbopps:!1,encwfrs:!1}},onOutOfView:"pause"}},5:{atr:{originId:15,"preroll.pubId":133128,"preroll.pubTagId":1633025,"midroll.pubId":133128,"midroll.pubTagId":1633025,"postroll.pubId":133128,"postroll.pubTagId":1633025,pubId:133128,pubTagId:1633025,player:{settings:{mprdct:0,cmbopps:!1,encwfrs:!1}},onOutOfView:"pause",isPWOV:!1}}},level:{strength:1,atr:{},101:{atr:{},units:{FEED_MANAGER:C,INLINE_INSTREAM_OLD:C,INLINE_INSTREAM_VFORCE:C,SLIDER_INSTREAM:C,SLIDER_OUTSTREAM:C,WIDGET_ITEM:C,RECO_REEL_WIDGET:C}},2:{atr:{secondsToClose:120},units:{FEED_MANAGER:e,INLINE_INSTREAM_OLD:e,INLINE_INSTREAM_VFORCE:e,SLIDER_INSTREAM:e,SLIDER_OUTSTREAM:e,WIDGET_ITEM:e,RECO_REEL_WIDGET:e}},3:{atr:{secondsToClose:120},units:{FEED_MANAGER:t,INLINE_INSTREAM_OLD:t,INLINE_INSTREAM_VFORCE:t,SLIDER_INSTREAM:t,SLIDER_OUTSTREAM:t,WIDGET_ITEM:t,RECO_REEL_WIDGET:t}},4:{atr:{pubId:383725,pubTagId:2077655,preroll:{pubId:383725,pubTagId:2077655},midroll:{pubId:383725,pubTagId:2077655},postroll:{pubId:383725,pubTagId:2077655}}}},isDebug:{strength:102,1:{atr:{player:{settings:{encwfrs:!1}}}}}};function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pe(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(e=>(e=((e,t)=>{if("object"!=k(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0===i)return("string"===t?String:Number)(e);if("object"!=k(i=i.call(e,t||"default")))return i;throw new TypeError("@@toPrimitive must return a primitive value.")})(e,"string"),"symbol"==k(e)?e:e+""))(n.key),n)}}var Ce=(()=>{function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function")}return t=e,(i=[{key:"getPreset",value:function(e){var t,i,n=e.key,r=e.value,o=e.unitType,e=e.platform;if(F[n]&&F[n][r])return i=(t=F[n]).strength||1,n=F[n].atr||{},n=Object(s.deepMerge)(n,t[r].atr),{presetData:n=t[r]&&t[r].units?this._getFromUnits(n,t[r].units,o,e)||n:n,strength:i}}},{key:"_getFromUnits",value:function(e,t,i,n){var r;if(t[i])return r=t[i].atr||{},Object(s.deepMerge)(e,r),t[i].platform&&this._getByPlatform(e,t[i].platform,n)||e}},{key:"_getByPlatform",value:function(e,t,i){if(t[i])return t=t[i].atr||{},Object(s.deepMerge)(e,t)}}])&&Pe(t.prototype,i),n&&Pe(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,i,n})();function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fe(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ke(n.key),n)}}function ke(e){e=((e,t)=>{if("object"!=O(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0===i)return("string"===t?String:Number)(e);if("object"!=O(i=i.call(e,t||"default")))return i;throw new TypeError("@@toPrimitive must return a primitive value.")})(e,"string");return"symbol"==O(e)?e:e+""}var Oe=(()=>{function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.presets=[],this.config=e,this._setPresetLevels()}return e=t,(i=[{key:"_setPresetLevels",value:function(){this._setDemoPreset(),this._setAggLevelPreset(),this._setIsDebugPreset()}},{key:"_setDemoPreset",value:function(){var e=this.config.get("demo");e&&this._pushPreset("demo",e)}},{key:"_pushPreset",value:function(e,t){this.presets.push({key:e,value:t,unitType:this.config.get("unitType"),platform:this.config.get("isMobile")?"Mobile":"Desktop"})}},{key:"_setAggLevelPreset",value:function(){var e=this.config.get("preset.level");e&&this._pushPreset("level",e)}},{key:"_setIsDebugPreset",value:function(){this.config.get("isDebug")&&this._pushPreset("isDebug",1)}},{key:"getPresets",value:function(){var e=this._getPresetsDataByStrength();this._applyArrayOfPresets(e.weaker),this._handleSettingsByCondition(),this._applySettings(this.fullfilledSetByCondition),this._applyArrayOfPresets(e.stronger)}},{key:"_getPresetsDataByStrength",value:function(){var t=this,i=(this.presetLevelHandler=new Ce,{weaker:[],stronger:[]});return this.presets.forEach(function(e){e=t.presetLevelHandler.getPreset(e);e&&(100<e.strength?i.stronger:i.weaker).push(e.presetData)}),i}},{key:"_applyArrayOfPresets",value:function(e){var t=this;e.forEach(function(e){return t._applySettings(e)})}},{key:"_handleSettingsByCondition",value:function(){var i=this;this.fullfilledSetByCondition={},(this.config.get("settingsByConditions")||[]).forEach(function(e){if(e.conditions&&e.settings&&0<e.conditions.length&&H(e.conditions))for(var t in e.settings)-1<t.indexOf("preset")?i._handlePresetLevelFromCondition(t,e.settings[t]):-1<t.indexOf("abTest")?i._pushAbTest(t,e.settings[t]):i.fullfilledSetByCondition[t]=e.settings[t]})}},{key:"_handlePresetLevelFromCondition",value:function(e,t){f(this.config,e,t);e=this.presetLevelHandler.getPreset({key:e,level:t,unitType:this.config.get("unitType"),platform:this.config.get("isMobile")?"Mobile":"Desktop"});e&&(100<e?results.stronger.push(e.presetData):this._applyArrayOfPresets([e.presetData]))}},{key:"_pushAbTest",value:function(e,t){var i,n=this.config.get("pushedArr")||[];n.push((i={},t=t,(e=ke(e=e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i)),f(this.config,"pushedArr",n)}},{key:"_applySettings",value:function(e){for(var t in e)f(this.config,t,e[t])}}])&&Fe(e.prototype,i),n&&Fe(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,i,n})();function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Re(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(e=>(e=((e,t)=>{if("object"!=R(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0===i)return("string"===t?String:Number)(e);if("object"!=R(i=i.call(e,t||"default")))return i;throw new TypeError("@@toPrimitive must return a primitive value.")})(e,"string"),"symbol"==R(e)?e:e+""))(n.key),n)}}var Le=(()=>{function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.config=e,this._init()}return e=t,(i=[{key:"_init",value:function(){this.syncUrl=this.config.get("sync"),this.cookieSyncParams={isActive:this.config.get("cookieMatchActive")}}},{key:"_isSyncActive",value:function(e,t){return y(e)&&0<e.trim().length&&t.isActive&&!this.stopped}},{key:"sync",value:function(){var e,t=this;this._isSyncActive(this.syncUrl,this.cookieSyncParams)&&((e=document.createElement("iframe")).style.display="none",e.src=this.syncUrl,e.onerror=function(){t.stop()},document.body.appendChild(e))}},{key:"stop",value:function(){this.stopped=!0}},{key:"getCookieSyncParams",value:function(){return this.cookieSyncParams}}])&&Re(e.prototype,i),n&&Re(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,i,n})();function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Be(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(e=>(e=((e,t)=>{if("object"!=L(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0===i)return("string"===t?String:Number)(e);if("object"!=L(i=i.call(e,t||"default")))return i;throw new TypeError("@@toPrimitive must return a primitive value.")})(e,"string"),"symbol"==L(e)?e:e+""))(n.key),n)}}var Ue=(()=>{function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.config=e,this.id=this.config.redId,this.cmTagMainUrl="infra/cmTag{{MAIN_FILE}}.js",this._events=[],this._settings={},this._init()}return e=t,(i=[{key:"_init",value:function(){Object(s.objectEntriesPolyfill)(),this._getWindow(),this.win&&this.win.document&&(this._setConfig(),this._setCMTag(),this._setIframeData())}},{key:"_getWindow",value:function(){this.config.isStayInIframe?this.win=window:this._getTopWindow()}},{key:"_getTopWindow",value:function(){this.config.placementLevel=0;try{for(this.win=window;this.win.self!==this.win.top;)this.win=this.win.top,this.config.placementLevel++}catch(e){}}},{key:"_setConfig",value:function(){this._appendCMTagConfig(),this._initUrlCmParams(),this._appendReferrer(),this._appendPlacementElement(),this._appendGA()}},{key:"_appendCMTagConfig",value:function(){this.win.cmTagConfig&&this.win.cmTagConfig.abTest&&(this.config.pushedArr=this.config.pushedArr||[],this.config.pushedArr.push({abTest:this.win.cmTagConfig.abTest}),delete this.win.cmTagConfig.abTest),this._appendObject(this.win.cmTagConfig)}},{key:"_appendObject",value:function(e){p(e)&&(this.config=Object(s.deepMerge)(this.config,e))}},{key:"_initUrlCmParams",value:function(){var e;this.urlCMParams=this._getUrlCmParamsFromUrl(this.win.location.href),window.TRC&&window.TRC.isAMP&&(e=this._getUrlCmParamsFromUrl(this.win.context.location.href),this.urlCMParams=Object(s.deepMerge)(this.urlCMParams,e))}},{key:"_getUrlCmParamsFromUrl",value:function(e){var t={};return e.slice(e.indexOf("?")+1).split("&").filter(function(e){return 0===e.indexOf("cm_")}).forEach(function(e){e=e.slice(3).split("=");t[e[0]]=e[1]}),t}},{key:"_appendReferrer",value:function(){this.win.document.referrer&&this._appendObject({referrerUrl:encodeURIComponent(this.win.document.referrer)})}},{key:"_appendPlacementElement",value:function(){this.config.placementElement=0<this.config.placementLevel?this.win.frameElement:document.getElementById("_cm_videoUnit_placeHolder".concat(this.config.redId))}},{key:"_appendGA",value:function(){this.config.isGA=Math.floor(Math.random()*Number(this.config.gaRatio))+1===1}},{key:"_setCMTag",value:function(){this.win.cmTag=this.win.cmTag||{},this.win.cmTag.config=this.config}},{key:"_setIframeData",value:function(){var e={inIframe:this._inIframe(),iframe:this._getIframe()};e.inIframe&&(e.isFriendlyIframe=this._isFriendlyIframe()),e.isFriendlyIframe&&(e.inDFP=this._inDFP(e.iframe)),e.inDFP&&(e.dfpData=this._getDFPData(e.iframe)),this.config.iframeData=e}},{key:"_inIframe",value:function(){return self!==top}},{key:"_getIframe",value:function(){try{return window.frameElement||document.frameElement}catch(e){}}},{key:"_isFriendlyIframe",value:function(){try{return top.document.getElementsByName("iframe"),!0}catch(e){return!1}}},{key:"_inDFP",value:function(t){if(t)return[/^google/].some(function(e){return e.test(t.id)})}},{key:"_getDFPData",value:function(e){if(e)return(e={id:e.getAttribute("id"),width:+e.getAttribute("width"),height:+e.getAttribute("height")})["1x1"]=1==e.width&&1==e.height,e}},{key:"_load",value:function(e){this.terminate||(this._stopSync(),this._setUnitPixels(e),this._loadUnit())}},{key:"_stopSync",value:function(){var e;this.cookieMatch&&(this.cookieMatch.stop(),e=this.cookieMatch.getCookieSyncParams(),f(this.config,"predictors.time.cookieSync",e))}},{key:"_setUnitPixels",value:function(e){this._setShouldFireUnitLoadPixels(),this._setUnitLoadedPixel(),this._setUnitLoadedWithFillPixel(e)}},{key:"_setShouldFireUnitLoadPixels",value:function(){var e,t,i=this.config.get("fireLoadUnitPixelsFactor")||0;this.shouldFireUnitLoadPixels=(e=0,t=99,parseInt(Math.random()*(t-e)+e)<i)}},{key:"_setUnitLoadedPixel",value:function(){this.shouldFireUnitLoadPixels?(-1===this.config.get("_abTest").indexOf("t120")&&(this._config.pushedArr=this._config.pushedArr||[],this._config.pushedArr.push({abTest:"t120"})),f(this._config,"".concat(this.pixels.PIXEL_TYPES.UNIT_LOADED,".isFire"),!0)):f(this._config,"".concat(this.pixels.PIXEL_TYPES.UNIT_LOADED,".isFire"),!1)}},{key:"_setUnitLoadedWithFillPixel",value:function(e){var t="".concat(this.pixels.PIXEL_TYPES.UNIT_LOADED_WITH_FILL,".isFire");e&&!1!==this.config.get(t)&&f(this._config,t,!0)}},{key:"_loadUnit",value:function(){this.terminate||this._isNextUpSetupFailed()||(this._setUnitUrl(),this._setUnitMainFile(),this._loadUnitJSFile())}},{key:"_setUnitUrl",value:function(){this.config.urlPrefix&&(this.config.urlPrefix=decodeURIComponent(this.config.urlPrefix)),this.unitUrl=this.config.urlPrefix||"".concat(this.config.unitsBaseUrl).concat(this.config.version,"/")}},{key:"_isNextUpSetupFailed",value:function(){var e=this.config.get("nextUp.selector");return this.config.get("nextUp.isActive")&&e&&!document.querySelector(e)}},{key:"_setUnitMainFile",value:function(){this.cmTagMainUrl=this.cmTagMainUrl.replace("{{MAIN_FILE}}",this.config.unitType)}},{key:"_getResourceUrl",value:function(e){e="".concat(this.unitUrl).concat(e);return e=this.config.isForceBrotli?function(e,t,i){var i=2<arguments.length&&void 0!==i?i:"",n=-1<e.indexOf("?")?"&":"?";return"".concat(e).concat(n).concat(t,"=").concat(i)}(e,"tbl-br","force"):e}},{key:"_loadUnitJSFile",value:function(){var e=document.createElement("script");e.setAttribute("type","text/javascript"),e.onload=this._onLoad.bind(this)||function(){},e.setAttribute("crossorigin","anonymous"),e.setAttribute("src",this._getResourceUrl(this.cmTagMainUrl)),this.win.document.getElementsByTagName("head")[0].appendChild(e)}},{key:"_onLoad",value:function(){var e=this;this.terminate||(this._config.player&&this.config.player&&(this._config.player=Object(s.deepMerge)(this._config.player,this.config.player)),this.config.get("unitType")===a.RECO_REEL_WIDGET&&this.config.get("midrollRecoReel")&&delete this._config.preroll,this._config.onlyAdxInQueue=this.config.get("onlyAdxInQueue")||!1,this._config.isOutOfViewPort=this.config.get("isOutOfViewPort"),this.cmTagMainStarted=!0,h(function(){e.win.startCMTagMain(e._config,e)}))}},{key:"on",value:function(e,t){this._events.push({name:e,cb:t})}},{key:"set",value:function(e,t){e&&y(e)&&t&&(this._settings[e]=t)}},{key:"start",value:function(){var e=this;setTimeout(function(){e.config.isLoadUnitOnWindowLoaded?e._startOnDomComplete():e._start()},250)}},{key:"_startOnDomComplete",value:function(){function e(){"complete"===document.readyState&&(document.removeEventListener("readystatechange",e),setTimeout(t._start.bind(t),0))}var t=this;document.addEventListener("readystatechange",e),e()}},{key:"_start",value:function(){var e=this;this._initUnit(),h(function(){e._checkDisabledAutoPlay(),h(function(){G(e.config.isWaitForStartEvent)?e._handleWaitForStartEvent():e._startUnit()},null)},null)}},{key:"_initUnit",value:function(){var e=this;this._enforceFitToSize(),this._setConfigObj(),this._appendCMUrlParams(),this._setFrameType(),this._setPresets(),this._appendCMUrlParams(),h(function(){e._createModelForUnit(),e._setAbTest(),e._initPixels(),e.pixels._firePageViewPixel()},null)}},{key:"_startUnit",value:function(){this._setCookieSync(),this._initUnitLoader()}},{key:"_checkDisabledAutoPlay",value:function(){var e,t,i=this;this.config.get("validateAutoplayOniOS.isActive")&&this.config.get("wurfl.os.name")===o.BROWSERS.IOS&&(t=this.config.get("player.urls.blankLocation").replace(/{{(.+?)}}/g,function(e,t){return i.config.get(t)}),(e=document.createElement("video")).src=t,e.autoplay=!0,e.loop=!0,e.muted=!0,e.volume=0,e.setAttribute("webkit-playsinline",""),e.setAttribute("playsinline",""),e.setAttribute("autoplay",""),e.setAttribute("autoPlay",""),e.style.display="none",e.style.willChange="transform",document.body.append(e),void 0!==(t=e.play()))&&t.then(function(){}).catch(function(){i._onVideoPlayError()})}},{key:"_onVideoPlayError",value:function(){this.config.player.settings.iosAutoPlayDisabled=!0,document.dispatchEvent(new Event("ltIosAutoDisable")),this.pixels.firePixel(this.pixels.PIXEL_TYPES.DISABLED_AUTO_PLAY)}},{key:"_enforceFitToSize",value:function(){this.terminateCb=this._terminate.bind(this),this.config.isFitToSize&&(window.addEventListener("resize",this.terminateCb),window.addEventListener("orientationchange",this.terminateCb))}},{key:"_terminate",value:function(){var e=this;window.removeEventListener("resize",this.terminateCb),window.removeEventListener("orientationchange",this.terminateCb),this.cmTagMainStarted||h(function(){e.terminate=!0,e._stopUnitLoader(),e._stopSync()},null)}},{key:"_stopUnitLoader",value:function(){this.unitLoader&&this.unitLoader.terminate()}},{key:"_setConfigObj",value:function(){var e,t,i={};for(e in this.config)f(i,e,this.config[e]);this.config=i,this._appendFPPSettings(),t=this.config,(c=t).get=q}},{key:"_appendFPPSettings",value:function(){for(var e in this._appendAdvancedSettings(this._settings.additionalVideoConfiguration),this._appendAdvancedSettings(this._settings.advancedVideoConfiguration),this._settings)f(this.config,e,this._settings[e])}},{key:"_appendAdvancedSettings",value:function(e){if(e&&p(e))for(var t in e)this._settings[t]=e[t]}},{key:"_appendCMUrlParams",value:function(){for(var e in this.urlCMParams)f(this.config,e,this.urlCMParams[e])}},{key:"_initPixels",value:function(){this.pixels=new v(this.config),this._fireStartWithABTPixel()}},{key:"_fireStartWithABTPixel",value:function(){window.cmTag.customDataForTest=window.cmTag.customDataForTest||{},window.cmTag.customDataForTest.startWithABT=!1,this.config.get("_abTest")&&(window.cmTag.customDataForTest.startWithABT=!0,this.pixels.firePixel(this.pixels.PIXEL_TYPES.START_WITH_ABT,{mntl:this.config.get("preset.level")}),f(this._config,"".concat(this.pixels.PIXEL_TYPES.START_WITH_ABT,".isFire"),!1))}},{key:"_createModelForUnit",value:function(){this._config=Object(s.deepMerge)({},this.config),this._config.get=void 0}},{key:"_setAbTest",value:function(){var e,t;e=c.get("unitType"),-1<[a.FEED_MANAGER,a.INLINE_FEED,a.WIDGET_ITEM,a.MID_ARTICLE_SLIDER].indexOf(e)&&(e=u(),c._appendedAbTests=[{abTest:"ufm".concat(d(e)?o.UFM_AB_TEST_GROUPS[e]:"")}]),f(this.config,"_abTest",(e=this.config.get("pushedArr")||[],t=this.config.get("_appendedAbTests")||[],e.concat(t).map(function(e){if(e.hasOwnProperty("abTest"))return e.abTest}).filter(function(e){return void 0!==e}).sort(function(e,t){e=e.toUpperCase(),t=t.toUpperCase();return t<e?1:e<t?-1:0}).join("!")))}},{key:"_setFrameType",value:function(){var e;f(this.config,"frameType",d(window.taboolaMobile)?o.FRAME_TYPES.IN_APP:window.TRC&&window.TRC.isAMP?o.FRAME_TYPES.AMP:(e=c.get("iframeData")).inIframe?e.isFriendlyIframe?o.FRAME_TYPES.FRIENDLY_IFRAME:o.FRAME_TYPES.NON_FRIENDLY_IFRAME:o.FRAME_TYPES.PLAIN_PAGE)}},{key:"_setPresets",value:function(){new Oe(this.config).getPresets()}},{key:"_setCookieSync",value:function(){this._canDoCookieMatch()&&(this.cookieMatch=new Le(this.config),this.cookieMatch.sync())}},{key:"_canDoCookieMatch",value:function(){return this.config.get("cookieMatchActive")}},{key:"_initUnitLoader",value:function(){var e=this;this.unitLoader=new Ie(this.config),this.unitLoader.once("loadUnit",this._load.bind(this)),h(function(){e.unitLoader.load()},null)}},{key:"_handleWaitForStartEvent",value:function(){this._createStartEventCallback()}},{key:"_createStartEventCallback",value:function(){window.TRC=window.TRC||{},window.TRC.videoFunctions={},window.TRC.videoFunctions.startEvent=this._startEventCallback.bind(this)}},{key:"_startEventCallback",value:function(){window.TRC.videoFunctions.startEvent=function(){},this._config.isWaitForStartEvent=!1,this._startUnit()}}])&&Be(e.prototype,i),n&&Be(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,i,n})();function B(e){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function We(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Me(n.key),n)}}function Me(e){e=((e,t)=>{if("object"!=B(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0===i)return("string"===t?String:Number)(e);if("object"!=B(i=i.call(e,t||"default")))return i;throw new TypeError("@@toPrimitive must return a primitive value.")})(e,"string");return"symbol"==B(e)?e:e+""}var Ne=(()=>{function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.config=e,window.TRC=window.TRC||{},this._initCMTag()}return e=t,(i=[{key:"_initCMTag",value:function(){window.cmTag=window.cmTag||{},window.cmTag.set=this._set.bind(this),window.cmTag.push=this._push.bind(this),window.cmTag.setMacros=this._setMacros.bind(this),window.cmTag.setByCondition=this._setByCondition.bind(this),window.cmTag.DeferTask=window.cmTag.DeferTask||h}},{key:"_set",value:function(){var e,t;arguments&&(e=arguments[0],t=arguments[1],y(e)&&d(t)?this._setKeyVal(e,t):this._appendObject(e))}},{key:"_appendObject",value:function(e){p(e)&&(this.config=Object(s.deepMerge)(this.config,e))}},{key:"_setKeyVal",value:function(e,t){this.config[e]=t}},{key:"_push",value:function(e,t){var i;e&&t&&(this.config.pushedArr=this.config.pushedArr||[],this.config.pushedArr.push((i={},t=t,(e=Me(e=e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i)))}},{key:"_setMacros",value:function(e){this._appendObject(e);e=this._createUnit();return e.start(),this._exposeUnitConfig(e),e}},{key:"_exposeUnitConfig",value:function(e){var t,i;null!=(t=_taboola)&&null!=(i=t.push)&&i.call(t,{videoUnit:{dast:this.config.dast,unit:{set:e.set.bind(e),on:e.on.bind(e)}}})}},{key:"_createUnit",value:function(){return new Ue(this.config)}},{key:"_setByCondition",value:function(e){e&&this.config.settingsByConditions.push(e)}}])&&We(e.prototype,i),n&&We(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,i,n})()},35:function(e,t,i){i.r(t);var t=i(18),r=i.n(t),o=i(2);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(e=>(e=((e,t)=>{if("object"!=s(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0===i)return("string"===t?String:Number)(e);if("object"!=s(i=i.call(e,t||"default")))return i;throw new TypeError("@@toPrimitive must return a primitive value.")})(e,"string"),"symbol"==s(e)?e:e+""))(n.key),n)}}new((()=>{function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this._createCMTagFunctionality()}return t=e,(i=[{key:"_createCMTagFunctionality",value:function(){this.cmTag=new o.a(r()())}}])&&a(t.prototype,i),n&&a(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,i,n})())}});}catch(ex){}